! function(a, b) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = a.document ? b(a, !0) : function(a) {
        if (!a.document) throw new Error("jQuery requires a window with a document");
        return b(a)
    } : b(a)
}("undefined" != typeof window ? window : this, function(a, b) {
    function c(a) {
        var b = "length" in a && a.length,
            c = _.type(a);
        return "function" === c || _.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === c || 0 === b || "number" == typeof b && b > 0 && b - 1 in a
    }

    function d(a, b, c) {
        if (_.isFunction(b)) return _.grep(a, function(a, d) {
            return !!b.call(a, d, a) !== c
        });
        if (b.nodeType) return _.grep(a, function(a) {
            return a === b !== c
        });
        if ("string" == typeof b) {
            if (ha.test(b)) return _.filter(b, a, c);
            b = _.filter(b, a)
        }
        return _.grep(a, function(a) {
            return U.call(b, a) >= 0 !== c
        })
    }

    function e(a, b) {
        for (;
            (a = a[b]) && 1 !== a.nodeType;);
        return a
    }

    function f(a) {
        var b = oa[a] = {};
        return _.each(a.match(na) || [], function(a, c) {
            b[c] = !0
        }), b
    }

    function g() {
        Z.removeEventListener("DOMContentLoaded", g, !1), a.removeEventListener("load", g, !1), _.ready()
    }

    function h() {
        Object.defineProperty(this.cache = {}, 0, {
            get: function() {
                return {}
            }
        }), this.expando = _.expando + h.uid++
    }

    function i(a, b, c) {
        var d;
        if (void 0 === c && 1 === a.nodeType)
            if (d = "data-" + b.replace(ua, "-$1").toLowerCase(), c = a.getAttribute(d), "string" == typeof c) {
                try {
                    c = "true" === c ? !0 : "false" === c ? !1 : "null" === c ? null : +c + "" === c ? +c : ta.test(c) ? _.parseJSON(c) : c
                } catch (e) {}
                sa.set(a, b, c)
            } else c = void 0;
        return c
    }

    function j() {
        return !0
    }

    function k() {
        return !1
    }

    function l() {
        try {
            return Z.activeElement
        } catch (a) {}
    }

    function m(a, b) {
        return _.nodeName(a, "table") && _.nodeName(11 !== b.nodeType ? b : b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a
    }

    function n(a) {
        return a.type = (null !== a.getAttribute("type")) + "/" + a.type, a
    }

    function o(a) {
        var b = Ka.exec(a.type);
        return b ? a.type = b[1] : a.removeAttribute("type"), a
    }

    function p(a, b) {
        for (var c = 0, d = a.length; d > c; c++) ra.set(a[c], "globalEval", !b || ra.get(b[c], "globalEval"))
    }

    function q(a, b) {
        var c, d, e, f, g, h, i, j;
        if (1 === b.nodeType) {
            if (ra.hasData(a) && (f = ra.access(a), g = ra.set(b, f), j = f.events)) {
                delete g.handle, g.events = {};
                for (e in j)
                    for (c = 0, d = j[e].length; d > c; c++) _.event.add(b, e, j[e][c])
            }
            sa.hasData(a) && (h = sa.access(a), i = _.extend({}, h), sa.set(b, i))
        }
    }

    function r(a, b) {
        var c = a.getElementsByTagName ? a.getElementsByTagName(b || "*") : a.querySelectorAll ? a.querySelectorAll(b || "*") : [];
        return void 0 === b || b && _.nodeName(a, b) ? _.merge([a], c) : c
    }

    function s(a, b) {
        var c = b.nodeName.toLowerCase();
        "input" === c && ya.test(a.type) ? b.checked = a.checked : ("input" === c || "textarea" === c) && (b.defaultValue = a.defaultValue)
    }

    function t(b, c) {
        var d, e = _(c.createElement(b)).appendTo(c.body),
            f = a.getDefaultComputedStyle && (d = a.getDefaultComputedStyle(e[0])) ? d.display : _.css(e[0], "display");
        return e.detach(), f
    }

    function u(a) {
        var b = Z,
            c = Oa[a];
        return c || (c = t(a, b), "none" !== c && c || (Na = (Na || _("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement), b = Na[0].contentDocument, b.write(), b.close(), c = t(a, b), Na.detach()), Oa[a] = c), c
    }

    function v(a, b, c) {
        var d, e, f, g, h = a.style;
        return c = c || Ra(a), c && (g = c.getPropertyValue(b) || c[b]), c && ("" !== g || _.contains(a.ownerDocument, a) || (g = _.style(a, b)), Qa.test(g) && Pa.test(b) && (d = h.width, e = h.minWidth, f = h.maxWidth, h.minWidth = h.maxWidth = h.width = g, g = c.width, h.width = d, h.minWidth = e, h.maxWidth = f)), void 0 !== g ? g + "" : g
    }

    function w(a, b) {
        return {
            get: function() {
                return a() ? void delete this.get : (this.get = b).apply(this, arguments)
            }
        }
    }

    function x(a, b) {
        if (b in a) return b;
        for (var c = b[0].toUpperCase() + b.slice(1), d = b, e = Xa.length; e--;)
            if (b = Xa[e] + c, b in a) return b;
        return d
    }

    function y(a, b, c) {
        var d = Ta.exec(b);
        return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b
    }

    function z(a, b, c, d, e) {
        for (var f = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0, g = 0; 4 > f; f += 2) "margin" === c && (g += _.css(a, c + wa[f], !0, e)), d ? ("content" === c && (g -= _.css(a, "padding" + wa[f], !0, e)), "margin" !== c && (g -= _.css(a, "border" + wa[f] + "Width", !0, e))) : (g += _.css(a, "padding" + wa[f], !0, e), "padding" !== c && (g += _.css(a, "border" + wa[f] + "Width", !0, e)));
        return g
    }

    function A(a, b, c) {
        var d = !0,
            e = "width" === b ? a.offsetWidth : a.offsetHeight,
            f = Ra(a),
            g = "border-box" === _.css(a, "boxSizing", !1, f);
        if (0 >= e || null == e) {
            if (e = v(a, b, f), (0 > e || null == e) && (e = a.style[b]), Qa.test(e)) return e;
            d = g && (Y.boxSizingReliable() || e === a.style[b]), e = parseFloat(e) || 0
        }
        return e + z(a, b, c || (g ? "border" : "content"), d, f) + "px"
    }

    function B(a, b) {
        for (var c, d, e, f = [], g = 0, h = a.length; h > g; g++) d = a[g], d.style && (f[g] = ra.get(d, "olddisplay"), c = d.style.display, b ? (f[g] || "none" !== c || (d.style.display = ""), "" === d.style.display && xa(d) && (f[g] = ra.access(d, "olddisplay", u(d.nodeName)))) : (e = xa(d), "none" === c && e || ra.set(d, "olddisplay", e ? c : _.css(d, "display"))));
        for (g = 0; h > g; g++) d = a[g], d.style && (b && "none" !== d.style.display && "" !== d.style.display || (d.style.display = b ? f[g] || "" : "none"));
        return a
    }

    function C(a, b, c, d, e) {
        return new C.prototype.init(a, b, c, d, e)
    }

    function D() {
        return setTimeout(function() {
            Ya = void 0
        }), Ya = _.now()
    }

    function E(a, b) {
        var c, d = 0,
            e = {
                height: a
            };
        for (b = b ? 1 : 0; 4 > d; d += 2 - b) c = wa[d], e["margin" + c] = e["padding" + c] = a;
        return b && (e.opacity = e.width = a), e
    }

    function F(a, b, c) {
        for (var d, e = (cb[b] || []).concat(cb["*"]), f = 0, g = e.length; g > f; f++)
            if (d = e[f].call(c, b, a)) return d
    }

    function G(a, b, c) {
        var d, e, f, g, h, i, j, k, l = this,
            m = {},
            n = a.style,
            o = a.nodeType && xa(a),
            p = ra.get(a, "fxshow");
        c.queue || (h = _._queueHooks(a, "fx"), null == h.unqueued && (h.unqueued = 0, i = h.empty.fire, h.empty.fire = function() {
            h.unqueued || i()
        }), h.unqueued++, l.always(function() {
            l.always(function() {
                h.unqueued--, _.queue(a, "fx").length || h.empty.fire()
            })
        })), 1 === a.nodeType && ("height" in b || "width" in b) && (c.overflow = [n.overflow, n.overflowX, n.overflowY], j = _.css(a, "display"), k = "none" === j ? ra.get(a, "olddisplay") || u(a.nodeName) : j, "inline" === k && "none" === _.css(a, "float") && (n.display = "inline-block")), c.overflow && (n.overflow = "hidden", l.always(function() {
            n.overflow = c.overflow[0], n.overflowX = c.overflow[1], n.overflowY = c.overflow[2]
        }));
        for (d in b)
            if (e = b[d], $a.exec(e)) {
                if (delete b[d], f = f || "toggle" === e, e === (o ? "hide" : "show")) {
                    if ("show" !== e || !p || void 0 === p[d]) continue;
                    o = !0
                }
                m[d] = p && p[d] || _.style(a, d)
            } else j = void 0;
        if (_.isEmptyObject(m)) "inline" === ("none" === j ? u(a.nodeName) : j) && (n.display = j);
        else {
            p ? "hidden" in p && (o = p.hidden) : p = ra.access(a, "fxshow", {}), f && (p.hidden = !o), o ? _(a).show() : l.done(function() {
                _(a).hide()
            }), l.done(function() {
                var b;
                ra.remove(a, "fxshow");
                for (b in m) _.style(a, b, m[b])
            });
            for (d in m) g = F(o ? p[d] : 0, d, l), d in p || (p[d] = g.start, o && (g.end = g.start, g.start = "width" === d || "height" === d ? 1 : 0))
        }
    }

    function H(a, b) {
        var c, d, e, f, g;
        for (c in a)
            if (d = _.camelCase(c), e = b[d], f = a[c], _.isArray(f) && (e = f[1], f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = _.cssHooks[d], g && "expand" in g) {
                f = g.expand(f), delete a[d];
                for (c in f) c in a || (a[c] = f[c], b[c] = e)
            } else b[d] = e
    }

    function I(a, b, c) {
        var d, e, f = 0,
            g = bb.length,
            h = _.Deferred().always(function() {
                delete i.elem
            }),
            i = function() {
                if (e) return !1;
                for (var b = Ya || D(), c = Math.max(0, j.startTime + j.duration - b), d = c / j.duration || 0, f = 1 - d, g = 0, i = j.tweens.length; i > g; g++) j.tweens[g].run(f);
                return h.notifyWith(a, [j, f, c]), 1 > f && i ? c : (h.resolveWith(a, [j]), !1)
            },
            j = h.promise({
                elem: a,
                props: _.extend({}, b),
                opts: _.extend(!0, {
                    specialEasing: {}
                }, c),
                originalProperties: b,
                originalOptions: c,
                startTime: Ya || D(),
                duration: c.duration,
                tweens: [],
                createTween: function(b, c) {
                    var d = _.Tween(a, j.opts, b, c, j.opts.specialEasing[b] || j.opts.easing);
                    return j.tweens.push(d), d
                },
                stop: function(b) {
                    var c = 0,
                        d = b ? j.tweens.length : 0;
                    if (e) return this;
                    for (e = !0; d > c; c++) j.tweens[c].run(1);
                    return b ? h.resolveWith(a, [j, b]) : h.rejectWith(a, [j, b]), this
                }
            }),
            k = j.props;
        for (H(k, j.opts.specialEasing); g > f; f++)
            if (d = bb[f].call(j, a, k, j.opts)) return d;
        return _.map(k, F, j), _.isFunction(j.opts.start) && j.opts.start.call(a, j), _.fx.timer(_.extend(i, {
            elem: a,
            anim: j,
            queue: j.opts.queue
        })), j.progress(j.opts.progress).done(j.opts.done, j.opts.complete).fail(j.opts.fail).always(j.opts.always)
    }

    function J(a) {
        return function(b, c) {
            "string" != typeof b && (c = b, b = "*");
            var d, e = 0,
                f = b.toLowerCase().match(na) || [];
            if (_.isFunction(c))
                for (; d = f[e++];) "+" === d[0] ? (d = d.slice(1) || "*", (a[d] = a[d] || []).unshift(c)) : (a[d] = a[d] || []).push(c)
        }
    }

    function K(a, b, c, d) {
        function e(h) {
            var i;
            return f[h] = !0, _.each(a[h] || [], function(a, h) {
                var j = h(b, c, d);
                return "string" != typeof j || g || f[j] ? g ? !(i = j) : void 0 : (b.dataTypes.unshift(j), e(j), !1)
            }), i
        }
        var f = {},
            g = a === tb;
        return e(b.dataTypes[0]) || !f["*"] && e("*")
    }

    function L(a, b) {
        var c, d, e = _.ajaxSettings.flatOptions || {};
        for (c in b) void 0 !== b[c] && ((e[c] ? a : d || (d = {}))[c] = b[c]);
        return d && _.extend(!0, a, d), a
    }

    function M(a, b, c) {
        for (var d, e, f, g, h = a.contents, i = a.dataTypes;
            "*" === i[0];) i.shift(), void 0 === d && (d = a.mimeType || b.getResponseHeader("Content-Type"));
        if (d)
            for (e in h)
                if (h[e] && h[e].test(d)) {
                    i.unshift(e);
                    break
                }
        if (i[0] in c) f = i[0];
        else {
            for (e in c) {
                if (!i[0] || a.converters[e + " " + i[0]]) {
                    f = e;
                    break
                }
                g || (g = e)
            }
            f = f || g
        }
        return f ? (f !== i[0] && i.unshift(f), c[f]) : void 0
    }

    function N(a, b, c, d) {
        var e, f, g, h, i, j = {},
            k = a.dataTypes.slice();
        if (k[1])
            for (g in a.converters) j[g.toLowerCase()] = a.converters[g];
        for (f = k.shift(); f;)
            if (a.responseFields[f] && (c[a.responseFields[f]] = b), !i && d && a.dataFilter && (b = a.dataFilter(b, a.dataType)), i = f, f = k.shift())
                if ("*" === f) f = i;
                else if ("*" !== i && i !== f) {
            if (g = j[i + " " + f] || j["* " + f], !g)
                for (e in j)
                    if (h = e.split(" "), h[1] === f && (g = j[i + " " + h[0]] || j["* " + h[0]])) {
                        g === !0 ? g = j[e] : j[e] !== !0 && (f = h[0], k.unshift(h[1]));
                        break
                    }
            if (g !== !0)
                if (g && a["throws"]) b = g(b);
                else try {
                    b = g(b)
                } catch (l) {
                    return {
                        state: "parsererror",
                        error: g ? l : "No conversion from " + i + " to " + f
                    }
                }
        }
        return {
            state: "success",
            data: b
        }
    }

    function O(a, b, c, d) {
        var e;
        if (_.isArray(b)) _.each(b, function(b, e) {
            c || yb.test(a) ? d(a, e) : O(a + "[" + ("object" == typeof e ? b : "") + "]", e, c, d)
        });
        else if (c || "object" !== _.type(b)) d(a, b);
        else
            for (e in b) O(a + "[" + e + "]", b[e], c, d)
    }

    function P(a) {
        return _.isWindow(a) ? a : 9 === a.nodeType && a.defaultView
    }
    var Q = [],
        R = Q.slice,
        S = Q.concat,
        T = Q.push,
        U = Q.indexOf,
        V = {},
        W = V.toString,
        X = V.hasOwnProperty,
        Y = {},
        Z = a.document,
        $ = "2.1.4",
        _ = function(a, b) {
            return new _.fn.init(a, b)
        },
        aa = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        ba = /^-ms-/,
        ca = /-([\da-z])/gi,
        da = function(a, b) {
            return b.toUpperCase()
        };
    _.fn = _.prototype = {
        jquery: $,
        constructor: _,
        selector: "",
        length: 0,
        toArray: function() {
            return R.call(this)
        },
        get: function(a) {
            return null != a ? 0 > a ? this[a + this.length] : this[a] : R.call(this)
        },
        pushStack: function(a) {
            var b = _.merge(this.constructor(), a);
            return b.prevObject = this, b.context = this.context, b
        },
        each: function(a, b) {
            return _.each(this, a, b)
        },
        map: function(a) {
            return this.pushStack(_.map(this, function(b, c) {
                return a.call(b, c, b)
            }))
        },
        slice: function() {
            return this.pushStack(R.apply(this, arguments))
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq(-1)
        },
        eq: function(a) {
            var b = this.length,
                c = +a + (0 > a ? b : 0);
            return this.pushStack(c >= 0 && b > c ? [this[c]] : [])
        },
        end: function() {
            return this.prevObject || this.constructor(null)
        },
        push: T,
        sort: Q.sort,
        splice: Q.splice
    }, _.extend = _.fn.extend = function() {
        var a, b, c, d, e, f, g = arguments[0] || {},
            h = 1,
            i = arguments.length,
            j = !1;
        for ("boolean" == typeof g && (j = g, g = arguments[h] || {}, h++), "object" == typeof g || _.isFunction(g) || (g = {}), h === i && (g = this, h--); i > h; h++)
            if (null != (a = arguments[h]))
                for (b in a) c = g[b], d = a[b], g !== d && (j && d && (_.isPlainObject(d) || (e = _.isArray(d))) ? (e ? (e = !1, f = c && _.isArray(c) ? c : []) : f = c && _.isPlainObject(c) ? c : {}, g[b] = _.extend(j, f, d)) : void 0 !== d && (g[b] = d));
        return g
    }, _.extend({
        expando: "jQuery" + ($ + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(a) {
            throw new Error(a)
        },
        noop: function() {},
        isFunction: function(a) {
            return "function" === _.type(a)
        },
        isArray: Array.isArray,
        isWindow: function(a) {
            return null != a && a === a.window
        },
        isNumeric: function(a) {
            return !_.isArray(a) && a - parseFloat(a) + 1 >= 0
        },
        isPlainObject: function(a) {
            return "object" !== _.type(a) || a.nodeType || _.isWindow(a) ? !1 : a.constructor && !X.call(a.constructor.prototype, "isPrototypeOf") ? !1 : !0
        },
        isEmptyObject: function(a) {
            var b;
            for (b in a) return !1;
            return !0
        },
        type: function(a) {
            return null == a ? a + "" : "object" == typeof a || "function" == typeof a ? V[W.call(a)] || "object" : typeof a
        },
        globalEval: function(a) {
            var b, c = eval;
            a = _.trim(a), a && (1 === a.indexOf("use strict") ? (b = Z.createElement("script"), b.text = a, Z.head.appendChild(b).parentNode.removeChild(b)) : c(a))
        },
        camelCase: function(a) {
            return a.replace(ba, "ms-").replace(ca, da)
        },
        nodeName: function(a, b) {
            return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase()
        },
        each: function(a, b, d) {
            var e, f = 0,
                g = a.length,
                h = c(a);
            if (d) {
                if (h)
                    for (; g > f && (e = b.apply(a[f], d), e !== !1); f++);
                else
                    for (f in a)
                        if (e = b.apply(a[f], d), e === !1) break
            } else if (h)
                for (; g > f && (e = b.call(a[f], f, a[f]), e !== !1); f++);
            else
                for (f in a)
                    if (e = b.call(a[f], f, a[f]), e === !1) break;
            return a
        },
        trim: function(a) {
            return null == a ? "" : (a + "").replace(aa, "")
        },
        makeArray: function(a, b) {
            var d = b || [];
            return null != a && (c(Object(a)) ? _.merge(d, "string" == typeof a ? [a] : a) : T.call(d, a)), d
        },
        inArray: function(a, b, c) {
            return null == b ? -1 : U.call(b, a, c)
        },
        merge: function(a, b) {
            for (var c = +b.length, d = 0, e = a.length; c > d; d++) a[e++] = b[d];
            return a.length = e, a
        },
        grep: function(a, b, c) {
            for (var d, e = [], f = 0, g = a.length, h = !c; g > f; f++) d = !b(a[f], f), d !== h && e.push(a[f]);
            return e
        },
        map: function(a, b, d) {
            var e, f = 0,
                g = a.length,
                h = c(a),
                i = [];
            if (h)
                for (; g > f; f++) e = b(a[f], f, d), null != e && i.push(e);
            else
                for (f in a) e = b(a[f], f, d), null != e && i.push(e);
            return S.apply([], i)
        },
        guid: 1,
        proxy: function(a, b) {
            var c, d, e;
            return "string" == typeof b && (c = a[b], b = a, a = c), _.isFunction(a) ? (d = R.call(arguments, 2), e = function() {
                return a.apply(b || this, d.concat(R.call(arguments)))
            }, e.guid = a.guid = a.guid || _.guid++, e) : void 0
        },
        now: Date.now,
        support: Y
    }), _.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(a, b) {
        V["[object " + b + "]"] = b.toLowerCase()
    });
    var ea = function(a) {
        function b(a, b, c, d) {
            var e, f, g, h, i, j, l, n, o, p;
            if ((b ? b.ownerDocument || b : O) !== G && F(b), b = b || G, c = c || [], h = b.nodeType, "string" != typeof a || !a || 1 !== h && 9 !== h && 11 !== h) return c;
            if (!d && I) {
                if (11 !== h && (e = sa.exec(a)))
                    if (g = e[1]) {
                        if (9 === h) {
                            if (f = b.getElementById(g), !f || !f.parentNode) return c;
                            if (f.id === g) return c.push(f), c
                        } else if (b.ownerDocument && (f = b.ownerDocument.getElementById(g)) && M(b, f) && f.id === g) return c.push(f), c
                    } else {
                        if (e[2]) return $.apply(c, b.getElementsByTagName(a)), c;
                        if ((g = e[3]) && v.getElementsByClassName) return $.apply(c, b.getElementsByClassName(g)), c
                    }
                if (v.qsa && (!J || !J.test(a))) {
                    if (n = l = N, o = b, p = 1 !== h && a, 1 === h && "object" !== b.nodeName.toLowerCase()) {
                        for (j = z(a), (l = b.getAttribute("id")) ? n = l.replace(ua, "\\$&") : b.setAttribute("id", n), n = "[id='" + n + "'] ", i = j.length; i--;) j[i] = n + m(j[i]);
                        o = ta.test(a) && k(b.parentNode) || b, p = j.join(",")
                    }
                    if (p) try {
                        return $.apply(c, o.querySelectorAll(p)), c
                    } catch (q) {} finally {
                        l || b.removeAttribute("id")
                    }
                }
            }
            return B(a.replace(ia, "$1"), b, c, d)
        }

        function c() {
            function a(c, d) {
                return b.push(c + " ") > w.cacheLength && delete a[b.shift()], a[c + " "] = d
            }
            var b = [];
            return a
        }

        function d(a) {
            return a[N] = !0, a
        }

        function e(a) {
            var b = G.createElement("div");
            try {
                return !!a(b)
            } catch (c) {
                return !1
            } finally {
                b.parentNode && b.parentNode.removeChild(b), b = null
            }
        }

        function f(a, b) {
            for (var c = a.split("|"), d = a.length; d--;) w.attrHandle[c[d]] = b
        }

        function g(a, b) {
            var c = b && a,
                d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || V) - (~a.sourceIndex || V);
            if (d) return d;
            if (c)
                for (; c = c.nextSibling;)
                    if (c === b) return -1;
            return a ? 1 : -1
        }

        function h(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return "input" === c && b.type === a
            }
        }

        function i(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return ("input" === c || "button" === c) && b.type === a
            }
        }

        function j(a) {
            return d(function(b) {
                return b = +b, d(function(c, d) {
                    for (var e, f = a([], c.length, b), g = f.length; g--;) c[e = f[g]] && (c[e] = !(d[e] = c[e]))
                })
            })
        }

        function k(a) {
            return a && "undefined" != typeof a.getElementsByTagName && a
        }

        function l() {}

        function m(a) {
            for (var b = 0, c = a.length, d = ""; c > b; b++) d += a[b].value;
            return d
        }

        function n(a, b, c) {
            var d = b.dir,
                e = c && "parentNode" === d,
                f = Q++;
            return b.first ? function(b, c, f) {
                for (; b = b[d];)
                    if (1 === b.nodeType || e) return a(b, c, f)
            } : function(b, c, g) {
                var h, i, j = [P, f];
                if (g) {
                    for (; b = b[d];)
                        if ((1 === b.nodeType || e) && a(b, c, g)) return !0
                } else
                    for (; b = b[d];)
                        if (1 === b.nodeType || e) {
                            if (i = b[N] || (b[N] = {}), (h = i[d]) && h[0] === P && h[1] === f) return j[2] = h[2];
                            if (i[d] = j, j[2] = a(b, c, g)) return !0
                        }
            }
        }

        function o(a) {
            return a.length > 1 ? function(b, c, d) {
                for (var e = a.length; e--;)
                    if (!a[e](b, c, d)) return !1;
                return !0
            } : a[0]
        }

        function p(a, c, d) {
            for (var e = 0, f = c.length; f > e; e++) b(a, c[e], d);
            return d
        }

        function q(a, b, c, d, e) {
            for (var f, g = [], h = 0, i = a.length, j = null != b; i > h; h++)(f = a[h]) && (!c || c(f, d, e)) && (g.push(f), j && b.push(h));
            return g
        }

        function r(a, b, c, e, f, g) {
            return e && !e[N] && (e = r(e)), f && !f[N] && (f = r(f, g)), d(function(d, g, h, i) {
                var j, k, l, m = [],
                    n = [],
                    o = g.length,
                    r = d || p(b || "*", h.nodeType ? [h] : h, []),
                    s = !a || !d && b ? r : q(r, m, a, h, i),
                    t = c ? f || (d ? a : o || e) ? [] : g : s;
                if (c && c(s, t, h, i), e)
                    for (j = q(t, n), e(j, [], h, i), k = j.length; k--;)(l = j[k]) && (t[n[k]] = !(s[n[k]] = l));
                if (d) {
                    if (f || a) {
                        if (f) {
                            for (j = [], k = t.length; k--;)(l = t[k]) && j.push(s[k] = l);
                            f(null, t = [], j, i)
                        }
                        for (k = t.length; k--;)(l = t[k]) && (j = f ? aa(d, l) : m[k]) > -1 && (d[j] = !(g[j] = l))
                    }
                } else t = q(t === g ? t.splice(o, t.length) : t), f ? f(null, g, t, i) : $.apply(g, t)
            })
        }

        function s(a) {
            for (var b, c, d, e = a.length, f = w.relative[a[0].type], g = f || w.relative[" "], h = f ? 1 : 0, i = n(function(a) {
                    return a === b
                }, g, !0), j = n(function(a) {
                    return aa(b, a) > -1
                }, g, !0), k = [function(a, c, d) {
                    var e = !f && (d || c !== C) || ((b = c).nodeType ? i(a, c, d) : j(a, c, d));
                    return b = null, e
                }]; e > h; h++)
                if (c = w.relative[a[h].type]) k = [n(o(k), c)];
                else {
                    if (c = w.filter[a[h].type].apply(null, a[h].matches), c[N]) {
                        for (d = ++h; e > d && !w.relative[a[d].type]; d++);
                        return r(h > 1 && o(k), h > 1 && m(a.slice(0, h - 1).concat({
                            value: " " === a[h - 2].type ? "*" : ""
                        })).replace(ia, "$1"), c, d > h && s(a.slice(h, d)), e > d && s(a = a.slice(d)), e > d && m(a))
                    }
                    k.push(c)
                }
            return o(k)
        }

        function t(a, c) {
            var e = c.length > 0,
                f = a.length > 0,
                g = function(d, g, h, i, j) {
                    var k, l, m, n = 0,
                        o = "0",
                        p = d && [],
                        r = [],
                        s = C,
                        t = d || f && w.find.TAG("*", j),
                        u = P += null == s ? 1 : Math.random() || .1,
                        v = t.length;
                    for (j && (C = g !== G && g); o !== v && null != (k = t[o]); o++) {
                        if (f && k) {
                            for (l = 0; m = a[l++];)
                                if (m(k, g, h)) {
                                    i.push(k);
                                    break
                                }
                            j && (P = u)
                        }
                        e && ((k = !m && k) && n--, d && p.push(k))
                    }
                    if (n += o, e && o !== n) {
                        for (l = 0; m = c[l++];) m(p, r, g, h);
                        if (d) {
                            if (n > 0)
                                for (; o--;) p[o] || r[o] || (r[o] = Y.call(i));
                            r = q(r)
                        }
                        $.apply(i, r), j && !d && r.length > 0 && n + c.length > 1 && b.uniqueSort(i)
                    }
                    return j && (P = u, C = s), p
                };
            return e ? d(g) : g
        }
        var u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N = "sizzle" + 1 * new Date,
            O = a.document,
            P = 0,
            Q = 0,
            R = c(),
            S = c(),
            T = c(),
            U = function(a, b) {
                return a === b && (E = !0), 0
            },
            V = 1 << 31,
            W = {}.hasOwnProperty,
            X = [],
            Y = X.pop,
            Z = X.push,
            $ = X.push,
            _ = X.slice,
            aa = function(a, b) {
                for (var c = 0, d = a.length; d > c; c++)
                    if (a[c] === b) return c;
                return -1
            },
            ba = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
            ca = "[\\x20\\t\\r\\n\\f]",
            da = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
            ea = da.replace("w", "w#"),
            fa = "\\[" + ca + "*(" + da + ")(?:" + ca + "*([*^$|!~]?=)" + ca + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + ea + "))|)" + ca + "*\\]",
            ga = ":(" + da + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + fa + ")*)|.*)\\)|)",
            ha = new RegExp(ca + "+", "g"),
            ia = new RegExp("^" + ca + "+|((?:^|[^\\\\])(?:\\\\.)*)" + ca + "+$", "g"),
            ja = new RegExp("^" + ca + "*," + ca + "*"),
            ka = new RegExp("^" + ca + "*([>+~]|" + ca + ")" + ca + "*"),
            la = new RegExp("=" + ca + "*([^\\]'\"]*?)" + ca + "*\\]", "g"),
            ma = new RegExp(ga),
            na = new RegExp("^" + ea + "$"),
            oa = {
                ID: new RegExp("^#(" + da + ")"),
                CLASS: new RegExp("^\\.(" + da + ")"),
                TAG: new RegExp("^(" + da.replace("w", "w*") + ")"),
                ATTR: new RegExp("^" + fa),
                PSEUDO: new RegExp("^" + ga),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + ca + "*(even|odd|(([+-]|)(\\d*)n|)" + ca + "*(?:([+-]|)" + ca + "*(\\d+)|))" + ca + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + ba + ")$", "i"),
                needsContext: new RegExp("^" + ca + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + ca + "*((?:-\\d)?\\d*)" + ca + "*\\)|)(?=[^-]|$)", "i")
            },
            pa = /^(?:input|select|textarea|button)$/i,
            qa = /^h\d$/i,
            ra = /^[^{]+\{\s*\[native \w/,
            sa = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
            ta = /[+~]/,
            ua = /'|\\/g,
            va = new RegExp("\\\\([\\da-f]{1,6}" + ca + "?|(" + ca + ")|.)", "ig"),
            wa = function(a, b, c) {
                var d = "0x" + b - 65536;
                return d !== d || c ? b : 0 > d ? String.fromCharCode(d + 65536) : String.fromCharCode(d >> 10 | 55296, 1023 & d | 56320)
            },
            xa = function() {
                F()
            };
        try {
            $.apply(X = _.call(O.childNodes), O.childNodes), X[O.childNodes.length].nodeType
        } catch (ya) {
            $ = {
                apply: X.length ? function(a, b) {
                    Z.apply(a, _.call(b))
                } : function(a, b) {
                    for (var c = a.length, d = 0; a[c++] = b[d++];);
                    a.length = c - 1
                }
            }
        }
        v = b.support = {}, y = b.isXML = function(a) {
            var b = a && (a.ownerDocument || a).documentElement;
            return b ? "HTML" !== b.nodeName : !1
        }, F = b.setDocument = function(a) {
            var b, c, d = a ? a.ownerDocument || a : O;
            return d !== G && 9 === d.nodeType && d.documentElement ? (G = d, H = d.documentElement, c = d.defaultView, c && c !== c.top && (c.addEventListener ? c.addEventListener("unload", xa, !1) : c.attachEvent && c.attachEvent("onunload", xa)), I = !y(d), v.attributes = e(function(a) {
                return a.className = "i", !a.getAttribute("className")
            }), v.getElementsByTagName = e(function(a) {
                return a.appendChild(d.createComment("")), !a.getElementsByTagName("*").length
            }), v.getElementsByClassName = ra.test(d.getElementsByClassName), v.getById = e(function(a) {
                return H.appendChild(a).id = N, !d.getElementsByName || !d.getElementsByName(N).length
            }), v.getById ? (w.find.ID = function(a, b) {
                if ("undefined" != typeof b.getElementById && I) {
                    var c = b.getElementById(a);
                    return c && c.parentNode ? [c] : []
                }
            }, w.filter.ID = function(a) {
                var b = a.replace(va, wa);
                return function(a) {
                    return a.getAttribute("id") === b
                }
            }) : (delete w.find.ID, w.filter.ID = function(a) {
                var b = a.replace(va, wa);
                return function(a) {
                    var c = "undefined" != typeof a.getAttributeNode && a.getAttributeNode("id");
                    return c && c.value === b
                }
            }), w.find.TAG = v.getElementsByTagName ? function(a, b) {
                return "undefined" != typeof b.getElementsByTagName ? b.getElementsByTagName(a) : v.qsa ? b.querySelectorAll(a) : void 0
            } : function(a, b) {
                var c, d = [],
                    e = 0,
                    f = b.getElementsByTagName(a);
                if ("*" === a) {
                    for (; c = f[e++];) 1 === c.nodeType && d.push(c);
                    return d
                }
                return f
            }, w.find.CLASS = v.getElementsByClassName && function(a, b) {
                return I ? b.getElementsByClassName(a) : void 0
            }, K = [], J = [], (v.qsa = ra.test(d.querySelectorAll)) && (e(function(a) {
                H.appendChild(a).innerHTML = "<a id='" + N + "'></a><select id='" + N + "-\f]' msallowcapture=''><option selected=''></option></select>", a.querySelectorAll("[msallowcapture^='']").length && J.push("[*^$]=" + ca + "*(?:''|\"\")"), a.querySelectorAll("[selected]").length || J.push("\\[" + ca + "*(?:value|" + ba + ")"), a.querySelectorAll("[id~=" + N + "-]").length || J.push("~="), a.querySelectorAll(":checked").length || J.push(":checked"), a.querySelectorAll("a#" + N + "+*").length || J.push(".#.+[+~]")
            }), e(function(a) {
                var b = d.createElement("input");
                b.setAttribute("type", "hidden"), a.appendChild(b).setAttribute("name", "D"), a.querySelectorAll("[name=d]").length && J.push("name" + ca + "*[*^$|!~]?="), a.querySelectorAll(":enabled").length || J.push(":enabled", ":disabled"), a.querySelectorAll("*,:x"), J.push(",.*:")
            })), (v.matchesSelector = ra.test(L = H.matches || H.webkitMatchesSelector || H.mozMatchesSelector || H.oMatchesSelector || H.msMatchesSelector)) && e(function(a) {
                v.disconnectedMatch = L.call(a, "div"), L.call(a, "[s!='']:x"), K.push("!=", ga)
            }), J = J.length && new RegExp(J.join("|")), K = K.length && new RegExp(K.join("|")), b = ra.test(H.compareDocumentPosition), M = b || ra.test(H.contains) ? function(a, b) {
                var c = 9 === a.nodeType ? a.documentElement : a,
                    d = b && b.parentNode;
                return a === d || !(!d || 1 !== d.nodeType || !(c.contains ? c.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)))
            } : function(a, b) {
                if (b)
                    for (; b = b.parentNode;)
                        if (b === a) return !0;
                return !1
            }, U = b ? function(a, b) {
                if (a === b) return E = !0, 0;
                var c = !a.compareDocumentPosition - !b.compareDocumentPosition;
                return c ? c : (c = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1, 1 & c || !v.sortDetached && b.compareDocumentPosition(a) === c ? a === d || a.ownerDocument === O && M(O, a) ? -1 : b === d || b.ownerDocument === O && M(O, b) ? 1 : D ? aa(D, a) - aa(D, b) : 0 : 4 & c ? -1 : 1)
            } : function(a, b) {
                if (a === b) return E = !0, 0;
                var c, e = 0,
                    f = a.parentNode,
                    h = b.parentNode,
                    i = [a],
                    j = [b];
                if (!f || !h) return a === d ? -1 : b === d ? 1 : f ? -1 : h ? 1 : D ? aa(D, a) - aa(D, b) : 0;
                if (f === h) return g(a, b);
                for (c = a; c = c.parentNode;) i.unshift(c);
                for (c = b; c = c.parentNode;) j.unshift(c);
                for (; i[e] === j[e];) e++;
                return e ? g(i[e], j[e]) : i[e] === O ? -1 : j[e] === O ? 1 : 0
            }, d) : G
        }, b.matches = function(a, c) {
            return b(a, null, null, c)
        }, b.matchesSelector = function(a, c) {
            if ((a.ownerDocument || a) !== G && F(a), c = c.replace(la, "='$1']"), !(!v.matchesSelector || !I || K && K.test(c) || J && J.test(c))) try {
                var d = L.call(a, c);
                if (d || v.disconnectedMatch || a.document && 11 !== a.document.nodeType) return d
            } catch (e) {}
            return b(c, G, null, [a]).length > 0
        }, b.contains = function(a, b) {
            return (a.ownerDocument || a) !== G && F(a), M(a, b)
        }, b.attr = function(a, b) {
            (a.ownerDocument || a) !== G && F(a);
            var c = w.attrHandle[b.toLowerCase()],
                d = c && W.call(w.attrHandle, b.toLowerCase()) ? c(a, b, !I) : void 0;
            return void 0 !== d ? d : v.attributes || !I ? a.getAttribute(b) : (d = a.getAttributeNode(b)) && d.specified ? d.value : null
        }, b.error = function(a) {
            throw new Error("Syntax error, unrecognized expression: " + a)
        }, b.uniqueSort = function(a) {
            var b, c = [],
                d = 0,
                e = 0;
            if (E = !v.detectDuplicates, D = !v.sortStable && a.slice(0), a.sort(U), E) {
                for (; b = a[e++];) b === a[e] && (d = c.push(e));
                for (; d--;) a.splice(c[d], 1)
            }
            return D = null, a
        }, x = b.getText = function(a) {
            var b, c = "",
                d = 0,
                e = a.nodeType;
            if (e) {
                if (1 === e || 9 === e || 11 === e) {
                    if ("string" == typeof a.textContent) return a.textContent;
                    for (a = a.firstChild; a; a = a.nextSibling) c += x(a)
                } else if (3 === e || 4 === e) return a.nodeValue
            } else
                for (; b = a[d++];) c += x(b);
            return c
        }, w = b.selectors = {
            cacheLength: 50,
            createPseudo: d,
            match: oa,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(a) {
                    return a[1] = a[1].replace(va, wa), a[3] = (a[3] || a[4] || a[5] || "").replace(va, wa), "~=" === a[2] && (a[3] = " " + a[3] + " "), a.slice(0, 4)
                },
                CHILD: function(a) {
                    return a[1] = a[1].toLowerCase(), "nth" === a[1].slice(0, 3) ? (a[3] || b.error(a[0]), a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] = +(a[7] + a[8] || "odd" === a[3])) : a[3] && b.error(a[0]), a
                },
                PSEUDO: function(a) {
                    var b, c = !a[6] && a[2];
                    return oa.CHILD.test(a[0]) ? null : (a[3] ? a[2] = a[4] || a[5] || "" : c && ma.test(c) && (b = z(c, !0)) && (b = c.indexOf(")", c.length - b) - c.length) && (a[0] = a[0].slice(0, b), a[2] = c.slice(0, b)), a.slice(0, 3))
                }
            },
            filter: {
                TAG: function(a) {
                    var b = a.replace(va, wa).toLowerCase();
                    return "*" === a ? function() {
                        return !0
                    } : function(a) {
                        return a.nodeName && a.nodeName.toLowerCase() === b
                    }
                },
                CLASS: function(a) {
                    var b = R[a + " "];
                    return b || (b = new RegExp("(^|" + ca + ")" + a + "(" + ca + "|$)")) && R(a, function(a) {
                        return b.test("string" == typeof a.className && a.className || "undefined" != typeof a.getAttribute && a.getAttribute("class") || "")
                    })
                },
                ATTR: function(a, c, d) {
                    return function(e) {
                        var f = b.attr(e, a);
                        return null == f ? "!=" === c : c ? (f += "", "=" === c ? f === d : "!=" === c ? f !== d : "^=" === c ? d && 0 === f.indexOf(d) : "*=" === c ? d && f.indexOf(d) > -1 : "$=" === c ? d && f.slice(-d.length) === d : "~=" === c ? (" " + f.replace(ha, " ") + " ").indexOf(d) > -1 : "|=" === c ? f === d || f.slice(0, d.length + 1) === d + "-" : !1) : !0
                    }
                },
                CHILD: function(a, b, c, d, e) {
                    var f = "nth" !== a.slice(0, 3),
                        g = "last" !== a.slice(-4),
                        h = "of-type" === b;
                    return 1 === d && 0 === e ? function(a) {
                        return !!a.parentNode
                    } : function(b, c, i) {
                        var j, k, l, m, n, o, p = f !== g ? "nextSibling" : "previousSibling",
                            q = b.parentNode,
                            r = h && b.nodeName.toLowerCase(),
                            s = !i && !h;
                        if (q) {
                            if (f) {
                                for (; p;) {
                                    for (l = b; l = l[p];)
                                        if (h ? l.nodeName.toLowerCase() === r : 1 === l.nodeType) return !1;
                                    o = p = "only" === a && !o && "nextSibling"
                                }
                                return !0
                            }
                            if (o = [g ? q.firstChild : q.lastChild], g && s) {
                                for (k = q[N] || (q[N] = {}), j = k[a] || [], n = j[0] === P && j[1], m = j[0] === P && j[2], l = n && q.childNodes[n]; l = ++n && l && l[p] || (m = n = 0) || o.pop();)
                                    if (1 === l.nodeType && ++m && l === b) {
                                        k[a] = [P, n, m];
                                        break
                                    }
                            } else if (s && (j = (b[N] || (b[N] = {}))[a]) && j[0] === P) m = j[1];
                            else
                                for (;
                                    (l = ++n && l && l[p] || (m = n = 0) || o.pop()) && ((h ? l.nodeName.toLowerCase() !== r : 1 !== l.nodeType) || !++m || (s && ((l[N] || (l[N] = {}))[a] = [P, m]), l !== b)););
                            return m -= e, m === d || m % d === 0 && m / d >= 0
                        }
                    }
                },
                PSEUDO: function(a, c) {
                    var e, f = w.pseudos[a] || w.setFilters[a.toLowerCase()] || b.error("unsupported pseudo: " + a);
                    return f[N] ? f(c) : f.length > 1 ? (e = [a, a, "", c], w.setFilters.hasOwnProperty(a.toLowerCase()) ? d(function(a, b) {
                        for (var d, e = f(a, c), g = e.length; g--;) d = aa(a, e[g]), a[d] = !(b[d] = e[g])
                    }) : function(a) {
                        return f(a, 0, e)
                    }) : f
                }
            },
            pseudos: {
                not: d(function(a) {
                    var b = [],
                        c = [],
                        e = A(a.replace(ia, "$1"));
                    return e[N] ? d(function(a, b, c, d) {
                        for (var f, g = e(a, null, d, []), h = a.length; h--;)(f = g[h]) && (a[h] = !(b[h] = f))
                    }) : function(a, d, f) {
                        return b[0] = a, e(b, null, f, c), b[0] = null, !c.pop()
                    }
                }),
                has: d(function(a) {
                    return function(c) {
                        return b(a, c).length > 0
                    }
                }),
                contains: d(function(a) {
                    return a = a.replace(va, wa),
                        function(b) {
                            return (b.textContent || b.innerText || x(b)).indexOf(a) > -1
                        }
                }),
                lang: d(function(a) {
                    return na.test(a || "") || b.error("unsupported lang: " + a), a = a.replace(va, wa).toLowerCase(),
                        function(b) {
                            var c;
                            do
                                if (c = I ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang")) return c = c.toLowerCase(), c === a || 0 === c.indexOf(a + "-"); while ((b = b.parentNode) && 1 === b.nodeType);
                            return !1
                        }
                }),
                target: function(b) {
                    var c = a.location && a.location.hash;
                    return c && c.slice(1) === b.id
                },
                root: function(a) {
                    return a === H
                },
                focus: function(a) {
                    return a === G.activeElement && (!G.hasFocus || G.hasFocus()) && !!(a.type || a.href || ~a.tabIndex)
                },
                enabled: function(a) {
                    return a.disabled === !1
                },
                disabled: function(a) {
                    return a.disabled === !0
                },
                checked: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && !!a.checked || "option" === b && !!a.selected
                },
                selected: function(a) {
                    return a.parentNode && a.parentNode.selectedIndex, a.selected === !0
                },
                empty: function(a) {
                    for (a = a.firstChild; a; a = a.nextSibling)
                        if (a.nodeType < 6) return !1;
                    return !0
                },
                parent: function(a) {
                    return !w.pseudos.empty(a)
                },
                header: function(a) {
                    return qa.test(a.nodeName)
                },
                input: function(a) {
                    return pa.test(a.nodeName)
                },
                button: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && "button" === a.type || "button" === b
                },
                text: function(a) {
                    var b;
                    return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || "text" === b.toLowerCase())
                },
                first: j(function() {
                    return [0]
                }),
                last: j(function(a, b) {
                    return [b - 1]
                }),
                eq: j(function(a, b, c) {
                    return [0 > c ? c + b : c]
                }),
                even: j(function(a, b) {
                    for (var c = 0; b > c; c += 2) a.push(c);
                    return a
                }),
                odd: j(function(a, b) {
                    for (var c = 1; b > c; c += 2) a.push(c);
                    return a
                }),
                lt: j(function(a, b, c) {
                    for (var d = 0 > c ? c + b : c; --d >= 0;) a.push(d);
                    return a
                }),
                gt: j(function(a, b, c) {
                    for (var d = 0 > c ? c + b : c; ++d < b;) a.push(d);
                    return a
                })
            }
        }, w.pseudos.nth = w.pseudos.eq;
        for (u in {
                radio: !0,
                checkbox: !0,
                file: !0,
                password: !0,
                image: !0
            }) w.pseudos[u] = h(u);
        for (u in {
                submit: !0,
                reset: !0
            }) w.pseudos[u] = i(u);
        return l.prototype = w.filters = w.pseudos, w.setFilters = new l, z = b.tokenize = function(a, c) {
            var d, e, f, g, h, i, j, k = S[a + " "];
            if (k) return c ? 0 : k.slice(0);
            for (h = a, i = [], j = w.preFilter; h;) {
                (!d || (e = ja.exec(h))) && (e && (h = h.slice(e[0].length) || h), i.push(f = [])), d = !1, (e = ka.exec(h)) && (d = e.shift(), f.push({
                    value: d,
                    type: e[0].replace(ia, " ")
                }), h = h.slice(d.length));
                for (g in w.filter) !(e = oa[g].exec(h)) || j[g] && !(e = j[g](e)) || (d = e.shift(), f.push({
                    value: d,
                    type: g,
                    matches: e
                }), h = h.slice(d.length));
                if (!d) break
            }
            return c ? h.length : h ? b.error(a) : S(a, i).slice(0)
        }, A = b.compile = function(a, b) {
            var c, d = [],
                e = [],
                f = T[a + " "];
            if (!f) {
                for (b || (b = z(a)), c = b.length; c--;) f = s(b[c]), f[N] ? d.push(f) : e.push(f);
                f = T(a, t(e, d)), f.selector = a
            }
            return f
        }, B = b.select = function(a, b, c, d) {
            var e, f, g, h, i, j = "function" == typeof a && a,
                l = !d && z(a = j.selector || a);
            if (c = c || [], 1 === l.length) {
                if (f = l[0] = l[0].slice(0), f.length > 2 && "ID" === (g = f[0]).type && v.getById && 9 === b.nodeType && I && w.relative[f[1].type]) {
                    if (b = (w.find.ID(g.matches[0].replace(va, wa), b) || [])[0], !b) return c;
                    j && (b = b.parentNode), a = a.slice(f.shift().value.length)
                }
                for (e = oa.needsContext.test(a) ? 0 : f.length; e-- && (g = f[e], !w.relative[h = g.type]);)
                    if ((i = w.find[h]) && (d = i(g.matches[0].replace(va, wa), ta.test(f[0].type) && k(b.parentNode) || b))) {
                        if (f.splice(e, 1), a = d.length && m(f), !a) return $.apply(c, d), c;
                        break
                    }
            }
            return (j || A(a, l))(d, b, !I, c, ta.test(a) && k(b.parentNode) || b), c
        }, v.sortStable = N.split("").sort(U).join("") === N, v.detectDuplicates = !!E, F(), v.sortDetached = e(function(a) {
            return 1 & a.compareDocumentPosition(G.createElement("div"))
        }), e(function(a) {
            return a.innerHTML = "<a href='#'></a>", "#" === a.firstChild.getAttribute("href")
        }) || f("type|href|height|width", function(a, b, c) {
            return c ? void 0 : a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2)
        }), v.attributes && e(function(a) {
            return a.innerHTML = "<input/>", a.firstChild.setAttribute("value", ""), "" === a.firstChild.getAttribute("value")
        }) || f("value", function(a, b, c) {
            return c || "input" !== a.nodeName.toLowerCase() ? void 0 : a.defaultValue
        }), e(function(a) {
            return null == a.getAttribute("disabled")
        }) || f(ba, function(a, b, c) {
            var d;
            return c ? void 0 : a[b] === !0 ? b.toLowerCase() : (d = a.getAttributeNode(b)) && d.specified ? d.value : null
        }), b
    }(a);
    _.find = ea, _.expr = ea.selectors, _.expr[":"] = _.expr.pseudos, _.unique = ea.uniqueSort, _.text = ea.getText, _.isXMLDoc = ea.isXML, _.contains = ea.contains;
    var fa = _.expr.match.needsContext,
        ga = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        ha = /^.[^:#\[\.,]*$/;
    _.filter = function(a, b, c) {
        var d = b[0];
        return c && (a = ":not(" + a + ")"), 1 === b.length && 1 === d.nodeType ? _.find.matchesSelector(d, a) ? [d] : [] : _.find.matches(a, _.grep(b, function(a) {
            return 1 === a.nodeType
        }))
    }, _.fn.extend({
        find: function(a) {
            var b, c = this.length,
                d = [],
                e = this;
            if ("string" != typeof a) return this.pushStack(_(a).filter(function() {
                for (b = 0; c > b; b++)
                    if (_.contains(e[b], this)) return !0
            }));
            for (b = 0; c > b; b++) _.find(a, e[b], d);
            return d = this.pushStack(c > 1 ? _.unique(d) : d), d.selector = this.selector ? this.selector + " " + a : a, d
        },
        filter: function(a) {
            return this.pushStack(d(this, a || [], !1))
        },
        not: function(a) {
            return this.pushStack(d(this, a || [], !0))
        },
        is: function(a) {
            return !!d(this, "string" == typeof a && fa.test(a) ? _(a) : a || [], !1).length
        }
    });
    var ia, ja = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
        ka = _.fn.init = function(a, b) {
            var c, d;
            if (!a) return this;
            if ("string" == typeof a) {
                if (c = "<" === a[0] && ">" === a[a.length - 1] && a.length >= 3 ? [null, a, null] : ja.exec(a), !c || !c[1] && b) return !b || b.jquery ? (b || ia).find(a) : this.constructor(b).find(a);
                if (c[1]) {
                    if (b = b instanceof _ ? b[0] : b, _.merge(this, _.parseHTML(c[1], b && b.nodeType ? b.ownerDocument || b : Z, !0)), ga.test(c[1]) && _.isPlainObject(b))
                        for (c in b) _.isFunction(this[c]) ? this[c](b[c]) : this.attr(c, b[c]);
                    return this
                }
                return d = Z.getElementById(c[2]), d && d.parentNode && (this.length = 1, this[0] = d), this.context = Z, this.selector = a, this
            }
            return a.nodeType ? (this.context = this[0] = a, this.length = 1, this) : _.isFunction(a) ? "undefined" != typeof ia.ready ? ia.ready(a) : a(_) : (void 0 !== a.selector && (this.selector = a.selector, this.context = a.context), _.makeArray(a, this))
        };
    ka.prototype = _.fn, ia = _(Z);
    var la = /^(?:parents|prev(?:Until|All))/,
        ma = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
    _.extend({
        dir: function(a, b, c) {
            for (var d = [], e = void 0 !== c;
                (a = a[b]) && 9 !== a.nodeType;)
                if (1 === a.nodeType) {
                    if (e && _(a).is(c)) break;
                    d.push(a)
                }
            return d
        },
        sibling: function(a, b) {
            for (var c = []; a; a = a.nextSibling) 1 === a.nodeType && a !== b && c.push(a);
            return c
        }
    }), _.fn.extend({
        has: function(a) {
            var b = _(a, this),
                c = b.length;
            return this.filter(function() {
                for (var a = 0; c > a; a++)
                    if (_.contains(this, b[a])) return !0
            })
        },
        closest: function(a, b) {
            for (var c, d = 0, e = this.length, f = [], g = fa.test(a) || "string" != typeof a ? _(a, b || this.context) : 0; e > d; d++)
                for (c = this[d]; c && c !== b; c = c.parentNode)
                    if (c.nodeType < 11 && (g ? g.index(c) > -1 : 1 === c.nodeType && _.find.matchesSelector(c, a))) {
                        f.push(c);
                        break
                    }
            return this.pushStack(f.length > 1 ? _.unique(f) : f)
        },
        index: function(a) {
            return a ? "string" == typeof a ? U.call(_(a), this[0]) : U.call(this, a.jquery ? a[0] : a) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function(a, b) {
            return this.pushStack(_.unique(_.merge(this.get(), _(a, b))))
        },
        addBack: function(a) {
            return this.add(null == a ? this.prevObject : this.prevObject.filter(a))
        }
    }), _.each({
        parent: function(a) {
            var b = a.parentNode;
            return b && 11 !== b.nodeType ? b : null
        },
        parents: function(a) {
            return _.dir(a, "parentNode")
        },
        parentsUntil: function(a, b, c) {
            return _.dir(a, "parentNode", c)
        },
        next: function(a) {
            return e(a, "nextSibling")
        },
        prev: function(a) {
            return e(a, "previousSibling")
        },
        nextAll: function(a) {
            return _.dir(a, "nextSibling")
        },
        prevAll: function(a) {
            return _.dir(a, "previousSibling")
        },
        nextUntil: function(a, b, c) {
            return _.dir(a, "nextSibling", c)
        },
        prevUntil: function(a, b, c) {
            return _.dir(a, "previousSibling", c)
        },
        siblings: function(a) {
            return _.sibling((a.parentNode || {}).firstChild, a)
        },
        children: function(a) {
            return _.sibling(a.firstChild)
        },
        contents: function(a) {
            return a.contentDocument || _.merge([], a.childNodes)
        }
    }, function(a, b) {
        _.fn[a] = function(c, d) {
            var e = _.map(this, b, c);
            return "Until" !== a.slice(-5) && (d = c), d && "string" == typeof d && (e = _.filter(d, e)), this.length > 1 && (ma[a] || _.unique(e), la.test(a) && e.reverse()), this.pushStack(e)
        }
    });
    var na = /\S+/g,
        oa = {};
    _.Callbacks = function(a) {
        a = "string" == typeof a ? oa[a] || f(a) : _.extend({}, a);
        var b, c, d, e, g, h, i = [],
            j = !a.once && [],
            k = function(f) {
                for (b = a.memory && f, c = !0, h = e || 0, e = 0, g = i.length, d = !0; i && g > h; h++)
                    if (i[h].apply(f[0], f[1]) === !1 && a.stopOnFalse) {
                        b = !1;
                        break
                    }
                d = !1, i && (j ? j.length && k(j.shift()) : b ? i = [] : l.disable())
            },
            l = {
                add: function() {
                    if (i) {
                        var c = i.length;
                        ! function f(b) {
                            _.each(b, function(b, c) {
                                var d = _.type(c);
                                "function" === d ? a.unique && l.has(c) || i.push(c) : c && c.length && "string" !== d && f(c)
                            })
                        }(arguments), d ? g = i.length : b && (e = c, k(b))
                    }
                    return this
                },
                remove: function() {
                    return i && _.each(arguments, function(a, b) {
                        for (var c;
                            (c = _.inArray(b, i, c)) > -1;) i.splice(c, 1), d && (g >= c && g--, h >= c && h--)
                    }), this
                },
                has: function(a) {
                    return a ? _.inArray(a, i) > -1 : !(!i || !i.length)
                },
                empty: function() {
                    return i = [], g = 0, this
                },
                disable: function() {
                    return i = j = b = void 0, this
                },
                disabled: function() {
                    return !i
                },
                lock: function() {
                    return j = void 0, b || l.disable(), this
                },
                locked: function() {
                    return !j
                },
                fireWith: function(a, b) {
                    return !i || c && !j || (b = b || [], b = [a, b.slice ? b.slice() : b], d ? j.push(b) : k(b)), this
                },
                fire: function() {
                    return l.fireWith(this, arguments), this
                },
                fired: function() {
                    return !!c
                }
            };
        return l
    }, _.extend({
        Deferred: function(a) {
            var b = [
                    ["resolve", "done", _.Callbacks("once memory"), "resolved"],
                    ["reject", "fail", _.Callbacks("once memory"), "rejected"],
                    ["notify", "progress", _.Callbacks("memory")]
                ],
                c = "pending",
                d = {
                    state: function() {
                        return c
                    },
                    always: function() {
                        return e.done(arguments).fail(arguments), this
                    },
                    then: function() {
                        var a = arguments;
                        return _.Deferred(function(c) {
                            _.each(b, function(b, f) {
                                var g = _.isFunction(a[b]) && a[b];
                                e[f[1]](function() {
                                    var a = g && g.apply(this, arguments);
                                    a && _.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[f[0] + "With"](this === d ? c.promise() : this, g ? [a] : arguments)
                                })
                            }), a = null
                        }).promise()
                    },
                    promise: function(a) {
                        return null != a ? _.extend(a, d) : d
                    }
                },
                e = {};
            return d.pipe = d.then, _.each(b, function(a, f) {
                var g = f[2],
                    h = f[3];
                d[f[1]] = g.add, h && g.add(function() {
                    c = h
                }, b[1 ^ a][2].disable, b[2][2].lock), e[f[0]] = function() {
                    return e[f[0] + "With"](this === e ? d : this, arguments), this
                }, e[f[0] + "With"] = g.fireWith
            }), d.promise(e), a && a.call(e, e), e
        },
        when: function(a) {
            var b, c, d, e = 0,
                f = R.call(arguments),
                g = f.length,
                h = 1 !== g || a && _.isFunction(a.promise) ? g : 0,
                i = 1 === h ? a : _.Deferred(),
                j = function(a, c, d) {
                    return function(e) {
                        c[a] = this, d[a] = arguments.length > 1 ? R.call(arguments) : e, d === b ? i.notifyWith(c, d) : --h || i.resolveWith(c, d)
                    }
                };
            if (g > 1)
                for (b = new Array(g), c = new Array(g), d = new Array(g); g > e; e++) f[e] && _.isFunction(f[e].promise) ? f[e].promise().done(j(e, d, f)).fail(i.reject).progress(j(e, c, b)) : --h;
            return h || i.resolveWith(d, f), i.promise()
        }
    });
    var pa;
    _.fn.ready = function(a) {
        return _.ready.promise().done(a), this
    }, _.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(a) {
            a ? _.readyWait++ : _.ready(!0)
        },
        ready: function(a) {
            (a === !0 ? --_.readyWait : _.isReady) || (_.isReady = !0, a !== !0 && --_.readyWait > 0 || (pa.resolveWith(Z, [_]), _.fn.triggerHandler && (_(Z).triggerHandler("ready"), _(Z).off("ready"))))
        }
    }), _.ready.promise = function(b) {
        return pa || (pa = _.Deferred(), "complete" === Z.readyState ? setTimeout(_.ready) : (Z.addEventListener("DOMContentLoaded", g, !1), a.addEventListener("load", g, !1))), pa.promise(b)
    }, _.ready.promise();
    var qa = _.access = function(a, b, c, d, e, f, g) {
        var h = 0,
            i = a.length,
            j = null == c;
        if ("object" === _.type(c)) {
            e = !0;
            for (h in c) _.access(a, b, h, c[h], !0, f, g)
        } else if (void 0 !== d && (e = !0, _.isFunction(d) || (g = !0), j && (g ? (b.call(a, d), b = null) : (j = b, b = function(a, b, c) {
                return j.call(_(a), c)
            })), b))
            for (; i > h; h++) b(a[h], c, g ? d : d.call(a[h], h, b(a[h], c)));
        return e ? a : j ? b.call(a) : i ? b(a[0], c) : f
    };
    _.acceptData = function(a) {
        return 1 === a.nodeType || 9 === a.nodeType || !+a.nodeType
    }, h.uid = 1, h.accepts = _.acceptData, h.prototype = {
        key: function(a) {
            if (!h.accepts(a)) return 0;
            var b = {},
                c = a[this.expando];
            if (!c) {
                c = h.uid++;
                try {
                    b[this.expando] = {
                        value: c
                    }, Object.defineProperties(a, b)
                } catch (d) {
                    b[this.expando] = c, _.extend(a, b)
                }
            }
            return this.cache[c] || (this.cache[c] = {}), c
        },
        set: function(a, b, c) {
            var d, e = this.key(a),
                f = this.cache[e];
            if ("string" == typeof b) f[b] = c;
            else if (_.isEmptyObject(f)) _.extend(this.cache[e], b);
            else
                for (d in b) f[d] = b[d];
            return f
        },
        get: function(a, b) {
            var c = this.cache[this.key(a)];
            return void 0 === b ? c : c[b]
        },
        access: function(a, b, c) {
            var d;
            return void 0 === b || b && "string" == typeof b && void 0 === c ? (d = this.get(a, b), void 0 !== d ? d : this.get(a, _.camelCase(b))) : (this.set(a, b, c), void 0 !== c ? c : b)
        },
        remove: function(a, b) {
            var c, d, e, f = this.key(a),
                g = this.cache[f];
            if (void 0 === b) this.cache[f] = {};
            else {
                _.isArray(b) ? d = b.concat(b.map(_.camelCase)) : (e = _.camelCase(b), b in g ? d = [b, e] : (d = e, d = d in g ? [d] : d.match(na) || [])), c = d.length;
                for (; c--;) delete g[d[c]]
            }
        },
        hasData: function(a) {
            return !_.isEmptyObject(this.cache[a[this.expando]] || {})
        },
        discard: function(a) {
            a[this.expando] && delete this.cache[a[this.expando]]
        }
    };
    var ra = new h,
        sa = new h,
        ta = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        ua = /([A-Z])/g;
    _.extend({
        hasData: function(a) {
            return sa.hasData(a) || ra.hasData(a)
        },
        data: function(a, b, c) {
            return sa.access(a, b, c)
        },
        removeData: function(a, b) {
            sa.remove(a, b)
        },
        _data: function(a, b, c) {
            return ra.access(a, b, c)
        },
        _removeData: function(a, b) {
            ra.remove(a, b)
        }
    }), _.fn.extend({
        data: function(a, b) {
            var c, d, e, f = this[0],
                g = f && f.attributes;
            if (void 0 === a) {
                if (this.length && (e = sa.get(f), 1 === f.nodeType && !ra.get(f, "hasDataAttrs"))) {
                    for (c = g.length; c--;) g[c] && (d = g[c].name, 0 === d.indexOf("data-") && (d = _.camelCase(d.slice(5)), i(f, d, e[d])));
                    ra.set(f, "hasDataAttrs", !0)
                }
                return e
            }
            return "object" == typeof a ? this.each(function() {
                sa.set(this, a)
            }) : qa(this, function(b) {
                var c, d = _.camelCase(a);
                if (f && void 0 === b) {
                    if (c = sa.get(f, a), void 0 !== c) return c;
                    if (c = sa.get(f, d), void 0 !== c) return c;
                    if (c = i(f, d, void 0), void 0 !== c) return c
                } else this.each(function() {
                    var c = sa.get(this, d);
                    sa.set(this, d, b), -1 !== a.indexOf("-") && void 0 !== c && sa.set(this, a, b)
                })
            }, null, b, arguments.length > 1, null, !0)
        },
        removeData: function(a) {
            return this.each(function() {
                sa.remove(this, a)
            })
        }
    }), _.extend({
        queue: function(a, b, c) {
            var d;
            return a ? (b = (b || "fx") + "queue", d = ra.get(a, b), c && (!d || _.isArray(c) ? d = ra.access(a, b, _.makeArray(c)) : d.push(c)), d || []) : void 0
        },
        dequeue: function(a, b) {
            b = b || "fx";
            var c = _.queue(a, b),
                d = c.length,
                e = c.shift(),
                f = _._queueHooks(a, b),
                g = function() {
                    _.dequeue(a, b)
                };
            "inprogress" === e && (e = c.shift(), d--), e && ("fx" === b && c.unshift("inprogress"), delete f.stop, e.call(a, g, f)), !d && f && f.empty.fire()
        },
        _queueHooks: function(a, b) {
            var c = b + "queueHooks";
            return ra.get(a, c) || ra.access(a, c, {
                empty: _.Callbacks("once memory").add(function() {
                    ra.remove(a, [b + "queue", c])
                })
            })
        }
    }), _.fn.extend({
        queue: function(a, b) {
            var c = 2;
            return "string" != typeof a && (b = a, a = "fx", c--), arguments.length < c ? _.queue(this[0], a) : void 0 === b ? this : this.each(function() {
                var c = _.queue(this, a, b);
                _._queueHooks(this, a), "fx" === a && "inprogress" !== c[0] && _.dequeue(this, a)
            })
        },
        dequeue: function(a) {
            return this.each(function() {
                _.dequeue(this, a)
            })
        },
        clearQueue: function(a) {
            return this.queue(a || "fx", [])
        },
        promise: function(a, b) {
            var c, d = 1,
                e = _.Deferred(),
                f = this,
                g = this.length,
                h = function() {
                    --d || e.resolveWith(f, [f])
                };
            for ("string" != typeof a && (b = a, a = void 0), a = a || "fx"; g--;) c = ra.get(f[g], a + "queueHooks"), c && c.empty && (d++, c.empty.add(h));
            return h(), e.promise(b)
        }
    });
    var va = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        wa = ["Top", "Right", "Bottom", "Left"],
        xa = function(a, b) {
            return a = b || a, "none" === _.css(a, "display") || !_.contains(a.ownerDocument, a)
        },
        ya = /^(?:checkbox|radio)$/i;
    ! function() {
        var a = Z.createDocumentFragment(),
            b = a.appendChild(Z.createElement("div")),
            c = Z.createElement("input");
        c.setAttribute("type", "radio"), c.setAttribute("checked", "checked"), c.setAttribute("name", "t"), b.appendChild(c), Y.checkClone = b.cloneNode(!0).cloneNode(!0).lastChild.checked, b.innerHTML = "<textarea>x</textarea>", Y.noCloneChecked = !!b.cloneNode(!0).lastChild.defaultValue
    }();
    var za = "undefined";
    Y.focusinBubbles = "onfocusin" in a;
    var Aa = /^key/,
        Ba = /^(?:mouse|pointer|contextmenu)|click/,
        Ca = /^(?:focusinfocus|focusoutblur)$/,
        Da = /^([^.]*)(?:\.(.+)|)$/;
    _.event = {
        global: {},
        add: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q = ra.get(a);
            if (q)
                for (c.handler && (f = c, c = f.handler, e = f.selector), c.guid || (c.guid = _.guid++), (i = q.events) || (i = q.events = {}), (g = q.handle) || (g = q.handle = function(b) {
                        return typeof _ !== za && _.event.triggered !== b.type ? _.event.dispatch.apply(a, arguments) : void 0
                    }), b = (b || "").match(na) || [""], j = b.length; j--;) h = Da.exec(b[j]) || [], n = p = h[1], o = (h[2] || "").split(".").sort(), n && (l = _.event.special[n] || {}, n = (e ? l.delegateType : l.bindType) || n, l = _.event.special[n] || {}, k = _.extend({
                    type: n,
                    origType: p,
                    data: d,
                    handler: c,
                    guid: c.guid,
                    selector: e,
                    needsContext: e && _.expr.match.needsContext.test(e),
                    namespace: o.join(".")
                }, f), (m = i[n]) || (m = i[n] = [], m.delegateCount = 0, l.setup && l.setup.call(a, d, o, g) !== !1 || a.addEventListener && a.addEventListener(n, g, !1)), l.add && (l.add.call(a, k), k.handler.guid || (k.handler.guid = c.guid)), e ? m.splice(m.delegateCount++, 0, k) : m.push(k), _.event.global[n] = !0)
        },
        remove: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q = ra.hasData(a) && ra.get(a);
            if (q && (i = q.events)) {
                for (b = (b || "").match(na) || [""], j = b.length; j--;)
                    if (h = Da.exec(b[j]) || [], n = p = h[1], o = (h[2] || "").split(".").sort(), n) {
                        for (l = _.event.special[n] || {}, n = (d ? l.delegateType : l.bindType) || n, m = i[n] || [], h = h[2] && new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)"), g = f = m.length; f--;) k = m[f], !e && p !== k.origType || c && c.guid !== k.guid || h && !h.test(k.namespace) || d && d !== k.selector && ("**" !== d || !k.selector) || (m.splice(f, 1), k.selector && m.delegateCount--, l.remove && l.remove.call(a, k));
                        g && !m.length && (l.teardown && l.teardown.call(a, o, q.handle) !== !1 || _.removeEvent(a, n, q.handle), delete i[n])
                    } else
                        for (n in i) _.event.remove(a, n + b[j], c, d, !0);
                _.isEmptyObject(i) && (delete q.handle, ra.remove(a, "events"))
            }
        },
        trigger: function(b, c, d, e) {
            var f, g, h, i, j, k, l, m = [d || Z],
                n = X.call(b, "type") ? b.type : b,
                o = X.call(b, "namespace") ? b.namespace.split(".") : [];
            if (g = h = d = d || Z, 3 !== d.nodeType && 8 !== d.nodeType && !Ca.test(n + _.event.triggered) && (n.indexOf(".") >= 0 && (o = n.split("."), n = o.shift(), o.sort()), j = n.indexOf(":") < 0 && "on" + n, b = b[_.expando] ? b : new _.Event(n, "object" == typeof b && b), b.isTrigger = e ? 2 : 3, b.namespace = o.join("."), b.namespace_re = b.namespace ? new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, b.result = void 0, b.target || (b.target = d), c = null == c ? [b] : _.makeArray(c, [b]), l = _.event.special[n] || {}, e || !l.trigger || l.trigger.apply(d, c) !== !1)) {
                if (!e && !l.noBubble && !_.isWindow(d)) {
                    for (i = l.delegateType || n, Ca.test(i + n) || (g = g.parentNode); g; g = g.parentNode) m.push(g), h = g;
                    h === (d.ownerDocument || Z) && m.push(h.defaultView || h.parentWindow || a)
                }
                for (f = 0;
                    (g = m[f++]) && !b.isPropagationStopped();) b.type = f > 1 ? i : l.bindType || n, k = (ra.get(g, "events") || {})[b.type] && ra.get(g, "handle"), k && k.apply(g, c), k = j && g[j], k && k.apply && _.acceptData(g) && (b.result = k.apply(g, c), b.result === !1 && b.preventDefault());
                return b.type = n, e || b.isDefaultPrevented() || l._default && l._default.apply(m.pop(), c) !== !1 || !_.acceptData(d) || j && _.isFunction(d[n]) && !_.isWindow(d) && (h = d[j], h && (d[j] = null), _.event.triggered = n, d[n](), _.event.triggered = void 0, h && (d[j] = h)), b.result
            }
        },
        dispatch: function(a) {
            a = _.event.fix(a);
            var b, c, d, e, f, g = [],
                h = R.call(arguments),
                i = (ra.get(this, "events") || {})[a.type] || [],
                j = _.event.special[a.type] || {};
            if (h[0] = a, a.delegateTarget = this, !j.preDispatch || j.preDispatch.call(this, a) !== !1) {
                for (g = _.event.handlers.call(this, a, i), b = 0;
                    (e = g[b++]) && !a.isPropagationStopped();)
                    for (a.currentTarget = e.elem, c = 0;
                        (f = e.handlers[c++]) && !a.isImmediatePropagationStopped();)(!a.namespace_re || a.namespace_re.test(f.namespace)) && (a.handleObj = f, a.data = f.data, d = ((_.event.special[f.origType] || {}).handle || f.handler).apply(e.elem, h), void 0 !== d && (a.result = d) === !1 && (a.preventDefault(), a.stopPropagation()));
                return j.postDispatch && j.postDispatch.call(this, a), a.result
            }
        },
        handlers: function(a, b) {
            var c, d, e, f, g = [],
                h = b.delegateCount,
                i = a.target;
            if (h && i.nodeType && (!a.button || "click" !== a.type))
                for (; i !== this; i = i.parentNode || this)
                    if (i.disabled !== !0 || "click" !== a.type) {
                        for (d = [], c = 0; h > c; c++) f = b[c], e = f.selector + " ", void 0 === d[e] && (d[e] = f.needsContext ? _(e, this).index(i) >= 0 : _.find(e, this, null, [i]).length), d[e] && d.push(f);
                        d.length && g.push({
                            elem: i,
                            handlers: d
                        })
                    }
            return h < b.length && g.push({
                elem: this,
                handlers: b.slice(h)
            }), g
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(a, b) {
                return null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode), a
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(a, b) {
                var c, d, e, f = b.button;
                return null == a.pageX && null != b.clientX && (c = a.target.ownerDocument || Z, d = c.documentElement, e = c.body, a.pageX = b.clientX + (d && d.scrollLeft || e && e.scrollLeft || 0) - (d && d.clientLeft || e && e.clientLeft || 0), a.pageY = b.clientY + (d && d.scrollTop || e && e.scrollTop || 0) - (d && d.clientTop || e && e.clientTop || 0)), a.which || void 0 === f || (a.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0), a
            }
        },
        fix: function(a) {
            if (a[_.expando]) return a;
            var b, c, d, e = a.type,
                f = a,
                g = this.fixHooks[e];
            for (g || (this.fixHooks[e] = g = Ba.test(e) ? this.mouseHooks : Aa.test(e) ? this.keyHooks : {}), d = g.props ? this.props.concat(g.props) : this.props, a = new _.Event(f), b = d.length; b--;) c = d[b], a[c] = f[c];
            return a.target || (a.target = Z), 3 === a.target.nodeType && (a.target = a.target.parentNode), g.filter ? g.filter(a, f) : a
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    return this !== l() && this.focus ? (this.focus(), !1) : void 0
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    return this === l() && this.blur ? (this.blur(), !1) : void 0
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    return "checkbox" === this.type && this.click && _.nodeName(this, "input") ? (this.click(), !1) : void 0
                },
                _default: function(a) {
                    return _.nodeName(a.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function(a) {
                    void 0 !== a.result && a.originalEvent && (a.originalEvent.returnValue = a.result)
                }
            }
        },
        simulate: function(a, b, c, d) {
            var e = _.extend(new _.Event, c, {
                type: a,
                isSimulated: !0,
                originalEvent: {}
            });
            d ? _.event.trigger(e, null, b) : _.event.dispatch.call(b, e), e.isDefaultPrevented() && c.preventDefault()
        }
    }, _.removeEvent = function(a, b, c) {
        a.removeEventListener && a.removeEventListener(b, c, !1)
    }, _.Event = function(a, b) {
        return this instanceof _.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || void 0 === a.defaultPrevented && a.returnValue === !1 ? j : k) : this.type = a, b && _.extend(this, b), this.timeStamp = a && a.timeStamp || _.now(), void(this[_.expando] = !0)) : new _.Event(a, b)
    }, _.Event.prototype = {
        isDefaultPrevented: k,
        isPropagationStopped: k,
        isImmediatePropagationStopped: k,
        preventDefault: function() {
            var a = this.originalEvent;
            this.isDefaultPrevented = j, a && a.preventDefault && a.preventDefault()
        },
        stopPropagation: function() {
            var a = this.originalEvent;
            this.isPropagationStopped = j, a && a.stopPropagation && a.stopPropagation()
        },
        stopImmediatePropagation: function() {
            var a = this.originalEvent;
            this.isImmediatePropagationStopped = j, a && a.stopImmediatePropagation && a.stopImmediatePropagation(), this.stopPropagation()
        }
    }, _.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function(a, b) {
        _.event.special[a] = {
            delegateType: b,
            bindType: b,
            handle: function(a) {
                var c, d = this,
                    e = a.relatedTarget,
                    f = a.handleObj;
                return (!e || e !== d && !_.contains(d, e)) && (a.type = f.origType, c = f.handler.apply(this, arguments), a.type = b), c
            }
        }
    }), Y.focusinBubbles || _.each({
        focus: "focusin",
        blur: "focusout"
    }, function(a, b) {
        var c = function(a) {
            _.event.simulate(b, a.target, _.event.fix(a), !0)
        };
        _.event.special[b] = {
            setup: function() {
                var d = this.ownerDocument || this,
                    e = ra.access(d, b);
                e || d.addEventListener(a, c, !0), ra.access(d, b, (e || 0) + 1)
            },
            teardown: function() {
                var d = this.ownerDocument || this,
                    e = ra.access(d, b) - 1;
                e ? ra.access(d, b, e) : (d.removeEventListener(a, c, !0), ra.remove(d, b))
            }
        }
    }), _.fn.extend({
        on: function(a, b, c, d, e) {
            var f, g;
            if ("object" == typeof a) {
                "string" != typeof b && (c = c || b, b = void 0);
                for (g in a) this.on(g, b, c, a[g], e);
                return this
            }
            if (null == c && null == d ? (d = b, c = b = void 0) : null == d && ("string" == typeof b ? (d = c, c = void 0) : (d = c, c = b, b = void 0)), d === !1) d = k;
            else if (!d) return this;
            return 1 === e && (f = d, d = function(a) {
                return _().off(a), f.apply(this, arguments)
            }, d.guid = f.guid || (f.guid = _.guid++)), this.each(function() {
                _.event.add(this, a, d, c, b)
            })
        },
        one: function(a, b, c, d) {
            return this.on(a, b, c, d, 1)
        },
        off: function(a, b, c) {
            var d, e;
            if (a && a.preventDefault && a.handleObj) return d = a.handleObj, _(a.delegateTarget).off(d.namespace ? d.origType + "." + d.namespace : d.origType, d.selector, d.handler), this;
            if ("object" == typeof a) {
                for (e in a) this.off(e, b, a[e]);
                return this
            }
            return (b === !1 || "function" == typeof b) && (c = b, b = void 0), c === !1 && (c = k), this.each(function() {
                _.event.remove(this, a, c, b)
            })
        },
        trigger: function(a, b) {
            return this.each(function() {
                _.event.trigger(a, b, this)
            })
        },
        triggerHandler: function(a, b) {
            var c = this[0];
            return c ? _.event.trigger(a, b, c, !0) : void 0
        }
    });
    var Ea = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        Fa = /<([\w:]+)/,
        Ga = /<|&#?\w+;/,
        Ha = /<(?:script|style|link)/i,
        Ia = /checked\s*(?:[^=]|=\s*.checked.)/i,
        Ja = /^$|\/(?:java|ecma)script/i,
        Ka = /^true\/(.*)/,
        La = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
        Ma = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
    Ma.optgroup = Ma.option, Ma.tbody = Ma.tfoot = Ma.colgroup = Ma.caption = Ma.thead, Ma.th = Ma.td, _.extend({
        clone: function(a, b, c) {
            var d, e, f, g, h = a.cloneNode(!0),
                i = _.contains(a.ownerDocument, a);
            if (!(Y.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || _.isXMLDoc(a)))
                for (g = r(h), f = r(a), d = 0, e = f.length; e > d; d++) s(f[d], g[d]);
            if (b)
                if (c)
                    for (f = f || r(a), g = g || r(h), d = 0, e = f.length; e > d; d++) q(f[d], g[d]);
                else q(a, h);
            return g = r(h, "script"), g.length > 0 && p(g, !i && r(a, "script")), h
        },
        buildFragment: function(a, b, c, d) {
            for (var e, f, g, h, i, j, k = b.createDocumentFragment(), l = [], m = 0, n = a.length; n > m; m++)
                if (e = a[m], e || 0 === e)
                    if ("object" === _.type(e)) _.merge(l, e.nodeType ? [e] : e);
                    else if (Ga.test(e)) {
                for (f = f || k.appendChild(b.createElement("div")), g = (Fa.exec(e) || ["", ""])[1].toLowerCase(), h = Ma[g] || Ma._default, f.innerHTML = h[1] + e.replace(Ea, "<$1></$2>") + h[2], j = h[0]; j--;) f = f.lastChild;
                _.merge(l, f.childNodes), f = k.firstChild, f.textContent = ""
            } else l.push(b.createTextNode(e));
            for (k.textContent = "", m = 0; e = l[m++];)
                if ((!d || -1 === _.inArray(e, d)) && (i = _.contains(e.ownerDocument, e), f = r(k.appendChild(e), "script"), i && p(f), c))
                    for (j = 0; e = f[j++];) Ja.test(e.type || "") && c.push(e);
            return k
        },
        cleanData: function(a) {
            for (var b, c, d, e, f = _.event.special, g = 0; void 0 !== (c = a[g]); g++) {
                if (_.acceptData(c) && (e = c[ra.expando], e && (b = ra.cache[e]))) {
                    if (b.events)
                        for (d in b.events) f[d] ? _.event.remove(c, d) : _.removeEvent(c, d, b.handle);
                    ra.cache[e] && delete ra.cache[e]
                }
                delete sa.cache[c[sa.expando]]
            }
        }
    }), _.fn.extend({
        text: function(a) {
            return qa(this, function(a) {
                return void 0 === a ? _.text(this) : this.empty().each(function() {
                    (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = a)
                })
            }, null, a, arguments.length)
        },
        append: function() {
            return this.domManip(arguments, function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = m(this, a);
                    b.appendChild(a)
                }
            })
        },
        prepend: function() {
            return this.domManip(arguments, function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = m(this, a);
                    b.insertBefore(a, b.firstChild)
                }
            })
        },
        before: function() {
            return this.domManip(arguments, function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this)
            })
        },
        after: function() {
            return this.domManip(arguments, function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this.nextSibling)
            })
        },
        remove: function(a, b) {
            for (var c, d = a ? _.filter(a, this) : this, e = 0; null != (c = d[e]); e++) b || 1 !== c.nodeType || _.cleanData(r(c)), c.parentNode && (b && _.contains(c.ownerDocument, c) && p(r(c, "script")), c.parentNode.removeChild(c));
            return this
        },
        empty: function() {
            for (var a, b = 0; null != (a = this[b]); b++) 1 === a.nodeType && (_.cleanData(r(a, !1)), a.textContent = "");
            return this
        },
        clone: function(a, b) {
            return a = null == a ? !1 : a, b = null == b ? a : b, this.map(function() {
                return _.clone(this, a, b)
            })
        },
        html: function(a) {
            return qa(this, function(a) {
                var b = this[0] || {},
                    c = 0,
                    d = this.length;
                if (void 0 === a && 1 === b.nodeType) return b.innerHTML;
                if ("string" == typeof a && !Ha.test(a) && !Ma[(Fa.exec(a) || ["", ""])[1].toLowerCase()]) {
                    a = a.replace(Ea, "<$1></$2>");
                    try {
                        for (; d > c; c++) b = this[c] || {}, 1 === b.nodeType && (_.cleanData(r(b, !1)), b.innerHTML = a);
                        b = 0
                    } catch (e) {}
                }
                b && this.empty().append(a)
            }, null, a, arguments.length)
        },
        replaceWith: function() {
            var a = arguments[0];
            return this.domManip(arguments, function(b) {
                a = this.parentNode, _.cleanData(r(this)), a && a.replaceChild(b, this)
            }), a && (a.length || a.nodeType) ? this : this.remove()
        },
        detach: function(a) {
            return this.remove(a, !0)
        },
        domManip: function(a, b) {
            a = S.apply([], a);
            var c, d, e, f, g, h, i = 0,
                j = this.length,
                k = this,
                l = j - 1,
                m = a[0],
                p = _.isFunction(m);
            if (p || j > 1 && "string" == typeof m && !Y.checkClone && Ia.test(m)) return this.each(function(c) {
                var d = k.eq(c);
                p && (a[0] = m.call(this, c, d.html())), d.domManip(a, b)
            });
            if (j && (c = _.buildFragment(a, this[0].ownerDocument, !1, this), d = c.firstChild, 1 === c.childNodes.length && (c = d), d)) {
                for (e = _.map(r(c, "script"), n), f = e.length; j > i; i++) g = c, i !== l && (g = _.clone(g, !0, !0), f && _.merge(e, r(g, "script"))), b.call(this[i], g, i);
                if (f)
                    for (h = e[e.length - 1].ownerDocument, _.map(e, o), i = 0; f > i; i++) g = e[i], Ja.test(g.type || "") && !ra.access(g, "globalEval") && _.contains(h, g) && (g.src ? _._evalUrl && _._evalUrl(g.src) : _.globalEval(g.textContent.replace(La, "")))
            }
            return this
        }
    }), _.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(a, b) {
        _.fn[a] = function(a) {
            for (var c, d = [], e = _(a), f = e.length - 1, g = 0; f >= g; g++) c = g === f ? this : this.clone(!0), _(e[g])[b](c), T.apply(d, c.get());
            return this.pushStack(d)
        }
    });
    var Na, Oa = {},
        Pa = /^margin/,
        Qa = new RegExp("^(" + va + ")(?!px)[a-z%]+$", "i"),
        Ra = function(b) {
            return b.ownerDocument.defaultView.opener ? b.ownerDocument.defaultView.getComputedStyle(b, null) : a.getComputedStyle(b, null)
        };
    ! function() {
        function b() {
            g.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", g.innerHTML = "", e.appendChild(f);
            var b = a.getComputedStyle(g, null);
            c = "1%" !== b.top, d = "4px" === b.width, e.removeChild(f)
        }
        var c, d, e = Z.documentElement,
            f = Z.createElement("div"),
            g = Z.createElement("div");
        g.style && (g.style.backgroundClip = "content-box", g.cloneNode(!0).style.backgroundClip = "", Y.clearCloneStyle = "content-box" === g.style.backgroundClip, f.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", f.appendChild(g), a.getComputedStyle && _.extend(Y, {
            pixelPosition: function() {
                return b(), c
            },
            boxSizingReliable: function() {
                return null == d && b(), d
            },
            reliableMarginRight: function() {
                var b, c = g.appendChild(Z.createElement("div"));
                return c.style.cssText = g.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", c.style.marginRight = c.style.width = "0", g.style.width = "1px", e.appendChild(f), b = !parseFloat(a.getComputedStyle(c, null).marginRight), e.removeChild(f), g.removeChild(c), b
            }
        }))
    }(), _.swap = function(a, b, c, d) {
        var e, f, g = {};
        for (f in b) g[f] = a.style[f], a.style[f] = b[f];
        e = c.apply(a, d || []);
        for (f in b) a.style[f] = g[f];
        return e
    };
    var Sa = /^(none|table(?!-c[ea]).+)/,
        Ta = new RegExp("^(" + va + ")(.*)$", "i"),
        Ua = new RegExp("^([+-])=(" + va + ")", "i"),
        Va = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        },
        Wa = {
            letterSpacing: "0",
            fontWeight: "400"
        },
        Xa = ["Webkit", "O", "Moz", "ms"];
    _.extend({
        cssHooks: {
            opacity: {
                get: function(a, b) {
                    if (b) {
                        var c = v(a, "opacity");
                        return "" === c ? "1" : c
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": "cssFloat"
        },
        style: function(a, b, c, d) {
            if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
                var e, f, g, h = _.camelCase(b),
                    i = a.style;
                return b = _.cssProps[h] || (_.cssProps[h] = x(i, h)), g = _.cssHooks[b] || _.cssHooks[h], void 0 === c ? g && "get" in g && void 0 !== (e = g.get(a, !1, d)) ? e : i[b] : (f = typeof c, "string" === f && (e = Ua.exec(c)) && (c = (e[1] + 1) * e[2] + parseFloat(_.css(a, b)), f = "number"), void(null != c && c === c && ("number" !== f || _.cssNumber[h] || (c += "px"), Y.clearCloneStyle || "" !== c || 0 !== b.indexOf("background") || (i[b] = "inherit"), g && "set" in g && void 0 === (c = g.set(a, c, d)) || (i[b] = c))))
            }
        },
        css: function(a, b, c, d) {
            var e, f, g, h = _.camelCase(b);
            return b = _.cssProps[h] || (_.cssProps[h] = x(a.style, h)), g = _.cssHooks[b] || _.cssHooks[h], g && "get" in g && (e = g.get(a, !0, c)), void 0 === e && (e = v(a, b, d)), "normal" === e && b in Wa && (e = Wa[b]), "" === c || c ? (f = parseFloat(e), c === !0 || _.isNumeric(f) ? f || 0 : e) : e
        }
    }), _.each(["height", "width"], function(a, b) {
        _.cssHooks[b] = {
            get: function(a, c, d) {
                return c ? Sa.test(_.css(a, "display")) && 0 === a.offsetWidth ? _.swap(a, Va, function() {
                    return A(a, b, d)
                }) : A(a, b, d) : void 0
            },
            set: function(a, c, d) {
                var e = d && Ra(a);
                return y(a, c, d ? z(a, b, d, "border-box" === _.css(a, "boxSizing", !1, e), e) : 0)
            }
        }
    }), _.cssHooks.marginRight = w(Y.reliableMarginRight, function(a, b) {
        return b ? _.swap(a, {
            display: "inline-block"
        }, v, [a, "marginRight"]) : void 0
    }), _.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(a, b) {
        _.cssHooks[a + b] = {
            expand: function(c) {
                for (var d = 0, e = {}, f = "string" == typeof c ? c.split(" ") : [c]; 4 > d; d++) e[a + wa[d] + b] = f[d] || f[d - 2] || f[0];
                return e
            }
        }, Pa.test(a) || (_.cssHooks[a + b].set = y)
    }), _.fn.extend({
        css: function(a, b) {
            return qa(this, function(a, b, c) {
                var d, e, f = {},
                    g = 0;
                if (_.isArray(b)) {
                    for (d = Ra(a), e = b.length; e > g; g++) f[b[g]] = _.css(a, b[g], !1, d);
                    return f
                }
                return void 0 !== c ? _.style(a, b, c) : _.css(a, b)
            }, a, b, arguments.length > 1)
        },
        show: function() {
            return B(this, !0)
        },
        hide: function() {
            return B(this)
        },
        toggle: function(a) {
            return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function() {
                xa(this) ? _(this).show() : _(this).hide()
            })
        }
    }), _.Tween = C, C.prototype = {
        constructor: C,
        init: function(a, b, c, d, e, f) {
            this.elem = a, this.prop = c, this.easing = e || "swing", this.options = b, this.start = this.now = this.cur(), this.end = d, this.unit = f || (_.cssNumber[c] ? "" : "px")
        },
        cur: function() {
            var a = C.propHooks[this.prop];
            return a && a.get ? a.get(this) : C.propHooks._default.get(this)
        },
        run: function(a) {
            var b, c = C.propHooks[this.prop];
            return this.options.duration ? this.pos = b = _.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : this.pos = b = a, this.now = (this.end - this.start) * b + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), c && c.set ? c.set(this) : C.propHooks._default.set(this), this
        }
    }, C.prototype.init.prototype = C.prototype, C.propHooks = {
        _default: {
            get: function(a) {
                var b;
                return null == a.elem[a.prop] || a.elem.style && null != a.elem.style[a.prop] ? (b = _.css(a.elem, a.prop, ""), b && "auto" !== b ? b : 0) : a.elem[a.prop]
            },
            set: function(a) {
                _.fx.step[a.prop] ? _.fx.step[a.prop](a) : a.elem.style && (null != a.elem.style[_.cssProps[a.prop]] || _.cssHooks[a.prop]) ? _.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now
            }
        }
    }, C.propHooks.scrollTop = C.propHooks.scrollLeft = {
        set: function(a) {
            a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now)
        }
    }, _.easing = {
        linear: function(a) {
            return a
        },
        swing: function(a) {
            return .5 - Math.cos(a * Math.PI) / 2
        }
    }, _.fx = C.prototype.init, _.fx.step = {};
    var Ya, Za, $a = /^(?:toggle|show|hide)$/,
        _a = new RegExp("^(?:([+-])=|)(" + va + ")([a-z%]*)$", "i"),
        ab = /queueHooks$/,
        bb = [G],
        cb = {
            "*": [function(a, b) {
                var c = this.createTween(a, b),
                    d = c.cur(),
                    e = _a.exec(b),
                    f = e && e[3] || (_.cssNumber[a] ? "" : "px"),
                    g = (_.cssNumber[a] || "px" !== f && +d) && _a.exec(_.css(c.elem, a)),
                    h = 1,
                    i = 20;
                if (g && g[3] !== f) {
                    f = f || g[3], e = e || [], g = +d || 1;
                    do h = h || ".5", g /= h, _.style(c.elem, a, g + f); while (h !== (h = c.cur() / d) && 1 !== h && --i)
                }
                return e && (g = c.start = +g || +d || 0, c.unit = f, c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2]), c
            }]
        };
    _.Animation = _.extend(I, {
            tweener: function(a, b) {
                _.isFunction(a) ? (b = a, a = ["*"]) : a = a.split(" ");
                for (var c, d = 0, e = a.length; e > d; d++) c = a[d], cb[c] = cb[c] || [], cb[c].unshift(b)
            },
            prefilter: function(a, b) {
                b ? bb.unshift(a) : bb.push(a)
            }
        }), _.speed = function(a, b, c) {
            var d = a && "object" == typeof a ? _.extend({}, a) : {
                complete: c || !c && b || _.isFunction(a) && a,
                duration: a,
                easing: c && b || b && !_.isFunction(b) && b
            };
            return d.duration = _.fx.off ? 0 : "number" == typeof d.duration ? d.duration : d.duration in _.fx.speeds ? _.fx.speeds[d.duration] : _.fx.speeds._default, (null == d.queue || d.queue === !0) && (d.queue = "fx"), d.old = d.complete, d.complete = function() {
                _.isFunction(d.old) && d.old.call(this), d.queue && _.dequeue(this, d.queue)
            }, d
        }, _.fn.extend({
            fadeTo: function(a, b, c, d) {
                return this.filter(xa).css("opacity", 0).show().end().animate({
                    opacity: b
                }, a, c, d)
            },
            animate: function(a, b, c, d) {
                var e = _.isEmptyObject(a),
                    f = _.speed(b, c, d),
                    g = function() {
                        var b = I(this, _.extend({}, a), f);
                        (e || ra.get(this, "finish")) && b.stop(!0)
                    };
                return g.finish = g, e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g)
            },
            stop: function(a, b, c) {
                var d = function(a) {
                    var b = a.stop;
                    delete a.stop, b(c)
                };
                return "string" != typeof a && (c = b, b = a, a = void 0), b && a !== !1 && this.queue(a || "fx", []), this.each(function() {
                    var b = !0,
                        e = null != a && a + "queueHooks",
                        f = _.timers,
                        g = ra.get(this);
                    if (e) g[e] && g[e].stop && d(g[e]);
                    else
                        for (e in g) g[e] && g[e].stop && ab.test(e) && d(g[e]);
                    for (e = f.length; e--;) f[e].elem !== this || null != a && f[e].queue !== a || (f[e].anim.stop(c), b = !1, f.splice(e, 1));
                    (b || !c) && _.dequeue(this, a)
                })
            },
            finish: function(a) {
                return a !== !1 && (a = a || "fx"), this.each(function() {
                    var b, c = ra.get(this),
                        d = c[a + "queue"],
                        e = c[a + "queueHooks"],
                        f = _.timers,
                        g = d ? d.length : 0;
                    for (c.finish = !0, _.queue(this, a, []),
                        e && e.stop && e.stop.call(this, !0), b = f.length; b--;) f[b].elem === this && f[b].queue === a && (f[b].anim.stop(!0), f.splice(b, 1));
                    for (b = 0; g > b; b++) d[b] && d[b].finish && d[b].finish.call(this);
                    delete c.finish
                })
            }
        }), _.each(["toggle", "show", "hide"], function(a, b) {
            var c = _.fn[b];
            _.fn[b] = function(a, d, e) {
                return null == a || "boolean" == typeof a ? c.apply(this, arguments) : this.animate(E(b, !0), a, d, e)
            }
        }), _.each({
            slideDown: E("show"),
            slideUp: E("hide"),
            slideToggle: E("toggle"),
            fadeIn: {
                opacity: "show"
            },
            fadeOut: {
                opacity: "hide"
            },
            fadeToggle: {
                opacity: "toggle"
            }
        }, function(a, b) {
            _.fn[a] = function(a, c, d) {
                return this.animate(b, a, c, d)
            }
        }), _.timers = [], _.fx.tick = function() {
            var a, b = 0,
                c = _.timers;
            for (Ya = _.now(); b < c.length; b++) a = c[b], a() || c[b] !== a || c.splice(b--, 1);
            c.length || _.fx.stop(), Ya = void 0
        }, _.fx.timer = function(a) {
            _.timers.push(a), a() ? _.fx.start() : _.timers.pop()
        }, _.fx.interval = 13, _.fx.start = function() {
            Za || (Za = setInterval(_.fx.tick, _.fx.interval))
        }, _.fx.stop = function() {
            clearInterval(Za), Za = null
        }, _.fx.speeds = {
            slow: 600,
            fast: 200,
            _default: 400
        }, _.fn.delay = function(a, b) {
            return a = _.fx ? _.fx.speeds[a] || a : a, b = b || "fx", this.queue(b, function(b, c) {
                var d = setTimeout(b, a);
                c.stop = function() {
                    clearTimeout(d)
                }
            })
        },
        function() {
            var a = Z.createElement("input"),
                b = Z.createElement("select"),
                c = b.appendChild(Z.createElement("option"));
            a.type = "checkbox", Y.checkOn = "" !== a.value, Y.optSelected = c.selected, b.disabled = !0, Y.optDisabled = !c.disabled, a = Z.createElement("input"), a.value = "t", a.type = "radio", Y.radioValue = "t" === a.value
        }();
    var db, eb, fb = _.expr.attrHandle;
    _.fn.extend({
        attr: function(a, b) {
            return qa(this, _.attr, a, b, arguments.length > 1)
        },
        removeAttr: function(a) {
            return this.each(function() {
                _.removeAttr(this, a)
            })
        }
    }), _.extend({
        attr: function(a, b, c) {
            var d, e, f = a.nodeType;
            return a && 3 !== f && 8 !== f && 2 !== f ? typeof a.getAttribute === za ? _.prop(a, b, c) : (1 === f && _.isXMLDoc(a) || (b = b.toLowerCase(), d = _.attrHooks[b] || (_.expr.match.bool.test(b) ? eb : db)), void 0 === c ? d && "get" in d && null !== (e = d.get(a, b)) ? e : (e = _.find.attr(a, b), null == e ? void 0 : e) : null !== c ? d && "set" in d && void 0 !== (e = d.set(a, c, b)) ? e : (a.setAttribute(b, c + ""), c) : void _.removeAttr(a, b)) : void 0
        },
        removeAttr: function(a, b) {
            var c, d, e = 0,
                f = b && b.match(na);
            if (f && 1 === a.nodeType)
                for (; c = f[e++];) d = _.propFix[c] || c, _.expr.match.bool.test(c) && (a[d] = !1), a.removeAttribute(c)
        },
        attrHooks: {
            type: {
                set: function(a, b) {
                    if (!Y.radioValue && "radio" === b && _.nodeName(a, "input")) {
                        var c = a.value;
                        return a.setAttribute("type", b), c && (a.value = c), b
                    }
                }
            }
        }
    }), eb = {
        set: function(a, b, c) {
            return b === !1 ? _.removeAttr(a, c) : a.setAttribute(c, c), c
        }
    }, _.each(_.expr.match.bool.source.match(/\w+/g), function(a, b) {
        var c = fb[b] || _.find.attr;
        fb[b] = function(a, b, d) {
            var e, f;
            return d || (f = fb[b], fb[b] = e, e = null != c(a, b, d) ? b.toLowerCase() : null, fb[b] = f), e
        }
    });
    var gb = /^(?:input|select|textarea|button)$/i;
    _.fn.extend({
        prop: function(a, b) {
            return qa(this, _.prop, a, b, arguments.length > 1)
        },
        removeProp: function(a) {
            return this.each(function() {
                delete this[_.propFix[a] || a]
            })
        }
    }), _.extend({
        propFix: {
            "for": "htmlFor",
            "class": "className"
        },
        prop: function(a, b, c) {
            var d, e, f, g = a.nodeType;
            return a && 3 !== g && 8 !== g && 2 !== g ? (f = 1 !== g || !_.isXMLDoc(a), f && (b = _.propFix[b] || b, e = _.propHooks[b]), void 0 !== c ? e && "set" in e && void 0 !== (d = e.set(a, c, b)) ? d : a[b] = c : e && "get" in e && null !== (d = e.get(a, b)) ? d : a[b]) : void 0
        },
        propHooks: {
            tabIndex: {
                get: function(a) {
                    return a.hasAttribute("tabindex") || gb.test(a.nodeName) || a.href ? a.tabIndex : -1
                }
            }
        }
    }), Y.optSelected || (_.propHooks.selected = {
        get: function(a) {
            var b = a.parentNode;
            return b && b.parentNode && b.parentNode.selectedIndex, null
        }
    }), _.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
        _.propFix[this.toLowerCase()] = this
    });
    var hb = /[\t\r\n\f]/g;
    _.fn.extend({
        addClass: function(a) {
            var b, c, d, e, f, g, h = "string" == typeof a && a,
                i = 0,
                j = this.length;
            if (_.isFunction(a)) return this.each(function(b) {
                _(this).addClass(a.call(this, b, this.className))
            });
            if (h)
                for (b = (a || "").match(na) || []; j > i; i++)
                    if (c = this[i], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(hb, " ") : " ")) {
                        for (f = 0; e = b[f++];) d.indexOf(" " + e + " ") < 0 && (d += e + " ");
                        g = _.trim(d), c.className !== g && (c.className = g)
                    }
            return this
        },
        removeClass: function(a) {
            var b, c, d, e, f, g, h = 0 === arguments.length || "string" == typeof a && a,
                i = 0,
                j = this.length;
            if (_.isFunction(a)) return this.each(function(b) {
                _(this).removeClass(a.call(this, b, this.className))
            });
            if (h)
                for (b = (a || "").match(na) || []; j > i; i++)
                    if (c = this[i], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(hb, " ") : "")) {
                        for (f = 0; e = b[f++];)
                            for (; d.indexOf(" " + e + " ") >= 0;) d = d.replace(" " + e + " ", " ");
                        g = a ? _.trim(d) : "", c.className !== g && (c.className = g)
                    }
            return this
        },
        toggleClass: function(a, b) {
            var c = typeof a;
            return "boolean" == typeof b && "string" === c ? b ? this.addClass(a) : this.removeClass(a) : this.each(_.isFunction(a) ? function(c) {
                _(this).toggleClass(a.call(this, c, this.className, b), b)
            } : function() {
                if ("string" === c)
                    for (var b, d = 0, e = _(this), f = a.match(na) || []; b = f[d++];) e.hasClass(b) ? e.removeClass(b) : e.addClass(b);
                else(c === za || "boolean" === c) && (this.className && ra.set(this, "__className__", this.className), this.className = this.className || a === !1 ? "" : ra.get(this, "__className__") || "")
            })
        },
        hasClass: function(a) {
            for (var b = " " + a + " ", c = 0, d = this.length; d > c; c++)
                if (1 === this[c].nodeType && (" " + this[c].className + " ").replace(hb, " ").indexOf(b) >= 0) return !0;
            return !1
        }
    });
    var ib = /\r/g;
    _.fn.extend({
        val: function(a) {
            var b, c, d, e = this[0];
            return arguments.length ? (d = _.isFunction(a), this.each(function(c) {
                var e;
                1 === this.nodeType && (e = d ? a.call(this, c, _(this).val()) : a, null == e ? e = "" : "number" == typeof e ? e += "" : _.isArray(e) && (e = _.map(e, function(a) {
                    return null == a ? "" : a + ""
                })), b = _.valHooks[this.type] || _.valHooks[this.nodeName.toLowerCase()], b && "set" in b && void 0 !== b.set(this, e, "value") || (this.value = e))
            })) : e ? (b = _.valHooks[e.type] || _.valHooks[e.nodeName.toLowerCase()], b && "get" in b && void 0 !== (c = b.get(e, "value")) ? c : (c = e.value, "string" == typeof c ? c.replace(ib, "") : null == c ? "" : c)) : void 0
        }
    }), _.extend({
        valHooks: {
            option: {
                get: function(a) {
                    var b = _.find.attr(a, "value");
                    return null != b ? b : _.trim(_.text(a))
                }
            },
            select: {
                get: function(a) {
                    for (var b, c, d = a.options, e = a.selectedIndex, f = "select-one" === a.type || 0 > e, g = f ? null : [], h = f ? e + 1 : d.length, i = 0 > e ? h : f ? e : 0; h > i; i++)
                        if (c = d[i], !(!c.selected && i !== e || (Y.optDisabled ? c.disabled : null !== c.getAttribute("disabled")) || c.parentNode.disabled && _.nodeName(c.parentNode, "optgroup"))) {
                            if (b = _(c).val(), f) return b;
                            g.push(b)
                        }
                    return g
                },
                set: function(a, b) {
                    for (var c, d, e = a.options, f = _.makeArray(b), g = e.length; g--;) d = e[g], (d.selected = _.inArray(d.value, f) >= 0) && (c = !0);
                    return c || (a.selectedIndex = -1), f
                }
            }
        }
    }), _.each(["radio", "checkbox"], function() {
        _.valHooks[this] = {
            set: function(a, b) {
                return _.isArray(b) ? a.checked = _.inArray(_(a).val(), b) >= 0 : void 0
            }
        }, Y.checkOn || (_.valHooks[this].get = function(a) {
            return null === a.getAttribute("value") ? "on" : a.value
        })
    }), _.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(a, b) {
        _.fn[b] = function(a, c) {
            return arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b)
        }
    }), _.fn.extend({
        hover: function(a, b) {
            return this.mouseenter(a).mouseleave(b || a)
        },
        bind: function(a, b, c) {
            return this.on(a, null, b, c)
        },
        unbind: function(a, b) {
            return this.off(a, null, b)
        },
        delegate: function(a, b, c, d) {
            return this.on(b, a, c, d)
        },
        undelegate: function(a, b, c) {
            return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c)
        }
    });
    var jb = _.now(),
        kb = /\?/;
    _.parseJSON = function(a) {
        return JSON.parse(a + "")
    }, _.parseXML = function(a) {
        var b, c;
        if (!a || "string" != typeof a) return null;
        try {
            c = new DOMParser, b = c.parseFromString(a, "text/xml")
        } catch (d) {
            b = void 0
        }
        return (!b || b.getElementsByTagName("parsererror").length) && _.error("Invalid XML: " + a), b
    };
    var lb = /#.*$/,
        mb = /([?&])_=[^&]*/,
        nb = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        ob = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
        pb = /^(?:GET|HEAD)$/,
        qb = /^\/\//,
        rb = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
        sb = {},
        tb = {},
        ub = "*/".concat("*"),
        vb = a.location.href,
        wb = rb.exec(vb.toLowerCase()) || [];
    _.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: vb,
            type: "GET",
            isLocal: ob.test(wb[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": ub,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": _.parseJSON,
                "text xml": _.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(a, b) {
            return b ? L(L(a, _.ajaxSettings), b) : L(_.ajaxSettings, a)
        },
        ajaxPrefilter: J(sb),
        ajaxTransport: J(tb),
        ajax: function(a, b) {
            function c(a, b, c, g) {
                var i, k, r, s, u, w = b;
                2 !== t && (t = 2, h && clearTimeout(h), d = void 0, f = g || "", v.readyState = a > 0 ? 4 : 0, i = a >= 200 && 300 > a || 304 === a, c && (s = M(l, v, c)), s = N(l, s, v, i), i ? (l.ifModified && (u = v.getResponseHeader("Last-Modified"), u && (_.lastModified[e] = u), u = v.getResponseHeader("etag"), u && (_.etag[e] = u)), 204 === a || "HEAD" === l.type ? w = "nocontent" : 304 === a ? w = "notmodified" : (w = s.state, k = s.data, r = s.error, i = !r)) : (r = w, (a || !w) && (w = "error", 0 > a && (a = 0))), v.status = a, v.statusText = (b || w) + "", i ? o.resolveWith(m, [k, w, v]) : o.rejectWith(m, [v, w, r]), v.statusCode(q), q = void 0, j && n.trigger(i ? "ajaxSuccess" : "ajaxError", [v, l, i ? k : r]), p.fireWith(m, [v, w]), j && (n.trigger("ajaxComplete", [v, l]), --_.active || _.event.trigger("ajaxStop")))
            }
            "object" == typeof a && (b = a, a = void 0), b = b || {};
            var d, e, f, g, h, i, j, k, l = _.ajaxSetup({}, b),
                m = l.context || l,
                n = l.context && (m.nodeType || m.jquery) ? _(m) : _.event,
                o = _.Deferred(),
                p = _.Callbacks("once memory"),
                q = l.statusCode || {},
                r = {},
                s = {},
                t = 0,
                u = "canceled",
                v = {
                    readyState: 0,
                    getResponseHeader: function(a) {
                        var b;
                        if (2 === t) {
                            if (!g)
                                for (g = {}; b = nb.exec(f);) g[b[1].toLowerCase()] = b[2];
                            b = g[a.toLowerCase()]
                        }
                        return null == b ? null : b
                    },
                    getAllResponseHeaders: function() {
                        return 2 === t ? f : null
                    },
                    setRequestHeader: function(a, b) {
                        var c = a.toLowerCase();
                        return t || (a = s[c] = s[c] || a, r[a] = b), this
                    },
                    overrideMimeType: function(a) {
                        return t || (l.mimeType = a), this
                    },
                    statusCode: function(a) {
                        var b;
                        if (a)
                            if (2 > t)
                                for (b in a) q[b] = [q[b], a[b]];
                            else v.always(a[v.status]);
                        return this
                    },
                    abort: function(a) {
                        var b = a || u;
                        return d && d.abort(b), c(0, b), this
                    }
                };
            if (o.promise(v).complete = p.add, v.success = v.done, v.error = v.fail, l.url = ((a || l.url || vb) + "").replace(lb, "").replace(qb, wb[1] + "//"), l.type = b.method || b.type || l.method || l.type, l.dataTypes = _.trim(l.dataType || "*").toLowerCase().match(na) || [""], null == l.crossDomain && (i = rb.exec(l.url.toLowerCase()), l.crossDomain = !(!i || i[1] === wb[1] && i[2] === wb[2] && (i[3] || ("http:" === i[1] ? "80" : "443")) === (wb[3] || ("http:" === wb[1] ? "80" : "443")))), l.data && l.processData && "string" != typeof l.data && (l.data = _.param(l.data, l.traditional)), K(sb, l, b, v), 2 === t) return v;
            j = _.event && l.global, j && 0 === _.active++ && _.event.trigger("ajaxStart"), l.type = l.type.toUpperCase(), l.hasContent = !pb.test(l.type), e = l.url, l.hasContent || (l.data && (e = l.url += (kb.test(e) ? "&" : "?") + l.data, delete l.data), l.cache === !1 && (l.url = mb.test(e) ? e.replace(mb, "$1_=" + jb++) : e + (kb.test(e) ? "&" : "?") + "_=" + jb++)), l.ifModified && (_.lastModified[e] && v.setRequestHeader("If-Modified-Since", _.lastModified[e]), _.etag[e] && v.setRequestHeader("If-None-Match", _.etag[e])), (l.data && l.hasContent && l.contentType !== !1 || b.contentType) && v.setRequestHeader("Content-Type", l.contentType), v.setRequestHeader("Accept", l.dataTypes[0] && l.accepts[l.dataTypes[0]] ? l.accepts[l.dataTypes[0]] + ("*" !== l.dataTypes[0] ? ", " + ub + "; q=0.01" : "") : l.accepts["*"]);
            for (k in l.headers) v.setRequestHeader(k, l.headers[k]);
            if (l.beforeSend && (l.beforeSend.call(m, v, l) === !1 || 2 === t)) return v.abort();
            u = "abort";
            for (k in {
                    success: 1,
                    error: 1,
                    complete: 1
                }) v[k](l[k]);
            if (d = K(tb, l, b, v)) {
                v.readyState = 1, j && n.trigger("ajaxSend", [v, l]), l.async && l.timeout > 0 && (h = setTimeout(function() {
                    v.abort("timeout")
                }, l.timeout));
                try {
                    t = 1, d.send(r, c)
                } catch (w) {
                    if (!(2 > t)) throw w;
                    c(-1, w)
                }
            } else c(-1, "No Transport");
            return v
        },
        getJSON: function(a, b, c) {
            return _.get(a, b, c, "json")
        },
        getScript: function(a, b) {
            return _.get(a, void 0, b, "script")
        }
    }), _.each(["get", "post"], function(a, b) {
        _[b] = function(a, c, d, e) {
            return _.isFunction(c) && (e = e || d, d = c, c = void 0), _.ajax({
                url: a,
                type: b,
                dataType: e,
                data: c,
                success: d
            })
        }
    }), _._evalUrl = function(a) {
        return _.ajax({
            url: a,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            "throws": !0
        })
    }, _.fn.extend({
        wrapAll: function(a) {
            var b;
            return _.isFunction(a) ? this.each(function(b) {
                _(this).wrapAll(a.call(this, b))
            }) : (this[0] && (b = _(a, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && b.insertBefore(this[0]), b.map(function() {
                for (var a = this; a.firstElementChild;) a = a.firstElementChild;
                return a
            }).append(this)), this)
        },
        wrapInner: function(a) {
            return this.each(_.isFunction(a) ? function(b) {
                _(this).wrapInner(a.call(this, b))
            } : function() {
                var b = _(this),
                    c = b.contents();
                c.length ? c.wrapAll(a) : b.append(a)
            })
        },
        wrap: function(a) {
            var b = _.isFunction(a);
            return this.each(function(c) {
                _(this).wrapAll(b ? a.call(this, c) : a)
            })
        },
        unwrap: function() {
            return this.parent().each(function() {
                _.nodeName(this, "body") || _(this).replaceWith(this.childNodes)
            }).end()
        }
    }), _.expr.filters.hidden = function(a) {
        return a.offsetWidth <= 0 && a.offsetHeight <= 0
    }, _.expr.filters.visible = function(a) {
        return !_.expr.filters.hidden(a)
    };
    var xb = /%20/g,
        yb = /\[\]$/,
        zb = /\r?\n/g,
        Ab = /^(?:submit|button|image|reset|file)$/i,
        Bb = /^(?:input|select|textarea|keygen)/i;
    _.param = function(a, b) {
        var c, d = [],
            e = function(a, b) {
                b = _.isFunction(b) ? b() : null == b ? "" : b, d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b)
            };
        if (void 0 === b && (b = _.ajaxSettings && _.ajaxSettings.traditional), _.isArray(a) || a.jquery && !_.isPlainObject(a)) _.each(a, function() {
            e(this.name, this.value)
        });
        else
            for (c in a) O(c, a[c], b, e);
        return d.join("&").replace(xb, "+")
    }, _.fn.extend({
        serialize: function() {
            return _.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                var a = _.prop(this, "elements");
                return a ? _.makeArray(a) : this
            }).filter(function() {
                var a = this.type;
                return this.name && !_(this).is(":disabled") && Bb.test(this.nodeName) && !Ab.test(a) && (this.checked || !ya.test(a))
            }).map(function(a, b) {
                var c = _(this).val();
                return null == c ? null : _.isArray(c) ? _.map(c, function(a) {
                    return {
                        name: b.name,
                        value: a.replace(zb, "\r\n")
                    }
                }) : {
                    name: b.name,
                    value: c.replace(zb, "\r\n")
                }
            }).get()
        }
    }), _.ajaxSettings.xhr = function() {
        try {
            return new XMLHttpRequest
        } catch (a) {}
    };
    var Cb = 0,
        Db = {},
        Eb = {
            0: 200,
            1223: 204
        },
        Fb = _.ajaxSettings.xhr();
    a.attachEvent && a.attachEvent("onunload", function() {
        for (var a in Db) Db[a]()
    }), Y.cors = !!Fb && "withCredentials" in Fb, Y.ajax = Fb = !!Fb, _.ajaxTransport(function(a) {
        var b;
        return Y.cors || Fb && !a.crossDomain ? {
            send: function(c, d) {
                var e, f = a.xhr(),
                    g = ++Cb;
                if (f.open(a.type, a.url, a.async, a.username, a.password), a.xhrFields)
                    for (e in a.xhrFields) f[e] = a.xhrFields[e];
                a.mimeType && f.overrideMimeType && f.overrideMimeType(a.mimeType), a.crossDomain || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest");
                for (e in c) f.setRequestHeader(e, c[e]);
                b = function(a) {
                    return function() {
                        b && (delete Db[g], b = f.onload = f.onerror = null, "abort" === a ? f.abort() : "error" === a ? d(f.status, f.statusText) : d(Eb[f.status] || f.status, f.statusText, "string" == typeof f.responseText ? {
                            text: f.responseText
                        } : void 0, f.getAllResponseHeaders()))
                    }
                }, f.onload = b(), f.onerror = b("error"), b = Db[g] = b("abort");
                try {
                    f.send(a.hasContent && a.data || null)
                } catch (h) {
                    if (b) throw h
                }
            },
            abort: function() {
                b && b()
            }
        } : void 0
    }), _.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(a) {
                return _.globalEval(a), a
            }
        }
    }), _.ajaxPrefilter("script", function(a) {
        void 0 === a.cache && (a.cache = !1), a.crossDomain && (a.type = "GET")
    }), _.ajaxTransport("script", function(a) {
        if (a.crossDomain) {
            var b, c;
            return {
                send: function(d, e) {
                    b = _("<script>").prop({
                        async: !0,
                        charset: a.scriptCharset,
                        src: a.url
                    }).on("load error", c = function(a) {
                        b.remove(), c = null, a && e("error" === a.type ? 404 : 200, a.type)
                    }), Z.head.appendChild(b[0])
                },
                abort: function() {
                    c && c()
                }
            }
        }
    });
    var Gb = [],
        Hb = /(=)\?(?=&|$)|\?\?/;
    _.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var a = Gb.pop() || _.expando + "_" + jb++;
            return this[a] = !0, a
        }
    }), _.ajaxPrefilter("json jsonp", function(b, c, d) {
        var e, f, g, h = b.jsonp !== !1 && (Hb.test(b.url) ? "url" : "string" == typeof b.data && !(b.contentType || "").indexOf("application/x-www-form-urlencoded") && Hb.test(b.data) && "data");
        return h || "jsonp" === b.dataTypes[0] ? (e = b.jsonpCallback = _.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, h ? b[h] = b[h].replace(Hb, "$1" + e) : b.jsonp !== !1 && (b.url += (kb.test(b.url) ? "&" : "?") + b.jsonp + "=" + e), b.converters["script json"] = function() {
            return g || _.error(e + " was not called"), g[0]
        }, b.dataTypes[0] = "json", f = a[e], a[e] = function() {
            g = arguments
        }, d.always(function() {
            a[e] = f, b[e] && (b.jsonpCallback = c.jsonpCallback, Gb.push(e)), g && _.isFunction(f) && f(g[0]), g = f = void 0
        }), "script") : void 0
    }), _.parseHTML = function(a, b, c) {
        if (!a || "string" != typeof a) return null;
        "boolean" == typeof b && (c = b, b = !1), b = b || Z;
        var d = ga.exec(a),
            e = !c && [];
        return d ? [b.createElement(d[1])] : (d = _.buildFragment([a], b, e), e && e.length && _(e).remove(), _.merge([], d.childNodes))
    };
    var Ib = _.fn.load;
    _.fn.load = function(a, b, c) {
        if ("string" != typeof a && Ib) return Ib.apply(this, arguments);
        var d, e, f, g = this,
            h = a.indexOf(" ");
        return h >= 0 && (d = _.trim(a.slice(h)), a = a.slice(0, h)), _.isFunction(b) ? (c = b, b = void 0) : b && "object" == typeof b && (e = "POST"), g.length > 0 && _.ajax({
            url: a,
            type: e,
            dataType: "html",
            data: b
        }).done(function(a) {
            f = arguments, g.html(d ? _("<div>").append(_.parseHTML(a)).find(d) : a)
        }).complete(c && function(a, b) {
            g.each(c, f || [a.responseText, b, a])
        }), this
    }, _.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(a, b) {
        _.fn[b] = function(a) {
            return this.on(b, a)
        }
    }), _.expr.filters.animated = function(a) {
        return _.grep(_.timers, function(b) {
            return a === b.elem
        }).length
    };
    var Jb = a.document.documentElement;
    _.offset = {
        setOffset: function(a, b, c) {
            var d, e, f, g, h, i, j, k = _.css(a, "position"),
                l = _(a),
                m = {};
            "static" === k && (a.style.position = "relative"), h = l.offset(), f = _.css(a, "top"), i = _.css(a, "left"), j = ("absolute" === k || "fixed" === k) && (f + i).indexOf("auto") > -1, j ? (d = l.position(), g = d.top, e = d.left) : (g = parseFloat(f) || 0, e = parseFloat(i) || 0), _.isFunction(b) && (b = b.call(a, c, h)), null != b.top && (m.top = b.top - h.top + g), null != b.left && (m.left = b.left - h.left + e), "using" in b ? b.using.call(a, m) : l.css(m)
        }
    }, _.fn.extend({
        offset: function(a) {
            if (arguments.length) return void 0 === a ? this : this.each(function(b) {
                _.offset.setOffset(this, a, b)
            });
            var b, c, d = this[0],
                e = {
                    top: 0,
                    left: 0
                },
                f = d && d.ownerDocument;
            return f ? (b = f.documentElement, _.contains(b, d) ? (typeof d.getBoundingClientRect !== za && (e = d.getBoundingClientRect()), c = P(f), {
                top: e.top + c.pageYOffset - b.clientTop,
                left: e.left + c.pageXOffset - b.clientLeft
            }) : e) : void 0
        },
        position: function() {
            if (this[0]) {
                var a, b, c = this[0],
                    d = {
                        top: 0,
                        left: 0
                    };
                return "fixed" === _.css(c, "position") ? b = c.getBoundingClientRect() : (a = this.offsetParent(), b = this.offset(), _.nodeName(a[0], "html") || (d = a.offset()), d.top += _.css(a[0], "borderTopWidth", !0), d.left += _.css(a[0], "borderLeftWidth", !0)), {
                    top: b.top - d.top - _.css(c, "marginTop", !0),
                    left: b.left - d.left - _.css(c, "marginLeft", !0)
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var a = this.offsetParent || Jb; a && !_.nodeName(a, "html") && "static" === _.css(a, "position");) a = a.offsetParent;
                return a || Jb
            })
        }
    }), _.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(b, c) {
        var d = "pageYOffset" === c;
        _.fn[b] = function(e) {
            return qa(this, function(b, e, f) {
                var g = P(b);
                return void 0 === f ? g ? g[c] : b[e] : void(g ? g.scrollTo(d ? a.pageXOffset : f, d ? f : a.pageYOffset) : b[e] = f)
            }, b, e, arguments.length, null)
        }
    }), _.each(["top", "left"], function(a, b) {
        _.cssHooks[b] = w(Y.pixelPosition, function(a, c) {
            return c ? (c = v(a, b), Qa.test(c) ? _(a).position()[b] + "px" : c) : void 0
        })
    }), _.each({
        Height: "height",
        Width: "width"
    }, function(a, b) {
        _.each({
            padding: "inner" + a,
            content: b,
            "": "outer" + a
        }, function(c, d) {
            _.fn[d] = function(d, e) {
                var f = arguments.length && (c || "boolean" != typeof d),
                    g = c || (d === !0 || e === !0 ? "margin" : "border");
                return qa(this, function(b, c, d) {
                    var e;
                    return _.isWindow(b) ? b.document.documentElement["client" + a] : 9 === b.nodeType ? (e = b.documentElement, Math.max(b.body["scroll" + a], e["scroll" + a], b.body["offset" + a], e["offset" + a], e["client" + a])) : void 0 === d ? _.css(b, c, g) : _.style(b, c, d, g)
                }, b, f ? d : void 0, f, null)
            }
        })
    }), _.fn.size = function() {
        return this.length
    }, _.fn.andSelf = _.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
        return _
    });
    var Kb = a.jQuery,
        Lb = a.$;
    return _.noConflict = function(b) {
        return a.$ === _ && (a.$ = Lb), b && a.jQuery === _ && (a.jQuery = Kb), _
    }, typeof b === za && (a.jQuery = a.$ = _), _
}),
function(a, b, c) {
    "use strict";

    function d(a) {
        return function() {
            var b, c = arguments[0];
            for (b = "[" + (a ? a + ":" : "") + c + "] http://errors.angularjs.org/1.4.9/" + (a ? a + "/" : "") + c, c = 1; c < arguments.length; c++) {
                b = b + (1 == c ? "?" : "&") + "p" + (c - 1) + "=";
                var d, e = encodeURIComponent;
                d = arguments[c], d = "function" == typeof d ? d.toString().replace(/ \{[\s\S]*$/, "") : "undefined" == typeof d ? "undefined" : "string" != typeof d ? JSON.stringify(d) : d, b += e(d)
            }
            return Error(b)
        }
    }

    function e(a) {
        if (null == a || B(a)) return !1;
        if (dd(a) || w(a) || Pc && a instanceof Pc) return !0;
        var b = "length" in Object(a) && a.length;
        return x(b) && (b >= 0 && (b - 1 in a || a instanceof Array) || "function" == typeof a.item)
    }

    function f(a, b, c) {
        var d, g;
        if (a)
            if (z(a))
                for (d in a) "prototype" == d || "length" == d || "name" == d || a.hasOwnProperty && !a.hasOwnProperty(d) || b.call(c, a[d], d, a);
            else if (dd(a) || e(a)) {
            var h = "object" != typeof a;
            for (d = 0, g = a.length; g > d; d++)(h || d in a) && b.call(c, a[d], d, a)
        } else if (a.forEach && a.forEach !== f) a.forEach(b, c, a);
        else if (v(a))
            for (d in a) b.call(c, a[d], d, a);
        else if ("function" == typeof a.hasOwnProperty)
            for (d in a) a.hasOwnProperty(d) && b.call(c, a[d], d, a);
        else
            for (d in a) Uc.call(a, d) && b.call(c, a[d], d, a);
        return a
    }

    function g(a, b, c) {
        for (var d = Object.keys(a).sort(), e = 0; e < d.length; e++) b.call(c, a[d[e]], d[e]);
        return d
    }

    function h(a) {
        return function(b, c) {
            a(c, b)
        }
    }

    function i() {
        return ++bd
    }

    function j(a, b, c) {
        for (var d = a.$$hashKey, e = 0, f = b.length; f > e; ++e) {
            var g = b[e];
            if (u(g) || z(g))
                for (var h = Object.keys(g), i = 0, k = h.length; k > i; i++) {
                    var l = h[i],
                        m = g[l];
                    c && u(m) ? y(m) ? a[l] = new Date(m.valueOf()) : A(m) ? a[l] = new RegExp(m) : m.nodeName ? a[l] = m.cloneNode(!0) : F(m) ? a[l] = m.clone() : (u(a[l]) || (a[l] = dd(m) ? [] : {}), j(a[l], [m], !0)) : a[l] = m
                }
        }
        return d ? a.$$hashKey = d : delete a.$$hashKey, a
    }

    function k(a) {
        return j(a, Wc.call(arguments, 1), !1)
    }

    function l(a) {
        return j(a, Wc.call(arguments, 1), !0)
    }

    function m(a) {
        return parseInt(a, 10)
    }

    function n(a, b) {
        return k(Object.create(a), b)
    }

    function o() {}

    function p(a) {
        return a
    }

    function q(a) {
        return function() {
            return a
        }
    }

    function r(a) {
        return z(a.toString) && a.toString !== Zc
    }

    function s(a) {
        return "undefined" == typeof a
    }

    function t(a) {
        return "undefined" != typeof a
    }

    function u(a) {
        return null !== a && "object" == typeof a
    }

    function v(a) {
        return null !== a && "object" == typeof a && !$c(a)
    }

    function w(a) {
        return "string" == typeof a
    }

    function x(a) {
        return "number" == typeof a
    }

    function y(a) {
        return "[object Date]" === Zc.call(a)
    }

    function z(a) {
        return "function" == typeof a
    }

    function A(a) {
        return "[object RegExp]" === Zc.call(a)
    }

    function B(a) {
        return a && a.window === a
    }

    function C(a) {
        return a && a.$evalAsync && a.$watch
    }

    function D(a) {
        return "boolean" == typeof a
    }

    function E(a) {
        return a && x(a.length) && ed.test(Zc.call(a))
    }

    function F(a) {
        return !(!a || !(a.nodeName || a.prop && a.attr && a.find))
    }

    function G(a) {
        var b = {};
        a = a.split(",");
        var c;
        for (c = 0; c < a.length; c++) b[a[c]] = !0;
        return b
    }

    function H(a) {
        return Tc(a.nodeName || a[0] && a[0].nodeName)
    }

    function I(a, b) {
        var c = a.indexOf(b);
        return c >= 0 && a.splice(c, 1), c
    }

    function J(a, b) {
        function c(a, b) {
            var c, e = b.$$hashKey;
            if (dd(a)) {
                c = 0;
                for (var f = a.length; f > c; c++) b.push(d(a[c]))
            } else if (v(a))
                for (c in a) b[c] = d(a[c]);
            else if (a && "function" == typeof a.hasOwnProperty)
                for (c in a) a.hasOwnProperty(c) && (b[c] = d(a[c]));
            else
                for (c in a) Uc.call(a, c) && (b[c] = d(a[c]));
            return e ? b.$$hashKey = e : delete b.$$hashKey, b
        }

        function d(a) {
            if (!u(a)) return a;
            var b = e.indexOf(a);
            if (-1 !== b) return g[b];
            if (B(a) || C(a)) throw _c("cpws");
            var d, b = !1;
            return dd(a) ? (d = [], b = !0) : E(a) ? d = new a.constructor(a) : y(a) ? d = new Date(a.getTime()) : A(a) ? (d = new RegExp(a.source, a.toString().match(/[^\/]*$/)[0]), d.lastIndex = a.lastIndex) : z(a.cloneNode) ? d = a.cloneNode(!0) : (d = Object.create($c(a)), b = !0), e.push(a), g.push(d), b ? c(a, d) : d
        }
        var e = [],
            g = [];
        if (b) {
            if (E(b)) throw _c("cpta");
            if (a === b) throw _c("cpi");
            return dd(b) ? b.length = 0 : f(b, function(a, c) {
                "$$hashKey" !== c && delete b[c]
            }), e.push(a), g.push(b), c(a, b)
        }
        return d(a)
    }

    function K(a, b) {
        if (dd(a)) {
            b = b || [];
            for (var c = 0, d = a.length; d > c; c++) b[c] = a[c]
        } else if (u(a))
            for (c in b = b || {}, a)("$" !== c.charAt(0) || "$" !== c.charAt(1)) && (b[c] = a[c]);
        return b || a
    }

    function L(a, b) {
        if (a === b) return !0;
        if (null === a || null === b) return !1;
        if (a !== a && b !== b) return !0;
        var c, d = typeof a;
        if (d == typeof b && "object" == d) {
            if (!dd(a)) {
                if (y(a)) return y(b) ? L(a.getTime(), b.getTime()) : !1;
                if (A(a)) return A(b) ? a.toString() == b.toString() : !1;
                if (C(a) || C(b) || B(a) || B(b) || dd(b) || y(b) || A(b)) return !1;
                d = ja();
                for (c in a)
                    if ("$" !== c.charAt(0) && !z(a[c])) {
                        if (!L(a[c], b[c])) return !1;
                        d[c] = !0
                    }
                for (c in b)
                    if (!(c in d) && "$" !== c.charAt(0) && t(b[c]) && !z(b[c])) return !1;
                return !0
            }
            if (!dd(b)) return !1;
            if ((d = a.length) == b.length) {
                for (c = 0; d > c; c++)
                    if (!L(a[c], b[c])) return !1;
                return !0
            }
        }
        return !1
    }

    function M(a, b, c) {
        return a.concat(Wc.call(b, c))
    }

    function N(a, b) {
        var c = 2 < arguments.length ? Wc.call(arguments, 2) : [];
        return !z(b) || b instanceof RegExp ? b : c.length ? function() {
            return arguments.length ? b.apply(a, M(c, arguments, 0)) : b.apply(a, c)
        } : function() {
            return arguments.length ? b.apply(a, arguments) : b.call(a)
        }
    }

    function O(a, d) {
        var e = d;
        return "string" == typeof a && "$" === a.charAt(0) && "$" === a.charAt(1) ? e = c : B(d) ? e = "$WINDOW" : d && b === d ? e = "$DOCUMENT" : C(d) && (e = "$SCOPE"), e
    }

    function P(a, b) {
        return "undefined" == typeof a ? c : (x(b) || (b = b ? 2 : null), JSON.stringify(a, O, b))
    }

    function Q(a) {
        return w(a) ? JSON.parse(a) : a
    }

    function R(a, b) {
        var c = Date.parse("Jan 01, 1970 00:00:00 " + a) / 6e4;
        return isNaN(c) ? b : c
    }

    function S(a, b, c) {
        c = c ? -1 : 1;
        var d = R(b, a.getTimezoneOffset());
        return b = a, a = c * (d - a.getTimezoneOffset()), b = new Date(b.getTime()), b.setMinutes(b.getMinutes() + a), b
    }

    function T(a) {
        a = Pc(a).clone();
        try {
            a.empty()
        } catch (b) {}
        var c = Pc("<div>").append(a).html();
        try {
            return a[0].nodeType === md ? Tc(c) : c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/, function(a, b) {
                return "<" + Tc(b)
            })
        } catch (d) {
            return Tc(c)
        }
    }

    function U(a) {
        try {
            return decodeURIComponent(a)
        } catch (b) {}
    }

    function V(a) {
        var b = {};
        return f((a || "").split("&"), function(a) {
            var c, d, e;
            a && (d = a = a.replace(/\+/g, "%20"), c = a.indexOf("="), -1 !== c && (d = a.substring(0, c), e = a.substring(c + 1)), d = U(d), t(d) && (e = t(e) ? U(e) : !0, Uc.call(b, d) ? dd(b[d]) ? b[d].push(e) : b[d] = [b[d], e] : b[d] = e))
        }), b
    }

    function W(a) {
        var b = [];
        return f(a, function(a, c) {
            dd(a) ? f(a, function(a) {
                b.push(Y(c, !0) + (!0 === a ? "" : "=" + Y(a, !0)))
            }) : b.push(Y(c, !0) + (!0 === a ? "" : "=" + Y(a, !0)))
        }), b.length ? b.join("&") : ""
    }

    function X(a) {
        return Y(a, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+")
    }

    function Y(a, b) {
        return encodeURIComponent(a).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%3B/gi, ";").replace(/%20/g, b ? "%20" : "+")
    }

    function Z(a, b) {
        var c, d, e = jd.length;
        for (d = 0; e > d; ++d)
            if (c = jd[d] + b, w(c = a.getAttribute(c))) return c;
        return null
    }

    function $(a, b) {
        var c, d, e = {};
        f(jd, function(b) {
            b += "app", !c && a.hasAttribute && a.hasAttribute(b) && (c = a, d = a.getAttribute(b))
        }), f(jd, function(b) {
            b += "app";
            var e;
            !c && (e = a.querySelector("[" + b.replace(":", "\\:") + "]")) && (c = e, d = e.getAttribute(b))
        }), c && (e.strictDi = null !== Z(c, "strict-di"), b(c, d ? [d] : [], e))
    }

    function _(c, d, e) {
        u(e) || (e = {}), e = k({
            strictDi: !1
        }, e);
        var g = function() {
                if (c = Pc(c), c.injector()) {
                    var a = c[0] === b ? "document" : T(c);
                    throw _c("btstrpd", a.replace(/</, "&lt;").replace(/>/, "&gt;"))
                }
                return d = d || [], d.unshift(["$provide", function(a) {
                    a.value("$rootElement", c)
                }]), e.debugInfoEnabled && d.push(["$compileProvider", function(a) {
                    a.debugInfoEnabled(!0)
                }]), d.unshift("ng"), a = Na(d, e.strictDi), a.invoke(["$rootScope", "$rootElement", "$compile", "$injector", function(a, b, c, d) {
                    a.$apply(function() {
                        b.data("$injector", d), c(b)(a)
                    })
                }]), a
            },
            h = /^NG_ENABLE_DEBUG_INFO!/,
            i = /^NG_DEFER_BOOTSTRAP!/;
        return a && h.test(a.name) && (e.debugInfoEnabled = !0, a.name = a.name.replace(h, "")), a && !i.test(a.name) ? g() : (a.name = a.name.replace(i, ""), ad.resumeBootstrap = function(a) {
            return f(a, function(a) {
                d.push(a)
            }), g()
        }, void(z(ad.resumeDeferredBootstrap) && ad.resumeDeferredBootstrap()))
    }

    function aa() {
        a.name = "NG_ENABLE_DEBUG_INFO!" + a.name, a.location.reload()
    }

    function ba(a) {
        if (a = ad.element(a).injector(), !a) throw _c("test");
        return a.get("$$testability")
    }

    function ca(a, b) {
        return b = b || "_", a.replace(kd, function(a, c) {
            return (c ? b : "") + a.toLowerCase()
        })
    }

    function da() {
        var b;
        if (!ld) {
            var d = id();
            (Qc = s(d) ? a.jQuery : d ? a[d] : c) && Qc.fn.on ? (Pc = Qc, k(Qc.fn, {
                scope: Ad.scope,
                isolateScope: Ad.isolateScope,
                controller: Ad.controller,
                injector: Ad.injector,
                inheritedData: Ad.inheritedData
            }), b = Qc.cleanData, Qc.cleanData = function(a) {
                var c;
                if (cd) cd = !1;
                else
                    for (var d, e = 0; null != (d = a[e]); e++)(c = Qc._data(d, "events")) && c.$destroy && Qc(d).triggerHandler("$destroy");
                b(a)
            }) : Pc = pa, ad.element = Pc, ld = !0
        }
    }

    function ea(a, b, c) {
        if (!a) throw _c("areq", b || "?", c || "required");
        return a
    }

    function fa(a, b, c) {
        return c && dd(a) && (a = a[a.length - 1]), ea(z(a), b, "not a function, got " + (a && "object" == typeof a ? a.constructor.name || "Object" : typeof a)), a
    }

    function ga(a, b) {
        if ("hasOwnProperty" === a) throw _c("badname", b)
    }

    function ha(a, b, c) {
        if (!b) return a;
        b = b.split(".");
        for (var d, e = a, f = b.length, g = 0; f > g; g++) d = b[g], a && (a = (e = a)[d]);
        return !c && z(a) ? N(e, a) : a
    }

    function ia(a) {
        for (var b, c = a[0], d = a[a.length - 1], e = 1; c !== d && (c = c.nextSibling); e++)(b || a[e] !== c) && (b || (b = Pc(Wc.call(a, 0, e))), b.push(c));
        return b || a
    }

    function ja() {
        return Object.create(null)
    }

    function ka(a) {
        function b(a, b, c) {
            return a[b] || (a[b] = c())
        }
        var c = d("$injector"),
            e = d("ng");
        return a = b(a, "angular", Object), a.$$minErr = a.$$minErr || d, b(a, "module", function() {
            var a = {};
            return function(d, f, g) {
                if ("hasOwnProperty" === d) throw e("badname", "module");
                return f && a.hasOwnProperty(d) && (a[d] = null), b(a, d, function() {
                    function a(a, b, c, d) {
                        return d || (d = e),
                            function() {
                                return d[c || "push"]([a, b, arguments]), k
                            }
                    }

                    function b(a, b) {
                        return function(c, f) {
                            return f && z(f) && (f.$$moduleName = d), e.push([a, b, arguments]), k
                        }
                    }
                    if (!f) throw c("nomod", d);
                    var e = [],
                        h = [],
                        i = [],
                        j = a("$injector", "invoke", "push", h),
                        k = {
                            _invokeQueue: e,
                            _configBlocks: h,
                            _runBlocks: i,
                            requires: f,
                            name: d,
                            provider: b("$provide", "provider"),
                            factory: b("$provide", "factory"),
                            service: b("$provide", "service"),
                            value: a("$provide", "value"),
                            constant: a("$provide", "constant", "unshift"),
                            decorator: b("$provide", "decorator"),
                            animation: b("$animateProvider", "register"),
                            filter: b("$filterProvider", "register"),
                            controller: b("$controllerProvider", "register"),
                            directive: b("$compileProvider", "directive"),
                            config: j,
                            run: function(a) {
                                return i.push(a), this
                            }
                        };
                    return g && j(g), k
                })
            }
        })
    }

    function la(b) {
        k(b, {
            bootstrap: _,
            copy: J,
            extend: k,
            merge: l,
            equals: L,
            element: Pc,
            forEach: f,
            injector: Na,
            noop: o,
            bind: N,
            toJson: P,
            fromJson: Q,
            identity: p,
            isUndefined: s,
            isDefined: t,
            isString: w,
            isFunction: z,
            isObject: u,
            isNumber: x,
            isElement: F,
            isArray: dd,
            version: nd,
            isDate: y,
            lowercase: Tc,
            uppercase: Vc,
            callbacks: {
                counter: 0
            },
            getTestability: ba,
            $$minErr: d,
            $$csp: hd,
            reloadWithDebugInfo: aa
        }), (Rc = ka(a))("ng", ["ngLocale"], ["$provide", function(a) {
            a.provider({
                $$sanitizeUri: Xb
            }), a.provider("$compile", Wa).directive({
                a: Ce,
                input: Se,
                textarea: Se,
                form: Ge,
                script: Hf,
                select: Kf,
                style: Mf,
                option: Lf,
                ngBind: Ve,
                ngBindHtml: Xe,
                ngBindTemplate: We,
                ngClass: Ze,
                ngClassEven: _e,
                ngClassOdd: $e,
                ngCloak: af,
                ngController: bf,
                ngForm: He,
                ngHide: Bf,
                ngIf: ef,
                ngInclude: ff,
                ngInit: hf,
                ngNonBindable: uf,
                ngPluralize: yf,
                ngRepeat: zf,
                ngShow: Af,
                ngStyle: Cf,
                ngSwitch: Df,
                ngSwitchWhen: Ef,
                ngSwitchDefault: Ff,
                ngOptions: xf,
                ngTransclude: Gf,
                ngModel: rf,
                ngList: jf,
                ngChange: Ye,
                pattern: Of,
                ngPattern: Of,
                required: Nf,
                ngRequired: Nf,
                minlength: Qf,
                ngMinlength: Qf,
                maxlength: Pf,
                ngMaxlength: Pf,
                ngValue: Ue,
                ngModelOptions: tf
            }).directive({
                ngInclude: gf
            }).directive(De).directive(cf), a.provider({
                $anchorScroll: Oa,
                $animate: Nd,
                $animateCss: Qd,
                $$animateJs: Ld,
                $$animateQueue: Md,
                $$AnimateRunner: Pd,
                $$animateAsyncRun: Od,
                $browser: Ta,
                $cacheFactory: Ua,
                $controller: $a,
                $document: _a,
                $exceptionHandler: ab,
                $filter: jc,
                $$forceReflow: Vd,
                $interpolate: mb,
                $interval: nb,
                $http: ib,
                $httpParamSerializer: cb,
                $httpParamSerializerJQLike: db,
                $httpBackend: kb,
                $xhrFactory: jb,
                $location: zb,
                $log: Ab,
                $parse: Rb,
                $rootScope: Wb,
                $q: Sb,
                $$q: Tb,
                $sce: _b,
                $sceDelegate: $b,
                $sniffer: ac,
                $templateCache: Va,
                $templateRequest: bc,
                $$testability: cc,
                $timeout: dc,
                $window: gc,
                $$rAF: Vb,
                $$jqLite: Ja,
                $$HashMap: Ed,
                $$cookieReader: ic
            })
        }])
    }

    function ma(a) {
        return a.replace(qd, function(a, b, c, d) {
            return d ? c.toUpperCase() : c
        }).replace(rd, "Moz$1")
    }

    function na(a) {
        return a = a.nodeType, 1 === a || !a || 9 === a
    }

    function oa(a, b) {
        var c, d, e = b.createDocumentFragment(),
            g = [];
        if (vd.test(a)) {
            for (c = c || e.appendChild(b.createElement("div")), d = (wd.exec(a) || ["", ""])[1].toLowerCase(), d = yd[d] || yd._default, c.innerHTML = d[1] + a.replace(xd, "<$1></$2>") + d[2], d = d[0]; d--;) c = c.lastChild;
            g = M(g, c.childNodes), c = e.firstChild, c.textContent = ""
        } else g.push(b.createTextNode(a));
        return e.textContent = "", e.innerHTML = "", f(g, function(a) {
            e.appendChild(a)
        }), e
    }

    function pa(a) {
        if (a instanceof pa) return a;
        var c;
        if (w(a) && (a = fd(a), c = !0), !(this instanceof pa)) {
            if (c && "<" != a.charAt(0)) throw td("nosel");
            return new pa(a)
        }
        if (c) {
            c = b;
            var d;
            a = (d = ud.exec(a)) ? [c.createElement(d[1])] : (d = oa(a, c)) ? d.childNodes : []
        }
        za(this, a)
    }

    function qa(a) {
        return a.cloneNode(!0)
    }

    function ra(a, b) {
        if (b || ta(a), a.querySelectorAll)
            for (var c = a.querySelectorAll("*"), d = 0, e = c.length; e > d; d++) ta(c[d])
    }

    function sa(a, b, c, d) {
        if (t(d)) throw td("offargs");
        var e = (d = ua(a)) && d.events,
            g = d && d.handle;
        if (g)
            if (b) {
                var h = function(b) {
                    var d = e[b];
                    t(c) && I(d || [], c), t(c) && d && 0 < d.length || (a.removeEventListener(b, g, !1), delete e[b])
                };
                f(b.split(" "), function(a) {
                    h(a), sd[a] && h(sd[a])
                })
            } else
                for (b in e) "$destroy" !== b && a.removeEventListener(b, g, !1), delete e[b]
    }

    function ta(a, b) {
        var d = a.ng339,
            e = d && od[d];
        e && (b ? delete e.data[b] : (e.handle && (e.events.$destroy && e.handle({}, "$destroy"), sa(a)), delete od[d], a.ng339 = c))
    }

    function ua(a, b) {
        var d = a.ng339,
            d = d && od[d];
        return b && !d && (a.ng339 = d = ++pd, d = od[d] = {
            events: {},
            data: {},
            handle: c
        }), d
    }

    function va(a, b, c) {
        if (na(a)) {
            var d = t(c),
                e = !d && b && !u(b),
                f = !b;
            if (a = (a = ua(a, !e)) && a.data, d) a[b] = c;
            else {
                if (f) return a;
                if (e) return a && a[b];
                k(a, b)
            }
        }
    }

    function wa(a, b) {
        return a.getAttribute ? -1 < (" " + (a.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + b + " ") : !1
    }

    function xa(a, b) {
        b && a.setAttribute && f(b.split(" "), function(b) {
            a.setAttribute("class", fd((" " + (a.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + fd(b) + " ", " ")))
        })
    }

    function ya(a, b) {
        if (b && a.setAttribute) {
            var c = (" " + (a.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
            f(b.split(" "), function(a) {
                a = fd(a), -1 === c.indexOf(" " + a + " ") && (c += a + " ")
            }), a.setAttribute("class", fd(c))
        }
    }

    function za(a, b) {
        if (b)
            if (b.nodeType) a[a.length++] = b;
            else {
                var c = b.length;
                if ("number" == typeof c && b.window !== b) {
                    if (c)
                        for (var d = 0; c > d; d++) a[a.length++] = b[d]
                } else a[a.length++] = b
            }
    }

    function Aa(a, b) {
        return Ba(a, "$" + (b || "ngController") + "Controller")
    }

    function Ba(a, b, c) {
        for (9 == a.nodeType && (a = a.documentElement), b = dd(b) ? b : [b]; a;) {
            for (var d = 0, e = b.length; e > d; d++)
                if (t(c = Pc.data(a, b[d]))) return c;
            a = a.parentNode || 11 === a.nodeType && a.host
        }
    }

    function Ca(a) {
        for (ra(a, !0); a.firstChild;) a.removeChild(a.firstChild)
    }

    function Da(a, b) {
        b || ra(a);
        var c = a.parentNode;
        c && c.removeChild(a)
    }

    function Ea(b, c) {
        c = c || a, "complete" === c.document.readyState ? c.setTimeout(b) : Pc(c).on("load", b)
    }

    function Fa(a, b) {
        var c = Bd[b.toLowerCase()];
        return c && Cd[H(a)] && c
    }

    function Ga(a, b) {
        var c = function(c, d) {
            c.isDefaultPrevented = function() {
                return c.defaultPrevented
            };
            var e = b[d || c.type],
                f = e ? e.length : 0;
            if (f) {
                if (s(c.immediatePropagationStopped)) {
                    var g = c.stopImmediatePropagation;
                    c.stopImmediatePropagation = function() {
                        c.immediatePropagationStopped = !0, c.stopPropagation && c.stopPropagation(), g && g.call(c)
                    }
                }
                c.isImmediatePropagationStopped = function() {
                    return !0 === c.immediatePropagationStopped
                };
                var h = e.specialHandlerWrapper || Ha;
                f > 1 && (e = K(e));
                for (var i = 0; f > i; i++) c.isImmediatePropagationStopped() || h(a, c, e[i])
            }
        };
        return c.elem = a, c
    }

    function Ha(a, b, c) {
        c.call(a, b)
    }

    function Ia(a, b, c) {
        var d = b.relatedTarget;
        d && (d === a || zd.call(a, d)) || c.call(a, b)
    }

    function Ja() {
        this.$get = function() {
            return k(pa, {
                hasClass: function(a, b) {
                    return a.attr && (a = a[0]), wa(a, b)
                },
                addClass: function(a, b) {
                    return a.attr && (a = a[0]), ya(a, b)
                },
                removeClass: function(a, b) {
                    return a.attr && (a = a[0]), xa(a, b)
                }
            })
        }
    }

    function Ka(a, b) {
        var c = a && a.$$hashKey;
        return c ? ("function" == typeof c && (c = a.$$hashKey()), c) : (c = typeof a, c = "function" == c || "object" == c && null !== a ? a.$$hashKey = c + ":" + (b || i)() : c + ":" + a)
    }

    function La(a, b) {
        if (b) {
            var c = 0;
            this.nextUid = function() {
                return ++c
            }
        }
        f(a, this.put, this)
    }

    function Ma(a) {
        return (a = a.toString().replace(Id, "").match(Fd)) ? "function(" + (a[1] || "").replace(/[\s\r\n]+/, " ") + ")" : "fn"
    }

    function Na(a, b) {
        function d(a) {
            return function(b, c) {
                return u(b) ? void f(b, h(a)) : a(b, c)
            }
        }

        function e(a, b) {
            if (ga(a, "service"), (z(b) || dd(b)) && (b = p.instantiate(b)), !b.$get) throw Jd("pget", a);
            return o[a + "Provider"] = b
        }

        function g(a, b) {
            return function() {
                var c = t.invoke(b, this);
                if (s(c)) throw Jd("undef", a);
                return c
            }
        }

        function i(a, b, c) {
            return e(a, {
                $get: !1 !== c ? g(a, b) : b
            })
        }

        function j(a) {
            ea(s(a) || dd(a), "modulesToLoad", "not an array");
            var b, c = [];
            return f(a, function(a) {
                function d(a) {
                    var b, c;
                    for (b = 0, c = a.length; c > b; b++) {
                        var d = a[b],
                            e = p.get(d[0]);
                        e[d[1]].apply(e, d[2])
                    }
                }
                if (!n.get(a)) {
                    n.put(a, !0);
                    try {
                        w(a) ? (b = Rc(a), c = c.concat(j(b.requires)).concat(b._runBlocks), d(b._invokeQueue), d(b._configBlocks)) : z(a) ? c.push(p.invoke(a)) : dd(a) ? c.push(p.invoke(a)) : fa(a, "module")
                    } catch (e) {
                        throw dd(a) && (a = a[a.length - 1]), e.message && e.stack && -1 == e.stack.indexOf(e.message) && (e = e.message + "\n" + e.stack), Jd("modulerr", a, e.stack || e.message || e)
                    }
                }
            }), c
        }

        function k(a, c) {
            function d(b, d) {
                if (a.hasOwnProperty(b)) {
                    if (a[b] === l) throw Jd("cdep", b + " <- " + m.join(" <- "));
                    return a[b]
                }
                try {
                    return m.unshift(b), a[b] = l, a[b] = c(b, d)
                } catch (e) {
                    throw a[b] === l && delete a[b], e
                } finally {
                    m.shift()
                }
            }

            function e(a, c, e, f) {
                "string" == typeof e && (f = e, e = null);
                var g, h, i, j = [],
                    k = Na.$$annotate(a, b, f);
                for (h = 0, g = k.length; g > h; h++) {
                    if (i = k[h], "string" != typeof i) throw Jd("itkn", i);
                    j.push(e && e.hasOwnProperty(i) ? e[i] : d(i, f))
                }
                return dd(a) && (a = a[g]), a.apply(c, j)
            }
            return {
                invoke: e,
                instantiate: function(a, b, c) {
                    var d = Object.create((dd(a) ? a[a.length - 1] : a).prototype || null);
                    return a = e(a, d, b, c), u(a) || z(a) ? a : d
                },
                get: d,
                annotate: Na.$$annotate,
                has: function(b) {
                    return o.hasOwnProperty(b + "Provider") || a.hasOwnProperty(b)
                }
            }
        }
        b = !0 === b;
        var l = {},
            m = [],
            n = new La([], !0),
            o = {
                $provide: {
                    provider: d(e),
                    factory: d(i),
                    service: d(function(a, b) {
                        return i(a, ["$injector", function(a) {
                            return a.instantiate(b)
                        }])
                    }),
                    value: d(function(a, b) {
                        return i(a, q(b), !1)
                    }),
                    constant: d(function(a, b) {
                        ga(a, "constant"), o[a] = b, r[a] = b
                    }),
                    decorator: function(a, b) {
                        var c = p.get(a + "Provider"),
                            d = c.$get;
                        c.$get = function() {
                            var a = t.invoke(d, c);
                            return t.invoke(b, null, {
                                $delegate: a
                            })
                        }
                    }
                }
            },
            p = o.$injector = k(o, function(a, b) {
                throw ad.isString(b) && m.push(b), Jd("unpr", m.join(" <- "))
            }),
            r = {},
            t = r.$injector = k(r, function(a, b) {
                var d = p.get(a + "Provider", b);
                return t.invoke(d.$get, d, c, a)
            });
        return f(j(a), function(a) {
            a && t.invoke(a)
        }), t
    }

    function Oa() {
        var a = !0;
        this.disableAutoScrolling = function() {
            a = !1
        }, this.$get = ["$window", "$location", "$rootScope", function(b, c, d) {
            function e(a) {
                var b = null;
                return Array.prototype.some.call(a, function(a) {
                    return "a" === H(a) ? (b = a, !0) : void 0
                }), b
            }

            function f(a) {
                if (a) {
                    a.scrollIntoView();
                    var c;
                    c = g.yOffset, z(c) ? c = c() : F(c) ? (c = c[0], c = "fixed" !== b.getComputedStyle(c).position ? 0 : c.getBoundingClientRect().bottom) : x(c) || (c = 0), c && (a = a.getBoundingClientRect().top, b.scrollBy(0, a - c))
                } else b.scrollTo(0, 0)
            }

            function g(a) {
                a = w(a) ? a : c.hash();
                var b;
                a ? (b = h.getElementById(a)) ? f(b) : (b = e(h.getElementsByName(a))) ? f(b) : "top" === a && f(null) : f(null)
            }
            var h = b.document;
            return a && d.$watch(function() {
                return c.hash()
            }, function(a, b) {
                a === b && "" === a || Ea(function() {
                    d.$evalAsync(g)
                })
            }), g
        }]
    }

    function Pa(a, b) {
        return a || b ? a ? b ? (dd(a) && (a = a.join(" ")), dd(b) && (b = b.join(" ")), a + " " + b) : a : b : ""
    }

    function Qa(a) {
        w(a) && (a = a.split(" "));
        var b = ja();
        return f(a, function(a) {
            a.length && (b[a] = !0)
        }), b
    }

    function Ra(a) {
        return u(a) ? a : {}
    }

    function Sa(a, b, c, d) {
        function e(a) {
            try {
                a.apply(null, Wc.call(arguments, 1))
            } finally {
                if (q--, 0 === q)
                    for (; r.length;) try {
                        r.pop()()
                    } catch (b) {
                        c.error(b)
                    }
            }
        }

        function g() {
            x = null, h(), i()
        }

        function h() {
            a: {
                try {
                    t = l.state;
                    break a
                } catch (a) {}
                t = void 0
            }
            t = s(t) ? null : t,
            L(t, A) && (t = A),
            A = t
        }

        function i() {
            (v !== j.url() || u !== t) && (v = j.url(), u = t, f(y, function(a) {
                a(j.url(), t)
            }))
        }
        var j = this,
            k = a.location,
            l = a.history,
            m = a.setTimeout,
            n = a.clearTimeout,
            p = {};
        j.isMock = !1;
        var q = 0,
            r = [];
        j.$$completeOutstandingRequest = e, j.$$incOutstandingRequestCount = function() {
            q++
        }, j.notifyWhenNoOutstandingRequests = function(a) {
            0 === q ? a() : r.push(a)
        };
        var t, u, v = k.href,
            w = b.find("base"),
            x = null;
        h(), u = t, j.url = function(b, c, e) {
            if (s(e) && (e = null), k !== a.location && (k = a.location), l !== a.history && (l = a.history), b) {
                var f = u === e;
                if (v === b && (!d.history || f)) return j;
                var g = v && sb(v) === sb(b);
                return v = b, u = e, !d.history || g && f ? ((!g || x) && (x = b), c ? k.replace(b) : g ? (c = k, e = b.indexOf("#"), e = -1 === e ? "" : b.substr(e), c.hash = e) : k.href = b, k.href !== b && (x = b)) : (l[c ? "replaceState" : "pushState"](e, "", b), h(), u = t), j
            }
            return x || k.href.replace(/%27/g, "'")
        }, j.state = function() {
            return t
        };
        var y = [],
            z = !1,
            A = null;
        j.onUrlChange = function(b) {
            return z || (d.history && Pc(a).on("popstate", g), Pc(a).on("hashchange", g), z = !0), y.push(b), b
        }, j.$$applicationDestroyed = function() {
            Pc(a).off("hashchange popstate", g)
        }, j.$$checkUrlChange = i, j.baseHref = function() {
            var a = w.attr("href");
            return a ? a.replace(/^(https?\:)?\/\/[^\/]*/, "") : ""
        }, j.defer = function(a, b) {
            var c;
            return q++, c = m(function() {
                delete p[c], e(a)
            }, b || 0), p[c] = !0, c
        }, j.defer.cancel = function(a) {
            return p[a] ? (delete p[a], n(a), e(o), !0) : !1
        }
    }

    function Ta() {
        this.$get = ["$window", "$log", "$sniffer", "$document", function(a, b, c, d) {
            return new Sa(a, d, b, c)
        }]
    }

    function Ua() {
        this.$get = function() {
            function a(a, c) {
                function e(a) {
                    a != m && (n ? n == a && (n = a.n) : n = a, f(a.n, a.p), f(a, m), m = a, m.n = null)
                }

                function f(a, b) {
                    a != b && (a && (a.p = b), b && (b.n = a))
                }
                if (a in b) throw d("$cacheFactory")("iid", a);
                var g = 0,
                    h = k({}, c, {
                        id: a
                    }),
                    i = ja(),
                    j = c && c.capacity || Number.MAX_VALUE,
                    l = ja(),
                    m = null,
                    n = null;
                return b[a] = {
                    put: function(a, b) {
                        if (!s(b)) {
                            if (j < Number.MAX_VALUE) {
                                var c = l[a] || (l[a] = {
                                    key: a
                                });
                                e(c)
                            }
                            return a in i || g++, i[a] = b, g > j && this.remove(n.key), b
                        }
                    },
                    get: function(a) {
                        if (j < Number.MAX_VALUE) {
                            var b = l[a];
                            if (!b) return;
                            e(b)
                        }
                        return i[a]
                    },
                    remove: function(a) {
                        if (j < Number.MAX_VALUE) {
                            var b = l[a];
                            if (!b) return;
                            b == m && (m = b.p), b == n && (n = b.n), f(b.n, b.p), delete l[a]
                        }
                        a in i && (delete i[a], g--)
                    },
                    removeAll: function() {
                        i = ja(), g = 0, l = ja(), m = n = null
                    },
                    destroy: function() {
                        l = h = i = null, delete b[a]
                    },
                    info: function() {
                        return k({}, h, {
                            size: g
                        })
                    }
                }
            }
            var b = {};
            return a.info = function() {
                var a = {};
                return f(b, function(b, c) {
                    a[c] = b.info()
                }), a
            }, a.get = function(a) {
                return b[a]
            }, a
        }
    }

    function Va() {
        this.$get = ["$cacheFactory", function(a) {
            return a("templates")
        }]
    }

    function Wa(a, d) {
        function e(a, b, c) {
            var d = /^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,
                e = {};
            return f(a, function(a, f) {
                var g = a.match(d);
                if (!g) throw Rd("iscp", b, f, a, c ? "controller bindings definition" : "isolate scope definition");
                e[f] = {
                    mode: g[1][0],
                    collection: "*" === g[2],
                    optional: "?" === g[3],
                    attrName: g[4] || f
                }
            }), e
        }

        function g(a) {
            var b = a.charAt(0);
            if (!b || b !== Tc(b)) throw Rd("baddir", a);
            if (a !== a.trim()) throw Rd("baddir", a)
        }
        var i = {},
            j = /^\s*directive\:\s*([\w\-]+)\s+(.*)$/,
            l = /(([\w\-]+)(?:\:([^;]+))?;?)/,
            m = G("ngSrc,ngSrcset,src,srcset"),
            r = /^(?:(\^\^?)?(\?)?(\^\^?)?)?/,
            v = /^(on[a-z]+|formaction)$/;
        this.directive = function y(b, c) {
            return ga(b, "directive"), w(b) ? (g(b), ea(c, "directiveFactory"), i.hasOwnProperty(b) || (i[b] = [], a.factory(b + "Directive", ["$injector", "$exceptionHandler", function(a, c) {
                var d = [];
                return f(i[b], function(f, g) {
                    try {
                        var h = a.invoke(f);
                        z(h) ? h = {
                            compile: q(h)
                        } : !h.compile && h.link && (h.compile = q(h.link)), h.priority = h.priority || 0, h.index = g, h.name = h.name || b, h.require = h.require || h.controller && h.name, h.restrict = h.restrict || "EA";
                        var i = h,
                            j = h,
                            k = h.name,
                            l = {
                                isolateScope: null,
                                bindToController: null
                            };
                        if (u(j.scope) && (!0 === j.bindToController ? (l.bindToController = e(j.scope, k, !0), l.isolateScope = {}) : l.isolateScope = e(j.scope, k, !1)), u(j.bindToController) && (l.bindToController = e(j.bindToController, k, !0)), u(l.bindToController)) {
                            var m = j.controller,
                                n = j.controllerAs;
                            if (!m) throw Rd("noctrl", k);
                            var o;
                            a: if (n && w(n)) o = n;
                                else {
                                    if (w(m)) {
                                        var p = Ud.exec(m);
                                        if (p) {
                                            o = p[3];
                                            break a
                                        }
                                    }
                                    o = void 0
                                }
                            if (!o) throw Rd("noident", k)
                        }
                        var r = i.$$bindings = l;
                        u(r.isolateScope) && (h.$$isolateBindings = r.isolateScope), h.$$moduleName = f.$$moduleName, d.push(h)
                    } catch (s) {
                        c(s)
                    }
                }), d
            }])), i[b].push(c)) : f(b, h(y)), this
        }, this.aHrefSanitizationWhitelist = function(a) {
            return t(a) ? (d.aHrefSanitizationWhitelist(a), this) : d.aHrefSanitizationWhitelist()
        }, this.imgSrcSanitizationWhitelist = function(a) {
            return t(a) ? (d.imgSrcSanitizationWhitelist(a), this) : d.imgSrcSanitizationWhitelist()
        };
        var x = !0;
        this.debugInfoEnabled = function(a) {
            return t(a) ? (x = a, this) : x
        }, this.$get = ["$injector", "$interpolate", "$exceptionHandler", "$templateRequest", "$parse", "$controller", "$rootScope", "$sce", "$animate", "$$sanitizeUri", function(a, d, e, g, h, q, t, y, A, B) {
            function D(a, b) {
                try {
                    a.addClass(b)
                } catch (c) {}
            }

            function E(a, b, c, d, e) {
                a instanceof Pc || (a = Pc(a)), f(a, function(b, c) {
                    b.nodeType == md && b.nodeValue.match(/\S+/) && (a[c] = Pc(b).wrap("<span></span>").parent()[0])
                });
                var g = F(a, b, a, c, d, e);
                E.$$addScopeClass(a);
                var h = null;
                return function(b, c, d) {
                    ea(b, "scope"), e && e.needsNewScope && (b = b.$parent.$new()), d = d || {};
                    var f = d.parentBoundTranscludeFn,
                        i = d.transcludeControllers;
                    if (d = d.futureParentElement, f && f.$$boundTransclude && (f = f.$$boundTransclude), h || (h = (d = d && d[0]) && "foreignobject" !== H(d) && d.toString().match(/SVG/) ? "svg" : "html"), d = "html" !== h ? Pc(X(h, Pc("<div>").append(a).html())) : c ? Ad.clone.call(a) : a, i)
                        for (var j in i) d.data("$" + j + "Controller", i[j].instance);
                    return E.$$addScopeInfo(d, b), c && c(d, b), g && g(b, d, d, f), d
                }
            }

            function F(a, b, d, e, f, g) {
                function h(a, d, e, f) {
                    var g, h, i, j, k, l, o;
                    if (m)
                        for (o = Array(d.length), j = 0; j < n.length; j += 3) g = n[j], o[g] = d[g];
                    else o = d;
                    for (j = 0, k = n.length; k > j;) h = o[n[j++]], d = n[j++], g = n[j++], d ? (d.scope ? (i = a.$new(), E.$$addScopeInfo(Pc(h), i)) : i = a, l = d.transcludeOnThisElement ? G(a, d.transclude, f) : !d.templateOnThisElement && f ? f : !f && b ? G(a, b) : null, d(g, i, h, e, l)) : g && g(a, h.childNodes, c, f)
                }
                for (var i, j, k, l, m, n = [], o = 0; o < a.length; o++) i = new da, j = J(a[o], [], i, 0 === o ? e : c, f), (g = j.length ? N(j, a[o], i, b, d, null, [], [], g) : null) && g.scope && E.$$addScopeClass(i.$$element), i = g && g.terminal || !(k = a[o].childNodes) || !k.length ? null : F(k, g ? (g.transcludeOnThisElement || !g.templateOnThisElement) && g.transclude : b), (g || i) && (n.push(o, g, i), l = !0, m = m || g), g = null;
                return l ? h : null
            }

            function G(a, b, c) {
                return function(d, e, f, g, h) {
                    return d || (d = a.$new(!1, h), d.$$transcluded = !0), b(d, e, {
                        parentBoundTranscludeFn: c,
                        transcludeControllers: f,
                        futureParentElement: g
                    })
                }
            }

            function J(a, b, c, d, e) {
                var f, g = c.$attr;
                switch (a.nodeType) {
                    case 1:
                        P(b, Xa(H(a)), "E", d, e);
                        for (var h, i, k, m = a.attributes, n = 0, o = m && m.length; o > n; n++) {
                            var p = !1,
                                q = !1;
                            h = m[n], f = h.name, i = fd(h.value), h = Xa(f), (k = ia.test(h)) && (f = f.replace(Sd, "").substr(8).replace(/_(.)/g, function(a, b) {
                                return b.toUpperCase()
                            })), (h = h.match(ka)) && Q(h[1]) && (p = f, q = f.substr(0, f.length - 5) + "end", f = f.substr(0, f.length - 6)), h = Xa(f.toLowerCase()), g[h] = f, (k || !c.hasOwnProperty(h)) && (c[h] = i, Fa(a, h) && (c[h] = !0)), Z(a, b, i, h, k), P(b, h, "A", d, e, p, q)
                        }
                        if (a = a.className, u(a) && (a = a.animVal), w(a) && "" !== a)
                            for (; f = l.exec(a);) h = Xa(f[2]), P(b, h, "C", d, e) && (c[h] = fd(f[3])), a = a.substr(f.index + f[0].length);
                        break;
                    case md:
                        if (11 === Oc)
                            for (; a.parentNode && a.nextSibling && a.nextSibling.nodeType === md;) a.nodeValue += a.nextSibling.nodeValue, a.parentNode.removeChild(a.nextSibling);
                        W(b, a.nodeValue);
                        break;
                    case 8:
                        try {
                            (f = j.exec(a.nodeValue)) && (h = Xa(f[1]), P(b, h, "M", d, e) && (c[h] = fd(f[2])))
                        } catch (r) {}
                }
                return b.sort(U), b
            }

            function K(a, b, c) {
                var d = [],
                    e = 0;
                if (b && a.hasAttribute && a.hasAttribute(b)) {
                    do {
                        if (!a) throw Rd("uterdir", b, c);
                        1 == a.nodeType && (a.hasAttribute(b) && e++, a.hasAttribute(c) && e--), d.push(a), a = a.nextSibling
                    } while (e > 0)
                } else d.push(a);
                return Pc(d)
            }

            function M(a, b, c) {
                return function(d, e, f, g, h) {
                    return e = K(e[0], b, c), a(d, e, f, g, h)
                }
            }

            function N(a, d, f, g, h, i, j, k, l) {
                function m(a, b, c, d) {
                    a && (c && (a = M(a, c, d)), a.require = s.require, a.directiveName = t, (D === s || s.$$isolateScope) && (a = _(a, {
                        isolateScope: !0
                    })), j.push(a)), b && (c && (b = M(b, c, d)), b.require = s.require, b.directiveName = t, (D === s || s.$$isolateScope) && (b = _(b, {
                        isolateScope: !0
                    })), k.push(b))
                }

                function n(a, b, c, d) {
                    var e;
                    if (w(b)) {
                        var f = b.match(r);
                        b = b.substring(f[0].length);
                        var g = f[1] || f[3],
                            f = "?" === f[2];
                        if ("^^" === g ? c = c.parent() : e = (e = d && d[b]) && e.instance, e || (d = "$" + b + "Controller", e = g ? c.inheritedData(d) : c.data(d)), !e && !f) throw Rd("ctreq", b, a)
                    } else if (dd(b))
                        for (e = [], g = 0, f = b.length; f > g; g++) e[g] = n(a, b[g], c, d);
                    return e || null
                }

                function o(a, b, c, d, e, f) {
                    var g, h = ja();
                    for (g in d) {
                        var i = d[g],
                            j = {
                                $scope: i === D || i.$$isolateScope ? e : f,
                                $element: a,
                                $attrs: b,
                                $transclude: c
                            },
                            k = i.controller;
                        "@" == k && (k = b[i.name]), j = q(k, j, !0, i.controllerAs), h[i.name] = j, L || a.data("$" + i.name + "Controller", j.instance)
                    }
                    return h
                }

                function p(a, b, e, g, h) {
                    function i(a, b, d) {
                        var e;
                        return C(a) || (d = b, b = a, a = c), L && (e = q), d || (d = L ? s.parent() : s), h(a, b, e, d, y)
                    }
                    var l, m, p, q, r, s, t;
                    d === e ? (g = f, s = f.$$element) : (s = Pc(e), g = new da(s, f)), p = b, D ? m = b.$new(!0) : A && (p = b.$parent), h && (r = i, r.$$boundTransclude = h), B && (q = o(s, g, r, B, m, b)), D && (E.$$addScopeInfo(s, m, !0, !(F && (F === D || F === D.$$originalDirective))), E.$$addScopeClass(s, !0), m.$$isolateBindings = D.$$isolateBindings, (t = ba(b, g, m, m.$$isolateBindings, D)) && m.$on("$destroy", t));
                    for (var u in q) {
                        t = B[u];
                        var v = q[u],
                            w = t.$$bindings.bindToController;
                        v.identifier && w && (l = ba(p, g, v.instance, w, t));
                        var x = v();
                        x !== v.instance && (v.instance = x, s.data("$" + t.name + "Controller", x), l && l(), l = ba(p, g, v.instance, w, t))
                    }
                    for (Q = 0, U = j.length; U > Q; Q++) l = j[Q], aa(l, l.isolateScope ? m : b, s, g, l.require && n(l.directiveName, l.require, s, q), r);
                    var y = b;
                    for (D && (D.template || null === D.templateUrl) && (y = m), a && a(y, e.childNodes, c, h), Q = k.length - 1; Q >= 0; Q--) l = k[Q], aa(l, l.isolateScope ? m : b, s, g, l.require && n(l.directiveName, l.require, s, q), r)
                }
                l = l || {};
                for (var s, t, v, x, y = -Number.MAX_VALUE, A = l.newScopeDirective, B = l.controllerDirectives, D = l.newIsolateScopeDirective, F = l.templateDirective, G = l.nonTlbTranscludeDirective, H = !1, I = !1, L = l.hasElementTranscludeDirective, N = f.$$element = Pc(d), P = g, Q = 0, U = a.length; U > Q; Q++) {
                    s = a[Q];
                    var W = s.$$start,
                        Y = s.$$end;
                    if (W && (N = K(d, W, Y)), v = c, y > s.priority) break;
                    if ((v = s.scope) && (s.templateUrl || (u(v) ? (V("new/isolated scope", D || A, s, N), D = s) : V("new/isolated scope", D, s, N)), A = A || s), t = s.name, !s.templateUrl && s.controller && (v = s.controller, B = B || ja(), V("'" + t + "' controller", B[t], s, N), B[t] = s), (v = s.transclude) && (H = !0, s.$$tlb || (V("transclusion", G, s, N), G = s), "element" == v ? (L = !0, y = s.priority, v = N, N = f.$$element = Pc(b.createComment(" " + t + ": " + f[t] + " ")), d = N[0], $(h, Wc.call(v, 0), d), P = E(v, g, y, i && i.name, {
                            nonTlbTranscludeDirective: G
                        })) : (v = Pc(qa(d)).contents(), N.empty(), P = E(v, g, c, c, {
                            needsNewScope: s.$$isolateScope || s.$$newScope
                        }))), s.template)
                        if (I = !0, V("template", F, s, N), F = s, v = z(s.template) ? s.template(N, f) : s.template, v = ha(v), s.replace) {
                            if (i = s, v = vd.test(v) ? Za(X(s.templateNamespace, fd(v))) : [], d = v[0], 1 != v.length || 1 !== d.nodeType) throw Rd("tplrt", t, "");
                            $(h, N, d), v = {
                                $attr: {}
                            };
                            var Z = J(d, [], v),
                                ca = a.splice(Q + 1, a.length - (Q + 1));
                            (D || A) && O(Z, D, A), a = a.concat(Z).concat(ca), R(f, v), U = a.length
                        } else N.html(v);
                    if (s.templateUrl) I = !0, V("template", F, s, N), F = s, s.replace && (i = s), p = S(a.splice(Q, a.length - Q), N, f, h, H && P, j, k, {
                        controllerDirectives: B,
                        newScopeDirective: A !== s && A,
                        newIsolateScopeDirective: D,
                        templateDirective: F,
                        nonTlbTranscludeDirective: G
                    }), U = a.length;
                    else if (s.compile) try {
                        x = s.compile(N, f, P), z(x) ? m(null, x, W, Y) : x && m(x.pre, x.post, W, Y)
                    } catch (ea) {
                        e(ea, T(N))
                    }
                    s.terminal && (p.terminal = !0, y = Math.max(y, s.priority))
                }
                return p.scope = A && !0 === A.scope, p.transcludeOnThisElement = H, p.templateOnThisElement = I, p.transclude = P, l.hasElementTranscludeDirective = L, p
            }

            function O(a, b, c) {
                for (var d = 0, e = a.length; e > d; d++) a[d] = n(a[d], {
                    $$isolateScope: b,
                    $$newScope: c
                })
            }

            function P(b, c, d, f, g, h, j) {
                if (c === g) return null;
                if (g = null, i.hasOwnProperty(c)) {
                    var k;
                    c = a.get(c + "Directive");
                    for (var l = 0, m = c.length; m > l; l++) try {
                        k = c[l], (s(f) || f > k.priority) && -1 != k.restrict.indexOf(d) && (h && (k = n(k, {
                            $$start: h,
                            $$end: j
                        })), b.push(k), g = k)
                    } catch (o) {
                        e(o)
                    }
                }
                return g
            }

            function Q(b) {
                if (i.hasOwnProperty(b))
                    for (var c = a.get(b + "Directive"), d = 0, e = c.length; e > d; d++)
                        if (b = c[d], b.multiElement) return !0;
                return !1
            }

            function R(a, b) {
                var c = b.$attr,
                    d = a.$attr,
                    e = a.$$element;
                f(a, function(d, e) {
                    "$" != e.charAt(0) && (b[e] && b[e] !== d && (d += ("style" === e ? ";" : " ") + b[e]), a.$set(e, d, !0, c[e]))
                }), f(b, function(b, f) {
                    "class" == f ? (D(e, b), a["class"] = (a["class"] ? a["class"] + " " : "") + b) : "style" == f ? (e.attr("style", e.attr("style") + ";" + b), a.style = (a.style ? a.style + ";" : "") + b) : "$" == f.charAt(0) || a.hasOwnProperty(f) || (a[f] = b, d[f] = c[f])
                })
            }

            function S(a, b, c, d, e, h, i, j) {
                var k, l, m = [],
                    o = b[0],
                    p = a.shift(),
                    q = n(p, {
                        templateUrl: null,
                        transclude: null,
                        replace: null,
                        $$originalDirective: p
                    }),
                    r = z(p.templateUrl) ? p.templateUrl(b, c) : p.templateUrl,
                    s = p.templateNamespace;
                return b.empty(), g(r).then(function(g) {
                        var n, t;
                        if (g = ha(g), p.replace) {
                            if (g = vd.test(g) ? Za(X(s, fd(g))) : [], n = g[0], 1 != g.length || 1 !== n.nodeType) throw Rd("tplrt", p.name, r);
                            g = {
                                $attr: {}
                            }, $(d, b, n);
                            var v = J(n, [], g);
                            u(p.scope) && O(v, !0), a = v.concat(a), R(c, g)
                        } else n = o, b.html(g);
                        for (a.unshift(q), k = N(a, n, c, e, b, p, h, i, j), f(d, function(a, c) {
                                a == n && (d[c] = b[0])
                            }), l = F(b[0].childNodes, e); m.length;) {
                            g = m.shift(), t = m.shift();
                            var w = m.shift(),
                                x = m.shift(),
                                v = b[0];
                            if (!g.$$destroyed) {
                                if (t !== o) {
                                    var y = t.className;
                                    j.hasElementTranscludeDirective && p.replace || (v = qa(n)), $(w, Pc(t), v), D(Pc(v), y)
                                }
                                t = k.transcludeOnThisElement ? G(g, k.transclude, x) : x, k(l, g, v, d, t)
                            }
                        }
                        m = null
                    }),
                    function(a, b, c, d, e) {
                        a = e, b.$$destroyed || (m ? m.push(b, c, d, a) : (k.transcludeOnThisElement && (a = G(b, k.transclude, e)), k(l, b, c, d, a)))
                    }
            }

            function U(a, b) {
                var c = b.priority - a.priority;
                return 0 !== c ? c : a.name !== b.name ? a.name < b.name ? -1 : 1 : a.index - b.index
            }

            function V(a, b, c, d) {
                function e(a) {
                    return a ? " (module: " + a + ")" : ""
                }
                if (b) throw Rd("multidir", b.name, e(b.$$moduleName), c.name, e(c.$$moduleName), a, T(d))
            }

            function W(a, b) {
                var c = d(b, !0);
                c && a.push({
                    priority: 0,
                    compile: function(a) {
                        a = a.parent();
                        var b = !!a.length;
                        return b && E.$$addBindingClass(a),
                            function(a, d) {
                                var e = d.parent();
                                b || E.$$addBindingClass(e), E.$$addBindingInfo(e, c.expressions), a.$watch(c, function(a) {
                                    d[0].nodeValue = a
                                })
                            }
                    }
                })
            }

            function X(a, c) {
                switch (a = Tc(a || "html")) {
                    case "svg":
                    case "math":
                        var d = b.createElement("div");
                        return d.innerHTML = "<" + a + ">" + c + "</" + a + ">", d.childNodes[0].childNodes;
                    default:
                        return c
                }
            }

            function Y(a, b) {
                if ("srcdoc" == b) return y.HTML;
                var c = H(a);
                return "xlinkHref" == b || "form" == c && "action" == b || "img" != c && ("src" == b || "ngSrc" == b) ? y.RESOURCE_URL : void 0
            }

            function Z(a, b, c, e, f) {
                var g = Y(a, e);
                f = m[e] || f;
                var h = d(c, !0, g, f);
                if (h) {
                    if ("multiple" === e && "select" === H(a)) throw Rd("selmulti", T(a));
                    b.push({
                        priority: 100,
                        compile: function() {
                            return {
                                pre: function(a, b, i) {
                                    if (b = i.$$observers || (i.$$observers = ja()), v.test(e)) throw Rd("nodomevents");
                                    var j = i[e];
                                    j !== c && (h = j && d(j, !0, g, f), c = j), h && (i[e] = h(a), (b[e] || (b[e] = [])).$$inter = !0, (i.$$observers && i.$$observers[e].$$scope || a).$watch(h, function(a, b) {
                                        "class" === e && a != b ? i.$updateClass(a, b) : i.$set(e, a)
                                    }))
                                }
                            }
                        }
                    })
                }
            }

            function $(a, c, d) {
                var e, f, g = c[0],
                    h = c.length,
                    i = g.parentNode;
                if (a)
                    for (e = 0, f = a.length; f > e; e++)
                        if (a[e] == g) {
                            a[e++] = d, f = e + h - 1;
                            for (var j = a.length; j > e; e++, f++) j > f ? a[e] = a[f] : delete a[e];
                            a.length -= h - 1, a.context === g && (a.context = d);
                            break
                        }
                for (i && i.replaceChild(d, g), a = b.createDocumentFragment(), a.appendChild(g), Pc.hasData(g) && (Pc.data(d, Pc.data(g)), Qc ? (cd = !0, Qc.cleanData([g])) : delete Pc.cache[g[Pc.expando]]), g = 1, h = c.length; h > g; g++) i = c[g], Pc(i).remove(), a.appendChild(i), delete c[g];
                c[0] = d, c.length = 1
            }

            function _(a, b) {
                return k(function() {
                    return a.apply(null, arguments)
                }, a, b)
            }

            function aa(a, b, c, d, f, g) {
                try {
                    a(b, c, d, f, g)
                } catch (h) {
                    e(h, T(c))
                }
            }

            function ba(a, b, c, e, g) {
                var i = [];
                return f(e, function(e, f) {
                    var j, k, l, m, n = e.attrName,
                        p = e.optional;
                    switch (e.mode) {
                        case "@":
                            p || Uc.call(b, n) || (c[f] = b[n] = void 0), b.$observe(n, function(a) {
                                w(a) && (c[f] = a)
                            }), b.$$observers[n].$$scope = a, w(b[n]) && (c[f] = d(b[n])(a));
                            break;
                        case "=":
                            if (!Uc.call(b, n)) {
                                if (p) break;
                                b[n] = void 0
                            }
                            if (p && !b[n]) break;
                            k = h(b[n]), m = k.literal ? L : function(a, b) {
                                return a === b || a !== a && b !== b
                            }, l = k.assign || function() {
                                throw j = c[f] = k(a), Rd("nonassign", b[n], g.name)
                            }, j = c[f] = k(a), p = function(b) {
                                return m(b, c[f]) || (m(b, j) ? l(a, b = c[f]) : c[f] = b), j = b
                            }, p.$stateful = !0, p = e.collection ? a.$watchCollection(b[n], p) : a.$watch(h(b[n], p), null, k.literal), i.push(p);
                            break;
                        case "&":
                            if (k = b.hasOwnProperty(n) ? h(b[n]) : o, k === o && p) break;
                            c[f] = function(b) {
                                return k(a, b)
                            }
                    }
                }), i.length && function() {
                    for (var a = 0, b = i.length; b > a; ++a) i[a]()
                }
            }
            var da = function(a, b) {
                if (b) {
                    var c, d, e, f = Object.keys(b);
                    for (c = 0, d = f.length; d > c; c++) e = f[c], this[e] = b[e]
                } else this.$attr = {};
                this.$$element = a
            };
            da.prototype = {
                $normalize: Xa,
                $addClass: function(a) {
                    a && 0 < a.length && A.addClass(this.$$element, a)
                },
                $removeClass: function(a) {
                    a && 0 < a.length && A.removeClass(this.$$element, a)
                },
                $updateClass: function(a, b) {
                    var c = Ya(a, b);
                    c && c.length && A.addClass(this.$$element, c), (c = Ya(b, a)) && c.length && A.removeClass(this.$$element, c)
                },
                $set: function(a, b, c, d) {
                    var g = Fa(this.$$element[0], a),
                        h = Dd[a],
                        i = a;
                    if (g ? (this.$$element.prop(a, b), d = g) : h && (this[h] = b, i = h), this[a] = b, d ? this.$attr[a] = d : (d = this.$attr[a]) || (this.$attr[a] = d = ca(a, "-")), g = H(this.$$element), "a" === g && "href" === a || "img" === g && "src" === a) this[a] = b = B(b, "src" === a);
                    else if ("img" === g && "srcset" === a) {
                        for (var g = "", h = fd(b), j = /(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/, j = /\s/.test(h) ? j : /(,)/, h = h.split(j), j = Math.floor(h.length / 2), k = 0; j > k; k++) var l = 2 * k,
                            g = g + B(fd(h[l]), !0),
                            g = g + (" " + fd(h[l + 1]));
                        h = fd(h[2 * k]).split(/\s/), g += B(fd(h[0]), !0), 2 === h.length && (g += " " + fd(h[1])), this[a] = b = g
                    }!1 !== c && (null === b || s(b) ? this.$$element.removeAttr(d) : this.$$element.attr(d, b)), (a = this.$$observers) && f(a[i], function(a) {
                        try {
                            a(b)
                        } catch (c) {
                            e(c)
                        }
                    })
                },
                $observe: function(a, b) {
                    var c = this,
                        d = c.$$observers || (c.$$observers = ja()),
                        e = d[a] || (d[a] = []);
                    return e.push(b), t.$evalAsync(function() {
                            e.$$inter || !c.hasOwnProperty(a) || s(c[a]) || b(c[a])
                        }),
                        function() {
                            I(e, b)
                        }
                }
            };
            var fa = d.startSymbol(),
                ga = d.endSymbol(),
                ha = "{{" == fa || "}}" == ga ? p : function(a) {
                    return a.replace(/\{\{/g, fa).replace(/}}/g, ga)
                },
                ia = /^ngAttr[A-Z]/,
                ka = /^(.+)Start$/;
            return E.$$addBindingInfo = x ? function(a, b) {
                var c = a.data("$binding") || [];
                dd(b) ? c = c.concat(b) : c.push(b), a.data("$binding", c)
            } : o, E.$$addBindingClass = x ? function(a) {
                D(a, "ng-binding")
            } : o, E.$$addScopeInfo = x ? function(a, b, c, d) {
                a.data(c ? d ? "$isolateScopeNoTemplate" : "$isolateScope" : "$scope", b)
            } : o, E.$$addScopeClass = x ? function(a, b) {
                D(a, b ? "ng-isolate-scope" : "ng-scope")
            } : o, E
        }]
    }

    function Xa(a) {
        return ma(a.replace(Sd, ""))
    }

    function Ya(a, b) {
        var c = "",
            d = a.split(/\s+/),
            e = b.split(/\s+/),
            f = 0;
        a: for (; f < d.length; f++) {
            for (var g = d[f], h = 0; h < e.length; h++)
                if (g == e[h]) continue a;
            c += (0 < c.length ? " " : "") + g
        }
        return c
    }

    function Za(a) {
        a = Pc(a);
        var b = a.length;
        if (1 >= b) return a;
        for (; b--;) 8 === a[b].nodeType && Xc.call(a, b, 1);
        return a
    }

    function $a() {
        var a = {},
            b = !1;
        this.register = function(b, c) {
            ga(b, "controller"), u(b) ? k(a, b) : a[b] = c
        }, this.allowGlobals = function() {
            b = !0
        }, this.$get = ["$injector", "$window", function(e, f) {
            function g(a, b, c, e) {
                if (!a || !u(a.$scope)) throw d("$controller")("noscp", e, b);
                a.$scope[b] = c
            }
            return function(d, h, i, j) {
                var l, m, n;
                if (i = !0 === i, j && w(j) && (n = j), w(d)) {
                    if (j = d.match(Ud), !j) throw Td("ctrlfmt", d);
                    m = j[1], n = n || j[3], d = a.hasOwnProperty(m) ? a[m] : ha(h.$scope, m, !0) || (b ? ha(f, m, !0) : c), fa(d, m, !0)
                }
                return i ? (i = (dd(d) ? d[d.length - 1] : d).prototype, l = Object.create(i || null), n && g(h, n, l, m || d.name), k(function() {
                    var a = e.invoke(d, l, h, m);
                    return a !== l && (u(a) || z(a)) && (l = a, n && g(h, n, l, m || d.name)), l
                }, {
                    instance: l,
                    identifier: n
                })) : (l = e.instantiate(d, h, m), n && g(h, n, l, m || d.name), l)
            }
        }]
    }

    function _a() {
        this.$get = ["$window", function(a) {
            return Pc(a.document)
        }]
    }

    function ab() {
        this.$get = ["$log", function(a) {
            return function(b, c) {
                a.error.apply(a, arguments)
            }
        }]
    }

    function bb(a) {
        return u(a) ? y(a) ? a.toISOString() : P(a) : a
    }

    function cb() {
        this.$get = function() {
            return function(a) {
                if (!a) return "";
                var b = [];
                return g(a, function(a, c) {
                    null === a || s(a) || (dd(a) ? f(a, function(a, d) {
                        b.push(Y(c) + "=" + Y(bb(a)))
                    }) : b.push(Y(c) + "=" + Y(bb(a))))
                }), b.join("&")
            }
        }
    }

    function db() {
        this.$get = function() {
            return function(a) {
                function b(a, d, e) {
                    null === a || s(a) || (dd(a) ? f(a, function(a, c) {
                        b(a, d + "[" + (u(a) ? c : "") + "]")
                    }) : u(a) && !y(a) ? g(a, function(a, c) {
                        b(a, d + (e ? "" : "[") + c + (e ? "" : "]"))
                    }) : c.push(Y(d) + "=" + Y(bb(a))))
                }
                if (!a) return "";
                var c = [];
                return b(a, "", !0), c.join("&")
            }
        }
    }

    function eb(a, b) {
        if (w(a)) {
            var c = a.replace($d, "").trim();
            if (c) {
                var d = b("Content-Type");
                (d = d && 0 === d.indexOf(Wd)) || (d = (d = c.match(Yd)) && Zd[d[0]].test(c)), d && (a = Q(c))
            }
        }
        return a
    }

    function fb(a) {
        var b, c = ja();
        return w(a) ? f(a.split("\n"), function(a) {
            b = a.indexOf(":");
            var d = Tc(fd(a.substr(0, b)));
            a = fd(a.substr(b + 1)), d && (c[d] = c[d] ? c[d] + ", " + a : a)
        }) : u(a) && f(a, function(a, b) {
            var d = Tc(b),
                e = fd(a);
            d && (c[d] = c[d] ? c[d] + ", " + e : e)
        }), c
    }

    function gb(a) {
        var b;
        return function(c) {
            return b || (b = fb(a)), c ? (c = b[Tc(c)], void 0 === c && (c = null), c) : b
        }
    }

    function hb(a, b, c, d) {
        return z(d) ? d(a, b, c) : (f(d, function(d) {
            a = d(a, b, c)
        }), a)
    }

    function ib() {
        var a = this.defaults = {
                transformResponse: [eb],
                transformRequest: [function(a) {
                    return u(a) && "[object File]" !== Zc.call(a) && "[object Blob]" !== Zc.call(a) && "[object FormData]" !== Zc.call(a) ? P(a) : a
                }],
                headers: {
                    common: {
                        Accept: "application/json, text/plain, */*"
                    },
                    post: K(Xd),
                    put: K(Xd),
                    patch: K(Xd)
                },
                xsrfCookieName: "XSRF-TOKEN",
                xsrfHeaderName: "X-XSRF-TOKEN",
                paramSerializer: "$httpParamSerializer"
            },
            b = !1;
        this.useApplyAsync = function(a) {
            return t(a) ? (b = !!a, this) : b
        };
        var e = !0;
        this.useLegacyPromiseExtensions = function(a) {
            return t(a) ? (e = !!a, this) : e
        };
        var g = this.interceptors = [];
        this.$get = ["$httpBackend", "$$cookieReader", "$cacheFactory", "$rootScope", "$q", "$injector", function(h, i, j, l, m, n) {
            function o(b) {
                function g(a) {
                    var b = k({}, a);
                    return b.data = hb(a.data, a.headers, a.status, i.transformResponse), a = a.status, a >= 200 && 300 > a ? b : m.reject(b)
                }

                function h(a, b) {
                    var c, d = {};
                    return f(a, function(a, e) {
                        z(a) ? (c = a(b), null != c && (d[e] = c)) : d[e] = a
                    }), d
                }
                if (!ad.isObject(b)) throw d("$http")("badreq", b);
                if (!w(b.url)) throw d("$http")("badreq", b.url);
                var i = k({
                    method: "get",
                    transformRequest: a.transformRequest,
                    transformResponse: a.transformResponse,
                    paramSerializer: a.paramSerializer
                }, b);
                i.headers = function(b) {
                    var c, d, e, f = a.headers,
                        g = k({}, b.headers),
                        f = k({}, f.common, f[Tc(b.method)]);
                    a: for (c in f) {
                        d = Tc(c);
                        for (e in g)
                            if (Tc(e) === d) continue a;
                        g[c] = f[c]
                    }
                    return h(g, K(b))
                }(b), i.method = Vc(i.method), i.paramSerializer = w(i.paramSerializer) ? n.get(i.paramSerializer) : i.paramSerializer;
                var j = [function(b) {
                        var d = b.headers,
                            e = hb(b.data, gb(d), c, b.transformRequest);
                        return s(e) && f(d, function(a, b) {
                            "content-type" === Tc(b) && delete d[b]
                        }), s(b.withCredentials) && !s(a.withCredentials) && (b.withCredentials = a.withCredentials), p(b, e).then(g, g)
                    }, c],
                    l = m.when(i);
                for (f(v, function(a) {
                        (a.request || a.requestError) && j.unshift(a.request, a.requestError), (a.response || a.responseError) && j.push(a.response, a.responseError)
                    }); j.length;) {
                    b = j.shift();
                    var o = j.shift(),
                        l = l.then(b, o)
                }
                return e ? (l.success = function(a) {
                    return fa(a, "fn"), l.then(function(b) {
                        a(b.data, b.status, b.headers, i)
                    }), l
                }, l.error = function(a) {
                    return fa(a, "fn"), l.then(null, function(b) {
                        a(b.data, b.status, b.headers, i)
                    }), l
                }) : (l.success = ae("success"), l.error = ae("error")), l
            }

            function p(d, e) {
                function f(a, c, d, e) {
                    function f() {
                        g(c, a, d, e)
                    }
                    n && (a >= 200 && 300 > a ? n.put(y, [a, c, fb(d), e]) : n.remove(y)), b ? l.$applyAsync(f) : (f(), l.$$phase || l.$apply())
                }

                function g(a, b, c, e) {
                    b = b >= -1 ? b : 0, (b >= 200 && 300 > b ? v.resolve : v.reject)({
                        data: a,
                        status: b,
                        headers: gb(c),
                        config: d,
                        statusText: e
                    })
                }

                function j(a) {
                    g(a.data, a.status, K(a.headers()), a.statusText)
                }

                function k() {
                    var a = o.pendingRequests.indexOf(d); - 1 !== a && o.pendingRequests.splice(a, 1)
                }
                var n, p, v = m.defer(),
                    w = v.promise,
                    x = d.headers,
                    y = q(d.url, d.paramSerializer(d.params));
                return o.pendingRequests.push(d), w.then(k, k), !d.cache && !a.cache || !1 === d.cache || "GET" !== d.method && "JSONP" !== d.method || (n = u(d.cache) ? d.cache : u(a.cache) ? a.cache : r), n && (p = n.get(y), t(p) ? p && z(p.then) ? p.then(j, j) : dd(p) ? g(p[1], p[0], K(p[2]), p[3]) : g(p, 200, {}, "OK") : n.put(y, w)), s(p) && ((p = fc(d.url) ? i()[d.xsrfCookieName || a.xsrfCookieName] : c) && (x[d.xsrfHeaderName || a.xsrfHeaderName] = p), h(d.method, y, e, f, x, d.timeout, d.withCredentials, d.responseType)), w
            }

            function q(a, b) {
                return 0 < b.length && (a += (-1 == a.indexOf("?") ? "?" : "&") + b), a
            }
            var r = j("$http");
            a.paramSerializer = w(a.paramSerializer) ? n.get(a.paramSerializer) : a.paramSerializer;
            var v = [];
            return f(g, function(a) {
                    v.unshift(w(a) ? n.get(a) : n.invoke(a))
                }), o.pendingRequests = [],
                function(a) {
                    f(arguments, function(a) {
                        o[a] = function(b, c) {
                            return o(k({}, c || {}, {
                                method: a,
                                url: b
                            }))
                        }
                    })
                }("get", "delete", "head", "jsonp"),
                function(a) {
                    f(arguments, function(a) {
                        o[a] = function(b, c, d) {
                            return o(k({}, d || {}, {
                                method: a,
                                url: b,
                                data: c
                            }))
                        }
                    })
                }("post", "put", "patch"), o.defaults = a, o
        }]
    }

    function jb() {
        this.$get = function() {
            return function() {
                return new a.XMLHttpRequest
            }
        }
    }

    function kb() {
        this.$get = ["$browser", "$window", "$document", "$xhrFactory", function(a, b, c, d) {
            return lb(a, d, a.defer, b.angular.callbacks, c[0])
        }]
    }

    function lb(a, b, c, d, e) {
        function g(a, b, c) {
            var f = e.createElement("script"),
                g = null;
            return f.type = "text/javascript", f.src = a, f.async = !0, g = function(a) {
                f.removeEventListener("load", g, !1), f.removeEventListener("error", g, !1), e.body.removeChild(f), f = null;
                var h = -1,
                    i = "unknown";
                a && ("load" !== a.type || d[b].called || (a = {
                    type: "error"
                }), i = a.type, h = "error" === a.type ? 404 : 200), c && c(h, i)
            }, f.addEventListener("load", g, !1), f.addEventListener("error", g, !1), e.body.appendChild(f), g
        }
        return function(e, h, i, j, k, l, m, n) {
            function p() {
                u && u(), v && v.abort()
            }

            function q(b, d, e, f, g) {
                t(x) && c.cancel(x), u = v = null, b(d, e, f, g),
                    a.$$completeOutstandingRequest(o)
            }
            if (a.$$incOutstandingRequestCount(), h = h || a.url(), "jsonp" == Tc(e)) {
                var r = "_" + (d.counter++).toString(36);
                d[r] = function(a) {
                    d[r].data = a, d[r].called = !0
                };
                var u = g(h.replace("JSON_CALLBACK", "angular.callbacks." + r), r, function(a, b) {
                    q(j, a, d[r].data, "", b), d[r] = o
                })
            } else {
                var v = b(e, h);
                if (v.open(e, h, !0), f(k, function(a, b) {
                        t(a) && v.setRequestHeader(b, a)
                    }), v.onload = function() {
                        var a = v.statusText || "",
                            b = "response" in v ? v.response : v.responseText,
                            c = 1223 === v.status ? 204 : v.status;
                        0 === c && (c = b ? 200 : "file" == ec(h).protocol ? 404 : 0), q(j, c, b, v.getAllResponseHeaders(), a)
                    }, e = function() {
                        q(j, -1, null, null, "")
                    }, v.onerror = e, v.onabort = e, m && (v.withCredentials = !0), n) try {
                    v.responseType = n
                } catch (w) {
                    if ("json" !== n) throw w
                }
                v.send(s(i) ? null : i)
            }
            if (l > 0) var x = c(p, l);
            else l && z(l.then) && l.then(p)
        }
    }

    function mb() {
        var a = "{{",
            b = "}}";
        this.startSymbol = function(b) {
            return b ? (a = b, this) : a
        }, this.endSymbol = function(a) {
            return a ? (b = a, this) : b
        }, this.$get = ["$parse", "$exceptionHandler", "$sce", function(c, d, e) {
            function f(a) {
                return "\\\\\\" + a
            }

            function g(c) {
                return c.replace(l, a).replace(m, b)
            }

            function h(f, h, l, m) {
                function n(a) {
                    try {
                        var b = a;
                        a = l ? e.getTrusted(l, b) : e.valueOf(b);
                        var c;
                        if (m && !t(a)) c = a;
                        else if (null == a) c = "";
                        else {
                            switch (typeof a) {
                                case "string":
                                    break;
                                case "number":
                                    a = "" + a;
                                    break;
                                default:
                                    a = P(a)
                            }
                            c = a
                        }
                        return c
                    } catch (g) {
                        d(be.interr(f, g))
                    }
                }
                m = !!m;
                for (var o, p, q = 0, r = [], u = [], v = f.length, w = [], x = []; v > q;) {
                    if (-1 == (o = f.indexOf(a, q)) || -1 == (p = f.indexOf(b, o + i))) {
                        q !== v && w.push(g(f.substring(q)));
                        break
                    }
                    q !== o && w.push(g(f.substring(q, o))), q = f.substring(o + i, p), r.push(q), u.push(c(q, n)), q = p + j, x.push(w.length), w.push("")
                }
                if (l && 1 < w.length && be.throwNoconcat(f), !h || r.length) {
                    var y = function(a) {
                        for (var b = 0, c = r.length; c > b; b++) {
                            if (m && s(a[b])) return;
                            w[x[b]] = a[b]
                        }
                        return w.join("")
                    };
                    return k(function(a) {
                        var b = 0,
                            c = r.length,
                            e = Array(c);
                        try {
                            for (; c > b; b++) e[b] = u[b](a);
                            return y(e)
                        } catch (g) {
                            d(be.interr(f, g))
                        }
                    }, {
                        exp: f,
                        expressions: r,
                        $$watchDelegate: function(a, b) {
                            var c;
                            return a.$watchGroup(u, function(d, e) {
                                var f = y(d);
                                z(b) && b.call(this, f, d !== e ? c : f, a), c = f
                            })
                        }
                    })
                }
            }
            var i = a.length,
                j = b.length,
                l = new RegExp(a.replace(/./g, f), "g"),
                m = new RegExp(b.replace(/./g, f), "g");
            return h.startSymbol = function() {
                return a
            }, h.endSymbol = function() {
                return b
            }, h
        }]
    }

    function nb() {
        this.$get = ["$rootScope", "$window", "$q", "$$q", function(a, b, c, d) {
            function e(e, g, h, i) {
                var j = 4 < arguments.length,
                    k = j ? Wc.call(arguments, 4) : [],
                    l = b.setInterval,
                    m = b.clearInterval,
                    n = 0,
                    o = t(i) && !i,
                    p = (o ? d : c).defer(),
                    q = p.promise;
                return h = t(h) ? h : 0, q.then(null, null, j ? function() {
                    e.apply(null, k)
                } : e), q.$$intervalId = l(function() {
                    p.notify(n++), h > 0 && n >= h && (p.resolve(n), m(q.$$intervalId), delete f[q.$$intervalId]), o || a.$apply()
                }, g), f[q.$$intervalId] = p, q
            }
            var f = {};
            return e.cancel = function(a) {
                return a && a.$$intervalId in f ? (f[a.$$intervalId].reject("canceled"), b.clearInterval(a.$$intervalId), delete f[a.$$intervalId], !0) : !1
            }, e
        }]
    }

    function ob(a) {
        a = a.split("/");
        for (var b = a.length; b--;) a[b] = X(a[b]);
        return a.join("/")
    }

    function pb(a, b) {
        var c = ec(a);
        b.$$protocol = c.protocol, b.$$host = c.hostname, b.$$port = m(c.port) || de[c.protocol] || null
    }

    function qb(a, b) {
        var c = "/" !== a.charAt(0);
        c && (a = "/" + a);
        var d = ec(a);
        b.$$path = decodeURIComponent(c && "/" === d.pathname.charAt(0) ? d.pathname.substring(1) : d.pathname), b.$$search = V(d.search), b.$$hash = decodeURIComponent(d.hash), b.$$path && "/" != b.$$path.charAt(0) && (b.$$path = "/" + b.$$path)
    }

    function rb(a, b) {
        return 0 === b.indexOf(a) ? b.substr(a.length) : void 0
    }

    function sb(a) {
        var b = a.indexOf("#");
        return -1 == b ? a : a.substr(0, b)
    }

    function tb(a) {
        return a.replace(/(#.+)|#$/, "$1")
    }

    function ub(a, b, c) {
        this.$$html5 = !0, c = c || "", pb(a, this), this.$$parse = function(a) {
            var c = rb(b, a);
            if (!w(c)) throw ee("ipthprfx", a, b);
            qb(c, this), this.$$path || (this.$$path = "/"), this.$$compose()
        }, this.$$compose = function() {
            var a = W(this.$$search),
                c = this.$$hash ? "#" + X(this.$$hash) : "";
            this.$$url = ob(this.$$path) + (a ? "?" + a : "") + c, this.$$absUrl = b + this.$$url.substr(1)
        }, this.$$parseLinkUrl = function(d, e) {
            if (e && "#" === e[0]) return this.hash(e.slice(1)), !0;
            var f, g;
            return t(f = rb(a, d)) ? (g = f, g = t(f = rb(c, f)) ? b + (rb("/", f) || f) : a + g) : t(f = rb(b, d)) ? g = b + f : b == d + "/" && (g = b), g && this.$$parse(g), !!g
        }
    }

    function vb(a, b, c) {
        pb(a, this), this.$$parse = function(d) {
            var e, f = rb(a, d) || rb(b, d);
            s(f) || "#" !== f.charAt(0) ? this.$$html5 ? e = f : (e = "", s(f) && (a = d, this.replace())) : (e = rb(c, f), s(e) && (e = f)), qb(e, this), d = this.$$path;
            var f = a,
                g = /^\/[A-Z]:(\/.*)/;
            0 === e.indexOf(f) && (e = e.replace(f, "")), g.exec(e) || (d = (e = g.exec(d)) ? e[1] : d), this.$$path = d, this.$$compose()
        }, this.$$compose = function() {
            var b = W(this.$$search),
                d = this.$$hash ? "#" + X(this.$$hash) : "";
            this.$$url = ob(this.$$path) + (b ? "?" + b : "") + d, this.$$absUrl = a + (this.$$url ? c + this.$$url : "")
        }, this.$$parseLinkUrl = function(b, c) {
            return sb(a) == sb(b) ? (this.$$parse(b), !0) : !1
        }
    }

    function wb(a, b, c) {
        this.$$html5 = !0, vb.apply(this, arguments), this.$$parseLinkUrl = function(d, e) {
            if (e && "#" === e[0]) return this.hash(e.slice(1)), !0;
            var f, g;
            return a == sb(d) ? f = d : (g = rb(b, d)) ? f = a + c + g : b === d + "/" && (f = b), f && this.$$parse(f), !!f
        }, this.$$compose = function() {
            var b = W(this.$$search),
                d = this.$$hash ? "#" + X(this.$$hash) : "";
            this.$$url = ob(this.$$path) + (b ? "?" + b : "") + d, this.$$absUrl = a + c + this.$$url
        }
    }

    function xb(a) {
        return function() {
            return this[a]
        }
    }

    function yb(a, b) {
        return function(c) {
            return s(c) ? this[a] : (this[a] = b(c), this.$$compose(), this)
        }
    }

    function zb() {
        var a = "",
            b = {
                enabled: !1,
                requireBase: !0,
                rewriteLinks: !0
            };
        this.hashPrefix = function(b) {
            return t(b) ? (a = b, this) : a
        }, this.html5Mode = function(a) {
            return D(a) ? (b.enabled = a, this) : u(a) ? (D(a.enabled) && (b.enabled = a.enabled), D(a.requireBase) && (b.requireBase = a.requireBase), D(a.rewriteLinks) && (b.rewriteLinks = a.rewriteLinks), this) : b
        }, this.$get = ["$rootScope", "$browser", "$sniffer", "$rootElement", "$window", function(c, d, e, f, g) {
            function h(a, b, c) {
                var e = j.url(),
                    f = j.$$state;
                try {
                    d.url(a, b, c), j.$$state = d.state()
                } catch (g) {
                    throw j.url(e), j.$$state = f, g
                }
            }

            function i(a, b) {
                c.$broadcast("$locationChangeSuccess", j.absUrl(), a, j.$$state, b)
            }
            var j, k;
            k = d.baseHref();
            var l, m = d.url();
            if (b.enabled) {
                if (!k && b.requireBase) throw ee("nobase");
                l = m.substring(0, m.indexOf("/", m.indexOf("//") + 2)) + (k || "/"), k = e.history ? ub : wb
            } else l = sb(m), k = vb;
            var n = l.substr(0, sb(l).lastIndexOf("/") + 1);
            j = new k(l, n, "#" + a), j.$$parseLinkUrl(m, m), j.$$state = d.state();
            var o = /^\s*(javascript|mailto):/i;
            f.on("click", function(a) {
                if (b.rewriteLinks && !a.ctrlKey && !a.metaKey && !a.shiftKey && 2 != a.which && 2 != a.button) {
                    for (var e = Pc(a.target);
                        "a" !== H(e[0]);)
                        if (e[0] === f[0] || !(e = e.parent())[0]) return;
                    var h = e.prop("href"),
                        i = e.attr("href") || e.attr("xlink:href");
                    u(h) && "[object SVGAnimatedString]" === h.toString() && (h = ec(h.animVal).href), o.test(h) || !h || e.attr("target") || a.isDefaultPrevented() || !j.$$parseLinkUrl(h, i) || (a.preventDefault(), j.absUrl() != d.url() && (c.$apply(), g.angular["ff-684208-preventDefault"] = !0))
                }
            }), tb(j.absUrl()) != tb(m) && d.url(j.absUrl(), !0);
            var p = !0;
            return d.onUrlChange(function(a, b) {
                s(rb(n, a)) ? g.location.href = a : (c.$evalAsync(function() {
                    var d, e = j.absUrl(),
                        f = j.$$state;
                    a = tb(a), j.$$parse(a), j.$$state = b, d = c.$broadcast("$locationChangeStart", a, e, b, f).defaultPrevented, j.absUrl() === a && (d ? (j.$$parse(e), j.$$state = f, h(e, !1, f)) : (p = !1, i(e, f)))
                }), c.$$phase || c.$digest())
            }), c.$watch(function() {
                var a = tb(d.url()),
                    b = tb(j.absUrl()),
                    f = d.state(),
                    g = j.$$replace,
                    k = a !== b || j.$$html5 && e.history && f !== j.$$state;
                (p || k) && (p = !1, c.$evalAsync(function() {
                    var b = j.absUrl(),
                        d = c.$broadcast("$locationChangeStart", b, a, j.$$state, f).defaultPrevented;
                    j.absUrl() === b && (d ? (j.$$parse(a), j.$$state = f) : (k && h(b, g, f === j.$$state ? null : j.$$state), i(a, f)))
                })), j.$$replace = !1
            }), j
        }]
    }

    function Ab() {
        var a = !0,
            b = this;
        this.debugEnabled = function(b) {
            return t(b) ? (a = b, this) : a
        }, this.$get = ["$window", function(c) {
            function d(a) {
                return a instanceof Error && (a.stack ? a = a.message && -1 === a.stack.indexOf(a.message) ? "Error: " + a.message + "\n" + a.stack : a.stack : a.sourceURL && (a = a.message + "\n" + a.sourceURL + ":" + a.line)), a
            }

            function e(a) {
                var b = c.console || {},
                    e = b[a] || b.log || o;
                a = !1;
                try {
                    a = !!e.apply
                } catch (g) {}
                return a ? function() {
                    var a = [];
                    return f(arguments, function(b) {
                        a.push(d(b))
                    }), e.apply(b, a)
                } : function(a, b) {
                    e(a, null == b ? "" : b)
                }
            }
            return {
                log: e("log"),
                info: e("info"),
                warn: e("warn"),
                error: e("error"),
                debug: function() {
                    var c = e("debug");
                    return function() {
                        a && c.apply(b, arguments)
                    }
                }()
            }
        }]
    }

    function Bb(a, b) {
        if ("__defineGetter__" === a || "__defineSetter__" === a || "__lookupGetter__" === a || "__lookupSetter__" === a || "__proto__" === a) throw ge("isecfld", b);
        return a
    }

    function Cb(a, b) {
        if (a += "", !w(a)) throw ge("iseccst", b);
        return a
    }

    function Db(a, b) {
        if (a) {
            if (a.constructor === a) throw ge("isecfn", b);
            if (a.window === a) throw ge("isecwindow", b);
            if (a.children && (a.nodeName || a.prop && a.attr && a.find)) throw ge("isecdom", b);
            if (a === Object) throw ge("isecobj", b)
        }
        return a
    }

    function Eb(a, b) {
        if (a) {
            if (a.constructor === a) throw ge("isecfn", b);
            if (a === he || a === ie || a === je) throw ge("isecff", b)
        }
    }

    function Fb(a, b) {
        if (a && (a === 0..constructor || a === (!1).constructor || a === "".constructor || a === {}.constructor || a === [].constructor || a === Function.constructor)) throw ge("isecaf", b)
    }

    function Gb(a, b) {
        return "undefined" != typeof a ? a : b
    }

    function Hb(a, b) {
        return "undefined" == typeof a ? b : "undefined" == typeof b ? a : a + b
    }

    function Ib(a, b) {
        var c, d;
        switch (a.type) {
            case ne.Program:
                c = !0, f(a.body, function(a) {
                    Ib(a.expression, b), c = c && a.expression.constant
                }), a.constant = c;
                break;
            case ne.Literal:
                a.constant = !0, a.toWatch = [];
                break;
            case ne.UnaryExpression:
                Ib(a.argument, b), a.constant = a.argument.constant, a.toWatch = a.argument.toWatch;
                break;
            case ne.BinaryExpression:
                Ib(a.left, b), Ib(a.right, b), a.constant = a.left.constant && a.right.constant, a.toWatch = a.left.toWatch.concat(a.right.toWatch);
                break;
            case ne.LogicalExpression:
                Ib(a.left, b), Ib(a.right, b), a.constant = a.left.constant && a.right.constant, a.toWatch = a.constant ? [] : [a];
                break;
            case ne.ConditionalExpression:
                Ib(a.test, b), Ib(a.alternate, b), Ib(a.consequent, b), a.constant = a.test.constant && a.alternate.constant && a.consequent.constant, a.toWatch = a.constant ? [] : [a];
                break;
            case ne.Identifier:
                a.constant = !1, a.toWatch = [a];
                break;
            case ne.MemberExpression:
                Ib(a.object, b), a.computed && Ib(a.property, b), a.constant = a.object.constant && (!a.computed || a.property.constant), a.toWatch = [a];
                break;
            case ne.CallExpression:
                c = a.filter ? !b(a.callee.name).$stateful : !1, d = [], f(a.arguments, function(a) {
                    Ib(a, b), c = c && a.constant, a.constant || d.push.apply(d, a.toWatch)
                }), a.constant = c, a.toWatch = a.filter && !b(a.callee.name).$stateful ? d : [a];
                break;
            case ne.AssignmentExpression:
                Ib(a.left, b), Ib(a.right, b), a.constant = a.left.constant && a.right.constant, a.toWatch = [a];
                break;
            case ne.ArrayExpression:
                c = !0, d = [], f(a.elements, function(a) {
                    Ib(a, b), c = c && a.constant, a.constant || d.push.apply(d, a.toWatch)
                }), a.constant = c, a.toWatch = d;
                break;
            case ne.ObjectExpression:
                c = !0, d = [], f(a.properties, function(a) {
                    Ib(a.value, b), c = c && a.value.constant, a.value.constant || d.push.apply(d, a.value.toWatch)
                }), a.constant = c, a.toWatch = d;
                break;
            case ne.ThisExpression:
                a.constant = !1, a.toWatch = []
        }
    }

    function Jb(a) {
        if (1 == a.length) {
            a = a[0].expression;
            var b = a.toWatch;
            return 1 !== b.length ? b : b[0] !== a ? b : c
        }
    }

    function Kb(a) {
        return a.type === ne.Identifier || a.type === ne.MemberExpression
    }

    function Lb(a) {
        return 1 === a.body.length && Kb(a.body[0].expression) ? {
            type: ne.AssignmentExpression,
            left: a.body[0].expression,
            right: {
                type: ne.NGValueParameter
            },
            operator: "="
        } : void 0
    }

    function Mb(a) {
        return 0 === a.body.length || 1 === a.body.length && (a.body[0].expression.type === ne.Literal || a.body[0].expression.type === ne.ArrayExpression || a.body[0].expression.type === ne.ObjectExpression)
    }

    function Nb(a, b) {
        this.astBuilder = a, this.$filter = b
    }

    function Ob(a, b) {
        this.astBuilder = a, this.$filter = b
    }

    function Pb(a) {
        return "constructor" == a
    }

    function Qb(a) {
        return z(a.valueOf) ? a.valueOf() : pe.call(a)
    }

    function Rb() {
        var a = ja(),
            b = ja();
        this.$get = ["$filter", function(d) {
            function e(a, b) {
                return null == a || null == b ? a === b : "object" == typeof a && (a = Qb(a), "object" == typeof a) ? !1 : a === b || a !== a && b !== b
            }

            function g(a, b, d, f, g) {
                var h, i = f.inputs;
                if (1 === i.length) {
                    var j = e,
                        i = i[0];
                    return a.$watch(function(a) {
                        var b = i(a);
                        return e(b, j) || (h = f(a, c, c, [b]), j = b && Qb(b)), h
                    }, b, d, g)
                }
                for (var k = [], l = [], m = 0, n = i.length; n > m; m++) k[m] = e, l[m] = null;
                return a.$watch(function(a) {
                    for (var b = !1, d = 0, g = i.length; g > d; d++) {
                        var j = i[d](a);
                        (b || (b = !e(j, k[d]))) && (l[d] = j, k[d] = j && Qb(j))
                    }
                    return b && (h = f(a, c, c, l)), h
                }, b, d, g)
            }

            function h(a, b, c, d) {
                var e, f;
                return e = a.$watch(function(a) {
                    return d(a)
                }, function(a, c, d) {
                    f = a, z(b) && b.apply(this, arguments), t(a) && d.$$postDigest(function() {
                        t(f) && e()
                    })
                }, c)
            }

            function i(a, b, c, d) {
                function e(a) {
                    var b = !0;
                    return f(a, function(a) {
                        t(a) || (b = !1)
                    }), b
                }
                var g, h;
                return g = a.$watch(function(a) {
                    return d(a)
                }, function(a, c, d) {
                    h = a, z(b) && b.call(this, a, c, d), e(a) && d.$$postDigest(function() {
                        e(h) && g()
                    })
                }, c)
            }

            function j(a, b, c, d) {
                var e;
                return e = a.$watch(function(a) {
                    return d(a)
                }, function(a, c, d) {
                    z(b) && b.apply(this, arguments), e()
                }, c)
            }

            function k(a, b) {
                if (!b) return a;
                var c = a.$$watchDelegate,
                    d = !1,
                    c = c !== i && c !== h ? function(c, e, f, g) {
                        return f = d && g ? g[0] : a(c, e, f, g), b(f, c, e)
                    } : function(c, d, e, f) {
                        return e = a(c, d, e, f), c = b(e, c, d), t(e) ? c : e
                    };
                return a.$$watchDelegate && a.$$watchDelegate !== g ? c.$$watchDelegate = a.$$watchDelegate : b.$stateful || (c.$$watchDelegate = g, d = !a.inputs, c.inputs = a.inputs ? a.inputs : [a]), c
            }
            var l = hd().noUnsafeEval,
                m = {
                    csp: l,
                    expensiveChecks: !1
                },
                n = {
                    csp: l,
                    expensiveChecks: !0
                };
            return function(c, e, f) {
                var l, p, q;
                switch (typeof c) {
                    case "string":
                        q = c = c.trim();
                        var r = f ? b : a;
                        return l = r[q], l || (":" === c.charAt(0) && ":" === c.charAt(1) && (p = !0, c = c.substring(2)), f = f ? n : m, l = new me(f), l = new oe(l, d, f).parse(c), l.constant ? l.$$watchDelegate = j : p ? l.$$watchDelegate = l.literal ? i : h : l.inputs && (l.$$watchDelegate = g), r[q] = l), k(l, e);
                    case "function":
                        return k(c, e);
                    default:
                        return k(o, e)
                }
            }
        }]
    }

    function Sb() {
        this.$get = ["$rootScope", "$exceptionHandler", function(a, b) {
            return Ub(function(b) {
                a.$evalAsync(b)
            }, b)
        }]
    }

    function Tb() {
        this.$get = ["$browser", "$exceptionHandler", function(a, b) {
            return Ub(function(b) {
                a.defer(b)
            }, b)
        }]
    }

    function Ub(a, b) {
        function e(a, b, c) {
            function d(b) {
                return function(c) {
                    e || (e = !0, b.call(a, c))
                }
            }
            var e = !1;
            return [d(b), d(c)]
        }

        function g() {
            this.$$state = {
                status: 0
            }
        }

        function h(a, b) {
            return function(c) {
                b.call(a, c)
            }
        }

        function i(d) {
            !d.processScheduled && d.pending && (d.processScheduled = !0, a(function() {
                var a, e, f;
                f = d.pending, d.processScheduled = !1, d.pending = c;
                for (var g = 0, h = f.length; h > g; ++g) {
                    e = f[g][0], a = f[g][d.status];
                    try {
                        z(a) ? e.resolve(a(d.value)) : 1 === d.status ? e.resolve(d.value) : e.reject(d.value)
                    } catch (i) {
                        e.reject(i), b(i)
                    }
                }
            }))
        }

        function j() {
            this.promise = new g, this.resolve = h(this, this.resolve), this.reject = h(this, this.reject), this.notify = h(this, this.notify)
        }
        var l = d("$q", TypeError);
        k(g.prototype, {
            then: function(a, b, c) {
                if (s(a) && s(b) && s(c)) return this;
                var d = new j;
                return this.$$state.pending = this.$$state.pending || [], this.$$state.pending.push([d, a, b, c]), 0 < this.$$state.status && i(this.$$state), d.promise
            },
            "catch": function(a) {
                return this.then(null, a)
            },
            "finally": function(a, b) {
                return this.then(function(b) {
                    return n(b, !0, a)
                }, function(b) {
                    return n(b, !1, a)
                }, b)
            }
        }), k(j.prototype, {
            resolve: function(a) {
                this.promise.$$state.status || (a === this.promise ? this.$$reject(l("qcycle", a)) : this.$$resolve(a))
            },
            $$resolve: function(a) {
                var c, d;
                d = e(this, this.$$resolve, this.$$reject);
                try {
                    (u(a) || z(a)) && (c = a && a.then), z(c) ? (this.promise.$$state.status = -1, c.call(a, d[0], d[1], this.notify)) : (this.promise.$$state.value = a, this.promise.$$state.status = 1, i(this.promise.$$state))
                } catch (f) {
                    d[1](f), b(f)
                }
            },
            reject: function(a) {
                this.promise.$$state.status || this.$$reject(a)
            },
            $$reject: function(a) {
                this.promise.$$state.value = a, this.promise.$$state.status = 2, i(this.promise.$$state)
            },
            notify: function(c) {
                var d = this.promise.$$state.pending;
                0 >= this.promise.$$state.status && d && d.length && a(function() {
                    for (var a, e, f = 0, g = d.length; g > f; f++) {
                        e = d[f][0], a = d[f][3];
                        try {
                            e.notify(z(a) ? a(c) : c)
                        } catch (h) {
                            b(h)
                        }
                    }
                })
            }
        });
        var m = function(a, b) {
                var c = new j;
                return b ? c.resolve(a) : c.reject(a), c.promise
            },
            n = function(a, b, c) {
                var d = null;
                try {
                    z(c) && (d = c())
                } catch (e) {
                    return m(e, !1)
                }
                return d && z(d.then) ? d.then(function() {
                    return m(a, b)
                }, function(a) {
                    return m(a, !1)
                }) : m(a, b)
            },
            o = function(a, b, c, d) {
                var e = new j;
                return e.resolve(a), e.promise.then(b, c, d)
            },
            p = function q(a) {
                if (!z(a)) throw l("norslvr", a);
                if (!(this instanceof q)) return new q(a);
                var b = new j;
                return a(function(a) {
                    b.resolve(a)
                }, function(a) {
                    b.reject(a)
                }), b.promise
            };
        return p.defer = function() {
            return new j
        }, p.reject = function(a) {
            var b = new j;
            return b.reject(a), b.promise
        }, p.when = o, p.resolve = o, p.all = function(a) {
            var b = new j,
                c = 0,
                d = dd(a) ? [] : {};
            return f(a, function(a, e) {
                c++, o(a).then(function(a) {
                    d.hasOwnProperty(e) || (d[e] = a, --c || b.resolve(d))
                }, function(a) {
                    d.hasOwnProperty(e) || b.reject(a)
                })
            }), 0 === c && b.resolve(d), b.promise
        }, p
    }

    function Vb() {
        this.$get = ["$window", "$timeout", function(a, b) {
            var c = a.requestAnimationFrame || a.webkitRequestAnimationFrame,
                d = a.cancelAnimationFrame || a.webkitCancelAnimationFrame || a.webkitCancelRequestAnimationFrame,
                e = !!c,
                f = e ? function(a) {
                    var b = c(a);
                    return function() {
                        d(b)
                    }
                } : function(a) {
                    var c = b(a, 16.66, !1);
                    return function() {
                        b.cancel(c)
                    }
                };
            return f.supported = e, f
        }]
    }

    function Wb() {
        function a(a) {
            function b() {
                this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null, this.$$listeners = {}, this.$$listenerCount = {}, this.$$watchersCount = 0, this.$id = ++bd, this.$$ChildScope = null
            }
            return b.prototype = a, b
        }
        var b = 10,
            c = d("$rootScope"),
            g = null,
            h = null;
        this.digestTtl = function(a) {
            return arguments.length && (b = a), b
        }, this.$get = ["$injector", "$exceptionHandler", "$parse", "$browser", function(d, i, j, k) {
            function l(a) {
                a.currentScope.$$destroyed = !0
            }

            function m(a) {
                9 === Oc && (a.$$childHead && m(a.$$childHead), a.$$nextSibling && m(a.$$nextSibling)), a.$parent = a.$$nextSibling = a.$$prevSibling = a.$$childHead = a.$$childTail = a.$root = a.$$watchers = null
            }

            function n() {
                this.$id = ++bd, this.$$phase = this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null, this.$root = this, this.$$destroyed = !1, this.$$listeners = {}, this.$$listenerCount = {}, this.$$watchersCount = 0, this.$$isolateBindings = null
            }

            function p(a) {
                if (x.$$phase) throw c("inprog", x.$$phase);
                x.$$phase = a
            }

            function q(a, b) {
                do a.$$watchersCount += b; while (a = a.$parent)
            }

            function r(a, b, c) {
                do a.$$listenerCount[c] -= b, 0 === a.$$listenerCount[c] && delete a.$$listenerCount[c]; while (a = a.$parent)
            }

            function t() {}

            function v() {
                for (; B.length;) try {
                    B.shift()()
                } catch (a) {
                    i(a)
                }
                h = null
            }

            function w() {
                null === h && (h = k.defer(function() {
                    x.$apply(v)
                }))
            }
            n.prototype = {
                constructor: n,
                $new: function(b, c) {
                    var d;
                    return c = c || this, b ? (d = new n, d.$root = this.$root) : (this.$$ChildScope || (this.$$ChildScope = a(this)), d = new this.$$ChildScope), d.$parent = c, d.$$prevSibling = c.$$childTail, c.$$childHead ? (c.$$childTail.$$nextSibling = d, c.$$childTail = d) : c.$$childHead = c.$$childTail = d, (b || c != this) && d.$on("$destroy", l), d
                },
                $watch: function(a, b, c, d) {
                    var e = j(a);
                    if (e.$$watchDelegate) return e.$$watchDelegate(this, b, c, e, a);
                    var f = this,
                        h = f.$$watchers,
                        i = {
                            fn: b,
                            last: t,
                            get: e,
                            exp: d || a,
                            eq: !!c
                        };
                    return g = null, z(b) || (i.fn = o), h || (h = f.$$watchers = []), h.unshift(i), q(this, 1),
                        function() {
                            0 <= I(h, i) && q(f, -1), g = null
                        }
                },
                $watchGroup: function(a, b) {
                    function c() {
                        i = !1, j ? (j = !1, b(e, e, h)) : b(e, d, h)
                    }
                    var d = Array(a.length),
                        e = Array(a.length),
                        g = [],
                        h = this,
                        i = !1,
                        j = !0;
                    if (!a.length) {
                        var k = !0;
                        return h.$evalAsync(function() {
                                k && b(e, e, h)
                            }),
                            function() {
                                k = !1
                            }
                    }
                    return 1 === a.length ? this.$watch(a[0], function(a, c, f) {
                        e[0] = a, d[0] = c, b(e, a === c ? e : d, f)
                    }) : (f(a, function(a, b) {
                        var f = h.$watch(a, function(a, f) {
                            e[b] = a, d[b] = f, i || (i = !0, h.$evalAsync(c))
                        });
                        g.push(f)
                    }), function() {
                        for (; g.length;) g.shift()()
                    })
                },
                $watchCollection: function(a, b) {
                    function c(a) {
                        d = a;
                        var b, c, g, h;
                        if (!s(d)) {
                            if (u(d))
                                if (e(d))
                                    for (f !== m && (f = m, p = f.length = 0, k++), a = d.length, p !== a && (k++, f.length = p = a), b = 0; a > b; b++) h = f[b], g = d[b], c = h !== h && g !== g, c || h === g || (k++, f[b] = g);
                                else {
                                    f !== n && (f = n = {}, p = 0, k++), a = 0;
                                    for (b in d) Uc.call(d, b) && (a++, g = d[b], h = f[b], b in f ? (c = h !== h && g !== g, c || h === g || (k++, f[b] = g)) : (p++, f[b] = g, k++));
                                    if (p > a)
                                        for (b in k++, f) Uc.call(d, b) || (p--, delete f[b])
                                }
                            else f !== d && (f = d, k++);
                            return k
                        }
                    }
                    c.$stateful = !0;
                    var d, f, g, h = this,
                        i = 1 < b.length,
                        k = 0,
                        l = j(a, c),
                        m = [],
                        n = {},
                        o = !0,
                        p = 0;
                    return this.$watch(l, function() {
                        if (o ? (o = !1, b(d, d, h)) : b(d, g, h), i)
                            if (u(d))
                                if (e(d)) {
                                    g = Array(d.length);
                                    for (var a = 0; a < d.length; a++) g[a] = d[a]
                                } else
                                    for (a in g = {}, d) Uc.call(d, a) && (g[a] = d[a]);
                        else g = d
                    })
                },
                $digest: function() {
                    var a, d, e, f, j, l, m, n, o, q = b,
                        r = [];
                    p("$digest"), k.$$checkUrlChange(), this === x && null !== h && (k.defer.cancel(h), v()), g = null;
                    do {
                        for (l = !1, m = this; y.length;) {
                            try {
                                o = y.shift(), o.scope.$eval(o.expression, o.locals)
                            } catch (s) {
                                i(s)
                            }
                            g = null
                        }
                        a: do {
                            if (f = m.$$watchers)
                                for (j = f.length; j--;) try {
                                    if (a = f[j])
                                        if ((d = a.get(m)) === (e = a.last) || (a.eq ? L(d, e) : "number" == typeof d && "number" == typeof e && isNaN(d) && isNaN(e))) {
                                            if (a === g) {
                                                l = !1;
                                                break a
                                            }
                                        } else l = !0, g = a, a.last = a.eq ? J(d, null) : d, a.fn(d, e === t ? d : e, m), 5 > q && (n = 4 - q, r[n] || (r[n] = []), r[n].push({
                                            msg: z(a.exp) ? "fn: " + (a.exp.name || a.exp.toString()) : a.exp,
                                            newVal: d,
                                            oldVal: e
                                        }))
                                } catch (u) {
                                    i(u)
                                }
                            if (!(f = m.$$watchersCount && m.$$childHead || m !== this && m.$$nextSibling))
                                for (; m !== this && !(f = m.$$nextSibling);) m = m.$parent
                        } while (m = f);
                        if ((l || y.length) && !q--) throw x.$$phase = null, c("infdig", b, r)
                    } while (l || y.length);
                    for (x.$$phase = null; A.length;) try {
                        A.shift()()
                    } catch (w) {
                        i(w)
                    }
                },
                $destroy: function() {
                    if (!this.$$destroyed) {
                        var a = this.$parent;
                        this.$broadcast("$destroy"), this.$$destroyed = !0, this === x && k.$$applicationDestroyed(), q(this, -this.$$watchersCount);
                        for (var b in this.$$listenerCount) r(this, this.$$listenerCount[b], b);
                        a && a.$$childHead == this && (a.$$childHead = this.$$nextSibling), a && a.$$childTail == this && (a.$$childTail = this.$$prevSibling), this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling), this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling), this.$destroy = this.$digest = this.$apply = this.$evalAsync = this.$applyAsync = o, this.$on = this.$watch = this.$watchGroup = function() {
                            return o
                        }, this.$$listeners = {}, this.$$nextSibling = null, m(this)
                    }
                },
                $eval: function(a, b) {
                    return j(a)(this, b)
                },
                $evalAsync: function(a, b) {
                    x.$$phase || y.length || k.defer(function() {
                        y.length && x.$digest()
                    }), y.push({
                        scope: this,
                        expression: a,
                        locals: b
                    })
                },
                $$postDigest: function(a) {
                    A.push(a)
                },
                $apply: function(a) {
                    try {
                        p("$apply");
                        try {
                            return this.$eval(a)
                        } finally {
                            x.$$phase = null
                        }
                    } catch (b) {
                        i(b)
                    } finally {
                        try {
                            x.$digest()
                        } catch (c) {
                            throw i(c), c
                        }
                    }
                },
                $applyAsync: function(a) {
                    function b() {
                        c.$eval(a)
                    }
                    var c = this;
                    a && B.push(b), w()
                },
                $on: function(a, b) {
                    var c = this.$$listeners[a];
                    c || (this.$$listeners[a] = c = []), c.push(b);
                    var d = this;
                    do d.$$listenerCount[a] || (d.$$listenerCount[a] = 0), d.$$listenerCount[a]++; while (d = d.$parent);
                    var e = this;
                    return function() {
                        var d = c.indexOf(b); - 1 !== d && (c[d] = null, r(e, 1, a))
                    }
                },
                $emit: function(a, b) {
                    var c, d, e, f = [],
                        g = this,
                        h = !1,
                        j = {
                            name: a,
                            targetScope: g,
                            stopPropagation: function() {
                                h = !0
                            },
                            preventDefault: function() {
                                j.defaultPrevented = !0
                            },
                            defaultPrevented: !1
                        },
                        k = M([j], arguments, 1);
                    do {
                        for (c = g.$$listeners[a] || f, j.currentScope = g, d = 0, e = c.length; e > d; d++)
                            if (c[d]) try {
                                c[d].apply(null, k)
                            } catch (l) {
                                i(l)
                            } else c.splice(d, 1), d--, e--;
                        if (h) return j.currentScope = null, j;
                        g = g.$parent
                    } while (g);
                    return j.currentScope = null, j
                },
                $broadcast: function(a, b) {
                    var c = this,
                        d = this,
                        e = {
                            name: a,
                            targetScope: this,
                            preventDefault: function() {
                                e.defaultPrevented = !0
                            },
                            defaultPrevented: !1
                        };
                    if (!this.$$listenerCount[a]) return e;
                    for (var f, g, h = M([e], arguments, 1); c = d;) {
                        for (e.currentScope = c, d = c.$$listeners[a] || [], f = 0, g = d.length; g > f; f++)
                            if (d[f]) try {
                                d[f].apply(null, h)
                            } catch (j) {
                                i(j)
                            } else d.splice(f, 1), f--, g--;
                        if (!(d = c.$$listenerCount[a] && c.$$childHead || c !== this && c.$$nextSibling))
                            for (; c !== this && !(d = c.$$nextSibling);) c = c.$parent
                    }
                    return e.currentScope = null, e
                }
            };
            var x = new n,
                y = x.$$asyncQueue = [],
                A = x.$$postDigestQueue = [],
                B = x.$$applyAsyncQueue = [];
            return x
        }]
    }

    function Xb() {
        var a = /^\s*(https?|ftp|mailto|tel|file):/,
            b = /^\s*((https?|ftp|file|blob):|data:image\/)/;
        this.aHrefSanitizationWhitelist = function(b) {
            return t(b) ? (a = b, this) : a
        }, this.imgSrcSanitizationWhitelist = function(a) {
            return t(a) ? (b = a, this) : b
        }, this.$get = function() {
            return function(c, d) {
                var e, f = d ? b : a;
                return e = ec(c).href, "" === e || e.match(f) ? c : "unsafe:" + e
            }
        }
    }

    function Yb(a) {
        if ("self" === a) return a;
        if (w(a)) {
            if (-1 < a.indexOf("***")) throw qe("iwcard", a);
            return a = gd(a).replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*"), new RegExp("^" + a + "$")
        }
        if (A(a)) return new RegExp("^" + a.source + "$");
        throw qe("imatcher")
    }

    function Zb(a) {
        var b = [];
        return t(a) && f(a, function(a) {
            b.push(Yb(a))
        }), b
    }

    function $b() {
        this.SCE_CONTEXTS = re;
        var a = ["self"],
            b = [];
        this.resourceUrlWhitelist = function(b) {
            return arguments.length && (a = Zb(b)), a
        }, this.resourceUrlBlacklist = function(a) {
            return arguments.length && (b = Zb(a)), b
        }, this.$get = ["$injector", function(c) {
            function d(a, b) {
                return "self" === a ? fc(b) : !!a.exec(b.href)
            }

            function e(a) {
                var b = function(a) {
                    this.$$unwrapTrustedValue = function() {
                        return a
                    }
                };
                return a && (b.prototype = new a), b.prototype.valueOf = function() {
                    return this.$$unwrapTrustedValue()
                }, b.prototype.toString = function() {
                    return this.$$unwrapTrustedValue().toString()
                }, b
            }
            var f = function(a) {
                throw qe("unsafe")
            };
            c.has("$sanitize") && (f = c.get("$sanitize"));
            var g = e(),
                h = {};
            return h[re.HTML] = e(g), h[re.CSS] = e(g), h[re.URL] = e(g), h[re.JS] = e(g), h[re.RESOURCE_URL] = e(h[re.URL]), {
                trustAs: function(a, b) {
                    var c = h.hasOwnProperty(a) ? h[a] : null;
                    if (!c) throw qe("icontext", a, b);
                    if (null === b || s(b) || "" === b) return b;
                    if ("string" != typeof b) throw qe("itype", a);
                    return new c(b)
                },
                getTrusted: function(c, e) {
                    if (null === e || s(e) || "" === e) return e;
                    var g = h.hasOwnProperty(c) ? h[c] : null;
                    if (g && e instanceof g) return e.$$unwrapTrustedValue();
                    if (c === re.RESOURCE_URL) {
                        var i, j, g = ec(e.toString()),
                            k = !1;
                        for (i = 0, j = a.length; j > i; i++)
                            if (d(a[i], g)) {
                                k = !0;
                                break
                            }
                        if (k)
                            for (i = 0, j = b.length; j > i; i++)
                                if (d(b[i], g)) {
                                    k = !1;
                                    break
                                }
                        if (k) return e;
                        throw qe("insecurl", e.toString())
                    }
                    if (c === re.HTML) return f(e);
                    throw qe("unsafe")
                },
                valueOf: function(a) {
                    return a instanceof g ? a.$$unwrapTrustedValue() : a
                }
            }
        }]
    }

    function _b() {
        var a = !0;
        this.enabled = function(b) {
            return arguments.length && (a = !!b), a
        }, this.$get = ["$parse", "$sceDelegate", function(b, c) {
            if (a && 8 > Oc) throw qe("iequirks");
            var d = K(re);
            d.isEnabled = function() {
                return a
            }, d.trustAs = c.trustAs, d.getTrusted = c.getTrusted, d.valueOf = c.valueOf, a || (d.trustAs = d.getTrusted = function(a, b) {
                return b
            }, d.valueOf = p), d.parseAs = function(a, c) {
                var e = b(c);
                return e.literal && e.constant ? e : b(c, function(b) {
                    return d.getTrusted(a, b)
                })
            };
            var e = d.parseAs,
                g = d.getTrusted,
                h = d.trustAs;
            return f(re, function(a, b) {
                var c = Tc(b);
                d[ma("parse_as_" + c)] = function(b) {
                    return e(a, b)
                }, d[ma("get_trusted_" + c)] = function(b) {
                    return g(a, b)
                }, d[ma("trust_as_" + c)] = function(b) {
                    return h(a, b)
                }
            }), d
        }]
    }

    function ac() {
        this.$get = ["$window", "$document", function(a, b) {
            var c, d = {},
                e = m((/android (\d+)/.exec(Tc((a.navigator || {}).userAgent)) || [])[1]),
                f = /Boxee/i.test((a.navigator || {}).userAgent),
                g = b[0] || {},
                h = /^(Moz|webkit|ms)(?=[A-Z])/,
                i = g.body && g.body.style,
                j = !1,
                k = !1;
            if (i) {
                for (var l in i)
                    if (j = h.exec(l)) {
                        c = j[0], c = c.substr(0, 1).toUpperCase() + c.substr(1);
                        break
                    }
                c || (c = "WebkitOpacity" in i && "webkit"), j = !!("transition" in i || c + "Transition" in i), k = !!("animation" in i || c + "Animation" in i), !e || j && k || (j = w(i.webkitTransition), k = w(i.webkitAnimation))
            }
            return {
                history: !(!a.history || !a.history.pushState || 4 > e || f),
                hasEvent: function(a) {
                    if ("input" === a && 11 >= Oc) return !1;
                    if (s(d[a])) {
                        var b = g.createElement("div");
                        d[a] = "on" + a in b
                    }
                    return d[a]
                },
                csp: hd(),
                vendorPrefix: c,
                transitions: j,
                animations: k,
                android: e
            }
        }]
    }

    function bc() {
        this.$get = ["$templateCache", "$http", "$q", "$sce", function(a, b, c, d) {
            function e(f, g) {
                e.totalPendingRequests++, w(f) && a.get(f) || (f = d.getTrustedResourceUrl(f));
                var h = b.defaults && b.defaults.transformResponse;
                return dd(h) ? h = h.filter(function(a) {
                    return a !== eb
                }) : h === eb && (h = null), b.get(f, {
                    cache: a,
                    transformResponse: h
                })["finally"](function() {
                    e.totalPendingRequests--
                }).then(function(b) {
                    return a.put(f, b.data), b.data
                }, function(a) {
                    if (!g) throw Rd("tpload", f, a.status, a.statusText);
                    return c.reject(a)
                })
            }
            return e.totalPendingRequests = 0, e
        }]
    }

    function cc() {
        this.$get = ["$rootScope", "$browser", "$location", function(a, b, c) {
            return {
                findBindings: function(a, b, c) {
                    a = a.getElementsByClassName("ng-binding");
                    var d = [];
                    return f(a, function(a) {
                        var e = ad.element(a).data("$binding");
                        e && f(e, function(e) {
                            c ? new RegExp("(^|\\s)" + gd(b) + "(\\s|\\||$)").test(e) && d.push(a) : -1 != e.indexOf(b) && d.push(a)
                        })
                    }), d
                },
                findModels: function(a, b, c) {
                    for (var d = ["ng-", "data-ng-", "ng\\:"], e = 0; e < d.length; ++e) {
                        var f = a.querySelectorAll("[" + d[e] + "model" + (c ? "=" : "*=") + '"' + b + '"]');
                        if (f.length) return f
                    }
                },
                getLocation: function() {
                    return c.url()
                },
                setLocation: function(b) {
                    b !== c.url() && (c.url(b), a.$digest())
                },
                whenStable: function(a) {
                    b.notifyWhenNoOutstandingRequests(a)
                }
            }
        }]
    }

    function dc() {
        this.$get = ["$rootScope", "$browser", "$q", "$$q", "$exceptionHandler", function(a, b, c, d, e) {
            function f(f, h, i) {
                z(f) || (i = h, h = f, f = o);
                var j, k = Wc.call(arguments, 3),
                    l = t(i) && !i,
                    m = (l ? d : c).defer(),
                    n = m.promise;
                return j = b.defer(function() {
                    try {
                        m.resolve(f.apply(null, k))
                    } catch (b) {
                        m.reject(b), e(b)
                    } finally {
                        delete g[n.$$timeoutId]
                    }
                    l || a.$apply()
                }, h), n.$$timeoutId = j, g[j] = m, n
            }
            var g = {};
            return f.cancel = function(a) {
                return a && a.$$timeoutId in g ? (g[a.$$timeoutId].reject("canceled"), delete g[a.$$timeoutId], b.defer.cancel(a.$$timeoutId)) : !1
            }, f
        }]
    }

    function ec(a) {
        return Oc && (se.setAttribute("href", a), a = se.href), se.setAttribute("href", a), {
            href: se.href,
            protocol: se.protocol ? se.protocol.replace(/:$/, "") : "",
            host: se.host,
            search: se.search ? se.search.replace(/^\?/, "") : "",
            hash: se.hash ? se.hash.replace(/^#/, "") : "",
            hostname: se.hostname,
            port: se.port,
            pathname: "/" === se.pathname.charAt(0) ? se.pathname : "/" + se.pathname
        }
    }

    function fc(a) {
        return a = w(a) ? ec(a) : a, a.protocol === te.protocol && a.host === te.host
    }

    function gc() {
        this.$get = q(a)
    }

    function hc(a) {
        function b(a) {
            try {
                return decodeURIComponent(a)
            } catch (b) {
                return a
            }
        }
        var c = a[0] || {},
            d = {},
            e = "";
        return function() {
            var a, f, g, h, i;
            if (a = c.cookie || "", a !== e)
                for (e = a, a = e.split("; "), d = {}, g = 0; g < a.length; g++) f = a[g], h = f.indexOf("="), h > 0 && (i = b(f.substring(0, h)), s(d[i]) && (d[i] = b(f.substring(h + 1))));
            return d
        }
    }

    function ic() {
        this.$get = hc
    }

    function jc(a) {
        function b(c, d) {
            if (u(c)) {
                var e = {};
                return f(c, function(a, c) {
                    e[c] = b(c, a)
                }), e
            }
            return a.factory(c + "Filter", d)
        }
        this.register = b, this.$get = ["$injector", function(a) {
            return function(b) {
                return a.get(b + "Filter")
            }
        }], b("currency", oc), b("date", zc), b("filter", kc), b("json", Ac), b("limitTo", Bc), b("lowercase", Ae), b("number", pc), b("orderBy", Cc), b("uppercase", Be)
    }

    function kc() {
        return function(a, b, c) {
            if (!e(a)) {
                if (null == a) return a;
                throw d("filter")("notarray", a)
            }
            var f;
            switch (nc(b)) {
                case "function":
                    break;
                case "boolean":
                case "null":
                case "number":
                case "string":
                    f = !0;
                case "object":
                    b = lc(b, c, f);
                    break;
                default:
                    return a
            }
            return Array.prototype.filter.call(a, b)
        }
    }

    function lc(a, b, c) {
        var d = u(a) && "$" in a;
        return !0 === b ? b = L : z(b) || (b = function(a, b) {
                return s(a) ? !1 : null === a || null === b ? a === b : u(b) || u(a) && !r(a) ? !1 : (a = Tc("" + a), b = Tc("" + b), -1 !== a.indexOf(b))
            }),
            function(e) {
                return d && !u(e) ? mc(e, a.$, b, !1) : mc(e, a, b, c)
            }
    }

    function mc(a, b, c, d, e) {
        var f = nc(a),
            g = nc(b);
        if ("string" === g && "!" === b.charAt(0)) return !mc(a, b.substring(1), c, d);
        if (dd(a)) return a.some(function(a) {
            return mc(a, b, c, d)
        });
        switch (f) {
            case "object":
                var h;
                if (d) {
                    for (h in a)
                        if ("$" !== h.charAt(0) && mc(a[h], b, c, !0)) return !0;
                    return e ? !1 : mc(a, b, c, !1)
                }
                if ("object" === g) {
                    for (h in b)
                        if (e = b[h], !z(e) && !s(e) && (f = "$" === h, !mc(f ? a : a[h], e, c, f, f))) return !1;
                    return !0
                }
                return c(a, b);
            case "function":
                return !1;
            default:
                return c(a, b)
        }
    }

    function nc(a) {
        return null === a ? "null" : typeof a
    }

    function oc(a) {
        var b = a.NUMBER_FORMATS;
        return function(a, c, d) {
            return s(c) && (c = b.CURRENCY_SYM), s(d) && (d = b.PATTERNS[1].maxFrac), null == a ? a : sc(a, b.PATTERNS[1], b.GROUP_SEP, b.DECIMAL_SEP, d).replace(/\u00A4/g, c)
        }
    }

    function pc(a) {
        var b = a.NUMBER_FORMATS;
        return function(a, c) {
            return null == a ? a : sc(a, b.PATTERNS[0], b.GROUP_SEP, b.DECIMAL_SEP, c)
        }
    }

    function qc(a) {
        var b, c, d, e, f, g = 0;
        for (-1 < (c = a.indexOf(ve)) && (a = a.replace(ve, "")), 0 < (d = a.search(/e/i)) ? (0 > c && (c = d), c += +a.slice(d + 1), a = a.substring(0, d)) : 0 > c && (c = a.length), d = 0; a.charAt(d) == we; d++);
        if (d == (f = a.length)) b = [0], c = 1;
        else {
            for (f--; a.charAt(f) == we;) f--;
            for (c -= d, b = [], e = 0; f >= d; d++, e++) b[e] = +a.charAt(d)
        }
        return c > ue && (b = b.splice(0, ue - 1), g = c - 1, c = 1), {
            d: b,
            e: g,
            i: c
        }
    }

    function rc(a, b, c, d) {
        var e = a.d,
            f = e.length - a.i;
        if (b = s(b) ? Math.min(Math.max(c, f), d) : +b, c = b + a.i, d = e[c], c > 0) e.splice(c);
        else {
            a.i = 1, e.length = c = b + 1;
            for (var g = 0; c > g; g++) e[g] = 0
        }
        for (d >= 5 && e[c - 1]++; b > f; f++) e.push(0);
        (b = e.reduceRight(function(a, b, c, d) {
            return b += a, d[c] = b % 10, Math.floor(b / 10)
        }, 0)) && (e.unshift(b), a.i++)
    }

    function sc(a, b, c, d, e) {
        if (!w(a) && !x(a) || isNaN(a)) return "";
        var f = !isFinite(a),
            g = !1,
            h = Math.abs(a) + "",
            i = "";
        if (f) i = "∞";
        else {
            for (g = qc(h), rc(g, e, b.minFrac, b.maxFrac), i = g.d, h = g.i, e = g.e, f = [], g = i.reduce(function(a, b) {
                    return a && !b
                }, !0); 0 > h;) i.unshift(0), h++;
            for (h > 0 ? f = i.splice(h) : (f = i, i = [0]), h = [], i.length > b.lgSize && h.unshift(i.splice(-b.lgSize).join("")); i.length > b.gSize;) h.unshift(i.splice(-b.gSize).join(""));
            i.length && h.unshift(i.join("")), i = h.join(c), f.length && (i += d + f.join("")), e && (i += "e+" + e)
        }
        return 0 > a && !g ? b.negPre + i + b.negSuf : b.posPre + i + b.posSuf
    }

    function tc(a, b, c) {
        var d = "";
        for (0 > a && (d = "-", a = -a), a = "" + a; a.length < b;) a = we + a;
        return c && (a = a.substr(a.length - b)),
            d + a
    }

    function uc(a, b, c, d) {
        return c = c || 0,
            function(e) {
                return e = e["get" + a](), (c > 0 || e > -c) && (e += c), 0 === e && -12 == c && (e = 12), tc(e, b, d)
            }
    }

    function vc(a, b) {
        return function(c, d) {
            var e = c["get" + a](),
                f = Vc(b ? "SHORT" + a : a);
            return d[f][e]
        }
    }

    function wc(a) {
        var b = new Date(a, 0, 1).getDay();
        return new Date(a, 0, (4 >= b ? 5 : 12) - b)
    }

    function xc(a) {
        return function(b) {
            var c = wc(b.getFullYear());
            return b = +new Date(b.getFullYear(), b.getMonth(), b.getDate() + (4 - b.getDay())) - +c, b = 1 + Math.round(b / 6048e5), tc(b, a)
        }
    }

    function yc(a, b) {
        return 0 >= a.getFullYear() ? b.ERAS[0] : b.ERAS[1]
    }

    function zc(a) {
        function b(a) {
            var b;
            if (b = a.match(c)) {
                a = new Date(0);
                var d = 0,
                    e = 0,
                    f = b[8] ? a.setUTCFullYear : a.setFullYear,
                    g = b[8] ? a.setUTCHours : a.setHours;
                b[9] && (d = m(b[9] + b[10]), e = m(b[9] + b[11])), f.call(a, m(b[1]), m(b[2]) - 1, m(b[3])), d = m(b[4] || 0) - d, e = m(b[5] || 0) - e, f = m(b[6] || 0), b = Math.round(1e3 * parseFloat("0." + (b[7] || 0))), g.call(a, d, e, f, b)
            }
            return a
        }
        var c = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
        return function(c, d, e) {
            var g, h, i = "",
                j = [];
            if (d = d || "mediumDate", d = a.DATETIME_FORMATS[d] || d, w(c) && (c = ze.test(c) ? m(c) : b(c)), x(c) && (c = new Date(c)), !y(c) || !isFinite(c.getTime())) return c;
            for (; d;)(h = ye.exec(d)) ? (j = M(j, h, 1), d = j.pop()) : (j.push(d), d = null);
            var k = c.getTimezoneOffset();
            return e && (k = R(e, c.getTimezoneOffset()), c = S(c, e, !0)), f(j, function(b) {
                g = xe[b], i += g ? g(c, a.DATETIME_FORMATS, k) : b.replace(/(^'|'$)/g, "").replace(/''/g, "'")
            }), i
        }
    }

    function Ac() {
        return function(a, b) {
            return s(b) && (b = 2), P(a, b)
        }
    }

    function Bc() {
        return function(a, b, c) {
            return b = 1 / 0 === Math.abs(Number(b)) ? Number(b) : m(b), isNaN(b) ? a : (x(a) && (a = a.toString()), dd(a) || w(a) ? (c = !c || isNaN(c) ? 0 : m(c), c = 0 > c ? Math.max(0, a.length + c) : c, b >= 0 ? a.slice(c, c + b) : 0 === c ? a.slice(b, a.length) : a.slice(Math.max(0, c + b), c)) : a)
        }
    }

    function Cc(a) {
        function b(b, c) {
            return c = c ? -1 : 1, b.map(function(b) {
                var d = 1,
                    e = p;
                if (z(b)) e = b;
                else if (w(b) && (("+" == b.charAt(0) || "-" == b.charAt(0)) && (d = "-" == b.charAt(0) ? -1 : 1, b = b.substring(1)), "" !== b && (e = a(b), e.constant))) var f = e(),
                    e = function(a) {
                        return a[f]
                    };
                return {
                    get: e,
                    descending: d * c
                }
            })
        }

        function c(a) {
            switch (typeof a) {
                case "number":
                case "boolean":
                case "string":
                    return !0;
                default:
                    return !1
            }
        }
        return function(a, d, f) {
            if (!e(a)) return a;
            dd(d) || (d = [d]), 0 === d.length && (d = ["+"]);
            var g = b(d, f);
            return g.push({
                get: function() {
                    return {}
                },
                descending: f ? -1 : 1
            }), a = Array.prototype.map.call(a, function(a, b) {
                return {
                    value: a,
                    predicateValues: g.map(function(d) {
                        var e = d.get(a);
                        return d = typeof e, null === e ? (d = "string", e = "null") : "string" === d ? e = e.toLowerCase() : "object" === d && ("function" == typeof e.valueOf && (e = e.valueOf(), c(e)) || r(e) && (e = e.toString(), c(e)) || (e = b)), {
                            value: e,
                            type: d
                        }
                    })
                }
            }), a.sort(function(a, b) {
                for (var c = 0, d = 0, e = g.length; e > d; ++d) {
                    var c = a.predicateValues[d],
                        f = b.predicateValues[d],
                        h = 0;
                    if (c.type === f.type ? c.value !== f.value && (h = c.value < f.value ? -1 : 1) : h = c.type < f.type ? -1 : 1, c = h * g[d].descending) break
                }
                return c
            }), a = a.map(function(a) {
                return a.value
            })
        }
    }

    function Dc(a) {
        return z(a) && (a = {
            link: a
        }), a.restrict = a.restrict || "AC", q(a)
    }

    function Ec(a, b, d, e, g) {
        var h = this,
            i = [];
        h.$error = {}, h.$$success = {}, h.$pending = c, h.$name = g(b.name || b.ngForm || "")(d), h.$dirty = !1, h.$pristine = !0, h.$valid = !0, h.$invalid = !1, h.$submitted = !1, h.$$parentForm = Ee, h.$rollbackViewValue = function() {
            f(i, function(a) {
                a.$rollbackViewValue()
            })
        }, h.$commitViewValue = function() {
            f(i, function(a) {
                a.$commitViewValue()
            })
        }, h.$addControl = function(a) {
            ga(a.$name, "input"), i.push(a), a.$name && (h[a.$name] = a), a.$$parentForm = h
        }, h.$$renameControl = function(a, b) {
            var c = a.$name;
            h[c] === a && delete h[c], h[b] = a, a.$name = b
        }, h.$removeControl = function(a) {
            a.$name && h[a.$name] === a && delete h[a.$name], f(h.$pending, function(b, c) {
                h.$setValidity(c, null, a)
            }), f(h.$error, function(b, c) {
                h.$setValidity(c, null, a)
            }), f(h.$$success, function(b, c) {
                h.$setValidity(c, null, a)
            }), I(i, a), a.$$parentForm = Ee
        }, Mc({
            ctrl: this,
            $element: a,
            set: function(a, b, c) {
                var d = a[b];
                d ? -1 === d.indexOf(c) && d.push(c) : a[b] = [c]
            },
            unset: function(a, b, c) {
                var d = a[b];
                d && (I(d, c), 0 === d.length && delete a[b])
            },
            $animate: e
        }), h.$setDirty = function() {
            e.removeClass(a, mf), e.addClass(a, nf), h.$dirty = !0, h.$pristine = !1, h.$$parentForm.$setDirty()
        }, h.$setPristine = function() {
            e.setClass(a, mf, nf + " ng-submitted"), h.$dirty = !1, h.$pristine = !0, h.$submitted = !1, f(i, function(a) {
                a.$setPristine()
            })
        }, h.$setUntouched = function() {
            f(i, function(a) {
                a.$setUntouched()
            })
        }, h.$setSubmitted = function() {
            e.addClass(a, "ng-submitted"), h.$submitted = !0, h.$$parentForm.$setSubmitted()
        }
    }

    function Fc(a) {
        a.$formatters.push(function(b) {
            return a.$isEmpty(b) ? b : b.toString()
        })
    }

    function Gc(a, b, c, d, e, f) {
        var g = Tc(b[0].type);
        if (!e.android) {
            var h = !1;
            b.on("compositionstart", function(a) {
                h = !0
            }), b.on("compositionend", function() {
                h = !1, i()
            })
        }
        var i = function(a) {
            if (j && (f.defer.cancel(j), j = null), !h) {
                var e = b.val();
                a = a && a.type, "password" === g || c.ngTrim && "false" === c.ngTrim || (e = fd(e)), (d.$viewValue !== e || "" === e && d.$$hasNativeValidators) && d.$setViewValue(e, a)
            }
        };
        if (e.hasEvent("input")) b.on("input", i);
        else {
            var j, k = function(a, b, c) {
                j || (j = f.defer(function() {
                    j = null, b && b.value === c || i(a)
                }))
            };
            b.on("keydown", function(a) {
                var b = a.keyCode;
                91 === b || b > 15 && 19 > b || b >= 37 && 40 >= b || k(a, this, this.value)
            }), e.hasEvent("paste") && b.on("paste cut", k)
        }
        b.on("change", i), d.$render = function() {
            var a = d.$isEmpty(d.$viewValue) ? "" : d.$viewValue;
            b.val() !== a && b.val(a)
        }
    }

    function Hc(a, b) {
        return function(c, d) {
            var e, g;
            if (y(c)) return c;
            if (w(c)) {
                if ('"' == c.charAt(0) && '"' == c.charAt(c.length - 1) && (c = c.substring(1, c.length - 1)), Ie.test(c)) return new Date(c);
                if (a.lastIndex = 0, e = a.exec(c)) return e.shift(), g = d ? {
                    yyyy: d.getFullYear(),
                    MM: d.getMonth() + 1,
                    dd: d.getDate(),
                    HH: d.getHours(),
                    mm: d.getMinutes(),
                    ss: d.getSeconds(),
                    sss: d.getMilliseconds() / 1e3
                } : {
                    yyyy: 1970,
                    MM: 1,
                    dd: 1,
                    HH: 0,
                    mm: 0,
                    ss: 0,
                    sss: 0
                }, f(e, function(a, c) {
                    c < b.length && (g[b[c]] = +a)
                }), new Date(g.yyyy, g.MM - 1, g.dd, g.HH, g.mm, g.ss || 0, 1e3 * g.sss || 0)
            }
            return NaN
        }
    }

    function Ic(a, b, d, e) {
        return function(f, g, h, i, j, k, l) {
            function m(a) {
                return a && !(a.getTime && a.getTime() !== a.getTime())
            }

            function n(a) {
                return t(a) && !y(a) ? d(a) || c : a
            }
            Jc(f, g, h, i), Gc(f, g, h, i, j, k);
            var o, p = i && i.$options && i.$options.timezone;
            if (i.$$parserName = a, i.$parsers.push(function(a) {
                    return i.$isEmpty(a) ? null : b.test(a) ? (a = d(a, o), p && (a = S(a, p)), a) : c
                }), i.$formatters.push(function(a) {
                    if (a && !y(a)) throw pf("datefmt", a);
                    return m(a) ? ((o = a) && p && (o = S(o, p, !0)), l("date")(a, e, p)) : (o = null, "")
                }), t(h.min) || h.ngMin) {
                var q;
                i.$validators.min = function(a) {
                    return !m(a) || s(q) || d(a) >= q
                }, h.$observe("min", function(a) {
                    q = n(a), i.$validate()
                })
            }
            if (t(h.max) || h.ngMax) {
                var r;
                i.$validators.max = function(a) {
                    return !m(a) || s(r) || d(a) <= r
                }, h.$observe("max", function(a) {
                    r = n(a), i.$validate()
                })
            }
        }
    }

    function Jc(a, b, d, e) {
        (e.$$hasNativeValidators = u(b[0].validity)) && e.$parsers.push(function(a) {
            var d = b.prop("validity") || {};
            return d.badInput && !d.typeMismatch ? c : a
        })
    }

    function Kc(a, b, c, d, e) {
        if (t(d)) {
            if (a = a(d), !a.constant) throw pf("constexpr", c, d);
            return a(b)
        }
        return e
    }

    function Lc(a, b) {
        return a = "ngClass" + a, ["$animate", function(c) {
            function d(a, b) {
                var c = [],
                    d = 0;
                a: for (; d < a.length; d++) {
                    for (var e = a[d], f = 0; f < b.length; f++)
                        if (e == b[f]) continue a;
                    c.push(e)
                }
                return c
            }

            function e(a) {
                var b = [];
                return dd(a) ? (f(a, function(a) {
                    b = b.concat(e(a))
                }), b) : w(a) ? a.split(" ") : u(a) ? (f(a, function(a, c) {
                    a && (b = b.concat(c.split(" ")))
                }), b) : a
            }
            return {
                restrict: "AC",
                link: function(g, h, i) {
                    function j(a, b) {
                        var c = h.data("$classCounts") || ja(),
                            d = [];
                        return f(a, function(a) {
                            (b > 0 || c[a]) && (c[a] = (c[a] || 0) + b, c[a] === +(b > 0) && d.push(a))
                        }), h.data("$classCounts", c), d.join(" ")
                    }

                    function k(a) {
                        if (!0 === b || g.$index % 2 === b) {
                            var f = e(a || []);
                            if (l) {
                                if (!L(a, l)) {
                                    var k = e(l),
                                        m = d(f, k),
                                        f = d(k, f),
                                        m = j(m, 1),
                                        f = j(f, -1);
                                    m && m.length && c.addClass(h, m), f && f.length && c.removeClass(h, f)
                                }
                            } else {
                                var m = j(f, 1);
                                i.$addClass(m)
                            }
                        }
                        l = K(a)
                    }
                    var l;
                    g.$watch(i[a], k, !0), i.$observe("class", function(b) {
                        k(g.$eval(i[a]))
                    }), "ngClass" !== a && g.$watch("$index", function(c, d) {
                        var f = 1 & c;
                        if (f !== (1 & d)) {
                            var h = e(g.$eval(i[a]));
                            f === b ? (f = j(h, 1), i.$addClass(f)) : (f = j(h, -1), i.$removeClass(f))
                        }
                    })
                }
            }
        }]
    }

    function Mc(a) {
        function b(a, b) {
            b && !g[a] ? (j.addClass(f, a), g[a] = !0) : !b && g[a] && (j.removeClass(f, a), g[a] = !1)
        }

        function d(a, c) {
            a = a ? "-" + ca(a, "-") : "", b(kf + a, !0 === c), b(lf + a, !1 === c)
        }
        var e = a.ctrl,
            f = a.$element,
            g = {},
            h = a.set,
            i = a.unset,
            j = a.$animate;
        g[lf] = !(g[kf] = f.hasClass(kf)), e.$setValidity = function(a, f, g) {
            s(f) ? (e.$pending || (e.$pending = {}), h(e.$pending, a, g)) : (e.$pending && i(e.$pending, a, g), Nc(e.$pending) && (e.$pending = c)), D(f) ? f ? (i(e.$error, a, g), h(e.$$success, a, g)) : (h(e.$error, a, g), i(e.$$success, a, g)) : (i(e.$error, a, g), i(e.$$success, a, g)), e.$pending ? (b( of , !0), e.$valid = e.$invalid = c, d("", null)) : (b( of , !1), e.$valid = Nc(e.$error), e.$invalid = !e.$valid, d("", e.$valid)), f = e.$pending && e.$pending[a] ? c : e.$error[a] ? !1 : e.$$success[a] ? !0 : null, d(a, f), e.$$parentForm.$setValidity(a, f, e)
        }
    }

    function Nc(a) {
        if (a)
            for (var b in a)
                if (a.hasOwnProperty(b)) return !1;
        return !0
    }
    var Oc, Pc, Qc, Rc, Sc = /^\/(.+)\/([a-z]*)$/,
        Tc = function(a) {
            return w(a) ? a.toLowerCase() : a
        },
        Uc = Object.prototype.hasOwnProperty,
        Vc = function(a) {
            return w(a) ? a.toUpperCase() : a
        },
        Wc = [].slice,
        Xc = [].splice,
        Yc = [].push,
        Zc = Object.prototype.toString,
        $c = Object.getPrototypeOf,
        _c = d("ng"),
        ad = a.angular || (a.angular = {}),
        bd = 0;
    Oc = b.documentMode, o.$inject = [], p.$inject = [];
    var cd, dd = Array.isArray,
        ed = /^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,
        fd = function(a) {
            return w(a) ? a.trim() : a
        },
        gd = function(a) {
            return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08")
        },
        hd = function() {
            if (!t(hd.rules)) {
                var a = b.querySelector("[ng-csp]") || b.querySelector("[data-ng-csp]");
                if (a) {
                    var c = a.getAttribute("ng-csp") || a.getAttribute("data-ng-csp");
                    hd.rules = {
                        noUnsafeEval: !c || -1 !== c.indexOf("no-unsafe-eval"),
                        noInlineStyle: !c || -1 !== c.indexOf("no-inline-style")
                    }
                } else {
                    a = hd;
                    try {
                        new Function(""), c = !1
                    } catch (d) {
                        c = !0
                    }
                    a.rules = {
                        noUnsafeEval: c,
                        noInlineStyle: !1
                    }
                }
            }
            return hd.rules
        },
        id = function() {
            if (t(id.name_)) return id.name_;
            var a, c, d, e, f = jd.length;
            for (c = 0; f > c; ++c)
                if (d = jd[c], a = b.querySelector("[" + d.replace(":", "\\:") + "jq]")) {
                    e = a.getAttribute(d + "jq");
                    break
                }
            return id.name_ = e
        },
        jd = ["ng-", "data-ng-", "ng:", "x-ng-"],
        kd = /[A-Z]/g,
        ld = !1,
        md = 3,
        nd = {
            full: "1.4.9",
            major: 1,
            minor: 4,
            dot: 9,
            codeName: "implicit-superannuation"
        };
    pa.expando = "ng339";
    var od = pa.cache = {},
        pd = 1;
    pa._data = function(a) {
        return this.cache[a[this.expando]] || {}
    };
    var qd = /([\:\-\_]+(.))/g,
        rd = /^moz([A-Z])/,
        sd = {
            mouseleave: "mouseout",
            mouseenter: "mouseover"
        },
        td = d("jqLite"),
        ud = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,
        vd = /<|&#?\w+;/,
        wd = /<([\w:-]+)/,
        xd = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,
        yd = {
            option: [1, '<select multiple="multiple">', "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
    yd.optgroup = yd.option, yd.tbody = yd.tfoot = yd.colgroup = yd.caption = yd.thead, yd.th = yd.td;
    var zd = Node.prototype.contains || function(a) {
            return !!(16 & this.compareDocumentPosition(a))
        },
        Ad = pa.prototype = {
            ready: function(c) {
                function d() {
                    e || (e = !0, c())
                }
                var e = !1;
                "complete" === b.readyState ? setTimeout(d) : (this.on("DOMContentLoaded", d), pa(a).on("load", d))
            },
            toString: function() {
                var a = [];
                return f(this, function(b) {
                    a.push("" + b)
                }), "[" + a.join(", ") + "]"
            },
            eq: function(a) {
                return Pc(a >= 0 ? this[a] : this[this.length + a])
            },
            length: 0,
            push: Yc,
            sort: [].sort,
            splice: [].splice
        },
        Bd = {};
    f("multiple selected checked disabled readOnly required open".split(" "), function(a) {
        Bd[Tc(a)] = a
    });
    var Cd = {};
    f("input select option textarea button form details".split(" "), function(a) {
        Cd[a] = !0
    });
    var Dd = {
        ngMinlength: "minlength",
        ngMaxlength: "maxlength",
        ngMin: "min",
        ngMax: "max",
        ngPattern: "pattern"
    };
    f({
        data: va,
        removeData: ta,
        hasData: function(a) {
            for (var b in od[a.ng339]) return !0;
            return !1
        }
    }, function(a, b) {
        pa[b] = a
    }), f({
        data: va,
        inheritedData: Ba,
        scope: function(a) {
            return Pc.data(a, "$scope") || Ba(a.parentNode || a, ["$isolateScope", "$scope"])
        },
        isolateScope: function(a) {
            return Pc.data(a, "$isolateScope") || Pc.data(a, "$isolateScopeNoTemplate")
        },
        controller: Aa,
        injector: function(a) {
            return Ba(a, "$injector")
        },
        removeAttr: function(a, b) {
            a.removeAttribute(b)
        },
        hasClass: wa,
        css: function(a, b, c) {
            return b = ma(b), t(c) ? void(a.style[b] = c) : a.style[b]
        },
        attr: function(a, b, d) {
            var e = a.nodeType;
            if (e !== md && 2 !== e && 8 !== e)
                if (e = Tc(b), Bd[e]) {
                    if (!t(d)) return a[b] || (a.attributes.getNamedItem(b) || o).specified ? e : c;
                    d ? (a[b] = !0, a.setAttribute(b, e)) : (a[b] = !1, a.removeAttribute(e))
                } else if (t(d)) a.setAttribute(b, d);
            else if (a.getAttribute) return a = a.getAttribute(b, 2), null === a ? c : a
        },
        prop: function(a, b, c) {
            return t(c) ? void(a[b] = c) : a[b]
        },
        text: function() {
            function a(a, b) {
                if (s(b)) {
                    var c = a.nodeType;
                    return 1 === c || c === md ? a.textContent : ""
                }
                a.textContent = b
            }
            return a.$dv = "", a
        }(),
        val: function(a, b) {
            if (s(b)) {
                if (a.multiple && "select" === H(a)) {
                    var c = [];
                    return f(a.options, function(a) {
                        a.selected && c.push(a.value || a.text)
                    }), 0 === c.length ? null : c
                }
                return a.value
            }
            a.value = b
        },
        html: function(a, b) {
            return s(b) ? a.innerHTML : (ra(a, !0), void(a.innerHTML = b))
        },
        empty: Ca
    }, function(a, b) {
        pa.prototype[b] = function(b, c) {
            var d, e, f = this.length;
            if (a !== Ca && s(2 == a.length && a !== wa && a !== Aa ? b : c)) {
                if (u(b)) {
                    for (d = 0; f > d; d++)
                        if (a === va) a(this[d], b);
                        else
                            for (e in b) a(this[d], e, b[e]);
                    return this
                }
                for (d = a.$dv, f = s(d) ? Math.min(f, 1) : f, e = 0; f > e; e++) {
                    var g = a(this[e], b, c);
                    d = d ? d + g : g
                }
                return d
            }
            for (d = 0; f > d; d++) a(this[d], b, c);
            return this
        }
    }), f({
        removeData: ta,
        on: function(a, b, d, e) {
            if (t(e)) throw td("onargs");
            if (na(a)) {
                e = ua(a, !0);
                var f = e.events,
                    g = e.handle;
                g || (g = e.handle = Ga(a, f)), e = 0 <= b.indexOf(" ") ? b.split(" ") : [b];
                for (var h = e.length, i = function(b, c, e) {
                        var h = f[b];
                        h || (h = f[b] = [], h.specialHandlerWrapper = c, "$destroy" === b || e || a.addEventListener(b, g, !1)), h.push(d)
                    }; h--;) b = e[h], sd[b] ? (i(sd[b], Ia), i(b, c, !0)) : i(b)
            }
        },
        off: sa,
        one: function(a, b, c) {
            a = Pc(a), a.on(b, function d() {
                a.off(b, c), a.off(b, d)
            }), a.on(b, c)
        },
        replaceWith: function(a, b) {
            var c, d = a.parentNode;
            ra(a), f(new pa(b), function(b) {
                c ? d.insertBefore(b, c.nextSibling) : d.replaceChild(b, a), c = b
            })
        },
        children: function(a) {
            var b = [];
            return f(a.childNodes, function(a) {
                1 === a.nodeType && b.push(a)
            }), b
        },
        contents: function(a) {
            return a.contentDocument || a.childNodes || []
        },
        append: function(a, b) {
            var c = a.nodeType;
            if (1 === c || 11 === c) {
                b = new pa(b);
                for (var c = 0, d = b.length; d > c; c++) a.appendChild(b[c])
            }
        },
        prepend: function(a, b) {
            if (1 === a.nodeType) {
                var c = a.firstChild;
                f(new pa(b), function(b) {
                    a.insertBefore(b, c)
                })
            }
        },
        wrap: function(a, b) {
            b = Pc(b).eq(0).clone()[0];
            var c = a.parentNode;
            c && c.replaceChild(b, a), b.appendChild(a)
        },
        remove: Da,
        detach: function(a) {
            Da(a, !0)
        },
        after: function(a, b) {
            var c = a,
                d = a.parentNode;
            b = new pa(b);
            for (var e = 0, f = b.length; f > e; e++) {
                var g = b[e];
                d.insertBefore(g, c.nextSibling), c = g
            }
        },
        addClass: ya,
        removeClass: xa,
        toggleClass: function(a, b, c) {
            b && f(b.split(" "), function(b) {
                var d = c;
                s(d) && (d = !wa(a, b)), (d ? ya : xa)(a, b)
            })
        },
        parent: function(a) {
            return (a = a.parentNode) && 11 !== a.nodeType ? a : null
        },
        next: function(a) {
            return a.nextElementSibling
        },
        find: function(a, b) {
            return a.getElementsByTagName ? a.getElementsByTagName(b) : []
        },
        clone: qa,
        triggerHandler: function(a, b, c) {
            var d, e, g = b.type || b,
                h = ua(a);
            (h = (h = h && h.events) && h[g]) && (d = {
                preventDefault: function() {
                    this.defaultPrevented = !0
                },
                isDefaultPrevented: function() {
                    return !0 === this.defaultPrevented
                },
                stopImmediatePropagation: function() {
                    this.immediatePropagationStopped = !0
                },
                isImmediatePropagationStopped: function() {
                    return !0 === this.immediatePropagationStopped
                },
                stopPropagation: o,
                type: g,
                target: a
            }, b.type && (d = k(d, b)), b = K(h), e = c ? [d].concat(c) : [d], f(b, function(b) {
                d.isImmediatePropagationStopped() || b.apply(a, e)
            }))
        }
    }, function(a, b) {
        pa.prototype[b] = function(b, c, d) {
            for (var e, f = 0, g = this.length; g > f; f++) s(e) ? (e = a(this[f], b, c, d), t(e) && (e = Pc(e))) : za(e, a(this[f], b, c, d));
            return t(e) ? e : this
        }, pa.prototype.bind = pa.prototype.on, pa.prototype.unbind = pa.prototype.off
    }), La.prototype = {
        put: function(a, b) {
            this[Ka(a, this.nextUid)] = b
        },
        get: function(a) {
            return this[Ka(a, this.nextUid)]
        },
        remove: function(a) {
            var b = this[a = Ka(a, this.nextUid)];
            return delete this[a], b
        }
    };
    var Ed = [function() {
            this.$get = [function() {
                return La
            }]
        }],
        Fd = /^[^\(]*\(\s*([^\)]*)\)/m,
        Gd = /,/,
        Hd = /^\s*(_?)(\S+?)\1\s*$/,
        Id = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,
        Jd = d("$injector");
    Na.$$annotate = function(a, b, c) {
        var d;
        if ("function" == typeof a) {
            if (!(d = a.$inject)) {
                if (d = [], a.length) {
                    if (b) throw w(c) && c || (c = a.name || Ma(a)), Jd("strictdi", c);
                    b = a.toString().replace(Id, ""), b = b.match(Fd), f(b[1].split(Gd), function(a) {
                        a.replace(Hd, function(a, b, c) {
                            d.push(c)
                        })
                    })
                }
                a.$inject = d
            }
        } else dd(a) ? (b = a.length - 1, fa(a[b], "fn"), d = a.slice(0, b)) : fa(a, "fn", !0);
        return d
    };
    var Kd = d("$animate"),
        Ld = function() {
            this.$get = function() {}
        },
        Md = function() {
            var a = new La,
                b = [];
            this.$get = ["$$AnimateRunner", "$rootScope", function(c, d) {
                function e(a, b, c) {
                    var d = !1;
                    return b && (b = w(b) ? b.split(" ") : dd(b) ? b : [], f(b, function(b) {
                        b && (d = !0, a[b] = c)
                    })), d
                }

                function g() {
                    f(b, function(b) {
                        var c = a.get(b);
                        if (c) {
                            var d = Qa(b.attr("class")),
                                e = "",
                                g = "";
                            f(c, function(a, b) {
                                a !== !!d[b] && (a ? e += (e.length ? " " : "") + b : g += (g.length ? " " : "") + b)
                            }), f(b, function(a) {
                                e && ya(a, e), g && xa(a, g)
                            }), a.remove(b)
                        }
                    }), b.length = 0
                }
                return {
                    enabled: o,
                    on: o,
                    off: o,
                    pin: o,
                    push: function(f, h, i, j) {
                        return j && j(), i = i || {}, i.from && f.css(i.from), i.to && f.css(i.to), (i.addClass || i.removeClass) && (h = i.addClass, j = i.removeClass, i = a.get(f) || {}, h = e(i, h, !0), j = e(i, j, !1), (h || j) && (a.put(f, i), b.push(f), 1 === b.length && d.$$postDigest(g))), f = new c, f.complete(), f
                    }
                }
            }]
        },
        Nd = ["$provide", function(a) {
            var b = this;
            this.$$registeredAnimations = Object.create(null), this.register = function(c, d) {
                if (c && "." !== c.charAt(0)) throw Kd("notcsel", c);
                var e = c + "-animation";
                b.$$registeredAnimations[c.substr(1)] = e, a.factory(e, d)
            }, this.classNameFilter = function(a) {
                if (1 === arguments.length && (this.$$classNameFilter = a instanceof RegExp ? a : null) && /(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString())) throw Kd("nongcls", "ng-animate");
                return this.$$classNameFilter
            }, this.$get = ["$$animateQueue", function(a) {
                function b(a, b, c) {
                    if (c) {
                        var d;
                        a: {
                            for (d = 0; d < c.length; d++) {
                                var e = c[d];
                                if (1 === e.nodeType) {
                                    d = e;
                                    break a
                                }
                            }
                            d = void 0
                        }!d || d.parentNode || d.previousElementSibling || (c = null)
                    }
                    c ? c.after(a) : b.prepend(a)
                }
                return {
                    on: a.on,
                    off: a.off,
                    pin: a.pin,
                    enabled: a.enabled,
                    cancel: function(a) {
                        a.end && a.end()
                    },
                    enter: function(c, d, e, f) {
                        return d = d && Pc(d), e = e && Pc(e), d = d || e.parent(), b(c, d, e), a.push(c, "enter", Ra(f))
                    },
                    move: function(c, d, e, f) {
                        return d = d && Pc(d), e = e && Pc(e), d = d || e.parent(), b(c, d, e), a.push(c, "move", Ra(f))
                    },
                    leave: function(b, c) {
                        return a.push(b, "leave", Ra(c), function() {
                            b.remove()
                        })
                    },
                    addClass: function(b, c, d) {
                        return d = Ra(d), d.addClass = Pa(d.addclass, c), a.push(b, "addClass", d)
                    },
                    removeClass: function(b, c, d) {
                        return d = Ra(d), d.removeClass = Pa(d.removeClass, c), a.push(b, "removeClass", d)
                    },
                    setClass: function(b, c, d, e) {
                        return e = Ra(e), e.addClass = Pa(e.addClass, c), e.removeClass = Pa(e.removeClass, d), a.push(b, "setClass", e)
                    },
                    animate: function(b, c, d, e, f) {
                        return f = Ra(f), f.from = f.from ? k(f.from, c) : c, f.to = f.to ? k(f.to, d) : d, f.tempClasses = Pa(f.tempClasses, e || "ng-inline-animate"), a.push(b, "animate", f)
                    }
                }
            }]
        }],
        Od = function() {
            this.$get = ["$$rAF", function(a) {
                function b(b) {
                    c.push(b), 1 < c.length || a(function() {
                        for (var a = 0; a < c.length; a++) c[a]();
                        c = []
                    })
                }
                var c = [];
                return function() {
                    var a = !1;
                    return b(function() {
                            a = !0
                        }),
                        function(c) {
                            a ? c() : b(c)
                        }
                }
            }]
        },
        Pd = function() {
            this.$get = ["$q", "$sniffer", "$$animateAsyncRun", "$document", "$timeout", function(a, b, c, d, e) {
                function g(a) {
                    this.setHost(a);
                    var b = c();
                    this._doneCallbacks = [], this._tick = function(a) {
                        var c = d[0];
                        c && c.hidden ? e(a, 0, !1) : b(a)
                    }, this._state = 0
                }
                return g.chain = function(a, b) {
                    function c() {
                        d === a.length ? b(!0) : a[d](function(a) {
                            !1 === a ? b(!1) : (d++, c())
                        })
                    }
                    var d = 0;
                    c()
                }, g.all = function(a, b) {
                    function c(c) {
                        e = e && c, ++d === a.length && b(e)
                    }
                    var d = 0,
                        e = !0;
                    f(a, function(a) {
                        a.done(c)
                    })
                }, g.prototype = {
                    setHost: function(a) {
                        this.host = a || {}
                    },
                    done: function(a) {
                        2 === this._state ? a() : this._doneCallbacks.push(a)
                    },
                    progress: o,
                    getPromise: function() {
                        if (!this.promise) {
                            var b = this;
                            this.promise = a(function(a, c) {
                                b.done(function(b) {
                                    !1 === b ? c() : a()
                                })
                            })
                        }
                        return this.promise
                    },
                    then: function(a, b) {
                        return this.getPromise().then(a, b)
                    },
                    "catch": function(a) {
                        return this.getPromise()["catch"](a)
                    },
                    "finally": function(a) {
                        return this.getPromise()["finally"](a)
                    },
                    pause: function() {
                        this.host.pause && this.host.pause()
                    },
                    resume: function() {
                        this.host.resume && this.host.resume()
                    },
                    end: function() {
                        this.host.end && this.host.end(), this._resolve(!0)
                    },
                    cancel: function() {
                        this.host.cancel && this.host.cancel(), this._resolve(!1)
                    },
                    complete: function(a) {
                        var b = this;
                        0 === b._state && (b._state = 1, b._tick(function() {
                            b._resolve(a)
                        }))
                    },
                    _resolve: function(a) {
                        2 !== this._state && (f(this._doneCallbacks, function(b) {
                            b(a)
                        }), this._doneCallbacks.length = 0, this._state = 2)
                    }
                }, g
            }]
        },
        Qd = function() {
            this.$get = ["$$rAF", "$q", "$$AnimateRunner", function(a, b, c) {
                return function(b, d) {
                    function e() {
                        return a(function() {
                            f.addClass && (b.addClass(f.addClass), f.addClass = null), f.removeClass && (b.removeClass(f.removeClass), f.removeClass = null), f.to && (b.css(f.to), f.to = null), g || h.complete(), g = !0
                        }), h
                    }
                    var f = d || {};
                    f.$$prepared || (f = J(f)), f.cleanupStyles && (f.from = f.to = null), f.from && (b.css(f.from), f.from = null);
                    var g, h = new c;
                    return {
                        start: e,
                        end: e
                    }
                }
            }]
        },
        Rd = d("$compile");
    Wa.$inject = ["$provide", "$$sanitizeUriProvider"];
    var Sd = /^((?:x|data)[\:\-_])/i,
        Td = d("$controller"),
        Ud = /^(\S+)(\s+as\s+([\w$]+))?$/,
        Vd = function() {
            this.$get = ["$document", function(a) {
                return function(b) {
                    return b ? !b.nodeType && b instanceof Pc && (b = b[0]) : b = a[0].body, b.offsetWidth + 1
                }
            }]
        },
        Wd = "application/json",
        Xd = {
            "Content-Type": Wd + ";charset=utf-8"
        },
        Yd = /^\[|^\{(?!\{)/,
        Zd = {
            "[": /]$/,
            "{": /}$/
        },
        $d = /^\)\]\}',?\n/,
        _d = d("$http"),
        ae = function(a) {
            return function() {
                throw _d("legacy", a)
            }
        },
        be = ad.$interpolateMinErr = d("$interpolate");
    be.throwNoconcat = function(a) {
        throw be("noconcat", a)
    }, be.interr = function(a, b) {
        return be("interr", a, b.toString())
    };
    var ce = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
        de = {
            http: 80,
            https: 443,
            ftp: 21
        },
        ee = d("$location"),
        fe = {
            $$html5: !1,
            $$replace: !1,
            absUrl: xb("$$absUrl"),
            url: function(a) {
                if (s(a)) return this.$$url;
                var b = ce.exec(a);
                return (b[1] || "" === a) && this.path(decodeURIComponent(b[1])), (b[2] || b[1] || "" === a) && this.search(b[3] || ""), this.hash(b[5] || ""), this
            },
            protocol: xb("$$protocol"),
            host: xb("$$host"),
            port: xb("$$port"),
            path: yb("$$path", function(a) {
                return a = null !== a ? a.toString() : "", "/" == a.charAt(0) ? a : "/" + a
            }),
            search: function(a, b) {
                switch (arguments.length) {
                    case 0:
                        return this.$$search;
                    case 1:
                        if (w(a) || x(a)) a = a.toString(), this.$$search = V(a);
                        else {
                            if (!u(a)) throw ee("isrcharg");
                            a = J(a, {}), f(a, function(b, c) {
                                null == b && delete a[c]
                            }), this.$$search = a
                        }
                        break;
                    default:
                        s(b) || null === b ? delete this.$$search[a] : this.$$search[a] = b
                }
                return this.$$compose(), this
            },
            hash: yb("$$hash", function(a) {
                return null !== a ? a.toString() : ""
            }),
            replace: function() {
                return this.$$replace = !0, this
            }
        };
    f([wb, vb, ub], function(a) {
        a.prototype = Object.create(fe), a.prototype.state = function(b) {
            if (!arguments.length) return this.$$state;
            if (a !== ub || !this.$$html5) throw ee("nostate");
            return this.$$state = s(b) ? null : b, this
        }
    });
    var ge = d("$parse"),
        he = Function.prototype.call,
        ie = Function.prototype.apply,
        je = Function.prototype.bind,
        ke = ja();
    f("+ - * / % === !== == != < > <= >= && || ! = |".split(" "), function(a) {
        ke[a] = !0
    });
    var le = {
            n: "\n",
            f: "\f",
            r: "\r",
            t: "	",
            v: "\x0B",
            "'": "'",
            '"': '"'
        },
        me = function(a) {
            this.options = a
        };
    me.prototype = {
        constructor: me,
        lex: function(a) {
            for (this.text = a, this.index = 0, this.tokens = []; this.index < this.text.length;)
                if (a = this.text.charAt(this.index), '"' === a || "'" === a) this.readString(a);
                else if (this.isNumber(a) || "." === a && this.isNumber(this.peek())) this.readNumber();
            else if (this.isIdent(a)) this.readIdent();
            else if (this.is(a, "(){}[].,;:?")) this.tokens.push({
                index: this.index,
                text: a
            }), this.index++;
            else if (this.isWhitespace(a)) this.index++;
            else {
                var b = a + this.peek(),
                    c = b + this.peek(2),
                    d = ke[b],
                    e = ke[c];
                ke[a] || d || e ? (a = e ? c : d ? b : a, this.tokens.push({
                    index: this.index,
                    text: a,
                    operator: !0
                }), this.index += a.length) : this.throwError("Unexpected next character ", this.index, this.index + 1)
            }
            return this.tokens
        },
        is: function(a, b) {
            return -1 !== b.indexOf(a)
        },
        peek: function(a) {
            return a = a || 1, this.index + a < this.text.length ? this.text.charAt(this.index + a) : !1
        },
        isNumber: function(a) {
            return a >= "0" && "9" >= a && "string" == typeof a
        },
        isWhitespace: function(a) {
            return " " === a || "\r" === a || "	" === a || "\n" === a || "\x0B" === a || " " === a
        },
        isIdent: function(a) {
            return a >= "a" && "z" >= a || a >= "A" && "Z" >= a || "_" === a || "$" === a
        },
        isExpOperator: function(a) {
            return "-" === a || "+" === a || this.isNumber(a)
        },
        throwError: function(a, b, c) {
            throw c = c || this.index, b = t(b) ? "s " + b + "-" + this.index + " [" + this.text.substring(b, c) + "]" : " " + c, ge("lexerr", a, b, this.text)
        },
        readNumber: function() {
            for (var a = "", b = this.index; this.index < this.text.length;) {
                var c = Tc(this.text.charAt(this.index));
                if ("." == c || this.isNumber(c)) a += c;
                else {
                    var d = this.peek();
                    if ("e" == c && this.isExpOperator(d)) a += c;
                    else if (this.isExpOperator(c) && d && this.isNumber(d) && "e" == a.charAt(a.length - 1)) a += c;
                    else {
                        if (!this.isExpOperator(c) || d && this.isNumber(d) || "e" != a.charAt(a.length - 1)) break;
                        this.throwError("Invalid exponent")
                    }
                }
                this.index++
            }
            this.tokens.push({
                index: b,
                text: a,
                constant: !0,
                value: Number(a)
            })
        },
        readIdent: function() {
            for (var a = this.index; this.index < this.text.length;) {
                var b = this.text.charAt(this.index);
                if (!this.isIdent(b) && !this.isNumber(b)) break;
                this.index++
            }
            this.tokens.push({
                index: a,
                text: this.text.slice(a, this.index),
                identifier: !0
            })
        },
        readString: function(a) {
            var b = this.index;
            this.index++;
            for (var c = "", d = a, e = !1; this.index < this.text.length;) {
                var f = this.text.charAt(this.index),
                    d = d + f;
                if (e) "u" === f ? (e = this.text.substring(this.index + 1, this.index + 5), e.match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + e + "]"), this.index += 4, c += String.fromCharCode(parseInt(e, 16))) : c += le[f] || f, e = !1;
                else if ("\\" === f) e = !0;
                else {
                    if (f === a) return this.index++, void this.tokens.push({
                        index: b,
                        text: d,
                        constant: !0,
                        value: c
                    });
                    c += f
                }
                this.index++
            }
            this.throwError("Unterminated quote", b)
        }
    };
    var ne = function(a, b) {
        this.lexer = a, this.options = b
    };
    ne.Program = "Program", ne.ExpressionStatement = "ExpressionStatement", ne.AssignmentExpression = "AssignmentExpression", ne.ConditionalExpression = "ConditionalExpression", ne.LogicalExpression = "LogicalExpression", ne.BinaryExpression = "BinaryExpression", ne.UnaryExpression = "UnaryExpression", ne.CallExpression = "CallExpression", ne.MemberExpression = "MemberExpression", ne.Identifier = "Identifier", ne.Literal = "Literal", ne.ArrayExpression = "ArrayExpression", ne.Property = "Property", ne.ObjectExpression = "ObjectExpression", ne.ThisExpression = "ThisExpression", ne.NGValueParameter = "NGValueParameter", ne.prototype = {
        ast: function(a) {
            return this.text = a, this.tokens = this.lexer.lex(a), a = this.program(), 0 !== this.tokens.length && this.throwError("is an unexpected token", this.tokens[0]), a
        },
        program: function() {
            for (var a = [];;)
                if (0 < this.tokens.length && !this.peek("}", ")", ";", "]") && a.push(this.expressionStatement()), !this.expect(";")) return {
                    type: ne.Program,
                    body: a
                }
        },
        expressionStatement: function() {
            return {
                type: ne.ExpressionStatement,
                expression: this.filterChain()
            }
        },
        filterChain: function() {
            for (var a = this.expression(); this.expect("|");) a = this.filter(a);
            return a
        },
        expression: function() {
            return this.assignment()
        },
        assignment: function() {
            var a = this.ternary();
            return this.expect("=") && (a = {
                type: ne.AssignmentExpression,
                left: a,
                right: this.assignment(),
                operator: "="
            }), a
        },
        ternary: function() {
            var a, b, c = this.logicalOR();
            return this.expect("?") && (a = this.expression(), this.consume(":")) ? (b = this.expression(), {
                type: ne.ConditionalExpression,
                test: c,
                alternate: a,
                consequent: b
            }) : c
        },
        logicalOR: function() {
            for (var a = this.logicalAND(); this.expect("||");) a = {
                type: ne.LogicalExpression,
                operator: "||",
                left: a,
                right: this.logicalAND()
            };
            return a
        },
        logicalAND: function() {
            for (var a = this.equality(); this.expect("&&");) a = {
                type: ne.LogicalExpression,
                operator: "&&",
                left: a,
                right: this.equality()
            };
            return a
        },
        equality: function() {
            for (var a, b = this.relational(); a = this.expect("==", "!=", "===", "!==");) b = {
                type: ne.BinaryExpression,
                operator: a.text,
                left: b,
                right: this.relational()
            };
            return b
        },
        relational: function() {
            for (var a, b = this.additive(); a = this.expect("<", ">", "<=", ">=");) b = {
                type: ne.BinaryExpression,
                operator: a.text,
                left: b,
                right: this.additive()
            };
            return b
        },
        additive: function() {
            for (var a, b = this.multiplicative(); a = this.expect("+", "-");) b = {
                type: ne.BinaryExpression,
                operator: a.text,
                left: b,
                right: this.multiplicative()
            };
            return b
        },
        multiplicative: function() {
            for (var a, b = this.unary(); a = this.expect("*", "/", "%");) b = {
                type: ne.BinaryExpression,
                operator: a.text,
                left: b,
                right: this.unary()
            };
            return b
        },
        unary: function() {
            var a;
            return (a = this.expect("+", "-", "!")) ? {
                type: ne.UnaryExpression,
                operator: a.text,
                prefix: !0,
                argument: this.unary()
            } : this.primary()
        },
        primary: function() {
            var a;
            this.expect("(") ? (a = this.filterChain(), this.consume(")")) : this.expect("[") ? a = this.arrayDeclaration() : this.expect("{") ? a = this.object() : this.constants.hasOwnProperty(this.peek().text) ? a = J(this.constants[this.consume().text]) : this.peek().identifier ? a = this.identifier() : this.peek().constant ? a = this.constant() : this.throwError("not a primary expression", this.peek());
            for (var b; b = this.expect("(", "[", ".");) "(" === b.text ? (a = {
                type: ne.CallExpression,
                callee: a,
                arguments: this.parseArguments()
            }, this.consume(")")) : "[" === b.text ? (a = {
                type: ne.MemberExpression,
                object: a,
                property: this.expression(),
                computed: !0
            }, this.consume("]")) : "." === b.text ? a = {
                type: ne.MemberExpression,
                object: a,
                property: this.identifier(),
                computed: !1
            } : this.throwError("IMPOSSIBLE");
            return a
        },
        filter: function(a) {
            a = [a];
            for (var b = {
                    type: ne.CallExpression,
                    callee: this.identifier(),
                    arguments: a,
                    filter: !0
                }; this.expect(":");) a.push(this.expression());
            return b
        },
        parseArguments: function() {
            var a = [];
            if (")" !== this.peekToken().text)
                do a.push(this.expression()); while (this.expect(","));
            return a
        },
        identifier: function() {
            var a = this.consume();
            return a.identifier || this.throwError("is not a valid identifier", a), {
                type: ne.Identifier,
                name: a.text
            }
        },
        constant: function() {
            return {
                type: ne.Literal,
                value: this.consume().value
            }
        },
        arrayDeclaration: function() {
            var a = [];
            if ("]" !== this.peekToken().text)
                do {
                    if (this.peek("]")) break;
                    a.push(this.expression())
                } while (this.expect(","));
            return this.consume("]"), {
                type: ne.ArrayExpression,
                elements: a
            }
        },
        object: function() {
            var a, b = [];
            if ("}" !== this.peekToken().text)
                do {
                    if (this.peek("}")) break;
                    a = {
                        type: ne.Property,
                        kind: "init"
                    }, this.peek().constant ? a.key = this.constant() : this.peek().identifier ? a.key = this.identifier() : this.throwError("invalid key", this.peek()), this.consume(":"), a.value = this.expression(), b.push(a)
                } while (this.expect(","));
            return this.consume("}"), {
                type: ne.ObjectExpression,
                properties: b
            }
        },
        throwError: function(a, b) {
            throw ge("syntax", b.text, a, b.index + 1, this.text, this.text.substring(b.index))
        },
        consume: function(a) {
            if (0 === this.tokens.length) throw ge("ueoe", this.text);
            var b = this.expect(a);
            return b || this.throwError("is unexpected, expecting [" + a + "]", this.peek()), b
        },
        peekToken: function() {
            if (0 === this.tokens.length) throw ge("ueoe", this.text);
            return this.tokens[0]
        },
        peek: function(a, b, c, d) {
            return this.peekAhead(0, a, b, c, d)
        },
        peekAhead: function(a, b, c, d, e) {
            if (this.tokens.length > a) {
                a = this.tokens[a];
                var f = a.text;
                if (f === b || f === c || f === d || f === e || !(b || c || d || e)) return a
            }
            return !1
        },
        expect: function(a, b, c, d) {
            return (a = this.peek(a, b, c, d)) ? (this.tokens.shift(), a) : !1
        },
        constants: {
            "true": {
                type: ne.Literal,
                value: !0
            },
            "false": {
                type: ne.Literal,
                value: !1
            },
            "null": {
                type: ne.Literal,
                value: null
            },
            undefined: {
                type: ne.Literal,
                value: c
            },
            "this": {
                type: ne.ThisExpression
            }
        }
    }, Nb.prototype = {
        compile: function(a, b) {
            var d = this,
                e = this.astBuilder.ast(a);
            this.state = {
                nextId: 0,
                filters: {},
                expensiveChecks: b,
                fn: {
                    vars: [],
                    body: [],
                    own: {}
                },
                assign: {
                    vars: [],
                    body: [],
                    own: {}
                },
                inputs: []
            }, Ib(e, d.$filter);
            var g, h = "";
            return this.stage = "assign", (g = Lb(e)) && (this.state.computing = "assign", h = this.nextId(), this.recurse(g, h), this.return_(h), h = "fn.assign=" + this.generateFunction("assign", "s,v,l")), g = Jb(e.body), d.stage = "inputs", f(g, function(a, b) {
                var c = "fn" + b;
                d.state[c] = {
                    vars: [],
                    body: [],
                    own: {}
                }, d.state.computing = c;
                var e = d.nextId();
                d.recurse(a, e), d.return_(e), d.state.inputs.push(c), a.watchId = b
            }), this.state.computing = "fn", this.stage = "main", this.recurse(e), h = '"' + this.USE + " " + this.STRICT + '";\n' + this.filterPrefix() + "var fn=" + this.generateFunction("fn", "s,l,a,i") + h + this.watchFns() + "return fn;", h = new Function("$filter", "ensureSafeMemberName", "ensureSafeObject", "ensureSafeFunction", "getStringValue", "ensureSafeAssignContext", "ifDefined", "plus", "text", h)(this.$filter, Bb, Db, Eb, Cb, Fb, Gb, Hb, a), this.state = this.stage = c, h.literal = Mb(e), h.constant = e.constant, h
        },
        USE: "use",
        STRICT: "strict",
        watchFns: function() {
            var a = [],
                b = this.state.inputs,
                c = this;
            return f(b, function(b) {
                a.push("var " + b + "=" + c.generateFunction(b, "s"))
            }), b.length && a.push("fn.inputs=[" + b.join(",") + "];"), a.join("")
        },
        generateFunction: function(a, b) {
            return "function(" + b + "){" + this.varsPrefix(a) + this.body(a) + "};"
        },
        filterPrefix: function() {
            var a = [],
                b = this;
            return f(this.state.filters, function(c, d) {
                a.push(c + "=$filter(" + b.escape(d) + ")")
            }), a.length ? "var " + a.join(",") + ";" : ""
        },
        varsPrefix: function(a) {
            return this.state[a].vars.length ? "var " + this.state[a].vars.join(",") + ";" : ""
        },
        body: function(a) {
            return this.state[a].body.join("")
        },
        recurse: function(a, b, d, e, g, h) {
            var i, j, k, l, m = this;
            if (e = e || o, !h && t(a.watchId)) b = b || this.nextId(), this.if_("i", this.lazyAssign(b, this.computedMember("i", a.watchId)), this.lazyRecurse(a, b, d, e, g, !0));
            else switch (a.type) {
                case ne.Program:
                    f(a.body, function(b, d) {
                        m.recurse(b.expression, c, c, function(a) {
                            j = a
                        }), d !== a.body.length - 1 ? m.current().body.push(j, ";") : m.return_(j)
                    });
                    break;
                case ne.Literal:
                    l = this.escape(a.value), this.assign(b, l), e(l);
                    break;
                case ne.UnaryExpression:
                    this.recurse(a.argument, c, c, function(a) {
                        j = a
                    }), l = a.operator + "(" + this.ifDefined(j, 0) + ")", this.assign(b, l), e(l);
                    break;
                case ne.BinaryExpression:
                    this.recurse(a.left, c, c, function(a) {
                        i = a
                    }), this.recurse(a.right, c, c, function(a) {
                        j = a
                    }), l = "+" === a.operator ? this.plus(i, j) : "-" === a.operator ? this.ifDefined(i, 0) + a.operator + this.ifDefined(j, 0) : "(" + i + ")" + a.operator + "(" + j + ")", this.assign(b, l), e(l);
                    break;
                case ne.LogicalExpression:
                    b = b || this.nextId(), m.recurse(a.left, b), m.if_("&&" === a.operator ? b : m.not(b), m.lazyRecurse(a.right, b)), e(b);
                    break;
                case ne.ConditionalExpression:
                    b = b || this.nextId(), m.recurse(a.test, b), m.if_(b, m.lazyRecurse(a.alternate, b), m.lazyRecurse(a.consequent, b)), e(b);
                    break;
                case ne.Identifier:
                    b = b || this.nextId(), d && (d.context = "inputs" === m.stage ? "s" : this.assign(this.nextId(), this.getHasOwnProperty("l", a.name) + "?l:s"), d.computed = !1, d.name = a.name), Bb(a.name), m.if_("inputs" === m.stage || m.not(m.getHasOwnProperty("l", a.name)), function() {
                        m.if_("inputs" === m.stage || "s", function() {
                            g && 1 !== g && m.if_(m.not(m.nonComputedMember("s", a.name)), m.lazyAssign(m.nonComputedMember("s", a.name), "{}")), m.assign(b, m.nonComputedMember("s", a.name))
                        })
                    }, b && m.lazyAssign(b, m.nonComputedMember("l", a.name))), (m.state.expensiveChecks || Pb(a.name)) && m.addEnsureSafeObject(b), e(b);
                    break;
                case ne.MemberExpression:
                    i = d && (d.context = this.nextId()) || this.nextId(), b = b || this.nextId(), m.recurse(a.object, i, c, function() {
                        m.if_(m.notNull(i), function() {
                            a.computed ? (j = m.nextId(), m.recurse(a.property, j), m.getStringValue(j), m.addEnsureSafeMemberName(j), g && 1 !== g && m.if_(m.not(m.computedMember(i, j)), m.lazyAssign(m.computedMember(i, j), "{}")), l = m.ensureSafeObject(m.computedMember(i, j)), m.assign(b, l), d && (d.computed = !0, d.name = j)) : (Bb(a.property.name), g && 1 !== g && m.if_(m.not(m.nonComputedMember(i, a.property.name)), m.lazyAssign(m.nonComputedMember(i, a.property.name), "{}")), l = m.nonComputedMember(i, a.property.name), (m.state.expensiveChecks || Pb(a.property.name)) && (l = m.ensureSafeObject(l)), m.assign(b, l), d && (d.computed = !1, d.name = a.property.name))
                        }, function() {
                            m.assign(b, "undefined")
                        }), e(b)
                    }, !!g);
                    break;
                case ne.CallExpression:
                    b = b || this.nextId(), a.filter ? (j = m.filter(a.callee.name), k = [], f(a.arguments, function(a) {
                        var b = m.nextId();
                        m.recurse(a, b), k.push(b)
                    }), l = j + "(" + k.join(",") + ")", m.assign(b, l), e(b)) : (j = m.nextId(), i = {}, k = [], m.recurse(a.callee, j, i, function() {
                        m.if_(m.notNull(j), function() {
                            m.addEnsureSafeFunction(j), f(a.arguments, function(a) {
                                m.recurse(a, m.nextId(), c, function(a) {
                                    k.push(m.ensureSafeObject(a))
                                })
                            }), i.name ? (m.state.expensiveChecks || m.addEnsureSafeObject(i.context), l = m.member(i.context, i.name, i.computed) + "(" + k.join(",") + ")") : l = j + "(" + k.join(",") + ")", l = m.ensureSafeObject(l), m.assign(b, l)
                        }, function() {
                            m.assign(b, "undefined")
                        }), e(b)
                    }));
                    break;
                case ne.AssignmentExpression:
                    if (j = this.nextId(), i = {}, !Kb(a.left)) throw ge("lval");
                    this.recurse(a.left, c, i, function() {
                        m.if_(m.notNull(i.context), function() {
                            m.recurse(a.right, j), m.addEnsureSafeObject(m.member(i.context, i.name, i.computed)), m.addEnsureSafeAssignContext(i.context), l = m.member(i.context, i.name, i.computed) + a.operator + j, m.assign(b, l), e(b || l)
                        })
                    }, 1);
                    break;
                case ne.ArrayExpression:
                    k = [], f(a.elements, function(a) {
                        m.recurse(a, m.nextId(), c, function(a) {
                            k.push(a)
                        })
                    }), l = "[" + k.join(",") + "]", this.assign(b, l), e(l);
                    break;
                case ne.ObjectExpression:
                    k = [], f(a.properties, function(a) {
                        m.recurse(a.value, m.nextId(), c, function(b) {
                            k.push(m.escape(a.key.type === ne.Identifier ? a.key.name : "" + a.key.value) + ":" + b)
                        })
                    }), l = "{" + k.join(",") + "}", this.assign(b, l), e(l);
                    break;
                case ne.ThisExpression:
                    this.assign(b, "s"), e("s");
                    break;
                case ne.NGValueParameter:
                    this.assign(b, "v"), e("v")
            }
        },
        getHasOwnProperty: function(a, b) {
            var c = a + "." + b,
                d = this.current().own;
            return d.hasOwnProperty(c) || (d[c] = this.nextId(!1, a + "&&(" + this.escape(b) + " in " + a + ")")), d[c]
        },
        assign: function(a, b) {
            return a ? (this.current().body.push(a, "=", b, ";"), a) : void 0
        },
        filter: function(a) {
            return this.state.filters.hasOwnProperty(a) || (this.state.filters[a] = this.nextId(!0)), this.state.filters[a]
        },
        ifDefined: function(a, b) {
            return "ifDefined(" + a + "," + this.escape(b) + ")"
        },
        plus: function(a, b) {
            return "plus(" + a + "," + b + ")"
        },
        return_: function(a) {
            this.current().body.push("return ", a, ";")
        },
        if_: function(a, b, c) {
            if (!0 === a) b();
            else {
                var d = this.current().body;
                d.push("if(", a, "){"), b(), d.push("}"), c && (d.push("else{"), c(), d.push("}"))
            }
        },
        not: function(a) {
            return "!(" + a + ")"
        },
        notNull: function(a) {
            return a + "!=null"
        },
        nonComputedMember: function(a, b) {
            return a + "." + b
        },
        computedMember: function(a, b) {
            return a + "[" + b + "]"
        },
        member: function(a, b, c) {
            return c ? this.computedMember(a, b) : this.nonComputedMember(a, b)
        },
        addEnsureSafeObject: function(a) {
            this.current().body.push(this.ensureSafeObject(a), ";")
        },
        addEnsureSafeMemberName: function(a) {
            this.current().body.push(this.ensureSafeMemberName(a), ";")
        },
        addEnsureSafeFunction: function(a) {
            this.current().body.push(this.ensureSafeFunction(a), ";")
        },
        addEnsureSafeAssignContext: function(a) {
            this.current().body.push(this.ensureSafeAssignContext(a), ";")
        },
        ensureSafeObject: function(a) {
            return "ensureSafeObject(" + a + ",text)"
        },
        ensureSafeMemberName: function(a) {
            return "ensureSafeMemberName(" + a + ",text)"
        },
        ensureSafeFunction: function(a) {
            return "ensureSafeFunction(" + a + ",text)"
        },
        getStringValue: function(a) {
            this.assign(a, "getStringValue(" + a + ",text)")
        },
        ensureSafeAssignContext: function(a) {
            return "ensureSafeAssignContext(" + a + ",text)"
        },
        lazyRecurse: function(a, b, c, d, e, f) {
            var g = this;
            return function() {
                g.recurse(a, b, c, d, e, f)
            }
        },
        lazyAssign: function(a, b) {
            var c = this;
            return function() {
                c.assign(a, b)
            }
        },
        stringEscapeRegex: /[^ a-zA-Z0-9]/g,
        stringEscapeFn: function(a) {
            return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
        },
        escape: function(a) {
            if (w(a)) return "'" + a.replace(this.stringEscapeRegex, this.stringEscapeFn) + "'";
            if (x(a)) return a.toString();
            if (!0 === a) return "true";
            if (!1 === a) return "false";
            if (null === a) return "null";
            if ("undefined" == typeof a) return "undefined";
            throw ge("esc")
        },
        nextId: function(a, b) {
            var c = "v" + this.state.nextId++;
            return a || this.current().vars.push(c + (b ? "=" + b : "")), c
        },
        current: function() {
            return this.state[this.state.computing]
        }
    }, Ob.prototype = {
        compile: function(a, b) {
            var c = this,
                d = this.astBuilder.ast(a);
            this.expression = a, this.expensiveChecks = b, Ib(d, c.$filter);
            var e, g;
            (e = Lb(d)) && (g = this.recurse(e)), e = Jb(d.body);
            var h;
            e && (h = [], f(e, function(a, b) {
                var d = c.recurse(a);
                a.input = d, h.push(d), a.watchId = b
            }));
            var i = [];
            return f(d.body, function(a) {
                i.push(c.recurse(a.expression))
            }), e = 0 === d.body.length ? function() {} : 1 === d.body.length ? i[0] : function(a, b) {
                var c;
                return f(i, function(d) {
                    c = d(a, b)
                }), c
            }, g && (e.assign = function(a, b, c) {
                return g(a, c, b)
            }), h && (e.inputs = h), e.literal = Mb(d), e.constant = d.constant, e
        },
        recurse: function(a, b, d) {
            var e, g, h, i = this;
            if (a.input) return this.inputs(a.input, a.watchId);
            switch (a.type) {
                case ne.Literal:
                    return this.value(a.value, b);
                case ne.UnaryExpression:
                    return g = this.recurse(a.argument), this["unary" + a.operator](g, b);
                case ne.BinaryExpression:
                    return e = this.recurse(a.left), g = this.recurse(a.right), this["binary" + a.operator](e, g, b);
                case ne.LogicalExpression:
                    return e = this.recurse(a.left), g = this.recurse(a.right), this["binary" + a.operator](e, g, b);
                case ne.ConditionalExpression:
                    return this["ternary?:"](this.recurse(a.test), this.recurse(a.alternate), this.recurse(a.consequent), b);
                case ne.Identifier:
                    return Bb(a.name, i.expression), i.identifier(a.name, i.expensiveChecks || Pb(a.name), b, d, i.expression);
                case ne.MemberExpression:
                    return e = this.recurse(a.object, !1, !!d), a.computed || (Bb(a.property.name, i.expression), g = a.property.name), a.computed && (g = this.recurse(a.property)), a.computed ? this.computedMember(e, g, b, d, i.expression) : this.nonComputedMember(e, g, i.expensiveChecks, b, d, i.expression);
                case ne.CallExpression:
                    return h = [], f(a.arguments, function(a) {
                        h.push(i.recurse(a))
                    }), a.filter && (g = this.$filter(a.callee.name)), a.filter || (g = this.recurse(a.callee, !0)), a.filter ? function(a, d, e, f) {
                        for (var i = [], j = 0; j < h.length; ++j) i.push(h[j](a, d, e, f));
                        return a = g.apply(c, i, f), b ? {
                            context: c,
                            name: c,
                            value: a
                        } : a
                    } : function(a, c, d, e) {
                        var f, j = g(a, c, d, e);
                        if (null != j.value) {
                            Db(j.context, i.expression), Eb(j.value, i.expression), f = [];
                            for (var k = 0; k < h.length; ++k) f.push(Db(h[k](a, c, d, e), i.expression));
                            f = Db(j.value.apply(j.context, f), i.expression)
                        }
                        return b ? {
                            value: f
                        } : f
                    };
                case ne.AssignmentExpression:
                    return e = this.recurse(a.left, !0, 1), g = this.recurse(a.right),
                        function(a, c, d, f) {
                            var h = e(a, c, d, f);
                            return a = g(a, c, d, f), Db(h.value, i.expression), Fb(h.context), h.context[h.name] = a, b ? {
                                value: a
                            } : a
                        };
                case ne.ArrayExpression:
                    return h = [], f(a.elements, function(a) {
                            h.push(i.recurse(a))
                        }),
                        function(a, c, d, e) {
                            for (var f = [], g = 0; g < h.length; ++g) f.push(h[g](a, c, d, e));
                            return b ? {
                                value: f
                            } : f
                        };
                case ne.ObjectExpression:
                    return h = [], f(a.properties, function(a) {
                            h.push({
                                key: a.key.type === ne.Identifier ? a.key.name : "" + a.key.value,
                                value: i.recurse(a.value)
                            })
                        }),
                        function(a, c, d, e) {
                            for (var f = {}, g = 0; g < h.length; ++g) f[h[g].key] = h[g].value(a, c, d, e);
                            return b ? {
                                value: f
                            } : f
                        };
                case ne.ThisExpression:
                    return function(a) {
                        return b ? {
                            value: a
                        } : a
                    };
                case ne.NGValueParameter:
                    return function(a, c, d, e) {
                        return b ? {
                            value: d
                        } : d
                    }
            }
        },
        "unary+": function(a, b) {
            return function(c, d, e, f) {
                return c = a(c, d, e, f), c = t(c) ? +c : 0, b ? {
                    value: c
                } : c
            }
        },
        "unary-": function(a, b) {
            return function(c, d, e, f) {
                return c = a(c, d, e, f), c = t(c) ? -c : 0, b ? {
                    value: c
                } : c
            }
        },
        "unary!": function(a, b) {
            return function(c, d, e, f) {
                return c = !a(c, d, e, f), b ? {
                    value: c
                } : c
            }
        },
        "binary+": function(a, b, c) {
            return function(d, e, f, g) {
                var h = a(d, e, f, g);
                return d = b(d, e, f, g), h = Hb(h, d), c ? {
                    value: h
                } : h
            }
        },
        "binary-": function(a, b, c) {
            return function(d, e, f, g) {
                var h = a(d, e, f, g);
                return d = b(d, e, f, g), h = (t(h) ? h : 0) - (t(d) ? d : 0), c ? {
                    value: h
                } : h
            }
        },
        "binary*": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) * b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary/": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) / b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary%": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) % b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary===": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) === b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary!==": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) !== b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary==": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) == b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary!=": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) != b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary<": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) < b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary>": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) > b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary<=": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) <= b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary>=": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) >= b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary&&": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) && b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "binary||": function(a, b, c) {
            return function(d, e, f, g) {
                return d = a(d, e, f, g) || b(d, e, f, g), c ? {
                    value: d
                } : d
            }
        },
        "ternary?:": function(a, b, c, d) {
            return function(e, f, g, h) {
                return e = a(e, f, g, h) ? b(e, f, g, h) : c(e, f, g, h), d ? {
                    value: e
                } : e
            }
        },
        value: function(a, b) {
            return function() {
                return b ? {
                    context: c,
                    name: c,
                    value: a
                } : a
            }
        },
        identifier: function(a, b, d, e, f) {
            return function(g, h, i, j) {
                return g = h && a in h ? h : g, e && 1 !== e && g && !g[a] && (g[a] = {}), h = g ? g[a] : c, b && Db(h, f), d ? {
                    context: g,
                    name: a,
                    value: h
                } : h
            }
        },
        computedMember: function(a, b, c, d, e) {
            return function(f, g, h, i) {
                var j, k, l = a(f, g, h, i);
                return null != l && (j = b(f, g, h, i), j = Cb(j), Bb(j, e), d && 1 !== d && l && !l[j] && (l[j] = {}), k = l[j], Db(k, e)), c ? {
                    context: l,
                    name: j,
                    value: k
                } : k
            }
        },
        nonComputedMember: function(a, b, d, e, f, g) {
            return function(h, i, j, k) {
                return h = a(h, i, j, k), f && 1 !== f && h && !h[b] && (h[b] = {}), i = null != h ? h[b] : c, (d || Pb(b)) && Db(i, g), e ? {
                    context: h,
                    name: b,
                    value: i
                } : i
            }
        },
        inputs: function(a, b) {
            return function(c, d, e, f) {
                return f ? f[b] : a(c, d, e)
            }
        }
    };
    var oe = function(a, b, c) {
        this.lexer = a, this.$filter = b, this.options = c, this.ast = new ne(this.lexer), this.astCompiler = c.csp ? new Ob(this.ast, b) : new Nb(this.ast, b)
    };
    oe.prototype = {
        constructor: oe,
        parse: function(a) {
            return this.astCompiler.compile(a, this.options.expensiveChecks)
        }
    };
    var pe = Object.prototype.valueOf,
        qe = d("$sce"),
        re = {
            HTML: "html",
            CSS: "css",
            URL: "url",
            RESOURCE_URL: "resourceUrl",
            JS: "js"
        },
        Rd = d("$compile"),
        se = b.createElement("a"),
        te = ec(a.location.href);
    hc.$inject = ["$document"], jc.$inject = ["$provide"];
    var ue = 22,
        ve = ".",
        we = "0";
    oc.$inject = ["$locale"], pc.$inject = ["$locale"];
    var xe = {
            yyyy: uc("FullYear", 4),
            yy: uc("FullYear", 2, 0, !0),
            y: uc("FullYear", 1),
            MMMM: vc("Month"),
            MMM: vc("Month", !0),
            MM: uc("Month", 2, 1),
            M: uc("Month", 1, 1),
            dd: uc("Date", 2),
            d: uc("Date", 1),
            HH: uc("Hours", 2),
            H: uc("Hours", 1),
            hh: uc("Hours", 2, -12),
            h: uc("Hours", 1, -12),
            mm: uc("Minutes", 2),
            m: uc("Minutes", 1),
            ss: uc("Seconds", 2),
            s: uc("Seconds", 1),
            sss: uc("Milliseconds", 3),
            EEEE: vc("Day"),
            EEE: vc("Day", !0),
            a: function(a, b) {
                return 12 > a.getHours() ? b.AMPMS[0] : b.AMPMS[1]
            },
            Z: function(a, b, c) {
                return a = -1 * c, a = (a >= 0 ? "+" : "") + (tc(Math[a > 0 ? "floor" : "ceil"](a / 60), 2) + tc(Math.abs(a % 60), 2))
            },
            ww: xc(2),
            w: xc(1),
            G: yc,
            GG: yc,
            GGG: yc,
            GGGG: function(a, b) {
                return 0 >= a.getFullYear() ? b.ERANAMES[0] : b.ERANAMES[1]
            }
        },
        ye = /((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,
        ze = /^\-?\d+$/;
    zc.$inject = ["$locale"];
    var Ae = q(Tc),
        Be = q(Vc);
    Cc.$inject = ["$parse"];
    var Ce = q({
            restrict: "E",
            compile: function(a, b) {
                return b.href || b.xlinkHref ? void 0 : function(a, b) {
                    if ("a" === b[0].nodeName.toLowerCase()) {
                        var c = "[object SVGAnimatedString]" === Zc.call(b.prop("href")) ? "xlink:href" : "href";
                        b.on("click", function(a) {
                            b.attr(c) || a.preventDefault()
                        })
                    }
                }
            }
        }),
        De = {};
    f(Bd, function(a, b) {
        function c(a, c, e) {
            a.$watch(e[d], function(a) {
                e.$set(b, !!a)
            })
        }
        if ("multiple" != a) {
            var d = Xa("ng-" + b),
                e = c;
            "checked" === a && (e = function(a, b, e) {
                e.ngModel !== e[d] && c(a, b, e)
            }), De[d] = function() {
                return {
                    restrict: "A",
                    priority: 100,
                    link: e
                }
            }
        }
    }), f(Dd, function(a, b) {
        De[b] = function() {
            return {
                priority: 100,
                link: function(a, c, d) {
                    return "ngPattern" === b && "/" == d.ngPattern.charAt(0) && (c = d.ngPattern.match(Sc)) ? void d.$set("ngPattern", new RegExp(c[1], c[2])) : void a.$watch(d[b], function(a) {
                        d.$set(b, a)
                    })
                }
            }
        }
    }), f(["src", "srcset", "href"], function(a) {
        var b = Xa("ng-" + a);
        De[b] = function() {
            return {
                priority: 99,
                link: function(c, d, e) {
                    var f = a,
                        g = a;
                    "href" === a && "[object SVGAnimatedString]" === Zc.call(d.prop("href")) && (g = "xlinkHref", e.$attr[g] = "xlink:href", f = null), e.$observe(b, function(b) {
                        b ? (e.$set(g, b), Oc && f && d.prop(f, e[g])) : "href" === a && e.$set(g, null)
                    })
                }
            }
        }
    });
    var Ee = {
        $addControl: o,
        $$renameControl: function(a, b) {
            a.$name = b
        },
        $removeControl: o,
        $setValidity: o,
        $setDirty: o,
        $setPristine: o,
        $setSubmitted: o
    };
    Ec.$inject = ["$element", "$attrs", "$scope", "$animate", "$interpolate"];
    var Fe = function(a) {
            return ["$timeout", "$parse", function(b, d) {
                function e(a) {
                    return "" === a ? d('this[""]').assign : d(a).assign || o
                }
                return {
                    name: "form",
                    restrict: a ? "EAC" : "E",
                    require: ["form", "^^?form"],
                    controller: Ec,
                    compile: function(d, f) {
                        d.addClass(mf).addClass(kf);
                        var g = f.name ? "name" : a && f.ngForm ? "ngForm" : !1;
                        return {
                            pre: function(a, d, f, h) {
                                var i = h[0];
                                if (!("action" in f)) {
                                    var j = function(b) {
                                        a.$apply(function() {
                                            i.$commitViewValue(), i.$setSubmitted()
                                        }), b.preventDefault()
                                    };
                                    d[0].addEventListener("submit", j, !1), d.on("$destroy", function() {
                                        b(function() {
                                            d[0].removeEventListener("submit", j, !1)
                                        }, 0, !1)
                                    })
                                }(h[1] || i.$$parentForm).$addControl(i);
                                var l = g ? e(i.$name) : o;
                                g && (l(a, i), f.$observe(g, function(b) {
                                    i.$name !== b && (l(a, c), i.$$parentForm.$$renameControl(i, b), (l = e(i.$name))(a, i))
                                })), d.on("$destroy", function() {
                                    i.$$parentForm.$removeControl(i), l(a, c), k(i, Ee)
                                })
                            }
                        }
                    }
                }
            }]
        },
        Ge = Fe(),
        He = Fe(!0),
        Ie = /\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,
        Je = /^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,
        Ke = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,
        Le = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,
        Me = /^(\d{4})-(\d{2})-(\d{2})$/,
        Ne = /^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
        Oe = /^(\d{4})-W(\d\d)$/,
        Pe = /^(\d{4})-(\d\d)$/,
        Qe = /^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
        Re = {
            text: function(a, b, c, d, e, f) {
                Gc(a, b, c, d, e, f), Fc(d)
            },
            date: Ic("date", Me, Hc(Me, ["yyyy", "MM", "dd"]), "yyyy-MM-dd"),
            "datetime-local": Ic("datetimelocal", Ne, Hc(Ne, "yyyy MM dd HH mm ss sss".split(" ")), "yyyy-MM-ddTHH:mm:ss.sss"),
            time: Ic("time", Qe, Hc(Qe, ["HH", "mm", "ss", "sss"]), "HH:mm:ss.sss"),
            week: Ic("week", Oe, function(a, b) {
                if (y(a)) return a;
                if (w(a)) {
                    Oe.lastIndex = 0;
                    var c = Oe.exec(a);
                    if (c) {
                        var d = +c[1],
                            e = +c[2],
                            f = c = 0,
                            g = 0,
                            h = 0,
                            i = wc(d),
                            e = 7 * (e - 1);
                        return b && (c = b.getHours(), f = b.getMinutes(), g = b.getSeconds(), h = b.getMilliseconds()), new Date(d, 0, i.getDate() + e, c, f, g, h)
                    }
                }
                return NaN
            }, "yyyy-Www"),
            month: Ic("month", Pe, Hc(Pe, ["yyyy", "MM"]), "yyyy-MM"),
            number: function(a, b, d, e, f, g) {
                if (Jc(a, b, d, e), Gc(a, b, d, e, f, g), e.$$parserName = "number", e.$parsers.push(function(a) {
                        return e.$isEmpty(a) ? null : Le.test(a) ? parseFloat(a) : c
                    }), e.$formatters.push(function(a) {
                        if (!e.$isEmpty(a)) {
                            if (!x(a)) throw pf("numfmt", a);
                            a = a.toString()
                        }
                        return a
                    }), t(d.min) || d.ngMin) {
                    var h;
                    e.$validators.min = function(a) {
                        return e.$isEmpty(a) || s(h) || a >= h
                    }, d.$observe("min", function(a) {
                        t(a) && !x(a) && (a = parseFloat(a, 10)), h = x(a) && !isNaN(a) ? a : c, e.$validate()
                    })
                }
                if (t(d.max) || d.ngMax) {
                    var i;
                    e.$validators.max = function(a) {
                        return e.$isEmpty(a) || s(i) || i >= a
                    }, d.$observe("max", function(a) {
                        t(a) && !x(a) && (a = parseFloat(a, 10)), i = x(a) && !isNaN(a) ? a : c, e.$validate()
                    })
                }
            },
            url: function(a, b, c, d, e, f) {
                Gc(a, b, c, d, e, f), Fc(d), d.$$parserName = "url", d.$validators.url = function(a, b) {
                    var c = a || b;
                    return d.$isEmpty(c) || Je.test(c)
                }
            },
            email: function(a, b, c, d, e, f) {
                Gc(a, b, c, d, e, f), Fc(d), d.$$parserName = "email", d.$validators.email = function(a, b) {
                    var c = a || b;
                    return d.$isEmpty(c) || Ke.test(c)
                }
            },
            radio: function(a, b, c, d) {
                s(c.name) && b.attr("name", ++bd), b.on("click", function(a) {
                    b[0].checked && d.$setViewValue(c.value, a && a.type)
                }), d.$render = function() {
                    b[0].checked = c.value == d.$viewValue
                }, c.$observe("value", d.$render)
            },
            checkbox: function(a, b, c, d, e, f, g, h) {
                var i = Kc(h, a, "ngTrueValue", c.ngTrueValue, !0),
                    j = Kc(h, a, "ngFalseValue", c.ngFalseValue, !1);
                b.on("click", function(a) {
                    d.$setViewValue(b[0].checked, a && a.type)
                }), d.$render = function() {
                    b[0].checked = d.$viewValue
                }, d.$isEmpty = function(a) {
                    return !1 === a
                }, d.$formatters.push(function(a) {
                    return L(a, i)
                }), d.$parsers.push(function(a) {
                    return a ? i : j
                })
            },
            hidden: o,
            button: o,
            submit: o,
            reset: o,
            file: o
        },
        Se = ["$browser", "$sniffer", "$filter", "$parse", function(a, b, c, d) {
            return {
                restrict: "E",
                require: ["?ngModel"],
                link: {
                    pre: function(e, f, g, h) {
                        h[0] && (Re[Tc(g.type)] || Re.text)(e, f, g, h[0], b, a, c, d)
                    }
                }
            }
        }],
        Te = /^(true|false|\d+)$/,
        Ue = function() {
            return {
                restrict: "A",
                priority: 100,
                compile: function(a, b) {
                    return Te.test(b.ngValue) ? function(a, b, c) {
                        c.$set("value", a.$eval(c.ngValue))
                    } : function(a, b, c) {
                        a.$watch(c.ngValue, function(a) {
                            c.$set("value", a)
                        })
                    }
                }
            }
        },
        Ve = ["$compile", function(a) {
            return {
                restrict: "AC",
                compile: function(b) {
                    return a.$$addBindingClass(b),
                        function(b, c, d) {
                            a.$$addBindingInfo(c, d.ngBind), c = c[0], b.$watch(d.ngBind, function(a) {
                                c.textContent = s(a) ? "" : a
                            })
                        }
                }
            }
        }],
        We = ["$interpolate", "$compile", function(a, b) {
            return {
                compile: function(c) {
                    return b.$$addBindingClass(c),
                        function(c, d, e) {
                            c = a(d.attr(e.$attr.ngBindTemplate)), b.$$addBindingInfo(d, c.expressions), d = d[0], e.$observe("ngBindTemplate", function(a) {
                                d.textContent = s(a) ? "" : a
                            })
                        }
                }
            }
        }],
        Xe = ["$sce", "$parse", "$compile", function(a, b, c) {
            return {
                restrict: "A",
                compile: function(d, e) {
                    var f = b(e.ngBindHtml),
                        g = b(e.ngBindHtml, function(a) {
                            return (a || "").toString()
                        });
                    return c.$$addBindingClass(d),
                        function(b, d, e) {
                            c.$$addBindingInfo(d, e.ngBindHtml), b.$watch(g, function() {
                                d.html(a.getTrustedHtml(f(b)) || "")
                            })
                        }
                }
            }
        }],
        Ye = q({
            restrict: "A",
            require: "ngModel",
            link: function(a, b, c, d) {
                d.$viewChangeListeners.push(function() {
                    a.$eval(c.ngChange)
                })
            }
        }),
        Ze = Lc("", !0),
        $e = Lc("Odd", 0),
        _e = Lc("Even", 1),
        af = Dc({
            compile: function(a, b) {
                b.$set("ngCloak", c), a.removeClass("ng-cloak")
            }
        }),
        bf = [function() {
            return {
                restrict: "A",
                scope: !0,
                controller: "@",
                priority: 500
            }
        }],
        cf = {},
        df = {
            blur: !0,
            focus: !0
        };
    f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "), function(a) {
        var b = Xa("ng-" + a);
        cf[b] = ["$parse", "$rootScope", function(c, d) {
            return {
                restrict: "A",
                compile: function(e, f) {
                    var g = c(f[b], null, !0);
                    return function(b, c) {
                        c.on(a, function(c) {
                            var e = function() {
                                g(b, {
                                    $event: c
                                })
                            };
                            df[a] && d.$$phase ? b.$evalAsync(e) : b.$apply(e)
                        })
                    }
                }
            }
        }]
    });
    var ef = ["$animate", function(a) {
            return {
                multiElement: !0,
                transclude: "element",
                priority: 600,
                terminal: !0,
                restrict: "A",
                $$tlb: !0,
                link: function(c, d, e, f, g) {
                    var h, i, j;
                    c.$watch(e.ngIf, function(c) {
                        c ? i || g(function(c, f) {
                            i = f, c[c.length++] = b.createComment(" end ngIf: " + e.ngIf + " "), h = {
                                clone: c
                            }, a.enter(c, d.parent(), d)
                        }) : (j && (j.remove(), j = null), i && (i.$destroy(), i = null), h && (j = ia(h.clone), a.leave(j).then(function() {
                            j = null
                        }), h = null))
                    })
                }
            }
        }],
        ff = ["$templateRequest", "$anchorScroll", "$animate", function(a, b, c) {
            return {
                restrict: "ECA",
                priority: 400,
                terminal: !0,
                transclude: "element",
                controller: ad.noop,
                compile: function(d, e) {
                    var f = e.ngInclude || e.src,
                        g = e.onload || "",
                        h = e.autoscroll;
                    return function(d, e, i, j, k) {
                        var l, m, n, o = 0,
                            p = function() {
                                m && (m.remove(), m = null), l && (l.$destroy(), l = null), n && (c.leave(n).then(function() {
                                    m = null
                                }), m = n, n = null)
                            };
                        d.$watch(f, function(f) {
                            var i = function() {
                                    !t(h) || h && !d.$eval(h) || b()
                                },
                                m = ++o;
                            f ? (a(f, !0).then(function(a) {
                                if (!d.$$destroyed && m === o) {
                                    var b = d.$new();
                                    j.template = a, a = k(b, function(a) {
                                        p(), c.enter(a, null, e).then(i)
                                    }), l = b, n = a, l.$emit("$includeContentLoaded", f), d.$eval(g)
                                }
                            }, function() {
                                d.$$destroyed || m !== o || (p(), d.$emit("$includeContentError", f))
                            }), d.$emit("$includeContentRequested", f)) : (p(), j.template = null)
                        })
                    }
                }
            }
        }],
        gf = ["$compile", function(a) {
            return {
                restrict: "ECA",
                priority: -400,
                require: "ngInclude",
                link: function(c, d, e, f) {
                    /SVG/.test(d[0].toString()) ? (d.empty(), a(oa(f.template, b).childNodes)(c, function(a) {
                        d.append(a)
                    }, {
                        futureParentElement: d
                    })) : (d.html(f.template), a(d.contents())(c))
                }
            }
        }],
        hf = Dc({
            priority: 450,
            compile: function() {
                return {
                    pre: function(a, b, c) {
                        a.$eval(c.ngInit)
                    }
                }
            }
        }),
        jf = function() {
            return {
                restrict: "A",
                priority: 100,
                require: "ngModel",
                link: function(a, b, d, e) {
                    var g = b.attr(d.$attr.ngList) || ", ",
                        h = "false" !== d.ngTrim,
                        i = h ? fd(g) : g;
                    e.$parsers.push(function(a) {
                        if (!s(a)) {
                            var b = [];
                            return a && f(a.split(i), function(a) {
                                a && b.push(h ? fd(a) : a)
                            }), b
                        }
                    }), e.$formatters.push(function(a) {
                        return dd(a) ? a.join(g) : c
                    }), e.$isEmpty = function(a) {
                        return !a || !a.length
                    }
                }
            }
        },
        kf = "ng-valid",
        lf = "ng-invalid",
        mf = "ng-pristine",
        nf = "ng-dirty",
        of = "ng-pending",
        pf = d("ngModel"),
        qf = ["$scope", "$exceptionHandler", "$attrs", "$element", "$parse", "$animate", "$timeout", "$rootScope", "$q", "$interpolate", function(a, b, d, e, g, h, i, j, k, l) {
            this.$modelValue = this.$viewValue = Number.NaN, this.$$rawModelValue = c, this.$validators = {}, this.$asyncValidators = {}, this.$parsers = [], this.$formatters = [], this.$viewChangeListeners = [], this.$untouched = !0, this.$touched = !1, this.$pristine = !0, this.$dirty = !1, this.$valid = !0, this.$invalid = !1, this.$error = {}, this.$$success = {}, this.$pending = c, this.$name = l(d.name || "", !1)(a), this.$$parentForm = Ee;
            var m, n = g(d.ngModel),
                p = n.assign,
                q = n,
                r = p,
                u = null,
                v = this;
            this.$$setOptions = function(a) {
                if ((v.$options = a) && a.getterSetter) {
                    var b = g(d.ngModel + "()"),
                        c = g(d.ngModel + "($$$p)");
                    q = function(a) {
                        var c = n(a);
                        return z(c) && (c = b(a)), c
                    }, r = function(a, b) {
                        z(n(a)) ? c(a, {
                            $$$p: v.$modelValue
                        }) : p(a, v.$modelValue)
                    }
                } else if (!n.assign) throw pf("nonassign", d.ngModel, T(e))
            }, this.$render = o, this.$isEmpty = function(a) {
                return s(a) || "" === a || null === a || a !== a
            };
            var w = 0;
            Mc({
                ctrl: this,
                $element: e,
                set: function(a, b) {
                    a[b] = !0
                },
                unset: function(a, b) {
                    delete a[b]
                },
                $animate: h
            }), this.$setPristine = function() {
                v.$dirty = !1, v.$pristine = !0, h.removeClass(e, nf), h.addClass(e, mf)
            }, this.$setDirty = function() {
                v.$dirty = !0, v.$pristine = !1, h.removeClass(e, mf), h.addClass(e, nf), v.$$parentForm.$setDirty()
            }, this.$setUntouched = function() {
                v.$touched = !1, v.$untouched = !0, h.setClass(e, "ng-untouched", "ng-touched")
            }, this.$setTouched = function() {
                v.$touched = !0, v.$untouched = !1, h.setClass(e, "ng-touched", "ng-untouched")
            }, this.$rollbackViewValue = function() {
                i.cancel(u), v.$viewValue = v.$$lastCommittedViewValue, v.$render()
            }, this.$validate = function() {
                if (!x(v.$modelValue) || !isNaN(v.$modelValue)) {
                    var a = v.$$rawModelValue,
                        b = v.$valid,
                        d = v.$modelValue,
                        e = v.$options && v.$options.allowInvalid;
                    v.$$runValidators(a, v.$$lastCommittedViewValue, function(f) {
                        e || b === f || (v.$modelValue = f ? a : c, v.$modelValue !== d && v.$$writeModelToScope())
                    })
                }
            }, this.$$runValidators = function(a, b, d) {
                function e() {
                    var c = !0;
                    return f(v.$validators, function(d, e) {
                        var f = d(a, b);
                        c = c && f, h(e, f)
                    }), c ? !0 : (f(v.$asyncValidators, function(a, b) {
                        h(b, null)
                    }), !1)
                }

                function g() {
                    var d = [],
                        e = !0;
                    f(v.$asyncValidators, function(f, g) {
                        var i = f(a, b);
                        if (!i || !z(i.then)) throw pf("nopromise", i);
                        h(g, c), d.push(i.then(function() {
                            h(g, !0)
                        }, function(a) {
                            e = !1, h(g, !1)
                        }))
                    }), d.length ? k.all(d).then(function() {
                        i(e)
                    }, o) : i(!0)
                }

                function h(a, b) {
                    j === w && v.$setValidity(a, b)
                }

                function i(a) {
                    j === w && d(a)
                }
                w++;
                var j = w;
                (function() {
                    var a = v.$$parserName || "parse";
                    return s(m) ? (h(a, null), !0) : (m || (f(v.$validators, function(a, b) {
                        h(b, null)
                    }), f(v.$asyncValidators, function(a, b) {
                        h(b, null)
                    })), h(a, m), m)
                })() && e() ? g() : i(!1)
            }, this.$commitViewValue = function() {
                var a = v.$viewValue;
                i.cancel(u), (v.$$lastCommittedViewValue !== a || "" === a && v.$$hasNativeValidators) && (v.$$lastCommittedViewValue = a, v.$pristine && this.$setDirty(), this.$$parseAndValidate())
            }, this.$$parseAndValidate = function() {
                var b = v.$$lastCommittedViewValue;
                if (m = s(b) ? c : !0)
                    for (var d = 0; d < v.$parsers.length; d++)
                        if (b = v.$parsers[d](b), s(b)) {
                            m = !1;
                            break
                        }
                x(v.$modelValue) && isNaN(v.$modelValue) && (v.$modelValue = q(a));
                var e = v.$modelValue,
                    f = v.$options && v.$options.allowInvalid;
                v.$$rawModelValue = b, f && (v.$modelValue = b, v.$modelValue !== e && v.$$writeModelToScope()), v.$$runValidators(b, v.$$lastCommittedViewValue, function(a) {
                    f || (v.$modelValue = a ? b : c, v.$modelValue !== e && v.$$writeModelToScope())
                })
            }, this.$$writeModelToScope = function() {
                r(a, v.$modelValue), f(v.$viewChangeListeners, function(a) {
                    try {
                        a()
                    } catch (c) {
                        b(c)
                    }
                })
            }, this.$setViewValue = function(a, b) {
                v.$viewValue = a, v.$options && !v.$options.updateOnDefault || v.$$debounceViewValueCommit(b)
            }, this.$$debounceViewValueCommit = function(b) {
                var c = 0,
                    d = v.$options;
                d && t(d.debounce) && (d = d.debounce, x(d) ? c = d : x(d[b]) ? c = d[b] : x(d["default"]) && (c = d["default"])), i.cancel(u), c ? u = i(function() {
                    v.$commitViewValue()
                }, c) : j.$$phase ? v.$commitViewValue() : a.$apply(function() {
                    v.$commitViewValue()
                })
            }, a.$watch(function() {
                var b = q(a);
                if (b !== v.$modelValue && (v.$modelValue === v.$modelValue || b === b)) {
                    v.$modelValue = v.$$rawModelValue = b, m = c;
                    for (var d = v.$formatters, e = d.length, f = b; e--;) f = d[e](f);
                    v.$viewValue !== f && (v.$viewValue = v.$$lastCommittedViewValue = f, v.$render(), v.$$runValidators(b, f, o))
                }
                return b
            })
        }],
        rf = ["$rootScope", function(a) {
            return {
                restrict: "A",
                require: ["ngModel", "^?form", "^?ngModelOptions"],
                controller: qf,
                priority: 1,
                compile: function(b) {
                    return b.addClass(mf).addClass("ng-untouched").addClass(kf), {
                        pre: function(a, b, c, d) {
                            var e = d[0];
                            b = d[1] || e.$$parentForm, e.$$setOptions(d[2] && d[2].$options), b.$addControl(e), c.$observe("name", function(a) {
                                e.$name !== a && e.$$parentForm.$$renameControl(e, a)
                            }), a.$on("$destroy", function() {
                                e.$$parentForm.$removeControl(e)
                            })
                        },
                        post: function(b, c, d, e) {
                            var f = e[0];
                            f.$options && f.$options.updateOn && c.on(f.$options.updateOn, function(a) {
                                f.$$debounceViewValueCommit(a && a.type)
                            }), c.on("blur", function(c) {
                                f.$touched || (a.$$phase ? b.$evalAsync(f.$setTouched) : b.$apply(f.$setTouched))
                            })
                        }
                    }
                }
            }
        }],
        sf = /(\s+|^)default(\s+|$)/,
        tf = function() {
            return {
                restrict: "A",
                controller: ["$scope", "$attrs", function(a, b) {
                    var c = this;
                    this.$options = J(a.$eval(b.ngModelOptions)), t(this.$options.updateOn) ? (this.$options.updateOnDefault = !1, this.$options.updateOn = fd(this.$options.updateOn.replace(sf, function() {
                        return c.$options.updateOnDefault = !0, " "
                    }))) : this.$options.updateOnDefault = !0
                }]
            }
        },
        uf = Dc({
            terminal: !0,
            priority: 1e3
        }),
        vf = d("ngOptions"),
        wf = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
        xf = ["$compile", "$parse", function(a, c) {
            function d(a, b, d) {
                function f(a, b, c, d, e) {
                    this.selectValue = a, this.viewValue = b, this.label = c, this.group = d, this.disabled = e
                }

                function g(a) {
                    var b;
                    if (!j && e(a)) b = a;
                    else {
                        b = [];
                        for (var c in a) a.hasOwnProperty(c) && "$" !== c.charAt(0) && b.push(c)
                    }
                    return b
                }
                var h = a.match(wf);
                if (!h) throw vf("iexp", a, T(b));
                var i = h[5] || h[7],
                    j = h[6];
                a = / as /.test(h[0]) && h[1];
                var k = h[9];
                b = c(h[2] ? h[1] : i);
                var l = a && c(a) || b,
                    m = k && c(k),
                    n = k ? function(a, b) {
                        return m(d, b)
                    } : function(a) {
                        return Ka(a)
                    },
                    o = function(a, b) {
                        return n(a, u(a, b))
                    },
                    p = c(h[2] || h[1]),
                    q = c(h[3] || ""),
                    r = c(h[4] || ""),
                    s = c(h[8]),
                    t = {},
                    u = j ? function(a, b) {
                        return t[j] = b, t[i] = a, t
                    } : function(a) {
                        return t[i] = a, t
                    };
                return {
                    trackBy: k,
                    getTrackByValue: o,
                    getWatchables: c(s, function(a) {
                        var b = [];
                        a = a || [];
                        for (var c = g(a), e = c.length, f = 0; e > f; f++) {
                            var i = a === c ? f : c[f],
                                j = u(a[i], i),
                                i = n(a[i], j);
                            b.push(i), (h[2] || h[1]) && (i = p(d, j), b.push(i)), h[4] && (j = r(d, j), b.push(j))
                        }
                        return b
                    }),
                    getOptions: function() {
                        for (var a = [], b = {}, c = s(d) || [], e = g(c), h = e.length, i = 0; h > i; i++) {
                            var j = c === e ? i : e[i],
                                m = u(c[j], j),
                                t = l(d, m),
                                j = n(t, m),
                                v = p(d, m),
                                w = q(d, m),
                                m = r(d, m),
                                t = new f(j, t, v, w, m);
                            a.push(t), b[j] = t
                        }
                        return {
                            items: a,
                            selectValueMap: b,
                            getOptionFromViewValue: function(a) {
                                return b[o(a)]
                            },
                            getViewValueFromOption: function(a) {
                                return k ? ad.copy(a.viewValue) : a.viewValue
                            }
                        }
                    }
                }
            }
            var g = b.createElement("option"),
                h = b.createElement("optgroup");
            return {
                restrict: "A",
                terminal: !0,
                require: ["select", "?ngModel"],
                link: {
                    pre: function(a, b, c, d) {
                        d[0].registerOption = o
                    },
                    post: function(b, c, e, i) {
                        function j(a, b) {
                            a.element = b, b.disabled = a.disabled, a.label !== b.label && (b.label = a.label, b.textContent = a.label), a.value !== b.value && (b.value = a.selectValue)
                        }

                        function k(a, b, c, d) {
                            return b && Tc(b.nodeName) === c ? c = b : (c = d.cloneNode(!1), b ? a.insertBefore(c, b) : a.appendChild(c)), c
                        }

                        function l(a) {
                            for (var b; a;) b = a.nextSibling, Da(a), a = b
                        }

                        function m(a) {
                            var b = p && p[0],
                                c = v && v[0];
                            if (b || c)
                                for (; a && (a === b || a === c || 8 === a.nodeType || "option" === H(a) && "" === a.value);) a = a.nextSibling;
                            return a
                        }

                        function n() {
                            var a = w && q.readValue();
                            w = x.getOptions();
                            var b = {},
                                d = c[0].firstChild;
                            if (u && c.prepend(p), d = m(d), w.items.forEach(function(a) {
                                    var e, f;
                                    a.group ? (e = b[a.group], e || (e = k(c[0], d, "optgroup", h), d = e.nextSibling, e.label = a.group, e = b[a.group] = {
                                        groupElement: e,
                                        currentOptionElement: e.firstChild
                                    }), f = k(e.groupElement, e.currentOptionElement, "option", g), j(a, f), e.currentOptionElement = f.nextSibling) : (f = k(c[0], d, "option", g), j(a, f), d = f.nextSibling)
                                }), Object.keys(b).forEach(function(a) {
                                    l(b[a].currentOptionElement)
                                }), l(d), o.$render(), !o.$isEmpty(a)) {
                                var e = q.readValue();
                                (x.trackBy || r ? L(a, e) : a === e) || (o.$setViewValue(e), o.$render())
                            }
                        }
                        var o = i[1];
                        if (o) {
                            var p, q = i[0],
                                r = e.multiple;
                            i = 0;
                            for (var s = c.children(), t = s.length; t > i; i++)
                                if ("" === s[i].value) {
                                    p = s.eq(i);
                                    break
                                }
                            var u = !!p,
                                v = Pc(g.cloneNode(!1));
                            v.val("?");
                            var w, x = d(e.ngOptions, c, b);
                            r ? (o.$isEmpty = function(a) {
                                return !a || 0 === a.length
                            }, q.writeValue = function(a) {
                                w.items.forEach(function(a) {
                                    a.element.selected = !1
                                }), a && a.forEach(function(a) {
                                    (a = w.getOptionFromViewValue(a)) && !a.disabled && (a.element.selected = !0)
                                })
                            }, q.readValue = function() {
                                var a = c.val() || [],
                                    b = [];
                                return f(a, function(a) {
                                    (a = w.selectValueMap[a]) && !a.disabled && b.push(w.getViewValueFromOption(a))
                                }), b
                            }, x.trackBy && b.$watchCollection(function() {
                                return dd(o.$viewValue) ? o.$viewValue.map(function(a) {
                                    return x.getTrackByValue(a)
                                }) : void 0
                            }, function() {
                                o.$render()
                            })) : (q.writeValue = function(a) {
                                var b = w.getOptionFromViewValue(a);
                                b && !b.disabled ? c[0].value !== b.selectValue && (v.remove(), u || p.remove(), c[0].value = b.selectValue, b.element.selected = !0, b.element.setAttribute("selected", "selected")) : null === a || u ? (v.remove(), u || c.prepend(p), c.val(""), p.prop("selected", !0), p.attr("selected", !0)) : (u || p.remove(), c.prepend(v), c.val("?"), v.prop("selected", !0), v.attr("selected", !0))
                            }, q.readValue = function() {
                                var a = w.selectValueMap[c.val()];
                                return a && !a.disabled ? (u || p.remove(), v.remove(), w.getViewValueFromOption(a)) : null
                            }, x.trackBy && b.$watch(function() {
                                return x.getTrackByValue(o.$viewValue)
                            }, function() {
                                o.$render()
                            })), u ? (p.remove(), a(p)(b), p.removeClass("ng-scope")) : p = Pc(g.cloneNode(!1)), n(), b.$watchCollection(x.getWatchables, n)
                        }
                    }
                }
            }
        }],
        yf = ["$locale", "$interpolate", "$log", function(a, b, c) {
            var d = /{}/g,
                e = /^when(Minus)?(.+)$/;
            return {
                link: function(g, h, i) {
                    function j(a) {
                        h.text(a || "")
                    }
                    var k, l = i.count,
                        m = i.$attr.when && h.attr(i.$attr.when),
                        n = i.offset || 0,
                        p = g.$eval(m) || {},
                        q = {},
                        r = b.startSymbol(),
                        t = b.endSymbol(),
                        u = r + l + "-" + n + t,
                        v = ad.noop;
                    f(i, function(a, b) {
                        var c = e.exec(b);
                        c && (c = (c[1] ? "-" : "") + Tc(c[2]), p[c] = h.attr(i.$attr[b]))
                    }), f(p, function(a, c) {
                        q[c] = b(a.replace(d, u))
                    }), g.$watch(l, function(b) {
                        var d = parseFloat(b),
                            e = isNaN(d);
                        e || d in p || (d = a.pluralCat(d - n)), d === k || e && x(k) && isNaN(k) || (v(), e = q[d], s(e) ? (null != b && c.debug("ngPluralize: no rule defined for '" + d + "' in " + m), v = o, j()) : v = g.$watch(e, j), k = d)
                    })
                }
            }
        }],
        zf = ["$parse", "$animate", function(a, g) {
            var h = d("ngRepeat"),
                i = function(a, b, c, d, e, f, g) {
                    a[c] = d, e && (a[e] = f), a.$index = b, a.$first = 0 === b, a.$last = b === g - 1, a.$middle = !(a.$first || a.$last), a.$odd = !(a.$even = 0 === (1 & b))
                };
            return {
                restrict: "A",
                multiElement: !0,
                transclude: "element",
                priority: 1e3,
                terminal: !0,
                $$tlb: !0,
                compile: function(d, j) {
                    var k = j.ngRepeat,
                        l = b.createComment(" end ngRepeat: " + k + " "),
                        m = k.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);
                    if (!m) throw h("iexp", k);
                    var n = m[1],
                        o = m[2],
                        p = m[3],
                        q = m[4],
                        m = n.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);
                    if (!m) throw h("iidexp", n);
                    var r = m[3] || m[1],
                        s = m[2];
                    if (p && (!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(p) || /^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(p))) throw h("badident", p);
                    var t, u, v, w, x = {
                        $id: Ka
                    };
                    return q ? t = a(q) : (v = function(a, b) {
                            return Ka(b)
                        }, w = function(a) {
                            return a
                        }),
                        function(a, b, d, j, m) {
                            t && (u = function(b, c, d) {
                                return s && (x[s] = b), x[r] = c, x.$index = d, t(a, x)
                            });
                            var n = ja();
                            a.$watchCollection(o, function(d) {
                                var j, o, q, t, x, y, z, A, B, C, D = b[0],
                                    E = ja();
                                if (p && (a[p] = d), e(d)) A = d, o = u || v;
                                else
                                    for (C in o = u || w, A = [], d) Uc.call(d, C) && "$" !== C.charAt(0) && A.push(C);
                                for (t = A.length, C = Array(t), j = 0; t > j; j++)
                                    if (x = d === A ? j : A[j], y = d[x], z = o(x, y, j), n[z]) B = n[z], delete n[z], E[z] = B, C[j] = B;
                                    else {
                                        if (E[z]) throw f(C, function(a) {
                                            a && a.scope && (n[a.id] = a)
                                        }), h("dupes", k, z, y);
                                        C[j] = {
                                            id: z,
                                            scope: c,
                                            clone: c
                                        }, E[z] = !0
                                    }
                                for (q in n) {
                                    if (B = n[q], z = ia(B.clone), g.leave(z), z[0].parentNode)
                                        for (j = 0, o = z.length; o > j; j++) z[j].$$NG_REMOVED = !0;
                                    B.scope.$destroy()
                                }
                                for (j = 0; t > j; j++)
                                    if (x = d === A ? j : A[j], y = d[x], B = C[j], B.scope) {
                                        q = D;
                                        do q = q.nextSibling; while (q && q.$$NG_REMOVED);
                                        B.clone[0] != q && g.move(ia(B.clone), null, Pc(D)), D = B.clone[B.clone.length - 1], i(B.scope, j, r, y, s, x, t)
                                    } else m(function(a, b) {
                                        B.scope = b;
                                        var c = l.cloneNode(!1);
                                        a[a.length++] = c, g.enter(a, null, Pc(D)), D = c, B.clone = a, E[B.id] = B, i(B.scope, j, r, y, s, x, t)
                                    });
                                n = E
                            })
                        }
                }
            }
        }],
        Af = ["$animate", function(a) {
            return {
                restrict: "A",
                multiElement: !0,
                link: function(b, c, d) {
                    b.$watch(d.ngShow, function(b) {
                        a[b ? "removeClass" : "addClass"](c, "ng-hide", {
                            tempClasses: "ng-hide-animate"
                        })
                    })
                }
            }
        }],
        Bf = ["$animate", function(a) {
            return {
                restrict: "A",
                multiElement: !0,
                link: function(b, c, d) {
                    b.$watch(d.ngHide, function(b) {
                        a[b ? "addClass" : "removeClass"](c, "ng-hide", {
                            tempClasses: "ng-hide-animate"
                        })
                    })
                }
            }
        }],
        Cf = Dc(function(a, b, c) {
            a.$watch(c.ngStyle, function(a, c) {
                c && a !== c && f(c, function(a, c) {
                    b.css(c, "")
                }), a && b.css(a)
            }, !0)
        }),
        Df = ["$animate", function(a) {
            return {
                require: "ngSwitch",
                controller: ["$scope", function() {
                    this.cases = {}
                }],
                link: function(c, d, e, g) {
                    var h = [],
                        i = [],
                        j = [],
                        k = [],
                        l = function(a, b) {
                            return function() {
                                a.splice(b, 1)
                            }
                        };
                    c.$watch(e.ngSwitch || e.on, function(c) {
                        var d, e;
                        for (d = 0, e = j.length; e > d; ++d) a.cancel(j[d]);
                        for (d = j.length = 0, e = k.length; e > d; ++d) {
                            var m = ia(i[d].clone);
                            k[d].$destroy(), (j[d] = a.leave(m)).then(l(j, d))
                        }
                        i.length = 0, k.length = 0, (h = g.cases["!" + c] || g.cases["?"]) && f(h, function(c) {
                            c.transclude(function(d, e) {
                                k.push(e);
                                var f = c.element;
                                d[d.length++] = b.createComment(" end ngSwitchWhen: "), i.push({
                                    clone: d
                                }), a.enter(d, f.parent(), f)
                            })
                        })
                    })
                }
            }
        }],
        Ef = Dc({
            transclude: "element",
            priority: 1200,
            require: "^ngSwitch",
            multiElement: !0,
            link: function(a, b, c, d, e) {
                d.cases["!" + c.ngSwitchWhen] = d.cases["!" + c.ngSwitchWhen] || [], d.cases["!" + c.ngSwitchWhen].push({
                    transclude: e,
                    element: b
                })
            }
        }),
        Ff = Dc({
            transclude: "element",
            priority: 1200,
            require: "^ngSwitch",
            multiElement: !0,
            link: function(a, b, c, d, e) {
                d.cases["?"] = d.cases["?"] || [], d.cases["?"].push({
                    transclude: e,
                    element: b
                })
            }
        }),
        Gf = Dc({
            restrict: "EAC",
            link: function(a, b, c, e, f) {
                if (!f) throw d("ngTransclude")("orphan", T(b));
                f(function(a) {
                    b.empty(), b.append(a)
                })
            }
        }),
        Hf = ["$templateCache", function(a) {
            return {
                restrict: "E",
                terminal: !0,
                compile: function(b, c) {
                    "text/ng-template" == c.type && a.put(c.id, b[0].text)
                }
            }
        }],
        If = {
            $setViewValue: o,
            $render: o
        },
        Jf = ["$element", "$scope", "$attrs", function(a, d, e) {
            var f = this,
                g = new La;
            f.ngModelCtrl = If, f.unknownOption = Pc(b.createElement("option")), f.renderUnknownOption = function(b) {
                b = "? " + Ka(b) + " ?", f.unknownOption.val(b), a.prepend(f.unknownOption), a.val(b)
            }, d.$on("$destroy", function() {
                f.renderUnknownOption = o
            }), f.removeUnknownOption = function() {
                f.unknownOption.parent() && f.unknownOption.remove()
            }, f.readValue = function() {
                return f.removeUnknownOption(), a.val()
            }, f.writeValue = function(b) {
                f.hasOption(b) ? (f.removeUnknownOption(), a.val(b), "" === b && f.emptyOption.prop("selected", !0)) : null == b && f.emptyOption ? (f.removeUnknownOption(), a.val("")) : f.renderUnknownOption(b)
            }, f.addOption = function(a, b) {
                ga(a, '"option value"'), "" === a && (f.emptyOption = b);
                var c = g.get(a) || 0;
                g.put(a, c + 1), f.ngModelCtrl.$render(), b[0].hasAttribute("selected") && (b[0].selected = !0)
            }, f.removeOption = function(a) {
                var b = g.get(a);
                b && (1 === b ? (g.remove(a), "" === a && (f.emptyOption = c)) : g.put(a, b - 1))
            }, f.hasOption = function(a) {
                return !!g.get(a)
            }, f.registerOption = function(a, b, c, d, e) {
                if (d) {
                    var g;
                    c.$observe("value", function(a) {
                        t(g) && f.removeOption(g), g = a, f.addOption(a, b)
                    })
                } else e ? a.$watch(e, function(a, d) {
                    c.$set("value", a), d !== a && f.removeOption(d), f.addOption(a, b)
                }) : f.addOption(c.value, b);
                b.on("$destroy", function() {
                    f.removeOption(c.value), f.ngModelCtrl.$render()
                })
            }
        }],
        Kf = function() {
            return {
                restrict: "E",
                require: ["select", "?ngModel"],
                controller: Jf,
                priority: 1,
                link: {
                    pre: function(a, b, c, d) {
                        var e = d[1];
                        if (e) {
                            var g = d[0];
                            if (g.ngModelCtrl = e, b.on("change", function() {
                                    a.$apply(function() {
                                        e.$setViewValue(g.readValue())
                                    })
                                }), c.multiple) {
                                g.readValue = function() {
                                    var a = [];
                                    return f(b.find("option"), function(b) {
                                        b.selected && a.push(b.value)
                                    }), a
                                }, g.writeValue = function(a) {
                                    var c = new La(a);
                                    f(b.find("option"), function(a) {
                                        a.selected = t(c.get(a.value))
                                    })
                                };
                                var h, i = NaN;
                                a.$watch(function() {
                                    i !== e.$viewValue || L(h, e.$viewValue) || (h = K(e.$viewValue), e.$render()), i = e.$viewValue
                                }), e.$isEmpty = function(a) {
                                    return !a || 0 === a.length
                                }
                            }
                        }
                    },
                    post: function(a, b, c, d) {
                        var e = d[1];
                        if (e) {
                            var f = d[0];
                            e.$render = function() {
                                f.writeValue(e.$viewValue)
                            }
                        }
                    }
                }
            }
        },
        Lf = ["$interpolate", function(a) {
            return {
                restrict: "E",
                priority: 100,
                compile: function(b, c) {
                    if (t(c.value)) var d = a(c.value, !0);
                    else {
                        var e = a(b.text(), !0);
                        e || c.$set("value", b.text())
                    }
                    return function(a, b, c) {
                        var f = b.parent();
                        (f = f.data("$selectController") || f.parent().data("$selectController")) && f.registerOption(a, b, c, d, e)
                    }
                }
            }
        }],
        Mf = q({
            restrict: "E",
            terminal: !1
        }),
        Nf = function() {
            return {
                restrict: "A",
                require: "?ngModel",
                link: function(a, b, c, d) {
                    d && (c.required = !0, d.$validators.required = function(a, b) {
                        return !c.required || !d.$isEmpty(b)
                    }, c.$observe("required", function() {
                        d.$validate()
                    }))
                }
            }
        },
        Of = function() {
            return {
                restrict: "A",
                require: "?ngModel",
                link: function(a, b, e, f) {
                    if (f) {
                        var g, h = e.ngPattern || e.pattern;
                        e.$observe("pattern", function(a) {
                            if (w(a) && 0 < a.length && (a = new RegExp("^" + a + "$")), a && !a.test) throw d("ngPattern")("noregexp", h, a, T(b));
                            g = a || c, f.$validate()
                        }), f.$validators.pattern = function(a, b) {
                            return f.$isEmpty(b) || s(g) || g.test(b)
                        }
                    }
                }
            }
        },
        Pf = function() {
            return {
                restrict: "A",
                require: "?ngModel",
                link: function(a, b, c, d) {
                    if (d) {
                        var e = -1;
                        c.$observe("maxlength", function(a) {
                            a = m(a), e = isNaN(a) ? -1 : a, d.$validate()
                        }), d.$validators.maxlength = function(a, b) {
                            return 0 > e || d.$isEmpty(b) || b.length <= e
                        }
                    }
                }
            }
        },
        Qf = function() {
            return {
                restrict: "A",
                require: "?ngModel",
                link: function(a, b, c, d) {
                    if (d) {
                        var e = 0;
                        c.$observe("minlength", function(a) {
                            e = m(a) || 0, d.$validate()
                        }), d.$validators.minlength = function(a, b) {
                            return d.$isEmpty(b) || b.length >= e
                        }
                    }
                }
            }
        };
    a.angular.bootstrap ? void 0 : (da(), la(ad), ad.module("ngLocale", [], ["$provide", function(a) {
        function b(a) {
            a += "";
            var b = a.indexOf(".");
            return -1 == b ? 0 : a.length - b - 1
        }
        a.value("$locale", {
            DATETIME_FORMATS: {
                AMPMS: ["AM", "PM"],
                DAY: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                ERANAMES: ["Before Christ", "Anno Domini"],
                ERAS: ["BC", "AD"],
                FIRSTDAYOFWEEK: 6,
                MONTH: "January February March April May June July August September October November December".split(" "),
                SHORTDAY: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
                SHORTMONTH: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
                STANDALONEMONTH: "January February March April May June July August September October November December".split(" "),
                WEEKENDRANGE: [5, 6],
                fullDate: "EEEE, MMMM d, y",
                longDate: "MMMM d, y",
                medium: "MMM d, y h:mm:ss a",
                mediumDate: "MMM d, y",
                mediumTime: "h:mm:ss a",
                "short": "M/d/yy h:mm a",
                shortDate: "M/d/yy",
                shortTime: "h:mm a"
            },
            NUMBER_FORMATS: {
                CURRENCY_SYM: "$",
                DECIMAL_SEP: ".",
                GROUP_SEP: ",",
                PATTERNS: [{
                    gSize: 3,
                    lgSize: 3,
                    maxFrac: 3,
                    minFrac: 0,
                    minInt: 1,
                    negPre: "-",
                    negSuf: "",
                    posPre: "",
                    posSuf: ""
                }, {
                    gSize: 3,
                    lgSize: 3,
                    maxFrac: 2,
                    minFrac: 2,
                    minInt: 1,
                    negPre: "-¤",
                    negSuf: "",
                    posPre: "¤",
                    posSuf: ""
                }]
            },
            id: "en-us",
            pluralCat: function(a, d) {
                var e = 0 | a,
                    f = d;
                return c === f && (f = Math.min(b(a), 3)), Math.pow(10, f), 1 == e && 0 == f ? "one" : "other"
            }
        })
    }]), Pc(b).ready(function() {
        $(b, _)
    }))
}(window, document), !window.angular.$$csp().noInlineStyle && window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),
    function(a, b, c) {
        "use strict";

        function d(a, c, d) {
            return {
                restrict: "ECA",
                terminal: !0,
                priority: 400,
                transclude: "element",
                link: function(e, f, g, h, i) {
                    function j() {
                        n && (d.cancel(n), n = null), l && (l.$destroy(), l = null), m && (n = d.leave(m), n.then(function() {
                            n = null
                        }), m = null)
                    }

                    function k() {
                        var g = a.current && a.current.locals;
                        if (b.isDefined(g && g.$template)) {
                            var g = e.$new(),
                                h = a.current;
                            m = i(g, function(a) {
                                d.enter(a, null, m || f).then(function() {
                                    !b.isDefined(o) || o && !e.$eval(o) || c()
                                }), j()
                            }), l = h.scope = g, l.$emit("$viewContentLoaded"), l.$eval(p)
                        } else j()
                    }
                    var l, m, n, o = g.autoscroll,
                        p = g.onload || "";
                    e.$on("$routeChangeSuccess", k), k()
                }
            }
        }

        function e(a, b, c) {
            return {
                restrict: "ECA",
                priority: -400,
                link: function(d, e) {
                    var f = c.current,
                        g = f.locals;
                    e.html(g.$template);
                    var h = a(e.contents());
                    f.controller && (g.$scope = d, g = b(f.controller, g), f.controllerAs && (d[f.controllerAs] = g), e.data("$ngControllerController", g), e.children().data("$ngControllerController", g)), h(d)
                }
            }
        }
        a = b.module("ngRoute", ["ng"]).provider("$route", function() {
            function a(a, c) {
                return b.extend(Object.create(a), c)
            }

            function c(a, b) {
                var c = b.caseInsensitiveMatch,
                    d = {
                        originalPath: a,
                        regexp: a
                    },
                    e = d.keys = [];
                return a = a.replace(/([().])/g, "\\$1").replace(/(\/)?:(\w+)([\?\*])?/g, function(a, b, c, d) {
                    return a = "?" === d ? d : null, d = "*" === d ? d : null, e.push({
                        name: c,
                        optional: !!a
                    }), b = b || "", "" + (a ? "" : b) + "(?:" + (a ? b : "") + (d && "(.+?)" || "([^/]+)") + (a || "") + ")" + (a || "")
                }).replace(/([\/$\*])/g, "\\$1"), d.regexp = new RegExp("^" + a + "$", c ? "i" : ""), d
            }
            var d = {};
            this.when = function(a, e) {
                var f = b.copy(e);
                if (b.isUndefined(f.reloadOnSearch) && (f.reloadOnSearch = !0), b.isUndefined(f.caseInsensitiveMatch) && (f.caseInsensitiveMatch = this.caseInsensitiveMatch), d[a] = b.extend(f, a && c(a, f)), a) {
                    var g = "/" == a[a.length - 1] ? a.substr(0, a.length - 1) : a + "/";
                    d[g] = b.extend({
                        redirectTo: a
                    }, c(g, f))
                }
                return this
            }, this.caseInsensitiveMatch = !1, this.otherwise = function(a) {
                return "string" == typeof a && (a = {
                    redirectTo: a
                }), this.when(null, a), this
            }, this.$get = ["$rootScope", "$location", "$routeParams", "$q", "$injector", "$templateRequest", "$sce", function(c, e, g, h, i, j, k) {
                function l(a) {
                    var d = s.current;
                    (q = (p = n()) && d && p.$$route === d.$$route && b.equals(p.pathParams, d.pathParams) && !p.reloadOnSearch && !r) || !d && !p || c.$broadcast("$routeChangeStart", p, d).defaultPrevented && a && a.preventDefault()
                }

                function m() {
                    var a = s.current,
                        d = p;
                    q ? (a.params = d.params, b.copy(a.params, g), c.$broadcast("$routeUpdate", a)) : (d || a) && (r = !1, (s.current = d) && d.redirectTo && (b.isString(d.redirectTo) ? e.path(o(d.redirectTo, d.params)).search(d.params).replace() : e.url(d.redirectTo(d.pathParams, e.path(), e.search())).replace()), h.when(d).then(function() {
                        if (d) {
                            var a, c, e = b.extend({}, d.resolve);
                            return b.forEach(e, function(a, c) {
                                e[c] = b.isString(a) ? i.get(a) : i.invoke(a, null, null, c)
                            }), b.isDefined(a = d.template) ? b.isFunction(a) && (a = a(d.params)) : b.isDefined(c = d.templateUrl) && (b.isFunction(c) && (c = c(d.params)), b.isDefined(c) && (d.loadedTemplateUrl = k.valueOf(c), a = j(c))), b.isDefined(a) && (e.$template = a), h.all(e)
                        }
                    }).then(function(e) {
                        d == s.current && (d && (d.locals = e, b.copy(d.params, g)), c.$broadcast("$routeChangeSuccess", d, a))
                    }, function(b) {
                        d == s.current && c.$broadcast("$routeChangeError", d, a, b)
                    }))
                }

                function n() {
                    var c, f;
                    return b.forEach(d, function(d, g) {
                        var h;
                        if (h = !f) {
                            var i = e.path();
                            h = d.keys;
                            var j = {};
                            if (d.regexp)
                                if (i = d.regexp.exec(i)) {
                                    for (var k = 1, l = i.length; l > k; ++k) {
                                        var m = h[k - 1],
                                            n = i[k];
                                        m && n && (j[m.name] = n)
                                    }
                                    h = j
                                } else h = null;
                            else h = null;
                            h = c = h
                        }
                        h && (f = a(d, {
                            params: b.extend({}, e.search(), c),
                            pathParams: c
                        }), f.$$route = d)
                    }), f || d[null] && a(d[null], {
                        params: {},
                        pathParams: {}
                    })
                }

                function o(a, c) {
                    var d = [];
                    return b.forEach((a || "").split(":"), function(a, b) {
                        if (0 === b) d.push(a);
                        else {
                            var e = a.match(/(\w+)(?:[?*])?(.*)/),
                                f = e[1];
                            d.push(c[f]), d.push(e[2] || ""), delete c[f]
                        }
                    }), d.join("")
                }
                var p, q, r = !1,
                    s = {
                        routes: d,
                        reload: function() {
                            r = !0, c.$evalAsync(function() {
                                l(), m()
                            })
                        },
                        updateParams: function(a) {
                            if (!this.current || !this.current.$$route) throw f("norout");
                            a = b.extend({}, this.current.params, a), e.path(o(this.current.$$route.originalPath, a)), e.search(a)
                        }
                    };
                return c.$on("$locationChangeStart", l), c.$on("$locationChangeSuccess", m), s
            }]
        });
        var f = b.$$minErr("ngRoute");
        a.provider("$routeParams", function() {
            this.$get = function() {
                return {}
            }
        }), a.directive("ngView", d), a.directive("ngView", e), d.$inject = ["$route", "$anchorScroll", "$animate"], e.$inject = ["$compile", "$controller", "$route"]
    }(window, window.angular),
    function(a, b, c) {
        "use strict";
        var d = "BUTTON A INPUT TEXTAREA SELECT DETAILS SUMMARY".split(" "),
            e = function(a, b) {
                return -1 !== b.indexOf(a[0].nodeName) ? !0 : void 0
            };
        b.module("ngAria", ["ng"]).provider("$aria", function() {
            function a(a, b, d, f) {
                return function(g, h, i) {
                    var j = i.$normalize(b);
                    !c[j] || e(h, d) || i[j] || g.$watch(i[a], function(a) {
                        a = f ? !a : !!a, h.attr(b, a)
                    })
                }
            }
            var c = {
                ariaHidden: !0,
                ariaChecked: !0,
                ariaDisabled: !0,
                ariaRequired: !0,
                ariaInvalid: !0,
                ariaMultiline: !0,
                ariaValue: !0,
                tabindex: !0,
                bindKeypress: !0,
                bindRoleForClick: !0
            };
            this.config = function(a) {
                c = b.extend(c, a)
            }, this.$get = function() {
                return {
                    config: function(a) {
                        return c[a]
                    },
                    $$watchExpr: a
                }
            }
        }).directive("ngShow", ["$aria", function(a) {
            return a.$$watchExpr("ngShow", "aria-hidden", [], !0)
        }]).directive("ngHide", ["$aria", function(a) {
            return a.$$watchExpr("ngHide", "aria-hidden", [], !1)
        }]).directive("ngModel", ["$aria", function(a) {
            function b(b, c, d) {
                return a.config(c) && !d.attr(b)
            }

            function c(a, b) {
                return !b.attr("role") && b.attr("type") === a && "INPUT" !== b[0].nodeName
            }

            function f(a, b) {
                var c = a.type,
                    d = a.role;
                return "checkbox" === (c || d) || "menuitemcheckbox" === d ? "checkbox" : "radio" === (c || d) || "menuitemradio" === d ? "radio" : "range" === c || "progressbar" === d || "slider" === d ? "range" : "textbox" === (c || d) || "TEXTAREA" === b[0].nodeName ? "multiline" : ""
            }
            return {
                restrict: "A",
                require: "?ngModel",
                priority: 200,
                compile: function(g, h) {
                    var i = f(h, g);
                    return {
                        pre: function(a, b, c, d) {
                            "checkbox" === i && "checkbox" !== c.type && (d.$isEmpty = function(a) {
                                return !1 === a
                            })
                        },
                        post: function(f, g, h, j) {
                            function k() {
                                return j.$modelValue
                            }

                            function l() {
                                return n ? (n = !1, function(a) {
                                    a = h.value == j.$viewValue, g.attr("aria-checked", a), g.attr("tabindex", 0 - !a)
                                }) : function(a) {
                                    g.attr("aria-checked", h.value == j.$viewValue)
                                }
                            }

                            function m() {
                                g.attr("aria-checked", !j.$isEmpty(j.$viewValue))
                            }
                            var n = b("tabindex", "tabindex", g) && !e(g, d);
                            switch (i) {
                                case "radio":
                                case "checkbox":
                                    c(i, g) && g.attr("role", i), b("aria-checked", "ariaChecked", g) && f.$watch(k, "radio" === i ? l() : m), n && g.attr("tabindex", 0);
                                    break;
                                case "range":
                                    if (c(i, g) && g.attr("role", "slider"), a.config("ariaValue")) {
                                        var o = !g.attr("aria-valuemin") && (h.hasOwnProperty("min") || h.hasOwnProperty("ngMin")),
                                            p = !g.attr("aria-valuemax") && (h.hasOwnProperty("max") || h.hasOwnProperty("ngMax")),
                                            q = !g.attr("aria-valuenow");
                                        o && h.$observe("min", function(a) {
                                            g.attr("aria-valuemin", a)
                                        }), p && h.$observe("max", function(a) {
                                            g.attr("aria-valuemax", a)
                                        }), q && f.$watch(k, function(a) {
                                            g.attr("aria-valuenow", a)
                                        })
                                    }
                                    n && g.attr("tabindex", 0);
                                    break;
                                case "multiline":
                                    b("aria-multiline", "ariaMultiline", g) && g.attr("aria-multiline", !0)
                            }
                            j.$validators.required && b("aria-required", "ariaRequired", g) && f.$watch(function() {
                                return j.$error.required
                            }, function(a) {
                                g.attr("aria-required", !!a)
                            }), b("aria-invalid", "ariaInvalid", g) && f.$watch(function() {
                                return j.$invalid
                            }, function(a) {
                                g.attr("aria-invalid", !!a)
                            })
                        }
                    }
                }
            }
        }]).directive("ngDisabled", ["$aria", function(a) {
            return a.$$watchExpr("ngDisabled", "aria-disabled", [])
        }]).directive("ngMessages", function() {
            return {
                restrict: "A",
                require: "?ngMessages",
                link: function(a, b, c, d) {
                    b.attr("aria-live") || b.attr("aria-live", "assertive")
                }
            }
        }).directive("ngClick", ["$aria", "$parse", function(a, b) {
            return {
                restrict: "A",
                compile: function(c, f) {
                    var g = b(f.ngClick, null, !0);
                    return function(b, c, f) {
                        e(c, d) || (a.config("bindRoleForClick") && !c.attr("role") && c.attr("role", "button"), a.config("tabindex") && !c.attr("tabindex") && c.attr("tabindex", 0), !a.config("bindKeypress") || f.ngKeypress) || c.on("keypress", function(a) {
                            function c() {
                                g(b, {
                                    $event: a
                                })
                            }
                            var d = a.which || a.keyCode;
                            32 !== d && 13 !== d || b.$apply(c)
                        })
                    }
                }
            }
        }]).directive("ngDblclick", ["$aria", function(a) {
            return function(b, c, f) {
                !a.config("tabindex") || c.attr("tabindex") || e(c, d) || c.attr("tabindex", 0)
            }
        }])
    }(window, window.angular),
    function(a, b, c) {
        "use strict";

        function d(a, b, c) {
            if (!a) throw X("areq", b || "?", c || "required");
            return a
        }

        function e(a, b) {
            return a || b ? a ? b ? (N(a) && (a = a.join(" ")), N(b) && (b = b.join(" ")), a + " " + b) : a : b : ""
        }

        function f(a) {
            var b = {};
            return a && (a.to || a.from) && (b.to = a.to, b.from = a.from), b
        }

        function g(a, b, c) {
            var d = "";
            return a = N(a) ? a : a && O(a) && a.length ? a.split(/\s+/) : [], M(a, function(a, e) {
                a && 0 < a.length && (d += e > 0 ? " " : "", d += c ? b + a : a + b)
            }), d
        }

        function h(a) {
            if (a instanceof L) switch (a.length) {
                case 0:
                    return [];
                case 1:
                    if (1 === a[0].nodeType) return a;
                    break;
                default:
                    return L(i(a))
            }
            return 1 === a.nodeType ? L(a) : void 0
        }

        function i(a) {
            if (!a[0]) return a;
            for (var b = 0; b < a.length; b++) {
                var c = a[b];
                if (1 == c.nodeType) return c
            }
        }

        function j(a, b, c) {
            M(b, function(b) {
                a.addClass(b, c)
            })
        }

        function k(a, b, c) {
            M(b, function(b) {
                a.removeClass(b, c)
            })
        }

        function l(a) {
            return function(b, c) {
                c.addClass && (j(a, b, c.addClass), c.addClass = null), c.removeClass && (k(a, b, c.removeClass), c.removeClass = null)
            }
        }

        function m(a) {
            if (a = a || {}, !a.$$prepared) {
                var b = a.domOperation || I;
                a.domOperation = function() {
                    a.$$domOperationFired = !0, b(), b = I
                }, a.$$prepared = !0
            }
            return a
        }

        function n(a, b) {
            o(a, b), p(a, b)
        }

        function o(a, b) {
            b.from && (a.css(b.from), b.from = null)
        }

        function p(a, b) {
            b.to && (a.css(b.to), b.to = null)
        }

        function q(a, b, c) {
            var d = (b.addClass || "") + " " + (c.addClass || ""),
                e = (b.removeClass || "") + " " + (c.removeClass || "");
            return a = r(a.attr("class"), d, e), c.preparationClasses && (b.preparationClasses = x(c.preparationClasses, b.preparationClasses), delete c.preparationClasses), d = b.domOperation !== I ? b.domOperation : null, K(b, c), d && (b.domOperation = d), b.addClass = a.addClass ? a.addClass : null, b.removeClass = a.removeClass ? a.removeClass : null, b
        }

        function r(a, b, c) {
            function d(a) {
                O(a) && (a = a.split(" "));
                var b = {};
                return M(a, function(a) {
                    a.length && (b[a] = !0)
                }), b
            }
            var e = {};
            a = d(a), b = d(b), M(b, function(a, b) {
                e[b] = 1
            }), c = d(c), M(c, function(a, b) {
                e[b] = 1 === e[b] ? null : -1
            });
            var f = {
                addClass: "",
                removeClass: ""
            };
            return M(e, function(b, c) {
                var d, e;
                1 === b ? (d = "addClass", e = !a[c]) : -1 === b && (d = "removeClass", e = a[c]), e && (f[d].length && (f[d] += " "), f[d] += c)
            }), f
        }

        function s(a) {
            return a instanceof b.element ? a[0] : a
        }

        function t(a, b, c) {
            var d = "";
            b && (d = g(b, "ng-", !0)), c.addClass && (d = x(d, g(c.addClass, "-add"))), c.removeClass && (d = x(d, g(c.removeClass, "-remove"))), d.length && (c.preparationClasses = d, a.addClass(d))
        }

        function u(a, b) {
            var c = b ? "-" + b + "s" : "";
            return w(a, [W, c]), [W, c]
        }

        function v(a, b) {
            var c = b ? "paused" : "",
                d = G + "PlayState";
            return w(a, [d, c]), [d, c]
        }

        function w(a, b) {
            a.style[b[0]] = b[1]
        }

        function x(a, b) {
            return a ? b ? a + " " + b : a : b
        }

        function y(a, b, c) {
            var d = Object.create(null),
                e = a.getComputedStyle(b) || {};
            return M(c, function(a, b) {
                var c = e[a];
                if (c) {
                    var f = c.charAt(0);
                    ("-" === f || "+" === f || f >= 0) && (c = z(c)), 0 === c && (c = null), d[b] = c
                }
            }), d
        }

        function z(a) {
            var b = 0;
            return a = a.split(/\s*,\s*/), M(a, function(a) {
                "s" == a.charAt(a.length - 1) && (a = a.substring(0, a.length - 1)), a = parseFloat(a) || 0, b = b ? Math.max(a, b) : a
            }), b
        }

        function A(a) {
            return 0 === a || null != a
        }

        function B(a, b) {
            var c = E,
                d = a + "s";
            return b ? c += "Duration" : d += " linear all", [c, d]
        }

        function C() {
            var a = Object.create(null);
            return {
                flush: function() {
                    a = Object.create(null)
                },
                count: function(b) {
                    return (b = a[b]) ? b.total : 0
                },
                get: function(b) {
                    return (b = a[b]) && b.value
                },
                put: function(b, c) {
                    a[b] ? a[b].total++ : a[b] = {
                        total: 1,
                        value: c
                    }
                }
            }
        }

        function D(a, b, c) {
            M(c, function(c) {
                a[c] = R(a[c]) ? a[c] : b.style.getPropertyValue(c)
            })
        }
        var E, F, G, H, I = b.noop,
            J = b.copy,
            K = b.extend,
            L = b.element,
            M = b.forEach,
            N = b.isArray,
            O = b.isString,
            P = b.isObject,
            Q = b.isUndefined,
            R = b.isDefined,
            S = b.isFunction,
            T = b.isElement;
        Q(a.ontransitionend) && R(a.onwebkittransitionend) ? (E = "WebkitTransition", F = "webkitTransitionEnd transitionend") : (E = "transition", F = "transitionend"), Q(a.onanimationend) && R(a.onwebkitanimationend) ? (G = "WebkitAnimation", H = "webkitAnimationEnd animationend") : (G = "animation", H = "animationend");
        var U = G + "Delay",
            V = G + "Duration",
            W = E + "Delay";
        a = E + "Duration";
        var X = b.$$minErr("ng"),
            Y = {
                transitionDuration: a,
                transitionDelay: W,
                transitionProperty: E + "Property",
                animationDuration: V,
                animationDelay: U,
                animationIterationCount: G + "IterationCount"
            },
            Z = {
                transitionDuration: a,
                transitionDelay: W,
                animationDuration: V,
                animationDelay: U
            };
        b.module("ngAnimate", []).directive("ngAnimateChildren", [function() {
            return function(a, c, d) {
                a = d.ngAnimateChildren, b.isString(a) && 0 === a.length ? c.data("$$ngAnimateChildren", !0) : d.$observe("ngAnimateChildren", function(a) {
                    c.data("$$ngAnimateChildren", "on" === a || "true" === a)
                })
            }
        }]).factory("$$rAFScheduler", ["$$rAF", function(a) {
            function b(a) {
                d = d.concat(a), c()
            }

            function c() {
                if (d.length) {
                    for (var b = d.shift(), f = 0; f < b.length; f++) b[f]();
                    e || a(function() {
                        e || c()
                    })
                }
            }
            var d, e;
            return d = b.queue = [], b.waitUntilQuiet = function(b) {
                e && e(), e = a(function() {
                    e = null, b(), c()
                })
            }, b
        }]).provider("$$animateQueue", ["$animateProvider", function(a) {
            function b(a) {
                if (!a) return null;
                a = a.split(" ");
                var b = Object.create(null);
                return M(a, function(a) {
                    b[a] = !0
                }), b
            }

            function c(a, c) {
                if (a && c) {
                    var d = b(c);
                    return a.split(" ").some(function(a) {
                        return d[a]
                    })
                }
            }

            function e(a, b, c, d) {
                return g[a].some(function(a) {
                    return a(b, c, d)
                })
            }

            function f(a, b) {
                a = a || {};
                var c = 0 < (a.addClass || "").length,
                    d = 0 < (a.removeClass || "").length;
                return b ? c && d : c || d
            }
            var g = this.rules = {
                skip: [],
                cancel: [],
                join: []
            };
            g.join.push(function(a, b, c) {
                return !b.structural && f(b.options)
            }), g.skip.push(function(a, b, c) {
                return !b.structural && !f(b.options)
            }), g.skip.push(function(a, b, c) {
                return "leave" == c.event && b.structural
            }), g.skip.push(function(a, b, c) {
                return c.structural && 2 === c.state && !b.structural
            }), g.cancel.push(function(a, b, c) {
                return c.structural && b.structural
            }), g.cancel.push(function(a, b, c) {
                return 2 === c.state && b.structural
            }), g.cancel.push(function(a, b, d) {
                a = b.options.addClass, b = b.options.removeClass;
                var e = d.options.addClass;
                return d = d.options.removeClass, Q(a) && Q(b) || Q(e) && Q(d) ? !1 : c(a, d) || c(b, e)
            }), this.$get = ["$$rAF", "$rootScope", "$rootElement", "$document", "$$HashMap", "$$animation", "$$AnimateRunner", "$templateRequest", "$$jqLite", "$$forceReflow", function(b, c, g, j, k, o, p, r, u, v) {
                function w() {
                    var a = !1;
                    return function(b) {
                        a ? b() : c.$$postDigest(function() {
                            a = !0, b()
                        })
                    }
                }

                function x(a, b, c) {
                    var d = s(b),
                        e = s(a),
                        f = [];
                    return (a = I[c]) && M(a, function(a) {
                        W.call(a.node, d) ? f.push(a.callback) : "leave" === c && W.call(a.node, e) && f.push(a.callback)
                    }), f
                }

                function y(a, d, g) {
                    function i(c, d, e, f) {
                        y(function() {
                            var c = x(r, a, d);
                            c.length && b(function() {
                                M(c, function(b) {
                                    b(a, e, f)
                                })
                            })
                        }), c.progress(d, e, f)
                    }

                    function k(b) {
                        var c = a,
                            d = u;
                        d.preparationClasses && (c.removeClass(d.preparationClasses), d.preparationClasses = null), d.activeClasses && (c.removeClass(d.activeClasses), d.activeClasses = null), V(a, u), n(a, u), u.domOperation(), v.complete(!b)
                    }
                    var l, r, u = J(g);
                    (a = h(a)) && (l = s(a), r = a.parent());
                    var u = m(u),
                        v = new p,
                        y = w();
                    if (N(u.addClass) && (u.addClass = u.addClass.join(" ")), u.addClass && !O(u.addClass) && (u.addClass = null), N(u.removeClass) && (u.removeClass = u.removeClass.join(" ")), u.removeClass && !O(u.removeClass) && (u.removeClass = null), u.from && !P(u.from) && (u.from = null), u.to && !P(u.to) && (u.to = null), !l) return k(), v;
                    if (g = [l.className, u.addClass, u.removeClass].join(" "), !U(g)) return k(), v;
                    var B = 0 <= ["enter", "move", "leave"].indexOf(d),
                        H = !G || j[0].hidden || F.get(l);
                    g = !H && E.get(l) || {};
                    var I = !!g.state;
                    if (H || I && 1 == g.state || (H = !C(a, r, d)), H) return k(), v;
                    if (B && z(a), H = {
                            structural: B,
                            element: a,
                            event: d,
                            close: k,
                            options: u,
                            runner: v
                        }, I) {
                        if (e("skip", a, H, g)) return 2 === g.state ? (k(), v) : (q(a, g.options, u), g.runner);
                        if (e("cancel", a, H, g))
                            if (2 === g.state) g.runner.end();
                            else {
                                if (!g.structural) return q(a, g.options, H.options), g.runner;
                                g.close()
                            }
                        else if (e("join", a, H, g)) {
                            if (2 !== g.state) return t(a, B ? d : null, u), d = H.event = g.event, u = q(a, g.options, H.options), g.runner;
                            q(a, u, {})
                        }
                    } else q(a, u, {});
                    if ((I = H.structural) || (I = "animate" === H.event && 0 < Object.keys(H.options.to || {}).length || f(H.options)), !I) return k(), A(a), v;
                    var K = (g.counter || 0) + 1;
                    return H.counter = K, D(a, 1, H), c.$$postDigest(function() {
                        var b = E.get(l),
                            c = !b,
                            b = b || {},
                            e = 0 < (a.parent() || []).length && ("animate" === b.event || b.structural || f(b.options));
                        c || b.counter !== K || !e ? (c && (V(a, u), n(a, u)), (c || B && b.event !== d) && (u.domOperation(), v.end()), e || A(a)) : (d = !b.structural && f(b.options, !0) ? "setClass" : b.event, D(a, 2), b = o(a, d, b.options), b.done(function(b) {
                            k(!b), (b = E.get(l)) && b.counter === K && A(s(a)), i(v, d, "close", {})
                        }), v.setHost(b), i(v, d, "start", {}))
                    }), v
                }

                function z(a) {
                    a = s(a).querySelectorAll("[data-ng-animate]"), M(a, function(a) {
                        var b = parseInt(a.getAttribute("data-ng-animate")),
                            c = E.get(a);
                        if (c) switch (b) {
                            case 2:
                                c.runner.end();
                            case 1:
                                E.remove(a)
                        }
                    })
                }

                function A(a) {
                    a = s(a), a.removeAttribute("data-ng-animate"), E.remove(a)
                }

                function B(a, b) {
                    return s(a) === s(b)
                }

                function C(a, b, c) {
                    c = L(j[0].body);
                    var d, e = B(a, c) || "HTML" === a[0].nodeName,
                        f = B(a, g),
                        h = !1,
                        i = F.get(s(a));
                    for ((a = a.data("$ngAnimatePin")) && (b = a); b && b.length;) {
                        f || (f = B(b, g));
                        var k = b[0];
                        if (1 !== k.nodeType) break;
                        if (a = E.get(k) || {}, !h) {
                            if (k = F.get(k), !0 === k && !1 !== i) {
                                i = !0;
                                break
                            }!1 === k && (i = !1), h = a.structural
                        }
                        if ((Q(d) || !0 === d) && (a = b.data("$$ngAnimateChildren"), R(a) && (d = a)), h && !1 === d) break;
                        if (e || (e = B(b, c)), e && f) break;
                        b = f || !(a = b.data("$ngAnimatePin")) ? b.parent() : a
                    }
                    return (!h || d) && !0 !== i && f && e
                }

                function D(a, b, c) {
                    c = c || {}, c.state = b, a = s(a), a.setAttribute("data-ng-animate", b), c = (b = E.get(a)) ? K(b, c) : c, E.put(a, c)
                }
                var E = new k,
                    F = new k,
                    G = null,
                    H = c.$watch(function() {
                        return 0 === r.totalPendingRequests
                    }, function(a) {
                        a && (H(), c.$$postDigest(function() {
                            c.$$postDigest(function() {
                                null === G && (G = !0)
                            })
                        }))
                    }),
                    I = {},
                    S = a.classNameFilter(),
                    U = S ? function(a) {
                        return S.test(a)
                    } : function() {
                        return !0
                    },
                    V = l(u),
                    W = Node.prototype.contains || function(a) {
                        return this === a || !!(16 & this.compareDocumentPosition(a))
                    };
                return {
                    on: function(a, b, c) {
                        b = i(b), I[a] = I[a] || [], I[a].push({
                            node: b,
                            callback: c
                        })
                    },
                    off: function(a, b, c) {
                        function d(a, b, c) {
                            var d = i(b);
                            return a.filter(function(a) {
                                return !(a.node === d && (!c || a.callback === c))
                            })
                        }
                        var e = I[a];
                        e && (I[a] = 1 === arguments.length ? null : d(e, b, c))
                    },
                    pin: function(a, b) {
                        d(T(a), "element", "not an element"), d(T(b), "parentElement", "not an element"), a.data("$ngAnimatePin", b)
                    },
                    push: function(a, b, c, d) {
                        return c = c || {}, c.domOperation = d, y(a, b, c)
                    },
                    enabled: function(a, b) {
                        var c = arguments.length;
                        if (0 === c) b = !!G;
                        else if (T(a)) {
                            var d = s(a),
                                e = F.get(d);
                            1 === c ? b = !e : F.put(d, !b)
                        } else b = G = !!a;
                        return b
                    }
                }
            }]
        }]).provider("$$animation", ["$animateProvider", function(a) {
            function b(a) {
                return a.data("$$animationRunner")
            }
            var c = this.drivers = [];
            this.$get = ["$$jqLite", "$rootScope", "$injector", "$$AnimateRunner", "$$HashMap", "$$rAFScheduler", function(a, d, f, g, h, i) {
                function j(a) {
                    function b(a) {
                        if (a.processed) return a;
                        a.processed = !0;
                        var c = a.domNode,
                            f = c.parentNode;
                        e.put(c, a);
                        for (var g; f;) {
                            if (g = e.get(f)) {
                                g.processed || (g = b(g));
                                break
                            }
                            f = f.parentNode
                        }
                        return (g || d).children.push(a), a
                    }
                    var c, d = {
                            children: []
                        },
                        e = new h;
                    for (c = 0; c < a.length; c++) {
                        var f = a[c];
                        e.put(f.domNode, a[c] = {
                            domNode: f.domNode,
                            fn: f.fn,
                            children: []
                        })
                    }
                    for (c = 0; c < a.length; c++) b(a[c]);
                    return function(a) {
                        var b, c = [],
                            d = [];
                        for (b = 0; b < a.children.length; b++) d.push(a.children[b]);
                        a = d.length;
                        var e = 0,
                            f = [];
                        for (b = 0; b < d.length; b++) {
                            var g = d[b];
                            0 >= a && (a = e, e = 0, c.push(f), f = []), f.push(g.fn), g.children.forEach(function(a) {
                                e++, d.push(a)
                            }), a--
                        }
                        return f.length && c.push(f), c
                    }(d)
                }
                var k = [],
                    o = l(a);
                return function(h, l, p) {
                    function q(a) {
                        a = a.hasAttribute("ng-animate-ref") ? [a] : a.querySelectorAll("[ng-animate-ref]");
                        var b = [];
                        return M(a, function(a) {
                            var c = a.getAttribute("ng-animate-ref");
                            c && c.length && b.push(a)
                        }), b
                    }

                    function r(a) {
                        var b = [],
                            c = {};
                        M(a, function(a, d) {
                            var e = s(a.element),
                                f = 0 <= ["enter", "move"].indexOf(a.event),
                                e = a.structural ? q(e) : [];
                            if (e.length) {
                                var g = f ? "to" : "from";
                                M(e, function(a) {
                                    var b = a.getAttribute("ng-animate-ref");
                                    c[b] = c[b] || {}, c[b][g] = {
                                        animationID: d,
                                        element: L(a)
                                    }
                                })
                            } else b.push(a)
                        });
                        var d = {},
                            e = {};
                        return M(c, function(c, f) {
                            var g = c.from,
                                h = c.to;
                            if (g && h) {
                                var i = a[g.animationID],
                                    j = a[h.animationID],
                                    k = g.animationID.toString();
                                if (!e[k]) {
                                    var l = e[k] = {
                                        structural: !0,
                                        beforeStart: function() {
                                            i.beforeStart(), j.beforeStart()
                                        },
                                        close: function() {
                                            i.close(), j.close()
                                        },
                                        classes: t(i.classes, j.classes),
                                        from: i,
                                        to: j,
                                        anchors: []
                                    };
                                    l.classes.length ? b.push(l) : (b.push(i), b.push(j))
                                }
                                e[k].anchors.push({
                                    out: g.element,
                                    "in": h.element
                                })
                            } else g = g ? g.animationID : h.animationID, h = g.toString(), d[h] || (d[h] = !0, b.push(a[g]))
                        }), b
                    }

                    function t(a, b) {
                        a = a.split(" "), b = b.split(" ");
                        for (var c = [], d = 0; d < a.length; d++) {
                            var e = a[d];
                            if ("ng-" !== e.substring(0, 3))
                                for (var f = 0; f < b.length; f++)
                                    if (e === b[f]) {
                                        c.push(e);
                                        break
                                    }
                        }
                        return c.join(" ")
                    }

                    function u(a) {
                        for (var b = c.length - 1; b >= 0; b--) {
                            var d = c[b];
                            if (f.has(d) && (d = f.get(d)(a))) return d
                        }
                    }

                    function v(a, c) {
                        a.from && a.to ? (b(a.from.element).setHost(c), b(a.to.element).setHost(c)) : b(a.element).setHost(c)
                    }

                    function w() {
                        var a = b(h);
                        !a || "leave" === l && p.$$domOperationFired || a.end()
                    }

                    function x(b) {
                        h.off("$destroy", w), h.removeData("$$animationRunner"), o(h, p), n(h, p), p.domOperation(), B && a.removeClass(h, B), h.removeClass("ng-animate"), z.complete(!b)
                    }
                    p = m(p);
                    var y = 0 <= ["enter", "move", "leave"].indexOf(l),
                        z = new g({
                            end: function() {
                                x()
                            },
                            cancel: function() {
                                x(!0)
                            }
                        });
                    if (!c.length) return x(), z;
                    h.data("$$animationRunner", z);
                    var A = e(h.attr("class"), e(p.addClass, p.removeClass)),
                        B = p.tempClasses;
                    return B && (A += " " + B, p.tempClasses = null), k.push({
                        element: h,
                        classes: A,
                        event: l,
                        structural: y,
                        options: p,
                        beforeStart: function() {
                            h.addClass("ng-animate"), B && a.addClass(h, B)
                        },
                        close: x
                    }), h.on("$destroy", w), 1 < k.length ? z : (d.$$postDigest(function() {
                        var a = [];
                        M(k, function(c) {
                            b(c.element) ? a.push(c) : c.close()
                        }), k.length = 0;
                        var c = r(a),
                            d = [];
                        M(c, function(a) {
                            d.push({
                                domNode: s(a.from ? a.from.element : a.element),
                                fn: function() {
                                    a.beforeStart();
                                    var c, d = a.close;
                                    if (b(a.anchors ? a.from.element || a.to.element : a.element)) {
                                        var e = u(a);
                                        e && (c = e.start)
                                    }
                                    c ? (c = c(), c.done(function(a) {
                                        d(!a)
                                    }), v(a, c)) : d()
                                }
                            })
                        }), i(j(d))
                    }), z)
                }
            }]
        }]).provider("$animateCss", ["$animateProvider", function(a) {
            var b = C(),
                c = C();
            this.$get = ["$window", "$$jqLite", "$$AnimateRunner", "$timeout", "$$forceReflow", "$sniffer", "$$rAFScheduler", "$$animateQueue", function(a, d, e, h, i, j, k, q) {
                function r(a, b) {
                    var c = a.parentNode;
                    return (c.$$ngAnimateParentKey || (c.$$ngAnimateParentKey = ++K)) + "-" + a.getAttribute("class") + "-" + b
                }

                function t(e, f, h, i) {
                    var j;
                    return 0 < b.count(h) && (j = c.get(h), j || (f = g(f, "-stagger"), d.addClass(e, f), j = y(a, e, i), j.animationDuration = Math.max(j.animationDuration, 0), j.transitionDuration = Math.max(j.transitionDuration, 0), d.removeClass(e, f), c.put(h, j))), j || {}
                }

                function x(a) {
                    L.push(a), k.waitUntilQuiet(function() {
                        b.flush(), c.flush();
                        for (var a = i(), d = 0; d < L.length; d++) L[d](a);
                        L.length = 0
                    })
                }

                function z(c, d, e) {
                    return d = b.get(e), d || (d = y(a, c, Y), "infinite" === d.animationIterationCount && (d.animationIterationCount = 1)), b.put(e, d), c = d, e = c.animationDelay, d = c.transitionDelay, c.maxDelay = e && d ? Math.max(e, d) : e || d, c.maxDuration = Math.max(c.animationDuration * c.animationIterationCount, c.transitionDuration), c
                }
                var C = l(d),
                    K = 0,
                    L = [];
                return function(a, c) {
                    function i() {
                        l()
                    }

                    function k() {
                        l(!0)
                    }

                    function l(b) {
                        S || X && T || (S = !0, T = !1, P.$$skipPreparationClasses || d.removeClass(a, la), d.removeClass(a, na), v(R, !1), u(R, !1), M(ea, function(a) {
                            R.style[a[0]] = ""
                        }), C(a, P), n(a, P), Object.keys(Q).length && M(Q, function(a, b) {
                            a ? R.style.setProperty(b, a) : R.style.removeProperty(b)
                        }), P.onDone && P.onDone(), ha && ha.length && a.off(ha.join(" "), L), Y && Y.complete(!b))
                    }

                    function y(a) {
                        ta.blockTransition && u(R, a),
                            ta.blockKeyframeAnimation && v(R, !!a)
                    }

                    function K() {
                        return Y = new e({
                            end: i,
                            cancel: k
                        }), x(I), l(), {
                            $$willAnimate: !1,
                            start: function() {
                                return Y
                            },
                            end: i
                        }
                    }

                    function L(a) {
                        a.stopPropagation();
                        var b = a.originalEvent || a;
                        a = b.$manualTimeStamp || Date.now(), b = parseFloat(b.elapsedTime.toFixed(3)), Math.max(a - da, 0) >= aa && b >= ba && (X = !0, l())
                    }

                    function O() {
                        function b() {
                            if (!S) {
                                if (y(!1), M(ea, function(a) {
                                        R.style[a[0]] = a[1]
                                    }), C(a, P), d.addClass(a, na), ta.recalculateTimingStyles) {
                                    if (ma = R.className + " " + la, oa = r(R, ma), ra = z(R, ma, oa), sa = ra.maxDelay, _ = Math.max(sa, 0), ba = ra.maxDuration, 0 === ba) return void l();
                                    ta.hasTransitions = 0 < ra.transitionDuration, ta.hasAnimations = 0 < ra.animationDuration
                                }
                                if (ta.applyAnimationDelay && (sa = "boolean" != typeof P.delay && A(P.delay) ? parseFloat(P.delay) : sa, _ = Math.max(sa, 0), ra.animationDelay = sa, ua = [U, sa + "s"], ea.push(ua), R.style[ua[0]] = ua[1]), aa = 1e3 * _, ca = 1e3 * ba, P.easing) {
                                    var b, e = P.easing;
                                    ta.hasTransitions && (b = E + "TimingFunction", ea.push([b, e]), R.style[b] = e), ta.hasAnimations && (b = G + "TimingFunction", ea.push([b, e]), R.style[b] = e)
                                }
                                ra.transitionDuration && ha.push(F), ra.animationDuration && ha.push(H), da = Date.now();
                                var f = aa + 1.5 * ca;
                                b = da + f;
                                var e = a.data("$$animateCss") || [],
                                    g = !0;
                                if (e.length) {
                                    var i = e[0];
                                    (g = b > i.expectedEndTime) ? h.cancel(i.timer): e.push(l)
                                }
                                g && (f = h(c, f, !1), e[0] = {
                                    timer: f,
                                    expectedEndTime: b
                                }, e.push(l), a.data("$$animateCss", e)), ha.length && a.on(ha.join(" "), L), P.to && (P.cleanupStyles && D(Q, R, Object.keys(P.to)), p(a, P))
                            }
                        }

                        function c() {
                            var b = a.data("$$animateCss");
                            if (b) {
                                for (var c = 1; c < b.length; c++) b[c]();
                                a.removeData("$$animateCss")
                            }
                        }
                        if (!S)
                            if (R.parentNode) {
                                var e = function(a) {
                                        if (X) T && a && (T = !1, l());
                                        else if (T = !a, ra.animationDuration)
                                            if (a = v(R, T), T) ea.push(a);
                                            else {
                                                var b = ea,
                                                    c = b.indexOf(a);
                                                a >= 0 && b.splice(c, 1)
                                            }
                                    },
                                    f = qa > 0 && (ra.transitionDuration && 0 === pa.transitionDuration || ra.animationDuration && 0 === pa.animationDuration) && Math.max(pa.animationDelay, pa.transitionDelay);
                                f ? h(b, Math.floor(f * qa * 1e3), !1) : b(), $.resume = function() {
                                    e(!0)
                                }, $.pause = function() {
                                    e(!1)
                                }
                            } else l()
                    }
                    var P = c || {};
                    P.$$prepared || (P = m(J(P)));
                    var Q = {},
                        R = s(a);
                    if (!R || !R.parentNode || !q.enabled()) return K();
                    var S, T, X, Y, $, _, aa, ba, ca, da, ea = [],
                        fa = a.attr("class"),
                        ga = f(P),
                        ha = [];
                    if (0 === P.duration || !j.animations && !j.transitions) return K();
                    var ia = P.event && N(P.event) ? P.event.join(" ") : P.event,
                        ja = "",
                        ka = "";
                    ia && P.structural ? ja = g(ia, "ng-", !0) : ia && (ja = ia), P.addClass && (ka += g(P.addClass, "-add")), P.removeClass && (ka.length && (ka += " "), ka += g(P.removeClass, "-remove")), P.applyClassesEarly && ka.length && C(a, P);
                    var la = [ja, ka].join(" ").trim(),
                        ma = fa + " " + la,
                        na = g(la, "-active"),
                        fa = ga.to && 0 < Object.keys(ga.to).length;
                    if (!(0 < (P.keyframeStyle || "").length || fa || la)) return K();
                    var oa, pa;
                    0 < P.stagger ? (ga = parseFloat(P.stagger), pa = {
                        transitionDelay: ga,
                        animationDelay: ga,
                        transitionDuration: 0,
                        animationDuration: 0
                    }) : (oa = r(R, ma), pa = t(R, la, oa, Z)), P.$$skipPreparationClasses || d.addClass(a, la), P.transitionStyle && (ga = [E, P.transitionStyle], w(R, ga), ea.push(ga)), 0 <= P.duration && (ga = 0 < R.style[E].length, ga = B(P.duration, ga), w(R, ga), ea.push(ga)), P.keyframeStyle && (ga = [G, P.keyframeStyle], w(R, ga), ea.push(ga));
                    var qa = pa ? 0 <= P.staggerIndex ? P.staggerIndex : b.count(oa) : 0;
                    (ia = 0 === qa) && !P.skipBlocking && u(R, 9999);
                    var ra = z(R, ma, oa),
                        sa = ra.maxDelay;
                    _ = Math.max(sa, 0), ba = ra.maxDuration;
                    var ta = {};
                    if (ta.hasTransitions = 0 < ra.transitionDuration, ta.hasAnimations = 0 < ra.animationDuration, ta.hasTransitionAll = ta.hasTransitions && "all" == ra.transitionProperty, ta.applyTransitionDuration = fa && (ta.hasTransitions && !ta.hasTransitionAll || ta.hasAnimations && !ta.hasTransitions), ta.applyAnimationDuration = P.duration && ta.hasAnimations, ta.applyTransitionDelay = A(P.delay) && (ta.applyTransitionDuration || ta.hasTransitions), ta.applyAnimationDelay = A(P.delay) && ta.hasAnimations, ta.recalculateTimingStyles = 0 < ka.length, (ta.applyTransitionDuration || ta.applyAnimationDuration) && (ba = P.duration ? parseFloat(P.duration) : ba, ta.applyTransitionDuration && (ta.hasTransitions = !0, ra.transitionDuration = ba, ga = 0 < R.style[E + "Property"].length, ea.push(B(ba, ga))), ta.applyAnimationDuration && (ta.hasAnimations = !0, ra.animationDuration = ba, ea.push([V, ba + "s"]))), 0 === ba && !ta.recalculateTimingStyles) return K();
                    if (null != P.delay) {
                        var ua;
                        "boolean" != typeof P.delay && (ua = parseFloat(P.delay), _ = Math.max(ua, 0)), ta.applyTransitionDelay && ea.push([W, ua + "s"]), ta.applyAnimationDelay && ea.push([U, ua + "s"])
                    }
                    return null == P.duration && 0 < ra.transitionDuration && (ta.recalculateTimingStyles = ta.recalculateTimingStyles || ia), aa = 1e3 * _, ca = 1e3 * ba, P.skipBlocking || (ta.blockTransition = 0 < ra.transitionDuration, ta.blockKeyframeAnimation = 0 < ra.animationDuration && 0 < pa.animationDelay && 0 === pa.animationDuration), P.from && (P.cleanupStyles && D(Q, R, Object.keys(P.from)), o(a, P)), ta.blockTransition || ta.blockKeyframeAnimation ? y(ba) : P.skipBlocking || u(R, !1), {
                        $$willAnimate: !0,
                        end: i,
                        start: function() {
                            return S ? void 0 : ($ = {
                                end: i,
                                cancel: k,
                                resume: null,
                                pause: null
                            }, Y = new e($), x(O), Y)
                        }
                    }
                }
            }]
        }]).provider("$$animateCssDriver", ["$$animationProvider", function(a) {
            a.drivers.push("$$animateCssDriver"), this.$get = ["$animateCss", "$rootScope", "$$AnimateRunner", "$rootElement", "$sniffer", "$$jqLite", "$document", function(a, b, c, d, e, f, g) {
                function h(a) {
                    return a.replace(/\bng-\S+\b/g, "")
                }

                function i(a, b) {
                    return O(a) && (a = a.split(" ")), O(b) && (b = b.split(" ")), a.filter(function(a) {
                        return -1 === b.indexOf(a)
                    }).join(" ")
                }

                function j(b, d, e) {
                    function f(a) {
                        var b = {},
                            c = s(a).getBoundingClientRect();
                        return M(["width", "height", "top", "left"], function(a) {
                            var d = c[a];
                            switch (a) {
                                case "top":
                                    d += n.scrollTop;
                                    break;
                                case "left":
                                    d += n.scrollLeft
                            }
                            b[a] = Math.floor(d) + "px"
                        }), b
                    }

                    function g() {
                        var b = h(e.attr("class") || ""),
                            c = i(b, l),
                            b = i(l, b),
                            c = a(k, {
                                to: f(e),
                                addClass: "ng-anchor-in " + c,
                                removeClass: "ng-anchor-out " + b,
                                delay: !0
                            });
                        return c.$$willAnimate ? c : null
                    }

                    function j() {
                        k.remove(), d.removeClass("ng-animate-shim"), e.removeClass("ng-animate-shim")
                    }
                    var k = L(s(d).cloneNode(!0)),
                        l = h(k.attr("class") || "");
                    d.addClass("ng-animate-shim"), e.addClass("ng-animate-shim"), k.addClass("ng-anchor"), o.append(k);
                    var m;
                    if (b = function() {
                            var b = a(k, {
                                addClass: "ng-anchor-out",
                                delay: !0,
                                from: f(d)
                            });
                            return b.$$willAnimate ? b : null
                        }(), !b && (m = g(), !m)) return j();
                    var p = b || m;
                    return {
                        start: function() {
                            function a() {
                                d && d.end()
                            }
                            var b, d = p.start();
                            return d.done(function() {
                                return d = null, !m && (m = g()) ? (d = m.start(), d.done(function() {
                                    d = null, j(), b.complete()
                                }), d) : (j(), void b.complete())
                            }), b = new c({
                                end: a,
                                cancel: a
                            })
                        }
                    }
                }

                function k(a, b, d, e) {
                    var f = m(a, I),
                        g = m(b, I),
                        h = [];
                    return M(e, function(a) {
                        (a = j(d, a.out, a["in"])) && h.push(a)
                    }), f || g || 0 !== h.length ? {
                        start: function() {
                            function a() {
                                M(b, function(a) {
                                    a.end()
                                })
                            }
                            var b = [];
                            f && b.push(f.start()), g && b.push(g.start()), M(h, function(a) {
                                b.push(a.start())
                            });
                            var d = new c({
                                end: a,
                                cancel: a
                            });
                            return c.all(b, function(a) {
                                d.complete(a)
                            }), d
                        }
                    } : void 0
                }

                function m(b) {
                    var c = b.element,
                        d = b.options || {};
                    return b.structural && (d.event = b.event, d.structural = !0, d.applyClassesEarly = !0, "leave" === b.event && (d.onDone = d.domOperation)), d.preparationClasses && (d.event = x(d.event, d.preparationClasses)), b = a(c, d), b.$$willAnimate ? b : null
                }
                if (!e.animations && !e.transitions) return I;
                var n = g[0].body;
                b = s(d);
                var o = L(b.parentNode && 11 === b.parentNode.nodeType || n.contains(b) ? b : n);
                return l(f),
                    function(a) {
                        return a.from && a.to ? k(a.from, a.to, a.classes, a.anchors) : m(a)
                    }
            }]
        }]).provider("$$animateJs", ["$animateProvider", function(a) {
            this.$get = ["$injector", "$$AnimateRunner", "$$jqLite", function(b, c, d) {
                function e(c) {
                    c = N(c) ? c : c.split(" ");
                    for (var d = [], e = {}, f = 0; f < c.length; f++) {
                        var g = c[f],
                            h = a.$$registeredAnimations[g];
                        h && !e[g] && (d.push(b.get(h)), e[g] = !0)
                    }
                    return d
                }
                var f = l(d);
                return function(a, b, d, g) {
                    function h() {
                        g.domOperation(), f(a, g)
                    }

                    function i(a, b, d, e, f) {
                        switch (d) {
                            case "animate":
                                b = [b, e.from, e.to, f];
                                break;
                            case "setClass":
                                b = [b, q, r, f];
                                break;
                            case "addClass":
                                b = [b, q, f];
                                break;
                            case "removeClass":
                                b = [b, r, f];
                                break;
                            default:
                                b = [b, f]
                        }
                        if (b.push(e), a = a.apply(a, b))
                            if (S(a.start) && (a = a.start()), a instanceof c) a.done(f);
                            else if (S(a)) return a;
                        return I
                    }

                    function j(a, b, d, e, f) {
                        var g = [];
                        return M(e, function(e) {
                            var h = e[f];
                            h && g.push(function() {
                                var e, f, g = !1,
                                    j = function(a) {
                                        g || (g = !0, (f || I)(a), e.complete(!a))
                                    };
                                return e = new c({
                                    end: function() {
                                        j()
                                    },
                                    cancel: function() {
                                        j(!0)
                                    }
                                }), f = i(h, a, b, d, function(a) {
                                    j(!1 === a)
                                }), e
                            })
                        }), g
                    }

                    function k(a, b, d, e, f) {
                        var g = j(a, b, d, e, f);
                        if (0 === g.length) {
                            var h, i;
                            "beforeSetClass" === f ? (h = j(a, "removeClass", d, e, "beforeRemoveClass"), i = j(a, "addClass", d, e, "beforeAddClass")) : "setClass" === f && (h = j(a, "removeClass", d, e, "removeClass"), i = j(a, "addClass", d, e, "addClass")), h && (g = g.concat(h)), i && (g = g.concat(i))
                        }
                        return 0 !== g.length ? function(a) {
                            var b = [];
                            return g.length && M(g, function(a) {
                                    b.push(a())
                                }), b.length ? c.all(b, a) : a(),
                                function(a) {
                                    M(b, function(b) {
                                        a ? b.cancel() : b.end()
                                    })
                                }
                        } : void 0
                    }
                    var l = !1;
                    3 === arguments.length && P(d) && (g = d, d = null), g = m(g), d || (d = a.attr("class") || "", g.addClass && (d += " " + g.addClass), g.removeClass && (d += " " + g.removeClass));
                    var o, p, q = g.addClass,
                        r = g.removeClass,
                        s = e(d);
                    if (s.length) {
                        var t, u;
                        "leave" == b ? (u = "leave", t = "afterLeave") : (u = "before" + b.charAt(0).toUpperCase() + b.substr(1), t = b), "enter" !== b && "move" !== b && (o = k(a, b, g, s, u)), p = k(a, b, g, s, t)
                    }
                    if (o || p) {
                        var v;
                        return {
                            $$willAnimate: !0,
                            end: function() {
                                return v ? v.end() : (l = !0, h(), n(a, g), v = new c, v.complete(!0)), v
                            },
                            start: function() {
                                function b(b) {
                                    l = !0, h(), n(a, g), v.complete(b)
                                }
                                if (v) return v;
                                v = new c;
                                var d, e = [];
                                return o && e.push(function(a) {
                                    d = o(a)
                                }), e.length ? e.push(function(a) {
                                    h(), a(!0)
                                }) : h(), p && e.push(function(a) {
                                    d = p(a)
                                }), v.setHost({
                                    end: function() {
                                        l || ((d || I)(void 0), b(void 0))
                                    },
                                    cancel: function() {
                                        l || ((d || I)(!0), b(!0))
                                    }
                                }), c.chain(e, b), v
                            }
                        }
                    }
                }
            }]
        }]).provider("$$animateJsDriver", ["$$animationProvider", function(a) {
            a.drivers.push("$$animateJsDriver"), this.$get = ["$$animateJs", "$$AnimateRunner", function(a, b) {
                function c(b) {
                    return a(b.element, b.event, b.classes, b.options)
                }
                return function(a) {
                    if (!a.from || !a.to) return c(a);
                    var d = c(a.from),
                        e = c(a.to);
                    return d || e ? {
                        start: function() {
                            function a() {
                                return function() {
                                    M(c, function(a) {
                                        a.end()
                                    })
                                }
                            }
                            var c = [];
                            d && c.push(d.start()), e && c.push(e.start()), b.all(c, function(a) {
                                f.complete(a)
                            });
                            var f = new b({
                                end: a(),
                                cancel: a()
                            });
                            return f
                        }
                    } : void 0
                }
            }]
        }])
    }(window, window.angular);;function wizardButtonDirective(a){angular.module("mgo-angular-wizard").directive(a,function(){return{restrict:"A",replace:!1,require:"^wizard",link:function(b,c,d,e){c.on("click",function(c){c.preventDefault(),b.$apply(function(){b.$eval(d[a]),e[a.replace("wz","").toLowerCase()]()})})}}})}angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/popup.html","uib/template/datepicker/year.html","uib/template/modal/backdrop.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(a,b,c,d){var e=d.has("$animateCss")?d.get("$animateCss"):null;return{link:function(d,f,g){function h(){f.hasClass("collapse")&&f.hasClass("in")||b.resolve(l(d)).then(function(){f.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),e?e(f,{addClass:"in",easing:"ease",to:{height:f[0].scrollHeight+"px"}}).start()["finally"](i):a.addClass(f,"in",{to:{height:f[0].scrollHeight+"px"}}).then(i)})}function i(){f.removeClass("collapsing").addClass("collapse").css({height:"auto"}),m(d)}function j(){return f.hasClass("collapse")||f.hasClass("in")?void b.resolve(n(d)).then(function(){f.css({height:f[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),e?e(f,{removeClass:"in",to:{height:"0"}}).start()["finally"](k):a.removeClass(f,"in",{to:{height:"0"}}).then(k)}):k()}function k(){f.css({height:"0"}),f.removeClass("collapsing").addClass("collapse"),o(d)}var l=c(g.expanding),m=c(g.expanded),n=c(g.collapsing),o=c(g.collapsed);d.$eval(g.uibCollapse)||f.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css({height:"auto"}),d.$watch(g.uibCollapse,function(a){a?j():h()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass||"panel-default",a.$watch("isOpen",function(c){b.toggleClass(a.openClass,!!c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)};var e="accordiongroup-"+a.$id+"-"+Math.floor(1e4*Math.random());a.headingId=e+"-tab",a.panelId=e+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.uibAccordionTransclude]},function(a){a&&(b.find("span").html(""),b.find("span").append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(a,b,c,d){a.closeable=!!b.close;var e=angular.isDefined(b.dismissOnTimeout)?c(b.dismissOnTimeout)(a.$parent):null;e&&d(function(){a.close()},parseInt(e,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(a,b){return b.templateUrl||"uib/template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(b,c,d,e){var f=e[0],g=e[1],h=a(d.uibUncheckable);c.find("input").css({display:"none"}),g.$render=function(){c.toggleClass(f.activeClass,angular.equals(g.$modelValue,b.$eval(d.uibBtnRadio)))},c.on(f.toggleEvent,function(){if(!d.disabled){var a=c.hasClass(f.activeClass);(!a||angular.isDefined(d.uncheckable))&&b.$apply(function(){g.$setViewValue(a?null:b.$eval(d.uibBtnRadio)),g.$render()})}}),d.uibUncheckable&&b.$watch(h,function(a){d.$set("uncheckable",a?"":null)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){return angular.isDefined(b)?a.$eval(b):c}var h=d[0],i=d[1];b.find("input").css({display:"none"}),i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.on(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(a,b,c,d,e){function f(){for(;s.length;)s.shift()}function g(a){if(angular.isUndefined(p[a].index))return p[a];for(var b=0,c=p.length;c>b;++b)if(p[b].index===a)return p[b]}function h(c,d,g){t||(angular.extend(c,{direction:g,active:!0}),angular.extend(o.currentSlide||{},{direction:g,active:!1}),e.enabled(b)&&!a.$currentTransition&&c.$element&&o.slides.length>1&&(c.$element.data(q,c.direction),o.currentSlide&&o.currentSlide.$element&&o.currentSlide.$element.data(q,c.direction),a.$currentTransition=!0,e.on("addClass",c.$element,function(b,c){if("close"===c&&(a.$currentTransition=null,e.off("addClass",b),s.length)){var d=s.pop(),g=a.indexOfSlide(d),i=g>o.getCurrentIndex()?"next":"prev";f(),h(d,g,i)}})),o.currentSlide=c,r=d,k())}function i(){m&&(c.cancel(m),m=null)}function j(b){b.length||(a.$currentTransition=null,f())}function k(){i();var b=+a.interval;!isNaN(b)&&b>0&&(m=c(l,b))}function l(){var b=+a.interval;n&&!isNaN(b)&&b>0&&p.length?a.next():a.pause()}var m,n,o=this,p=o.slides=a.slides=[],q="uib-slideDirection",r=-1,s=[];o.currentSlide=null;var t=!1;o.addSlide=function(b,c){b.$element=c,p.push(b),1===p.length||b.active?(a.$currentTransition&&(a.$currentTransition=null),o.select(p[p.length-1]),1===p.length&&a.play()):b.active=!1},o.getCurrentIndex=function(){return o.currentSlide&&angular.isDefined(o.currentSlide.index)?+o.currentSlide.index:r},o.next=a.next=function(){var b=(o.getCurrentIndex()+1)%p.length;return 0===b&&a.noWrap()?void a.pause():o.select(g(b),"next")},o.prev=a.prev=function(){var b=o.getCurrentIndex()-1<0?p.length-1:o.getCurrentIndex()-1;return a.noWrap()&&b===p.length-1?void a.pause():o.select(g(b),"prev")},o.removeSlide=function(a){angular.isDefined(a.index)&&p.sort(function(a,b){return+a.index>+b.index});var b=s.indexOf(a);-1!==b&&s.splice(b,1);var c=p.indexOf(a);p.splice(c,1),d(function(){p.length>0&&a.active?c>=p.length?o.select(p[c-1]):o.select(p[c]):r>c&&r--}),0===p.length&&(o.currentSlide=null,f())},o.select=a.select=function(b,c){var d=a.indexOfSlide(b);void 0===c&&(c=d>o.getCurrentIndex()?"next":"prev"),b&&b!==o.currentSlide&&!a.$currentTransition?h(b,d,c):b&&b!==o.currentSlide&&a.$currentTransition&&(s.push(b),b.active=!1)},a.indexOfSlide=function(a){return angular.isDefined(a.index)?+a.index:p.indexOf(a)},a.isActive=function(a){return o.currentSlide===a},a.pause=function(){a.noPause||(n=!1,i())},a.play=function(){n||(n=!0,k())},a.$on("$destroy",function(){t=!0,i()}),a.$watch("noTransition",function(a){e.enabled(b,!a)}),a.$watch("interval",k),a.$watchCollection("slides",j)}]).directive("uibCarousel",function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",function(){return{require:"^uibCarousel",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}).animation(".item",["$animateCss",function(a){function b(a,b,c){a.removeClass(b),c&&c()}var c="uib-slideDirection";return{beforeAddClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i+" "+h,f);return d.addClass(h),a(d,{addClass:i}).start().done(j),function(){g=!0}}f()},beforeRemoveClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i,f);return a(d,{addClass:i}).start().done(j),function(){g=!0}}f()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter",function(a,b,c,d){function e(a,b){var c=[],e=a.split(""),f=a.indexOf("'");if(f>-1){var g=!1;a=a.split("");for(var h=f;h<a.length;h++)g?("'"===a[h]&&(h+1<a.length&&"'"===a[h+1]?(a[h+1]="$",e[h+1]=""):(e[h]="",g=!1)),a[h]="$"):"'"===a[h]&&(a[h]="$",e[h]="",g=!0);a=a.join("")}return angular.forEach(n,function(d){var f=a.indexOf(d.key);if(f>-1){a=a.split(""),e[f]="("+d.regex+")",a[f]="$";for(var g=f+1,h=f+d.key.length;h>g;g++)e[g]="",a[g]="$";a=a.join(""),c.push({index:f,key:d.key,apply:d[b],matcher:d.regex})}}),{regex:new RegExp("^"+e.join("")+"$"),map:d(c,"index")}}function f(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}function g(a){return parseInt(a,10)}function h(a,b){return a&&b?l(a,b):a}function i(a,b){return a&&b?l(a,b,!0):a}function j(a,b){var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function k(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function l(a,b,c){c=c?-1:1;var d=j(b,a.getTimezoneOffset());return k(a,c*(d-a.getTimezoneOffset()))}var m,n,o=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){m=b.id,this.parsers={},this.formatters={},n=[{key:"yyyy",regex:"\\d{4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(a){this.year=+a+2e3},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){var b=a.getMonth();return/^[0-9]$/.test(b)?c(a,"MM"):c(a,"M")}},{key:"MMMM",regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)},formatter:function(a){return c(a,"MMMM")}},{key:"MMM",regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)},formatter:function(a){return c(a,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){var b=a.getDate();return/^[1-9]$/.test(b)?c(a,"dd"):c(a,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"d")}},{key:"EEEE",regex:b.DATETIME_FORMATS.DAY.join("|"),formatter:function(a){return c(a,"EEEE")}},{key:"EEE",regex:b.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(a){return c(a,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a},formatter:function(a){return c(a,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"s")}},{key:"a",regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)},formatter:function(a){return c(a,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(a){var b=a.match(/([+-])(\d{2})(\d{2})/),c=b[1],d=b[2],e=b[3];this.hours+=g(c+d),this.minutes+=g(c+e)},formatter:function(a){return c(a,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(a){return c(a,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(a){return c(a,"w")}},{key:"GGGG",regex:b.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(a){return c(a,"GGGG")}},{key:"GGG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GGG")}},{key:"GG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GG")}},{key:"G",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"G")}}]},this.init(),this.filter=function(a,c){if(!angular.isDate(a)||isNaN(a)||!c)return"";c=b.DATETIME_FORMATS[c]||c,b.id!==m&&this.init(),this.formatters[c]||(this.formatters[c]=e(c,"formatter"));var d=this.formatters[c],f=d.map,g=c;return f.reduce(function(b,c,d){var e=g.match(new RegExp("(.*)"+c.key));return e&&angular.isString(e[1])&&(b+=e[1],g=g.replace(e[1]+c.key,"")),c.apply?b+c.apply.call(null,a):b},"")},this.parse=function(c,d,g){if(!angular.isString(c)||!d)return c;d=b.DATETIME_FORMATS[d]||d,d=d.replace(o,"\\$&"),b.id!==m&&this.init(),this.parsers[d]||(this.parsers[d]=e(d,"apply"));var h=this.parsers[d],i=h.regex,j=h.map,k=c.match(i),l=!1;if(k&&k.length){var n,p;angular.isDate(g)&&!isNaN(g.getTime())?n={year:g.getFullYear(),month:g.getMonth(),date:g.getDate(),hours:g.getHours(),minutes:g.getMinutes(),seconds:g.getSeconds(),milliseconds:g.getMilliseconds()}:(g&&a.warn("dateparser:","baseDate is not a valid date"),n={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var q=1,r=k.length;r>q;q++){var s=j[q-1];"Z"===s.matcher&&(l=!0),s.apply&&s.apply.call(n,k[q])}var t=l?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,u=l?Date.prototype.setUTCHours:Date.prototype.setHours;return f(n.year,n.month,n.date)&&(!angular.isDate(g)||isNaN(g.getTime())||l?(p=new Date(0),t.call(p,n.year,n.month,n.date),u.call(p,n.hours||0,n.minutes||0,n.seconds||0,n.milliseconds||0)):(p=new Date(g),t.call(p,n.year,n.month,n.date),u.call(p,n.hours,n.minutes,n.seconds,n.milliseconds))),p}},this.toTimezone=h,this.fromTimezone=i,this.timezoneToOffset=j,this.addDateMinutes=k,this.convertTimezoneToLocal=l}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(a){var b=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,c=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(d,e){function f(a,b,c){i.push(a),j.push({scope:a,element:b}),o.forEach(function(b,c){g(b,a)}),a.$on("$destroy",h)}function g(b,d){var e=b.match(c),f=d.$eval(e[1]),g=e[2],h=k[b];if(!h){var i=function(b){var c=null;j.some(function(a){var d=a.scope.$eval(m);return d===b?(c=a,!0):void 0}),h.lastActivated!==c&&(h.lastActivated&&a.removeClass(h.lastActivated.element,f),c&&a.addClass(c.element,f),h.lastActivated=c)};k[b]=h={lastActivated:null,scope:d,watchFn:i,compareWithExp:g,watcher:d.$watch(g,i)}}h.watchFn(d.$eval(g))}function h(a){var b=a.targetScope,c=i.indexOf(b);if(i.splice(c,1),j.splice(c,1),i.length){var d=i[0];angular.forEach(k,function(a){a.scope===b&&(a.watcher=d.$watch(a.compareWithExp,a.watchFn),a.scope=d)})}else k={}}var i=[],j=[],k={},l=e.uibIsClass.match(b),m=l[2],n=l[1],o=n.split(",");return f}}}]),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},e={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/};return{getRawNode:function(a){return a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}c=this.getRawNode(c);for(var e=c.offsetParent||a[0].documentElement;e&&e!==a[0].documentElement&&d(e);)e=e.offsetParent;return e||a[0].documentElement},scrollbarWidth:function(){if(angular.isUndefined(c)){var b=angular.element('<div style="position: absolute; top: -9999px; width: 50px; height: 50px; overflow: scroll;"></div>');a.find("body").append(b),c=b[0].offsetWidth-b[0].clientWidth,c=isFinite(c)?c:0,b.remove()}return c},scrollParent:function(c,e){c=this.getRawNode(c);var f=e?d.hidden:d.normal,g=a[0].documentElement,h=b.getComputedStyle(c),i="absolute"===h.position,j=c.parentElement||g;if(j===g||"fixed"===h.position)return g;for(;j.parentElement&&j!==g;){var k=b.getComputedStyle(j);if(i&&"static"!==k.position&&(i=!1),!i&&f.test(k.overflow+k.overflowY+k.overflowX))break;j=j.parentElement}return j},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=e!==!1?!0:!1;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=e.auto.test(a);return b&&(a=a.replace(e.auto,"")),a=a.split("-"),a[0]=a[0]||"top",e.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",e.secondary.test(a[1])||(a[1]="center"),b?a[2]=!0:a[2]=!1,a},positionElements:function(a,c,d,f){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=f?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(e.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":e.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},positionArrow:function(a,c){a=this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(d){var f=angular.element(d).hasClass("tooltip-inner"),g=f?a.querySelector(".tooltip-arrow"):a.querySelector(".arrow");if(g){if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css({top:"",bottom:"",right:"",left:"",margin:""});var h="border-"+c[0]+"-width",i=b.getComputedStyle(g)[h],j="border-";j+=e.vertical.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0],j+="-radius";var k=b.getComputedStyle(f?d:a)[j],l={top:"auto",bottom:"auto",left:"auto",right:"auto",margin:0};switch(c[0]){case"top":l.bottom=f?"0":"-"+i;break;case"bottom":l.top=f?"0":"-"+i;break;case"left":l.right=f?"0":"-"+i;break;case"right":l.left=f?"0":"-"+i}l[c[1]]=k,angular.element(g).css(l)}}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError","uibDateParser",function(a,b,c,d,e,f,g,h,i,j){var k=this,l={$setViewValue:angular.noop},m={},n=[];this.modes=["day","month","year"],b.datepickerOptions?angular.forEach(["formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","initDate","maxDate","maxMode","minDate","minMode","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"],function(b){switch(b){case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":k[b]=angular.isDefined(a.datepickerOptions[b])?d(a.datepickerOptions[b])(a.$parent):h[b];break;case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":k[b]=angular.isDefined(a.datepickerOptions[b])?a.datepickerOptions[b]:h[b];break;case"startingDay":angular.isDefined(a.datepickerOptions.startingDay)?k.startingDay=a.datepickerOptions.startingDay:angular.isNumber(h.startingDay)?k.startingDay=h.startingDay:k.startingDay=(e.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":a.datepickerOptions[b]?a.$watch(function(){return a.datepickerOptions[b]},function(a){a?angular.isDate(a)?k[b]=j.fromTimezone(new Date(a),m.timezone):k[b]=new Date(g(a,"medium")):k[b]=null,k.refreshView()}):k[b]=h[b]?j.fromTimezone(new Date(h[b]),m.timezone):null;break;case"maxMode":case"minMode":a.datepickerOptions[b]?a.$watch(function(){return a.datepickerOptions[b]},function(c){k[b]=a[b]=angular.isDefined(c)?c:datepickerOptions[b],("minMode"===b&&k.modes.indexOf(a.datepickerMode)<k.modes.indexOf(k[b])||"maxMode"===b&&k.modes.indexOf(a.datepickerMode)>k.modes.indexOf(k[b]))&&(a.datepickerMode=k[b])}):k[b]=a[b]=h[b]||null;break;case"initDate":a.datepickerOptions.initDate?(this.activeDate=j.fromTimezone(a.datepickerOptions.initDate,m.timezone)||new Date,a.$watch(function(){return a.datepickerOptions.initDate},function(a){a&&(l.$isEmpty(l.$modelValue)||l.$invalid)&&(k.activeDate=j.fromTimezone(a,m.timezone),k.refreshView())})):this.activeDate=new Date}}):(angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle"],function(c){k[c]=angular.isDefined(b[c])?d(b[c])(a.$parent):h[c]}),angular.forEach(["showWeeks","yearRows","yearColumns","shortcutPropagation"],function(c){k[c]=angular.isDefined(b[c])?a.$parent.$eval(b[c]):h[c]}),angular.isDefined(b.startingDay)?k.startingDay=a.$parent.$eval(b.startingDay):angular.isNumber(h.startingDay)?k.startingDay=h.startingDay:k.startingDay=(e.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7,angular.forEach(["minDate","maxDate"],function(c){b[c]?n.push(a.$parent.$watch(b[c],function(a){a?angular.isDate(a)?k[c]=j.fromTimezone(new Date(a),m.timezone):k[c]=new Date(g(a,"medium")):k[c]=null,k.refreshView()})):k[c]=h[c]?j.fromTimezone(new Date(h[c]),m.timezone):null}),angular.forEach(["minMode","maxMode"],function(c){b[c]?n.push(a.$parent.$watch(b[c],function(d){k[c]=a[c]=angular.isDefined(d)?d:b[c],("minMode"===c&&k.modes.indexOf(a.datepickerMode)<k.modes.indexOf(k[c])||"maxMode"===c&&k.modes.indexOf(a.datepickerMode)>k.modes.indexOf(k[c]))&&(a.datepickerMode=k[c])})):k[c]=a[c]=h[c]||null}),angular.isDefined(b.initDate)?(this.activeDate=j.fromTimezone(a.$parent.$eval(b.initDate),m.timezone)||new Date,n.push(a.$parent.$watch(b.initDate,function(a){a&&(l.$isEmpty(l.$modelValue)||l.$invalid)&&(k.activeDate=j.fromTimezone(a,m.timezone),k.refreshView())}))):this.activeDate=new Date),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),a.disabled=angular.isDefined(b.disabled)||!1,angular.isDefined(b.ngDisabled)&&n.push(a.$parent.$watch(b.ngDisabled,function(b){a.disabled=b,k.refreshView()})),a.isActive=function(b){return 0===k.compare(b.date,k.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){l=a,m=a.$options||h.ngModelOptions,l.$modelValue&&(this.activeDate=l.$modelValue),l.$render=function(){k.render()}},this.render=function(){if(l.$viewValue){var a=new Date(l.$viewValue),b=!isNaN(a);b?this.activeDate=j.fromTimezone(a,m.timezone):i||f.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){a.selectedDt=null,this._refreshView(),a.activeDt&&(a.activeDateId=a.activeDt.uid);var b=l.$viewValue?new Date(l.$viewValue):null;b=j.fromTimezone(b,m.timezone),l.$setValidity("dateDisabled",!b||this.element&&!this.isDisabled(b))}},this.createDateObject=function(b,c){var d=l.$viewValue?new Date(l.$viewValue):null;d=j.fromTimezone(d,m.timezone);var e={date:b,label:j.filter(b,c),selected:d&&0===this.compare(b,d),disabled:this.isDisabled(b),current:0===this.compare(b,new Date),customClass:this.customClass(b)||null};return d&&0===this.compare(b,d)&&(a.selectedDt=e),k.activeDate&&0===this.compare(e.date,k.activeDate)&&(a.activeDt=e),e},this.isDisabled=function(c){return a.disabled||this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===k.minMode){var c=l.$viewValue?j.fromTimezone(new Date(l.$viewValue),m.timezone):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c=j.toTimezone(c,m.timezone),l.$setViewValue(c),l.$render()}else k.activeDate=b,a.datepickerMode=k.modes[k.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=k.activeDate.getFullYear()+a*(k.step.years||0),c=k.activeDate.getMonth()+a*(k.step.months||0);k.activeDate.setFullYear(b,c,1),k.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===k.maxMode&&1===b||a.datepickerMode===k.minMode&&-1===b||(a.datepickerMode=k.modes[k.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var o=function(){k.element[0].focus()};a.$on("uib:datepicker.focus",o),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey&&!a.disabled)if(b.preventDefault(),k.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(k.isDisabled(k.activeDate))return;a.select(k.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(k.handleKeyDown(c,b),k.refreshView()):a.toggleMode("up"===c?1:-1)},a.$on("$destroy",function(){for(;n.length;)n.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?f[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}
var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;b>f;)c=new Date(e),d[f++]=c,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),f=new Date(this.activeDate);f.setFullYear(b,d,1);var g=this.startingDay-f.getDay(),h=g>0?7-g:-g,i=new Date(f);h>0&&i.setDate(-h+1);for(var j=this.getDates(i,42),k=0;42>k;k++)j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+"-"+k});a.labels=new Array(7);for(var l=0;7>l;l++)a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,"EEEE")};if(a.title=c(this.activeDate,this.formatDayTitle),a.rows=this.split(j,7),a.showWeeks){a.weekNumbers=[];for(var m=(11-this.startingDay)%7,n=a.rows.length,o=0;n>o;o++)a.weekNumbers.push(e(a.rows[o][m].date))}},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(b.getFullYear(),b.getMonth(),b.getDate());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var e=this.activeDate.getMonth()+("pageup"===a?-1:1);this.activeDate.setMonth(e,1),c=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(c)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;12>f;f++)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+"-"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,3)},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()),d=new Date(b.getFullYear(),b.getMonth());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=this.activeDate.getFullYear()+("pageup"===a?-1:1);this.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);this.activeDate.setMonth(c)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a){return parseInt((a-1)/f,10)*f+1}var e,f;this.element=b,this.yearpickerInit=function(){e=this.yearColumns,f=this.yearRows*e,this.step={years:f}},this._refreshView=function(){for(var b,c=new Array(f),g=0,h=d(this.activeDate.getFullYear());f>g;g++)b=new Date(this.activeDate),b.setFullYear(h+g,0,1),c[g]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=this.split(c,e),a.columns=e},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=e:"right"===a?c+=1:"down"===a?c+=e:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*f:"home"===a?c=d(this.activeDate.getFullYear()):"end"===a&&(c=d(this.activeDate.getFullYear())+f-1),this.activeDate.setFullYear(c)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",datepickerOptions:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],controller:"UibDaypickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],controller:"UibMonthpickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],controller:"UibYearpickerController",link:function(a,b,c,d){var e=d[0];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepicker/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$parse","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function o(b){var c=j.parse(b,t,a.date);if(isNaN(c))for(var d=0;d<E.length;d++)if(c=j.parse(b,E[d],a.date),!isNaN(c))return c;return c}function p(a){if(angular.isNumber(a)&&(a=new Date(a)),!a)return null;if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=o(a);if(!isNaN(b))return j.toTimezone(b,C.timezone)}return B.$options&&B.$options.allowInvalid?a:void 0}function q(a,b){var d=a||b;return c.ngRequired||d?(angular.isNumber(d)&&(d=new Date(d)),d?angular.isDate(d)&&!isNaN(d)?!0:angular.isString(d)?!isNaN(o(b)):!1:!0):!0}function r(c){if(a.isOpen||!a.disabled){var d=D[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}}function s(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}var t,u,v,w,x,y,z,A,B,C,D,E,F={},G=!1,H=[];a.watchData={},this.init=function(h){if(B=h,C=h.$options||m.ngModelOptions,u=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):k.closeOnDateSelection,v=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):k.appendToBody,w=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):k.onOpenFocus,x=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:k.datepickerPopupTemplateUrl,y=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:k.datepickerTemplateUrl,E=angular.isDefined(c.altInputFormats)?a.$parent.$eval(c.altInputFormats):k.altInputFormats,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):k.showButtonBar,k.html5Types[c.type]?(t=k.html5Types[c.type],G=!0):(t=c.uibDatepickerPopup||k.datepickerPopup,c.$observe("uibDatepickerPopup",function(a,b){var c=a||k.datepickerPopup;if(c!==t&&(t=c,B.$modelValue=null,!t))throw new Error("uibDatepickerPopup must have a date format specified.")})),!t)throw new Error("uibDatepickerPopup must have a date format specified.");if(G&&c.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");z=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),a.ngModelOptions=angular.copy(C),a.ngModelOptions.timezone=null,z.attr({"ng-model":"date","ng-model-options":"ngModelOptions","ng-change":"dateSelection(date)","template-url":x}),A=angular.element(z.children()[0]),A.attr("template-url",y),G&&"month"===c.type&&(A.attr("datepicker-mode",'"month"'),A.attr("min-mode","month")),a.datepickerOptions&&angular.forEach(a.datepickerOptions,function(a,b){-1===["minDate","maxDate","minMode","maxMode","initDate","datepickerMode"].indexOf(b)?A.attr(n(b),a):A.attr(n(b),"datepickerOptions."+b)}),angular.forEach(["minMode","maxMode","datepickerMode","shortcutPropagation"],function(b){if(c[b]){var d=e(c[b]),f={get:function(){return d(a.$parent)}};if(A.attr(n(b),"watchData."+b),"datepickerMode"===b){var g=d.assign;f.set=function(b){g(a.$parent,b)}}Object.defineProperty(a.watchData,b,f)}}),angular.forEach(["minDate","maxDate","initDate"],function(b){if(c[b]){var d=e(c[b]);H.push(a.$parent.$watch(d,function(c){"minDate"===b||"maxDate"===b?(null===c?F[b]=null:angular.isDate(c)?F[b]=j.fromTimezone(new Date(c),C.timezone):F[b]=new Date(i(c,"medium")),a.watchData[b]=null===c?null:F[b]):a.watchData[b]=j.fromTimezone(new Date(c),C.timezone)})),A.attr(n(b),"watchData."+b)}}),c.dateDisabled&&A.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRows","yearColumns"],function(a){angular.isDefined(c[a])&&A.attr(n(a),c[a])}),c.customClass&&A.attr("custom-class","customClass({ date: date, mode: mode })"),G?B.$formatters.push(function(b){return a.date=j.fromTimezone(b,C.timezone),b}):(B.$$parserName="date",B.$validators.date=q,B.$parsers.unshift(p),B.$formatters.push(function(b){return B.$isEmpty(b)?(a.date=b,b):(a.date=j.fromTimezone(b,C.timezone),angular.isNumber(a.date)&&(a.date=new Date(a.date)),j.filter(a.date,t))})),B.$viewChangeListeners.push(function(){a.date=o(B.$viewValue)}),b.on("keydown",s),D=d(z)(a),z.remove(),v?f.find("body").append(D):b.after(D),a.$on("$destroy",function(){for(a.isOpen===!0&&(g.$$phase||a.$apply(function(){a.isOpen=!1})),D.remove(),b.off("keydown",s),f.off("click",r);H.length;)H.shift()()})},a.getText=function(b){return a[b+"Text"]||k[b+"Text"]},a.isDisabled=function(b){return"today"===b&&(b=new Date),a.watchData.minDate&&a.compare(b,F.minDate)<0||a.watchData.maxDate&&a.compare(b,F.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){angular.isDefined(c)&&(a.date=c);var d=a.date?j.filter(a.date,t):null;b.val(d),B.$setViewValue(d),u&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(c.stopPropagation(),a.isOpen=!1,b[0].focus())},a.select=function(b){if("today"===b){var c=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(c.getFullYear(),c.getMonth(),c.getDate())):b=new Date(c.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(){a.isOpen=!1,b[0].focus()},a.disabled=angular.isDefined(c.disabled)||!1,c.ngDisabled&&H.push(a.$parent.$watch(e(c.ngDisabled),function(b){a.disabled=b})),a.$watch("isOpen",function(c){c?a.disabled?a.isOpen=!1:(a.position=v?h.offset(b):h.position(b),a.position.top=a.position.top+b.prop("offsetHeight"),l(function(){w&&a.$broadcast("uib:datepicker.focus"),f.on("click",r)},0,!1)):f.off("click",r)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(a){return function(b,c){var d;return function(){var e=this,f=Array.prototype.slice.call(arguments);d&&a.cancel(d),d=a(function(){b.apply(e,f)},c)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b){c||(a.on("click",d),a.on("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.off("click",d),a.off("keydown",e))};var d=function(a){if(c&&!(a&&"disabled"===c.getAutoClose()||a&&3===a.which)){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which?(c.focusToggleElement(),d()):c.isKeynavEnabled()&&-1!==[38,40].indexOf(a.which)&&c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=this,o=a.$new(),p=e.appendToOpenClass,q=e.openClass,r=angular.noop,s=c.onToggle?d(c.onToggle):angular.noop,t=!1,u=null,v=!1,w=i.find("body");b.addClass("dropdown"),this.init=function(){if(c.isOpen&&(m=d(c.isOpen),r=m.assign,a.$watch(m,function(a){o.isOpen=!!a})),angular.isDefined(c.dropdownAppendTo)){var e=d(c.dropdownAppendTo)(o);e&&(u=angular.element(e))}t=angular.isDefined(c.dropdownAppendToBody),v=angular.isDefined(c.keyboardNav),t&&!u&&(u=w),u&&n.dropdownMenu&&(u.append(n.dropdownMenu),b.on("$destroy",function(){n.dropdownMenu.remove()}))},this.toggle=function(a){return o.isOpen=arguments.length?!!a:!o.isOpen},this.isOpen=function(){return o.isOpen},o.getToggleElement=function(){return n.toggleElement},o.getAutoClose=function(){return c.autoClose||"always"},o.getElement=function(){return b},o.isKeynavEnabled=function(){return v},o.focusDropdownEntry=function(a){var c=n.dropdownMenu?angular.element(n.dropdownMenu).find("a"):b.find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(n.selectedOption)?n.selectedOption=n.selectedOption===c.length-1?n.selectedOption:n.selectedOption+1:n.selectedOption=0;break;case 38:angular.isNumber(n.selectedOption)?n.selectedOption=0===n.selectedOption?0:n.selectedOption-1:n.selectedOption=c.length-1}c[n.selectedOption].focus()},o.getDropdownElement=function(){return n.dropdownMenu},o.focusToggleElement=function(){n.toggleElement&&n.toggleElement[0].focus()},o.$watch("isOpen",function(c,d){if(u&&n.dropdownMenu){var e,i,m=h.positionElements(b,n.dropdownMenu,"bottom-left",!0);if(e={top:m.top+"px",display:c?"block":"none"},i=n.dropdownMenu.hasClass("dropdown-menu-right"),i?(e.left="auto",e.right=window.innerWidth-(m.left+b.prop("offsetWidth"))+"px"):(e.left=m.left+"px",e.right="auto"),!t){var v=h.offset(u);e.top=m.top-v.top+"px",i?e.right=window.innerWidth-(m.left-v.left+b.prop("offsetWidth"))+"px":e.left=m.left-v.left+"px"}n.dropdownMenu.css(e)}var w=u?u:b;if(g[c?"addClass":"removeClass"](w,u?p:q).then(function(){angular.isDefined(c)&&c!==d&&s(a,{open:!!c})}),c)n.dropdownMenuTemplateUrl&&k(n.dropdownMenuTemplateUrl).then(function(a){l=o.$new(),j(a.trim())(l,function(a){var b=a;n.dropdownMenu.replaceWith(b),n.dropdownMenu=b})}),o.focusToggleElement(),f.open(o);else{if(n.dropdownMenuTemplateUrl){l&&l.$destroy();var x=angular.element('<ul class="dropdown-menu"></ul>');n.dropdownMenu.replaceWith(x),n.dropdownMenu=x}f.close(o),n.selectedOption=null}angular.isFunction(r)&&r(a,c)}),a.$on("$locationChangeSuccess",function(){"disabled"!==o.getAutoClose()&&(o.isOpen=!1)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(a,b,c,d){d.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(a,b,c,d){if(d&&!angular.isDefined(c.dropdownNested)){b.addClass("dropdown-menu");var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}).provider("$uibResolve",function(){var a=this;this.resolver=null,this.setResolver=function(a){this.resolver=a},this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,f,g){if(d)return d.resolve(a,e,f,g);var h=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?h.push(c.resolve(b.invoke(a))):angular.isString(a)?h.push(c.resolve(b.get(a))):h.push(c.resolve(a))}),c.all(h).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animateCss","$injector","$uibModalStack",function(a,b,c){function d(b,d,e){e.modalInClass&&(a(d,{addClass:e.modalInClass}).start(),b.$on(c.NOW_CLOSING_EVENT,function(c,f){var g=f();b.modalOptions.animation?a(d,{removeClass:e.modalInClass}).start().then(g):g()}))}return{replace:!0,templateUrl:"uib/template/modal/backdrop.html",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animate","$animateCss","$document",function(a,b,c,d,e){return{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(f,g,h){g.addClass(h.windowClass||""),g.addClass(h.windowTopClass||""),f.size=h.size,f.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},g.on("click",f.close),f.$isRendered=!0;var i=b.defer();h.$observe("modalRender",function(a){"true"===a&&i.resolve()}),i.promise.then(function(){var i=null;h.modalInClass&&(i=d(g,{addClass:h.modalInClass}).start(),f.$on(a.NOW_CLOSING_EVENT,function(a,b){var e=b();d?d(g,{removeClass:h.modalInClass}).start().then(e):c.removeClass(g,h.modalInClass).then(e)})),b.when(i).then(function(){if(!e[0].activeElement||!g[0].contains(e[0].activeElement)){var a=g[0].querySelector("[autofocus]");a?a.focus():g[0].focus()}});var j=a.getTop();j&&a.modalRendered(j.key)})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap",function(a,b,c,d,e,f,g,h){function i(){for(var a=-1,b=t.keys(),c=0;c<b.length;c++)t.get(b[c]).value.backdrop&&(a=c);return a}function j(a,b){var c=t.get(a).value,d=c.appendTo;t.remove(a),m(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||s;u.remove(b,a),d.toggleClass(b,u.hasKey(b)),k(!0)},c.closedDeferred),l(),b&&b.focus?b.focus():d.focus&&d.focus()}function k(a){var b;t.length()>0&&(b=t.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function l(){if(p&&-1===i()){var a=q;m(p,q,function(){a=null}),p=void 0,q=void 0}}function m(a,c,d,e){function g(){g.done||(g.done=!0,b(a,{event:"leave"}).start().then(function(){a.remove(),e&&e.resolve()}),c.$destroy(),d&&d())}var h,i=null,j=function(){return h||(h=f.defer(),i=h.promise),function(){h.resolve()}};return c.$broadcast(v.NOW_CLOSING_EVENT,j),f.when(i).then(g)}function n(a){if(a.isDefaultPrevented())return a;var b=t.top();if(b)switch(a.which){case 27:b.value.keyboard&&(a.preventDefault(),e.$apply(function(){v.dismiss(b.key,"escape key press")}));break;case 9:v.loadFocusElementList(b);var c=!1;a.shiftKey?(v.isFocusInFirstItem(a)||v.isModalFocused(a,b))&&(c=v.focusLastFocusableElement()):v.isFocusInLastItem(a)&&(c=v.focusFirstFocusableElement()),c&&(a.preventDefault(),a.stopPropagation())}}function o(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var p,q,r,s="modal-open",t=h.createNew(),u=g.createNew(),v={NOW_CLOSING_EVENT:"modal.stack.now-closing"},w=0,x="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return e.$watch(i,function(a){q&&(q.index=a)}),c.on("keydown",n),e.$on("$destroy",function(){c.off("keydown",n)}),v.open=function(b,f){var g=c[0].activeElement,h=f.openedClass||s;k(!1),t.add(b,{deferred:f.deferred,renderDeferred:f.renderDeferred,closedDeferred:f.closedDeferred,modalScope:f.scope,backdrop:f.backdrop,keyboard:f.keyboard,openedClass:f.openedClass,windowTopClass:f.windowTopClass,animation:f.animation,appendTo:f.appendTo}),u.put(h,b);var j=f.appendTo,l=i();if(!j.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");l>=0&&!p&&(q=e.$new(!0),q.modalOptions=f,q.index=l,p=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),p.attr("backdrop-class",f.backdropClass),f.animation&&p.attr("modal-animation","true"),d(p)(q),a.enter(p,j));var m=angular.element('<div uib-modal-window="modal-window"></div>');m.attr({"template-url":f.windowTemplateUrl,"window-class":f.windowClass,"window-top-class":f.windowTopClass,size:f.size,index:t.length()-1,animate:"animate"}).html(f.content),f.animation&&m.attr("modal-animation","true"),a.enter(d(m)(f.scope),j).then(function(){a.addClass(j,h)}),t.top().value.modalDomEl=m,t.top().value.modalOpener=g,v.clearFocusListCache()},v.close=function(a,b){var c=t.get(a);return c&&o(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),j(a,c.value.modalOpener),!0):!c},v.dismiss=function(a,b){var c=t.get(a);return c&&o(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),j(a,c.value.modalOpener),!0):!c},v.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},v.getTop=function(){return t.top()},v.modalRendered=function(a){var b=t.get(a);b&&b.value.renderDeferred.resolve()},v.focusFirstFocusableElement=function(){return r.length>0?(r[0].focus(),!0):!1},v.focusLastFocusableElement=function(){return r.length>0?(r[r.length-1].focus(),!0):!1},v.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length)return(a.target||a.srcElement)===c[0]}return!1},v.isFocusInFirstItem=function(a){return r.length>0?(a.target||a.srcElement)===r[0]:!1},v.isFocusInLastItem=function(a){return r.length>0?(a.target||a.srcElement)===r[r.length-1]:!1},v.clearFocusListCache=function(){r=[],w=0},v.loadFocusElementList=function(a){if((void 0===r||!r.length)&&a){var b=a.value.modalDomEl;b&&b.length&&(r=b[0].querySelectorAll(x))}},v}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(e){function j(){return r}var l=c.defer(),m=c.defer(),n=c.defer(),o=c.defer(),p={result:l.promise,opened:m.promise,closed:n.promise,rendered:o.promise,close:function(a){return h.close(p,a)},dismiss:function(a){return h.dismiss(p,a)}};if(e=angular.extend({},a.options,e),e.resolve=e.resolve||{},e.appendTo=e.appendTo||d.find("body").eq(0),!e.template&&!e.templateUrl)throw new Error("One of template or templateUrl options is required.");var q,r=c.all([i(e),g.resolve(e.resolve,{},null,null)]);return q=k=c.all([k]).then(j,j).then(function(a){var c=e.scope||b,d=c.$new();d.$close=p.close,d.$dismiss=p.dismiss,d.$on("$destroy",function(){d.$$uibDestructionScheduled||d.$dismiss("$uibUnscheduledDestruction")});var g,i={};e.controller&&(i.$scope=d,i.$uibModalInstance=p,angular.forEach(a[1],function(a,b){i[b]=a}),g=f(e.controller,i),e.controllerAs&&(e.bindToController&&(g.$close=d.$close,g.$dismiss=d.$dismiss,angular.extend(g,c)),d[e.controllerAs]=g)),h.open(p,{scope:d,deferred:l,renderDeferred:o,closedDeferred:n,content:a[0],animation:e.animation,backdrop:e.backdrop,keyboard:e.keyboard,backdropClass:e.backdropClass,windowTopClass:e.windowTopClass,windowClass:e.windowClass,windowTemplateUrl:e.windowTemplateUrl,size:e.size,openedClass:e.openedClass,appendTo:e.appendTo}),m.resolve(!0)},function(a){m.reject(a),l.reject(a)})["finally"](function(){k===q&&(k=null)}),p},j}]};return a}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,c,d){b.setNumPages=d.numPages?a(d.numPages).assign:angular.noop,b.ngModelCtrl={$setViewValue:angular.noop},b._watchers=[],b.init=function(e,f){b.ngModelCtrl=e,b.config=f,e.$render=function(){b.render()},d.itemsPerPage?b._watchers.push(c.$parent.$watch(a(d.itemsPerPage),function(a){b.itemsPerPage=parseInt(a,10),c.totalPages=b.calculateTotalPages(),b.updatePage()})):b.itemsPerPage=f.itemsPerPage,c.$watch("totalItems",function(a,d){(angular.isDefined(a)||a!==d)&&(c.totalPages=b.calculateTotalPages(),b.updatePage())})},b.calculateTotalPages=function(){var a=b.itemsPerPage<1?1:Math.ceil(c.totalItems/b.itemsPerPage);return Math.max(a||0,1)},b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1},c.selectPage=function(a,d){d&&d.preventDefault();var e=!c.ngDisabled||!d;e&&c.page!==a&&a>0&&a<=c.totalPages&&(d&&d.target&&d.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())},c.getText=function(a){return c[a+"Text"]||b.config[a+"Text"]},c.noPrevious=function(){return 1===c.page},c.noNext=function(){return c.page===c.totalPages},b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages),c.page>c.totalPages?c.selectPage(c.totalPages):b.ngModelCtrl.$render()},c.$on("$destroy",function(){for(;b._watchers.length;)b._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,c,d){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):d.align,c.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,b){return b.templateUrl||"uib/template/pager/pager.html"},replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&f.init(g,a)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,c,d,e){function f(a,b,c){return{number:a,text:b,active:c}}function g(a,b){var c=[],d=1,e=b,g=angular.isDefined(i)&&b>i;g&&(j?(d=Math.max(a-Math.floor(i/2),1),e=d+i-1,e>b&&(e=b,d=e-i+1)):(d=(Math.ceil(a/i)-1)*i+1,e=Math.min(d+i-1,b)));for(var h=d;e>=h;h++){var m=f(h,h,h===a);c.push(m)}if(g&&i>0&&(!j||k||l)){if(d>1){if(!l||d>3){var n=f(d-1,"...",!1);c.unshift(n)}if(l){if(3===d){var o=f(2,"2",!1);c.unshift(o)}var p=f(1,"1",!1);c.unshift(p)}}if(b>e){if(!l||b-2>e){var q=f(e+1,"...",!1);c.push(q)}if(l){if(e===b-2){var r=f(b-1,b-1,!1);c.push(r)}var s=f(b,b,!1);c.push(s)}}}return c}var h=this,i=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):e.maxSize,j=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):e.rotate,k=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):e.forceEllipses,l=angular.isDefined(b.boundaryLinkNumbers)?a.$parent.$eval(b.boundaryLinkNumbers):e.boundaryLinkNumbers;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):e.boundaryLinks,a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):e.directionLinks,d.create(this,a,b),b.maxSize&&h._watchers.push(a.$parent.$watch(c(b.maxSize),function(a){i=parseInt(a,10),h.render()}));var m=this.render;this.render=function(){m(),a.page>0&&a.page<=a.totalPages&&(a.pages=g(a.page,a.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},replace:!0,link:function(a,c,d,e){var f=e[0],g=e[1];g&&f.init(g,b)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){function n(a){if(27===a.which){var b=o.top();b&&(b.value.close(),o.removeTop(),b=null)}}var o=m.createNew();return h.on("keypress",n),k.$on("$destroy",function(){h.off("keypress",n)}),function(e,k,m,n){function p(a){var b=(a||n.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}n=angular.extend({},b,d,n);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup title="'+r+"title"+s+'" '+(n.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'placement="'+r+"placement"+s+'" popup-class="'+r+"popupClass"+s+'" animation="animation" is-open="isOpen"origin-scope="origScope" style="visibility: hidden; display: block; top: -9999px; left: -9999px;"></div>';return{compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){M.isOpen?q():m()}function m(){(!L||a.$eval(d[k+"Enable"]))&&(u(),x(),M.popupDelay?G||(G=g(r,M.popupDelay,!1)):r())}function q(){s(),M.popupCloseDelay?H||(H=g(t,M.popupCloseDelay,!1)):t()}function r(){return s(),u(),M.content?(v(),void M.$evalAsync(function(){M.isOpen=!0,y(!0),
R()})):angular.noop}function s(){G&&(g.cancel(G),G=null),I&&(g.cancel(I),I=null)}function t(){M&&M.$evalAsync(function(){M&&(M.isOpen=!1,y(!1),M.animation?F||(F=g(w,150,!1)):w())})}function u(){H&&(g.cancel(H),H=null),F&&(g.cancel(F),F=null)}function v(){D||(E=M.$new(),D=c(E,function(a){J?h.find("body").append(a):b.after(a)}),z())}function w(){s(),u(),A(),D&&(D.remove(),D=null),E&&(E.$destroy(),E=null)}function x(){M.title=d[k+"Title"],P?M.content=P(a):M.content=d[e],M.popupClass=d[k+"Class"],M.placement=angular.isDefined(d[k+"Placement"])?d[k+"Placement"]:n.placement;var b=parseInt(d[k+"PopupDelay"],10),c=parseInt(d[k+"PopupCloseDelay"],10);M.popupDelay=isNaN(b)?n.popupDelay:b,M.popupCloseDelay=isNaN(c)?n.popupCloseDelay:c}function y(b){O&&angular.isFunction(O.assign)&&O.assign(a,b)}function z(){Q.length=0,P?(Q.push(a.$watch(P,function(a){M.content=a,!a&&M.isOpen&&t()})),Q.push(E.$watch(function(){N||(N=!0,E.$$postDigest(function(){N=!1,M&&M.isOpen&&R()}))}))):Q.push(d.$observe(e,function(a){M.content=a,!a&&M.isOpen?t():R()})),Q.push(d.$observe(k+"Title",function(a){M.title=a,M.isOpen&&R()})),Q.push(d.$observe(k+"Placement",function(a){M.placement=a?a:n.placement,M.isOpen&&R()}))}function A(){Q.length&&(angular.forEach(Q,function(a){a()}),Q.length=0)}function B(a){M&&M.isOpen&&D&&(b[0].contains(a.target)||D[0].contains(a.target)||q())}function C(){var a=d[k+"Trigger"];S(),K=p(a),"none"!==K.show&&K.show.forEach(function(a,c){"outsideClick"===a?(b.on("click",j),h.on("click",B)):a===K.hide[c]?b.on(a,j):a&&(b.on(a,m),b.on(K.hide[c],q)),b.on("keypress",function(a){27===a.which&&q()})})}var D,E,F,G,H,I,J=angular.isDefined(n.appendToBody)?n.appendToBody:!1,K=p(void 0),L=angular.isDefined(d[k+"Enable"]),M=a.$new(!0),N=!1,O=angular.isDefined(d[k+"IsOpen"])?l(d[k+"IsOpen"]):!1,P=n.useContentExp?l(d[e]):!1,Q=[],R=function(){D&&D.html()&&(I||(I=g(function(){D.css({top:0,left:0});var a=i.positionElements(b,D,M.placement,J);D.css({top:a.top+"px",left:a.left+"px",visibility:"visible"}),n.placementClassPrefix&&D.removeClass("top bottom left right"),D.removeClass(n.placementClassPrefix+"top "+n.placementClassPrefix+"top-left "+n.placementClassPrefix+"top-right "+n.placementClassPrefix+"bottom "+n.placementClassPrefix+"bottom-left "+n.placementClassPrefix+"bottom-right "+n.placementClassPrefix+"left "+n.placementClassPrefix+"left-top "+n.placementClassPrefix+"left-bottom "+n.placementClassPrefix+"right "+n.placementClassPrefix+"right-top "+n.placementClassPrefix+"right-bottom");var c=a.placement.split("-");D.addClass(c[0]+" "+n.placementClassPrefix+a.placement),i.positionArrow(D,a.placement),I=null},0,!1)))};M.origScope=a,M.isOpen=!1,o.add(M,{close:t}),M.contentExp=function(){return M.content},d.$observe("disabled",function(a){a&&s(),a&&M.isOpen&&t()}),O&&a.$watch(O,function(a){M&&!a===M.isOpen&&j()});var S=function(){K.show.forEach(function(a){"outsideClick"===a?b.off("click",j):(b.off(a,m),b.off(a,j))}),K.hide.forEach(function(a){"outsideClick"===a?h.off("click",B):b.off(a,q)})};C();var T=a.$eval(d[k+"Animation"]);M.animation=angular.isDefined(T)?!!T:n.animation;var U,V=k+"AppendToBody";U=V in d&&void 0===d[V]?!0:a.$eval(d[V]),J=angular.isDefined(U)?U:J,a.$on("$destroy",function(){S(),w(),o.remove(M),M=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",["$uibPosition",function(a){return{restrict:"A",link:function(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}else c.addClass("top");b.popupClass&&c.addClass(b.popupClass),b.animation()&&c.addClass(d.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(a){return a("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(a){return a("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(a){return a("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c,f){e||c.css({transition:"none"}),this.bars.push(b),b.max=a.max,b.title=f&&angular.isDefined(f.title)?f.title:"progressbar",b.$watch("value",function(a){b.recalculatePercentage()}),b.recalculatePercentage=function(){var a=d.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);a>100&&(b.percent-=a-100)},b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch("max",function(b){d.bars.forEach(function(b){b.max=a.max,b.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(d.$viewValue===b?0:b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect(),a.selectCalled=!1)}),a.active=!0,a.selectCalled||(a.onSelect(),a.selectCalled=!0)},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e===c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{type:"@"},controller:"UibTabsetController",templateUrl:"uib/template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",replace:!0,templateUrl:"uib/template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(b,c,d,e,f){b.$watch("active",function(a){a&&e.select(b)}),b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,b,c,d,e,f,g){function h(){var b=+a.hours,c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===u[1]&&(b+=12)),b):void 0}function i(){var b=+a.minutes;return b>=0&&60>b?b:void 0}function j(){var b=+a.seconds;return b>=0&&60>b?b:void 0}function k(a){return null===a?"":angular.isDefined(a)&&a.toString().length<2?"0"+a:a.toString()}function l(a){m(),t.$setViewValue(new Date(r)),n(a)}function m(){t.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1,a.invalidSeconds=!1}function n(b){if(t.$modelValue){var c=r.getHours(),d=r.getMinutes(),e=r.getSeconds();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:k(c),"m"!==b&&(a.minutes=k(d)),a.meridian=r.getHours()<12?u[0]:u[1],"s"!==b&&(a.seconds=k(e)),a.meridian=r.getHours()<12?u[0]:u[1]}else a.hours=null,a.minutes=null,a.seconds=null,a.meridian=u[0]}function o(a){r=q(r,a),l()}function p(a,b){return q(a,60*b)}function q(a,b){var c=new Date(a.getTime()+1e3*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),d}var r=new Date,s=[],t={$setViewValue:angular.noop},u=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS;a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0,b.removeAttr("tabindex"),this.init=function(b,d){t=b,t.$render=this.render,t.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),h=d.eq(2),i=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;i&&this.setupMousewheelEvents(e,f,h);var j=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;j&&this.setupArrowkeyEvents(e,f,h),a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput,this.setupInputEvents(e,f,h)};var v=g.hourStep;c.hourStep&&s.push(a.$parent.$watch(d(c.hourStep),function(a){v=+a}));var w=g.minuteStep;c.minuteStep&&s.push(a.$parent.$watch(d(c.minuteStep),function(a){w=+a}));var x;s.push(a.$parent.$watch(d(c.min),function(a){var b=new Date(a);x=isNaN(b)?void 0:b}));var y;s.push(a.$parent.$watch(d(c.max),function(a){var b=new Date(a);y=isNaN(b)?void 0:b}));var z=!1;c.ngDisabled&&s.push(a.$parent.$watch(d(c.ngDisabled),function(a){z=a})),a.noIncrementHours=function(){var a=p(r,60*v);return z||a>y||r>a&&x>a},a.noDecrementHours=function(){var a=p(r,60*-v);return z||x>a||a>r&&a>y},a.noIncrementMinutes=function(){var a=p(r,w);return z||a>y||r>a&&x>a},a.noDecrementMinutes=function(){var a=p(r,-w);return z||x>a||a>r&&a>y},a.noIncrementSeconds=function(){var a=q(r,A);return z||a>y||r>a&&x>a},a.noDecrementSeconds=function(){var a=q(r,-A);return z||x>a||a>r&&a>y},a.noToggleMeridian=function(){return r.getHours()<12?z||p(r,720)>y:z||p(r,-720)<x};var A=g.secondStep;c.secondStep&&s.push(a.$parent.$watch(d(c.secondStep),function(a){A=+a})),a.showSeconds=g.showSeconds,c.showSeconds&&s.push(a.$parent.$watch(d(c.showSeconds),function(b){a.showSeconds=!!b})),a.showMeridian=g.showMeridian,c.showMeridian&&s.push(a.$parent.$watch(d(c.showMeridian),function(b){if(a.showMeridian=!!b,t.$error.time){var c=h(),d=i();angular.isDefined(c)&&angular.isDefined(d)&&(r.setHours(c),l())}else n()})),this.setupMousewheelEvents=function(b,c,d){var e=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){z||a.$apply(e(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){z||a.$apply(e(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()}),d.bind("mousewheel wheel",function(b){z||a.$apply(e(b)?a.incrementSeconds():a.decrementSeconds()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c,d){b.bind("keydown",function(b){z||(38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply()))}),c.bind("keydown",function(b){z||(38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply()))}),d.bind("keydown",function(b){z||(38===b.which?(b.preventDefault(),a.incrementSeconds(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementSeconds(),a.$apply()))})},this.setupInputEvents=function(b,c,d){if(a.readonlyInput)return a.updateHours=angular.noop,a.updateMinutes=angular.noop,void(a.updateSeconds=angular.noop);var e=function(b,c,d){t.$setViewValue(null),t.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c),angular.isDefined(d)&&(a.invalidSeconds=d)};a.updateHours=function(){var a=h(),b=i();t.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(r.setHours(a),r.setMinutes(b),x>r||r>y?e(!0):l("h")):e(!0)},b.bind("blur",function(b){t.$setTouched(),null===a.hours||""===a.hours?e(!0):!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=k(a.hours)})}),a.updateMinutes=function(){var a=i(),b=h();t.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(r.setHours(b),r.setMinutes(a),x>r||r>y?e(void 0,!0):l("m")):e(void 0,!0)},c.bind("blur",function(b){t.$setTouched(),null===a.minutes?e(void 0,!0):!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=k(a.minutes)})}),a.updateSeconds=function(){var a=j();t.$setDirty(),angular.isDefined(a)?(r.setSeconds(a),l("s")):e(void 0,void 0,!0)},d.bind("blur",function(b){!a.invalidSeconds&&a.seconds<10&&a.$apply(function(){a.seconds=k(a.seconds)})})},this.render=function(){var b=t.$viewValue;isNaN(b)?(t.$setValidity("time",!1),e.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(r=b),x>r||r>y?(t.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):m(),n())},a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners,a.incrementHours=function(){a.noIncrementHours()||o(60*v*60)},a.decrementHours=function(){a.noDecrementHours()||o(60*-v*60)},a.incrementMinutes=function(){a.noIncrementMinutes()||o(60*w)},a.decrementMinutes=function(){a.noDecrementMinutes()||o(60*-w)},a.incrementSeconds=function(){a.noIncrementSeconds()||o(A)},a.decrementSeconds=function(){a.noDecrementSeconds()||o(-A)},a.toggleMeridian=function(){var b=i(),c=h();a.noToggleMeridian()||(angular.isDefined(b)&&angular.isDefined(c)?o(720*(r.getHours()<12?60:-60)):a.meridian=a.meridian===u[0]?u[1]:u[0])},a.blur=function(){t.$setTouched()},a.$on("$destroy",function(){for(;s.length;)s.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(a){return{require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(b,c){return c.templateUrl||a.templateUrl},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){N.moveInProgress||(N.moveInProgress=!0,N.$digest()),Y()}function o(){N.position=D?l.offset(b):l.position(b),N.position.top+=b.prop("offsetHeight")}var p,q,r=[9,13,27,38,40],s=200,t=a.$eval(c.typeaheadMinLength);t||0===t||(t=1);var u=a.$eval(c.typeaheadWaitMs)||0,v=a.$eval(c.typeaheadEditable)!==!1;a.$watch(c.typeaheadEditable,function(a){v=a!==!1});var w,x,y=e(c.typeaheadLoading).assign||angular.noop,z=e(c.typeaheadOnSelect),A=angular.isDefined(c.typeaheadSelectOnBlur)?a.$eval(c.typeaheadSelectOnBlur):!1,B=e(c.typeaheadNoResults).assign||angular.noop,C=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):void 0,D=c.typeaheadAppendToBody?a.$eval(c.typeaheadAppendToBody):!1,E=c.typeaheadAppendTo?a.$eval(c.typeaheadAppendTo):null,F=a.$eval(c.typeaheadFocusFirst)!==!1,G=c.typeaheadSelectOnExact?a.$eval(c.typeaheadSelectOnExact):!1,H=e(c.typeaheadIsOpen).assign||angular.noop,I=a.$eval(c.typeaheadShowHint)||!1,J=e(c.ngModel),K=e(c.ngModel+"($$$p)"),L=function(b,c){return angular.isFunction(J(a))&&q&&q.$options&&q.$options.getterSetter?K(b,{$$$p:c}):J.assign(b,c)},M=m.parse(c.uibTypeahead),N=a.$new(),O=a.$on("$destroy",function(){N.$destroy()});N.$on("$destroy",O);var P="typeahead-"+N.$id+"-"+Math.floor(1e4*Math.random());b.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":P});var Q,R;I&&(Q=angular.element("<div></div>"),Q.css("position","relative"),b.after(Q),R=b.clone(),R.attr("placeholder",""),R.val(""),R.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),b.css({position:"relative","vertical-align":"top","background-color":"transparent"}),Q.append(R),R.after(b));var S=angular.element("<div uib-typeahead-popup></div>");S.attr({id:P,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(c.typeaheadTemplateUrl)&&S.attr("template-url",c.typeaheadTemplateUrl),angular.isDefined(c.typeaheadPopupTemplateUrl)&&S.attr("popup-template-url",c.typeaheadPopupTemplateUrl);var T=function(){I&&R.val("")},U=function(){N.matches=[],N.activeIdx=-1,b.attr("aria-expanded",!1),T()},V=function(a){return P+"-option-"+a};N.$watch("activeIdx",function(a){0>a?b.removeAttr("aria-activedescendant"):b.attr("aria-activedescendant",V(a))});var W=function(a,b){return N.matches.length>b&&a?a.toUpperCase()===N.matches[b].label.toUpperCase():!1},X=function(c,d){var e={$viewValue:c};y(a,!0),B(a,!1),f.when(M.source(a,e)).then(function(f){var g=c===p.$viewValue;if(g&&w)if(f&&f.length>0){N.activeIdx=F?0:-1,B(a,!1),N.matches.length=0;for(var h=0;h<f.length;h++)e[M.itemName]=f[h],N.matches.push({id:V(h),label:M.viewMapper(N,e),model:f[h]});if(N.query=c,o(),b.attr("aria-expanded",!0),G&&1===N.matches.length&&W(c,0)&&(angular.isNumber(N.debounceUpdate)||angular.isObject(N.debounceUpdate)?k(function(){N.select(0,d)},angular.isNumber(N.debounceUpdate)?N.debounceUpdate:N.debounceUpdate["default"]):N.select(0,d)),I){var i=N.matches[0].label;angular.isString(c)&&c.length>0&&i.slice(0,c.length).toUpperCase()===c.toUpperCase()?R.val(c+i.slice(c.length)):R.val("")}}else U(),B(a,!0);g&&y(a,!1)},function(){U(),y(a,!1),B(a,!0)})};D&&(angular.element(i).on("resize",n),h.find("body").on("scroll",n));var Y=k(function(){N.matches.length&&o(),N.moveInProgress=!1},s);N.moveInProgress=!1,N.query=void 0;var Z,$=function(a){Z=g(function(){X(a)},u)},_=function(){Z&&g.cancel(Z)};U(),N.assignIsOpen=function(b){H(a,b)},N.select=function(d,e){var f,h,i={};x=!0,i[M.itemName]=h=N.matches[d].model,f=M.modelMapper(a,i),L(a,f),p.$setValidity("editable",!0),p.$setValidity("parse",!0),z(a,{$item:h,$model:f,$label:M.viewMapper(a,i),$event:e}),U(),N.$eval(c.typeaheadFocusOnSelect)!==!1&&g(function(){b[0].focus()},0,!1)},b.on("keydown",function(a){if(0!==N.matches.length&&-1!==r.indexOf(a.which)){if(-1===N.activeIdx&&(9===a.which||13===a.which))return U(),void N.$digest();a.preventDefault();var b;switch(a.which){case 9:case 13:N.$apply(function(){angular.isNumber(N.debounceUpdate)||angular.isObject(N.debounceUpdate)?k(function(){N.select(N.activeIdx,a)},angular.isNumber(N.debounceUpdate)?N.debounceUpdate:N.debounceUpdate["default"]):N.select(N.activeIdx,a)});break;case 27:a.stopPropagation(),U(),N.$digest();break;case 38:N.activeIdx=(N.activeIdx>0?N.activeIdx:N.matches.length)-1,N.$digest(),b=S.find("li")[N.activeIdx],b.parentNode.scrollTop=b.offsetTop;break;case 40:N.activeIdx=(N.activeIdx+1)%N.matches.length,N.$digest(),b=S.find("li")[N.activeIdx],b.parentNode.scrollTop=b.offsetTop}}}),b.bind("focus",function(a){w=!0,0!==t||p.$viewValue||g(function(){X(p.$viewValue,a)},0)}),b.bind("blur",function(a){A&&N.matches.length&&-1!==N.activeIdx&&!x&&(x=!0,N.$apply(function(){angular.isObject(N.debounceUpdate)&&angular.isNumber(N.debounceUpdate.blur)?k(function(){N.select(N.activeIdx,a)},N.debounceUpdate.blur):N.select(N.activeIdx,a)})),!v&&p.$error.editable&&(p.$viewValue="",b.val("")),w=!1,x=!1});var aa=function(a){b[0]!==a.target&&3!==a.which&&0!==N.matches.length&&(U(),j.$$phase||N.$digest())};h.on("click",aa),a.$on("$destroy",function(){h.off("click",aa),(D||E)&&ba.remove(),D&&(angular.element(i).off("resize",n),h.find("body").off("scroll",n)),S.remove(),I&&Q.remove()});var ba=d(S)(N);D?h.find("body").append(ba):E?angular.element(E).eq(0).append(ba):b.after(ba),this.init=function(b,c){p=b,q=c,N.debounceUpdate=p.$options&&e(p.$options.debounce)(a),p.$parsers.unshift(function(b){return w=!0,0===t||b&&b.length>=t?u>0?(_(),$(b)):X(b):(y(a,!1),_(),U()),v?b:b?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),null)}),p.$formatters.push(function(b){var c,d,e={};return v||p.$setValidity("editable",!0),C?(e.$model=b,C(a,e)):(e[M.itemName]=b,c=M.viewMapper(a,e),e[M.itemName]=void 0,d=M.viewMapper(a,e),c!==d?c:b)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(a,b,c,d){d[2].init(d[0],d[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(a){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(b,c,d){b.templateUrl=d.templateUrl,b.isOpen=function(){var a=b.matches.length>0;return b.assignIsOpen({isOpen:a}),a},b.isActive=function(a){return b.active===a},b.selectActive=function(a){b.active=a},b.selectMatch=function(c,d){var e=b.debounce();angular.isNumber(e)||angular.isObject(e)?a(function(){b.select({activeIdx:c,evt:d})},angular.isNumber(e)?e:e["default"]):b.select({activeIdx:c,evt:d})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"uib/template/typeahead/typeahead-match.html";a(g).then(function(a){var c=angular.element(a.trim());e.replaceWith(c),b(c)(d)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion-group.html",'<div class="panel" ng-class="panelClass || \'panel-default\'">\n  <div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n    <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("uib/template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/datepicker.html",'<div class="uib-datepicker" ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/day.html",'<table class="uib-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n');
}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/month.html",'<table class="uib-monthpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/popup.html",'<div>\n  <ul class="uib-datepicker-popup dropdown-menu" dropdown-nested ng-if="isOpen" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n    <li ng-transclude></li>\n    <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n    </span>\n      <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close()">{{ getText(\'close\') }}</button>\n    </li>\n  </ul>\n</div>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/year.html",'<table class="uib-yearpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/backdrop.html",'<div class="modal-backdrop"\n     uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog {{size ? \'modal-\' + size : \'\'}}"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" aria-valuetext="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}" class="uib-tab">\n  <a href ng-click="select()" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input style="width:50px;" type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>')}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-datepicker-popup.dropdown-menu{display:block;}.uib-button-bar{padding:10px 9px 2px;}</style>')}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>')}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>')}),!function(a){a(["jquery"],function(a){return function(){function b(a,b,c){return o({type:v.error,iconClass:p().iconClasses.error,message:a,optionsOverride:c,title:b})}function c(b,c){return b||(b=p()),r=a("#"+b.containerId),r.length?r:(c&&(r=l(b)),r)}function d(a,b,c){return o({type:v.info,iconClass:p().iconClasses.info,message:a,optionsOverride:c,title:b})}function e(a){s=a}function f(a,b,c){return o({type:v.success,iconClass:p().iconClasses.success,message:a,optionsOverride:c,title:b})}function g(a,b,c){return o({type:v.warning,iconClass:p().iconClasses.warning,message:a,optionsOverride:c,title:b})}function h(a,b){var d=p();r||c(d),k(a,d,b)||j(d)}function i(b){var d=p();return r||c(d),b&&0===a(":focus",b).length?void q(b):void(r.children().length&&r.remove())}function j(b){for(var c=r.children(),d=c.length-1;d>=0;d--)k(a(c[d]),b)}function k(b,c,d){var e=d&&d.force?d.force:!1;return b&&(e||0===a(":focus",b).length)?(b[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){q(b)}}),!0):!1}function l(b){return r=a("<div/>").attr("id",b.containerId).addClass(b.positionClass).attr("aria-live","polite").attr("role","alert"),r.appendTo(a(b.target)),r}function m(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function n(a){s&&s(a)}function o(b){function d(a){return null==a&&(a=""),new String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e(){h(),j(),k(),l(),m(),i()}function f(){B.hover(w,v),!y.onclick&&y.tapToDismiss&&B.click(s),y.closeButton&&F&&F.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&a.cancelBubble!==!0&&(a.cancelBubble=!0),s(!0)}),y.onclick&&B.click(function(a){y.onclick(a),s()})}function g(){B.hide(),B[y.showMethod]({duration:y.showDuration,easing:y.showEasing,complete:y.onShown}),y.timeOut>0&&(A=setTimeout(s,y.timeOut),G.maxHideTime=parseFloat(y.timeOut),G.hideEta=(new Date).getTime()+G.maxHideTime,y.progressBar&&(G.intervalId=setInterval(x,10)))}function h(){b.iconClass&&B.addClass(y.toastClass).addClass(z)}function i(){y.newestOnTop?r.prepend(B):r.append(B)}function j(){b.title&&(C.append(y.escapeHtml?d(b.title):b.title).addClass(y.titleClass),B.append(C))}function k(){b.message&&(D.append(y.escapeHtml?d(b.message):b.message).addClass(y.messageClass),B.append(D))}function l(){y.closeButton&&(F.addClass("toast-close-button").attr("role","button"),B.prepend(F))}function m(){y.progressBar&&(E.addClass("toast-progress"),B.prepend(E))}function o(a,b){if(a.preventDuplicates){if(b.message===t)return!0;t=b.message}return!1}function s(b){var c=b&&y.closeMethod!==!1?y.closeMethod:y.hideMethod,d=b&&y.closeDuration!==!1?y.closeDuration:y.hideDuration,e=b&&y.closeEasing!==!1?y.closeEasing:y.hideEasing;return!a(":focus",B).length||b?(clearTimeout(G.intervalId),B[c]({duration:d,easing:e,complete:function(){q(B),y.onHidden&&"hidden"!==H.state&&y.onHidden(),H.state="hidden",H.endTime=new Date,n(H)}})):void 0}function v(){(y.timeOut>0||y.extendedTimeOut>0)&&(A=setTimeout(s,y.extendedTimeOut),G.maxHideTime=parseFloat(y.extendedTimeOut),G.hideEta=(new Date).getTime()+G.maxHideTime)}function w(){clearTimeout(A),G.hideEta=0,B.stop(!0,!0)[y.showMethod]({duration:y.showDuration,easing:y.showEasing})}function x(){var a=(G.hideEta-(new Date).getTime())/G.maxHideTime*100;E.width(a+"%")}var y=p(),z=b.iconClass||y.iconClass;if("undefined"!=typeof b.optionsOverride&&(y=a.extend(y,b.optionsOverride),z=b.optionsOverride.iconClass||z),!o(y,b)){u++,r=c(y,!0);var A=null,B=a("<div/>"),C=a("<div/>"),D=a("<div/>"),E=a("<div/>"),F=a(y.closeHtml),G={intervalId:null,hideEta:null,maxHideTime:null},H={toastId:u,state:"visible",startTime:new Date,options:y,map:b};return e(),g(),f(),n(H),y.debug&&console&&void 0,B}}function p(){return a.extend({},m(),w.options)}function q(a){r||(r=c()),a.is(":visible")||(a.remove(),a=null,0===r.children().length&&(r.remove(),t=void 0))}var r,s,t,u=0,v={error:"error",info:"info",success:"success",warning:"warning"},w={clear:h,remove:i,error:b,getContainer:c,info:d,options:{},subscribe:e,success:f,version:"2.1.2",warning:g};return w}()})}("function"==typeof define&&define.amd?define:function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):window.toastr=b(window.jQuery)}),function(a){a.fn.extend({slimScroll:function(b){var c=a.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},b);return this.each(function(){function d(b){if(i){b=b||window.event;var d=0;b.wheelDelta&&(d=-b.wheelDelta/120),b.detail&&(d=b.detail/3),a(b.target||b.srcTarget||b.srcElement).closest("."+c.wrapperClass).is(r.parent())&&e(d,!0),b.preventDefault&&!q&&b.preventDefault(),q||(b.returnValue=!1)}}function e(a,b,d){q=!1;var e=a,f=r.outerHeight()-u.outerHeight();b&&(e=parseInt(u.css("top"))+a*parseInt(c.wheelStep)/100*u.outerHeight(),e=Math.min(Math.max(e,0),f),e=a>0?Math.ceil(e):Math.floor(e),u.css({top:e+"px"})),o=parseInt(u.css("top"))/(r.outerHeight()-u.outerHeight()),e=o*(r[0].scrollHeight-r.outerHeight()),d&&(e=a,a=e/r[0].scrollHeight*r.outerHeight(),a=Math.min(Math.max(a,0),f),u.css({top:a+"px"})),r.scrollTop(e),r.trigger("slimscrolling",~~e),g(),h()}function f(){n=Math.max(r.outerHeight()/r[0].scrollHeight*r.outerHeight(),30),u.css({height:n+"px"});var a=n==r.outerHeight()?"none":"block";u.css({display:a})}function g(){f(),clearTimeout(l),o==~~o?(q=c.allowPageScroll,p!=o&&r.trigger("slimscroll",0==~~o?"top":"bottom")):q=!1,p=o,n>=r.outerHeight()?q=!0:(u.stop(!0,!0).fadeIn("fast"),c.railVisible&&v.stop(!0,!0).fadeIn("fast"))}function h(){c.alwaysVisible||(l=setTimeout(function(){c.disableFadeOut&&i||j||k||(u.fadeOut("slow"),v.fadeOut("slow"))},1e3))}var i,j,k,l,m,n,o,p,q=!1,r=a(this);if(r.parent().hasClass(c.wrapperClass)){var s=r.scrollTop(),u=r.closest("."+c.barClass),v=r.closest("."+c.railClass);if(f(),a.isPlainObject(b)){if("height"in b&&"auto"==b.height){r.parent().css("height","auto"),r.css("height","auto");var w=r.parent().parent().height();r.parent().css("height",w),r.css("height",w)}if("scrollTo"in b)s=parseInt(c.scrollTo);else if("scrollBy"in b)s+=parseInt(c.scrollBy);else if("destroy"in b)return u.remove(),v.remove(),void r.unwrap();e(s,!1,!0)}}else if(!(a.isPlainObject(b)&&"destroy"in b)){c.height="auto"==c.height?r.parent().height():c.height,s=a("<div></div>").addClass(c.wrapperClass).css({position:"relative",overflow:"hidden",width:c.width,height:c.height}),r.css({overflow:"hidden",width:c.width,height:c.height});var v=a("<div></div>").addClass(c.railClass).css({width:c.size,height:"100%",position:"absolute",top:0,display:c.alwaysVisible&&c.railVisible?"block":"none","border-radius":c.railBorderRadius,background:c.railColor,opacity:c.railOpacity,zIndex:90}),u=a("<div></div>").addClass(c.barClass).css({background:c.color,width:c.size,position:"absolute",top:0,opacity:c.opacity,display:c.alwaysVisible?"block":"none","border-radius":c.borderRadius,BorderRadius:c.borderRadius,MozBorderRadius:c.borderRadius,WebkitBorderRadius:c.borderRadius,zIndex:99}),w="right"==c.position?{right:c.distance}:{left:c.distance};v.css(w),u.css(w),r.wrap(s),r.parent().append(u),r.parent().append(v),c.railDraggable&&u.bind("mousedown",function(b){var c=a(document);return k=!0,t=parseFloat(u.css("top")),pageY=b.pageY,c.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY,u.css("top",currTop),e(0,u.position().top,!1)}),c.bind("mouseup.slimscroll",function(a){k=!1,h(),c.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(a){return a.stopPropagation(),a.preventDefault(),!1}),v.hover(function(){g()},function(){h()}),u.hover(function(){j=!0},function(){j=!1}),r.hover(function(){i=!0,g(),h()},function(){i=!1,h()}),r.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(m=a.originalEvent.touches[0].pageY)}),r.bind("touchmove",function(a){q||a.originalEvent.preventDefault(),a.originalEvent.touches.length&&(e((m-a.originalEvent.touches[0].pageY)/c.touchScrollStep,!0),m=a.originalEvent.touches[0].pageY)}),f(),"bottom"===c.start?(u.css({top:r.outerHeight()-u.outerHeight()}),e(0,!0)):"top"!==c.start&&(e(a(c.start).position().top,null,!0),c.alwaysVisible||u.hide()),window.addEventListener?(this.addEventListener("DOMMouseScroll",d,!1),this.addEventListener("mousewheel",d,!1)):document.attachEvent("onmousewheel",d)}}),this}}),a.fn.extend({slimscroll:a.fn.slimScroll})}(jQuery),!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(b,c,d,e,f,g){function h(){d.cancel(j),g.complete(),l=0,k=0}function i(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d?void 0!==d.get(b.url):!1;return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var j,k=0,l=0,m=g.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||i(a)||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===k&&(j=d(function(){g.start()},m)),k++,g.set(l/k)),a},response:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),a):(f.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),a)},responseError:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),b.reject(a)):(f.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),b.reject(a))}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){k||(k=a.get("$animate"));var e=b.find(n).eq(0);c.cancel(m),r||(d.$broadcast("cfpLoadingBar:started"),r=!0,v&&k.enter(o,e,angular.element(e[0].lastChild)),u&&k.enter(q,e,angular.element(e[0].lastChild)),f(w))}function f(a){if(r){var b=100*a+"%";p.css("width",b),s=a,t&&(c.cancel(l),l=c(function(){g()},250))}}function g(){if(!(h()>=1)){var a=0,b=h();a=b>=0&&.25>b?(3*Math.random()+3)/100:b>=.25&&.65>b?3*Math.random()/100:b>=.65&&.9>b?2*Math.random()/100:b>=.9&&.99>b?.005:0;var c=h()+a;f(c)}}function h(){return s}function i(){s=0,r=!1}function j(){k||(k=a.get("$animate")),d.$broadcast("cfpLoadingBar:completed"),f(1),c.cancel(m),m=c(function(){var a=k.leave(o,i);a&&a.then&&a.then(i),k.leave(q)},500)}var k,l,m,n=this.parentSelector,o=angular.element(this.loadingBarTemplate),p=o.find("div").eq(0),q=angular.element(this.spinnerTemplate),r=!1,s=0,t=this.autoIncrement,u=this.includeSpinner,v=this.includeBar,w=this.startSize;return{start:e,set:f,status:h,inc:g,complete:j,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();var duScrollDefaultEasing=function(a){"use strict";return.5>a?Math.pow(2*a,2)/2:1-Math.pow(2*(1-a),2)/2},duScroll=angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1).value("duScrollActiveClass","active");"undefined"!=typeof module&&module&&module.exports&&(module.exports=duScroll),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function(a,b,c,d,e,f,g,h){"use strict";var i={},j=function(a){return"undefined"!=typeof HTMLDocument&&a instanceof HTMLDocument||a.nodeType&&a.nodeType===a.DOCUMENT_NODE},k=function(a){return"undefined"!=typeof HTMLElement&&a instanceof HTMLElement||a.nodeType&&a.nodeType===a.ELEMENT_NODE},l=function(a){return k(a)||j(a)?a:a[0]};i.duScrollTo=function(b,c,d,e){var f;if(angular.isElement(b)?f=this.duScrollToElement:angular.isDefined(d)&&(f=this.duScrollToAnimated),f)return f.apply(this,arguments);var g=l(this);return j(g)?a.scrollTo(b,c):(g.scrollLeft=b,void(g.scrollTop=c))};var m,n;i.duScrollToAnimated=function(a,f,g,i){g&&!i&&(i=e);var j=this.duScrollLeft(),k=this.duScrollTop(),l=Math.round(a-j),o=Math.round(f-k),p=null,q=0,r=this,s=function(a){(!a||q&&a.which>0)&&(h&&r.unbind(h,s),c(m),n.reject(),m=null)};if(m&&s(),n=b.defer(),0===g||!l&&!o)return 0===g&&r.duScrollTo(a,f),n.resolve(),n.promise;var t=function(a){null===p&&(p=a),q=a-p;var b=q>=g?1:i(q/g);r.scrollTo(j+Math.ceil(l*b),k+Math.ceil(o*b)),
1>b?m=d(t):(h&&r.unbind(h,s),m=null,n.resolve())};return r.duScrollTo(j,k),h&&r.bind(h,s),m=d(t),n.promise},i.duScrollToElement=function(a,b,c,d){var e=l(this);(!angular.isNumber(b)||isNaN(b))&&(b=g);var f=this.duScrollTop()+l(a).getBoundingClientRect().top-b;return k(e)&&(f-=e.getBoundingClientRect().top),this.duScrollTo(0,f,c,d)},i.duScrollLeft=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(b,this.duScrollTop(),c,d);var e=l(this);return j(e)?a.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:e.scrollLeft},i.duScrollTop=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(this.duScrollLeft(),b,c,d);var e=l(this);return j(e)?a.scrollY||document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop},i.duScrollToElementAnimated=function(a,b,c,d){return this.duScrollToElement(a,b,c||f,d)},i.duScrollTopAnimated=function(a,b,c){return this.duScrollTop(a,b||f,c)},i.duScrollLeftAnimated=function(a,b,c){return this.duScrollLeft(a,b||f,c)},angular.forEach(i,function(a,b){angular.element.prototype[b]=a;var c=b.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[c])&&(angular.element.prototype[c]=a)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(a){"use strict";var b=["webkit","moz","o","ms"];return function(c,d){if(a[c])return a[c];for(var e,f=c.substr(0,1).toUpperCase()+c.substr(1),g=0;g<b.length;g++)if(e=b[g]+f,a[e])return a[e];return d}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(a,b){"use strict";var c=0,d=function(a,d){var e=(new Date).getTime(),f=Math.max(0,16-(e-c)),g=b(function(){a(e+f)},f);return c=e+f,g};return a("requestAnimationFrame",d)}]).factory("cancelAnimation",["polyfill","$timeout",function(a,b){"use strict";var c=function(a){b.cancel(a)};return a("cancelAnimationFrame",c)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollBottomSpy","duScrollActiveClass",function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(e){var j=!1,k=!1,l=function(){k=!1;var b,g=e.container,j=g[0],l=0;if("undefined"!=typeof HTMLElement&&j instanceof HTMLElement||j.nodeType&&j.nodeType===j.ELEMENT_NODE)l=j.getBoundingClientRect().top,b=Math.round(j.scrollTop+j.clientHeight)>=j.scrollHeight;else{var m=d[0].body.scrollHeight||d[0].documentElement.scrollHeight;b=Math.round(c.pageYOffset+c.innerHeight)>=m}var n,o,p,q,r,s,t=h&&b?"bottom":"top";for(q=e.spies,o=e.currentlyActive,p=void 0,n=0;n<q.length;n++)r=q[n],s=r.getTargetPosition(),s&&(h&&b||s.top+r.offset-l<20&&(f||-1*s.top+l)<s.height)&&(!p||p[t]<s[t])&&(p={spy:r},p[t]=s[t]);p&&(p=p.spy),o===p||f&&!p||(o&&(o.$element.removeClass(i),a.$broadcast("duScrollspy:becameInactive",o.$element,angular.element(o.getTargetElement()))),p&&(p.$element.addClass(i),a.$broadcast("duScrollspy:becameActive",p.$element,angular.element(p.getTargetElement()))),e.currentlyActive=p)};return g?function(){j?k=!0:(l(),j=b(function(){j=!1,k&&l()},g,!1))}:l},k={},l=function(a){var b=a.$id,c={spies:[]};return c.handler=j(c),k[b]=c,a.$on("$destroy",function(){m(a)}),b},m=function(a){var b=a.$id,c=k[b],d=c.container;d&&d.off("scroll",c.handler),delete k[b]},n=l(a),o=function(a){return k[a.$id]?k[a.$id]:a.$parent?o(a.$parent):k[n]},p=function(a){var b,c,d=a.$scope;if(d)return o(d);for(c in k)if(b=k[c],-1!==b.spies.indexOf(a))return b},q=function(a){for(;a.parentNode;)if(a=a.parentNode,a===document)return!0;return!1},r=function(a){var b=p(a);b&&(b.spies.push(a),b.container&&q(b.container)||(b.container&&b.container.off("scroll",b.handler),b.container=e.getContainer(a.$scope),b.container.on("scroll",b.handler).triggerHandler("scroll")))},s=function(b){var c=p(b);b===c.currentlyActive&&(a.$broadcast("duScrollspy:becameInactive",c.currentlyActive.$element),c.currentlyActive=null);var d=c.spies.indexOf(b);-1!==d&&c.spies.splice(d,1),b.$element=null};return{addSpy:r,removeSpy:s,createContext:l,destroyContext:m,getContextForScope:o}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(a){"use strict";var b={},c=function(a,c){var d=a.$id;return b[d]=c,d},d=function(a){return b[a.$id]?a.$id:a.$parent?d(a.$parent):void 0},e=function(c){var e=d(c);return e?b[e]:a},f=function(a){var c=d(a);c&&delete b[c]};return{getContainerId:d,getContainer:e,setContainer:c,removeContainer:f}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(a,b,c){"use strict";return{link:function(d,e,f){e.on("click",function(e){if(f.href&&-1!==f.href.indexOf("#")||""!==f.duSmoothScroll){var g=f.href?f.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):f.duSmoothScroll,h=document.getElementById(g)||document.getElementsByName(g)[0];if(h&&h.getBoundingClientRect){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var i=f.offset?parseInt(f.offset,10):b,j=f.duration?parseInt(f.duration,10):a,k=c.getContainer(d);k.duScrollToElement(angular.element(h),isNaN(i)?0:i,isNaN(j)?0:j)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(a){"use strict";return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){a.createContext(b)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(a){"use strict";return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){d.$observe("duScrollContainer",function(d){angular.isString(d)&&(d=document.getElementById(d)),d=angular.isElement(d)?angular.element(d):c,a.setContainer(b,d),b.$on("$destroy",function(){a.removeContainer(b)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(a,b,c,d){"use strict";var e=function(a,b,c,d){angular.isElement(a)?this.target=a:angular.isString(a)&&(this.targetId=a),this.$scope=b,this.$element=c,this.offset=d};return e.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},e.prototype.getTargetPosition=function(){var a=this.getTargetElement();return a?a.getBoundingClientRect():void 0},e.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(f,g,h){var i,j=h.ngHref||h.href;if(j&&-1!==j.indexOf("#")?i=j.replace(/.*(?=#[^\s]+$)/,"").substring(1):h.duScrollspy?i=h.duScrollspy:h.duSmoothScroll&&(i=h.duSmoothScroll),i){var k=c(function(){var c=new e(i,f,g,-(h.offset?parseInt(h.offset,10):b));a.addSpy(c),f.$on("$locationChangeSuccess",c.flushTargetCache.bind(c));var j=d.$on("$stateChangeSuccess",c.flushTargetCache.bind(c));f.$on("$destroy",function(){a.removeSpy(c),j()})},0,!1);f.$on("$destroy",function(){c.cancel(k)})}}}}]),angular.module("ngMap",[]),function(){"use strict";var a,b=function(b,c,d,e,f,g,h){a=f;var i=this;i.mapOptions,i.mapEvents,i.addObject=function(a,b){if(i.map){i.map[a]=i.map[a]||{};var c=Object.keys(i.map[a]).length;i.map[a][b.id||c]=b,i.map instanceof google.maps.Map&&("infoWindows"!=a&&b.setMap&&b.setMap&&b.setMap(i.map),b.centered&&b.position&&i.map.setCenter(b.position),"markers"==a&&i.objectChanged("markers"),"customMarkers"==a&&i.objectChanged("customMarkers"))}},i.deleteObject=function(a,b){if(b.map){var c=b.map[a];for(var d in c)c[d]===b&&(google.maps.event.clearInstanceListeners(b),delete c[d]);b.map&&b.setMap&&b.setMap(null),"markers"==a&&i.objectChanged("markers"),"customMarkers"==a&&i.objectChanged("customMarkers")}},i.observeAttrSetObj=function(b,c,d){if(c.noWatcher)return!1;for(var e=a.getAttrsToObserve(b),f=0;f<e.length;f++){var h=e[f];c.$observe(h,g.observeAndSet(h,d))}},i.zoomToIncludeMarkers=function(){var a=new google.maps.LatLngBounds;for(var b in i.map.markers)a.extend(i.map.markers[b].getPosition());for(var c in i.map.customMarkers)a.extend(i.map.customMarkers[c].getPosition());i.map.fitBounds(a)},i.objectChanged=function(a){!i.map||"markers"!=a&&"customMarkers"!=a||"auto"!=i.map.zoomToIncludeMarkers||i.zoomToIncludeMarkers()},i.initializeMap=function(){var f=i.mapOptions,k=i.mapEvents,l=i.map;if(i.map=h.getMapInstance(c[0]),g.setStyle(c[0]),l){var m=a.filter(d),n=a.getOptions(m),o=a.getControlOptions(m);f=angular.extend(n,o);for(var p in l){var q=l[p];if("object"==typeof q)for(var r in q)i.addObject(p,q[r])}i.map.showInfoWindow=i.showInfoWindow,i.map.hideInfoWindow=i.hideInfoWindow}f.zoom=f.zoom||15;var s=f.center;if(!f.center||"string"==typeof s&&s.match(/\{\{.*\}\}/))f.center=new google.maps.LatLng(0,0);else if(!(s instanceof google.maps.LatLng)){var t=f.center;delete f.center,g.getGeoLocation(t,f.geoLocationOptions).then(function(a){i.map.setCenter(a);var c=f.geoCallback;c&&e(c)(b)},function(){f.geoFallbackCenter&&i.map.setCenter(f.geoFallbackCenter)})}i.map.setOptions(f);for(var u in k)google.maps.event.addListener(i.map,u,k[u]);i.observeAttrSetObj(j,d,i.map),i.singleInfoWindow=f.singleInfoWindow,google.maps.event.trigger(i.map,"resize"),google.maps.event.addListenerOnce(i.map,"idle",function(){g.addMap(i),f.zoomToIncludeMarkers&&i.zoomToIncludeMarkers(),b.map=i.map,b.$emit("mapInitialized",i.map),d.mapInitialized&&e(d.mapInitialized)(b,{map:i.map})})},b.google=google;var j=a.orgAttributes(c),k=a.filter(d),l=a.getOptions(k,{scope:b}),m=a.getControlOptions(k),n=angular.extend(l,m),o=a.getEvents(b,k);Object.keys(o).length&&void 0,i.mapOptions=n,i.mapEvents=o,l.lazyInit?(i.map={id:d.id},g.addMap(i)):i.initializeMap(),l.triggerResize&&google.maps.event.trigger(i.map,"resize"),c.bind("$destroy",function(){h.returnMapInstance(i.map),g.deleteMap(i)})};b.$inject=["$scope","$element","$attrs","$parse","Attr2MapOptions","NgMap","NgMapPool"],angular.module("ngMap").controller("__MapController",b)}(),function(){"use strict";var a,b=function(b,d,e,f){f=f[0]||f[1];var g=a.orgAttributes(d),h=a.filter(e),i=a.getOptions(h,{scope:b}),j=a.getEvents(b,h),k=c(i,j);f.addObject("bicyclingLayers",k),f.observeAttrSetObj(g,e,k),d.bind("$destroy",function(){f.deleteObject("bicyclingLayers",k)})},c=function(a,b){var c=new google.maps.BicyclingLayer(a);for(var d in b)google.maps.event.addListener(c,d,b[d]);return c},d=function(c){return a=c,{restrict:"E",require:["?^map","?^ngMap"],link:b}};d.$inject=["Attr2MapOptions"],angular.module("ngMap").directive("bicyclingLayer",d)}(),function(){"use strict";var a,b,c,d=function(c,d,e,f){f=f[0]||f[1];var g=a.filter(e),h=a.getOptions(g,{scope:c}),i=a.getEvents(c,g),j=d[0].parentElement.removeChild(d[0]);b(j.innerHTML.trim())(c);for(var k in i)google.maps.event.addDomListener(j,k,i[k]);f.addObject("customControls",j);var l=h.position;f.map.controls[google.maps.ControlPosition[l]].push(j),d.bind("$destroy",function(){f.deleteObject("customControls",j)})},e=function(e,f,g){return a=e,b=f,c=g,{restrict:"E",require:["?^map","?^ngMap"],link:d}};e.$inject=["Attr2MapOptions","$compile","NgMap"],angular.module("ngMap").directive("customControl",e)}(),function(){"use strict";var a,b,c,d,e=function(a){a=a||{},this.el=document.createElement("div"),this.el.style.display="inline-block",this.el.style.visibility="hidden",this.visible=!0;for(var b in a)this[b]=a[b]},f=function(){e.prototype=new google.maps.OverlayView,e.prototype.setContent=function(a,b){this.el.innerHTML=a,this.el.style.position="absolute",b&&c(angular.element(this.el).contents())(b)},e.prototype.getDraggable=function(){return this.draggable},e.prototype.setDraggable=function(a){this.draggable=a},e.prototype.getPosition=function(){return this.position},e.prototype.setPosition=function(a){if(a&&(this.position=a),this.getProjection()&&"function"==typeof this.position.lng){var c=this.getProjection().fromLatLngToDivPixel(this.position),d=this,e=function(){var a=Math.round(c.x-d.el.offsetWidth/2),b=Math.round(c.y-d.el.offsetHeight-10);d.el.style.left=a+"px",d.el.style.top=b+"px",d.el.style.visibility="visible"};d.el.offsetWidth&&d.el.offsetHeight?e():b(e,300)}},e.prototype.setZIndex=function(a){a&&(this.zIndex=a),this.el.style.zIndex=this.zIndex},e.prototype.setVisible=function(a){this.el.style.display=a?"inline-block":"none",this.visible=a},e.prototype.addClass=function(a){var b=this.el.className.trim().split(" ");-1==b.indexOf(a)&&b.push(a),this.el.className=b.join(" ")},e.prototype.removeClass=function(a){var b=this.el.className.split(" "),c=b.indexOf(a);c>-1&&b.splice(c,1),this.el.className=b.join(" ")},e.prototype.onAdd=function(){this.getPanes().overlayMouseTarget.appendChild(this.el)},e.prototype.draw=function(){this.setPosition(),this.setZIndex(this.zIndex),this.setVisible(this.visible)},e.prototype.onRemove=function(){this.el.parentNode.removeChild(this.el)}},g=function(c,f){return function(g,h,i,j){j=j[0]||j[1];var k=a.orgAttributes(h),l=a.filter(i),m=a.getOptions(l,{scope:g}),n=a.getEvents(g,l);h[0].style.display="none";var o=new e(m);b(function(){g.$watch("["+f.join(",")+"]",function(){o.setContent(c,g)}),o.setContent(h[0].innerHTML,g);var a=h[0].firstElementChild.className;o.addClass("custom-marker"),o.addClass(a),m.position instanceof google.maps.LatLng||d.getGeoLocation(m.position).then(function(a){o.setPosition(a)})});for(var p in n)google.maps.event.addDomListener(o.el,p,n[p]);j.addObject("customMarkers",o),j.observeAttrSetObj(k,i,o),h.bind("$destroy",function(){j.deleteObject("customMarkers",o)})}},h=function(e,h,i,j){return a=i,b=e,c=h,d=j,{restrict:"E",require:["?^map","?^ngMap"],compile:function(a){f(),a[0].style.display="none";var b=a.html(),c=b.match(/{{([^}]+)}}/g),d=[];return(c||[]).forEach(function(a){var b=a.replace("{{","").replace("}}","");-1==a.indexOf("::")&&-1==a.indexOf("this.")&&-1==d.indexOf(b)&&d.push(a.replace("{{","").replace("}}",""))}),g(b,d)}}};h.$inject=["$timeout","$compile","Attr2MapOptions","NgMap"],angular.module("ngMap").directive("customMarker",h)}(),function(){"use strict";var a,b,c,d=function(a,b){a.panel&&(a.panel=document.getElementById(a.panel)||document.querySelector(a.panel));var c=new google.maps.DirectionsRenderer(a);for(var d in b)google.maps.event.addListener(c,d,b[d]);return c},e=function(a,d){var e=new google.maps.DirectionsService,f=d;f.travelMode=f.travelMode||"DRIVING";var g=["origin","destination","travelMode","transitOptions","unitSystem","durationInTraffic","waypoints","optimizeWaypoints","provideRouteAlternatives","avoidHighways","avoidTolls","region"];for(var h in f)-1===g.indexOf(h)&&delete f[h];f.waypoints&&("[]"==f.waypoints||""===f.waypoints)&&delete f.waypoints;var i=function(c){e.route(c,function(c,d){d==google.maps.DirectionsStatus.OK&&b(function(){a.setDirections(c)})})};f.origin&&f.destination&&("current-location"==f.origin?c.getCurrentPosition().then(function(a){f.origin=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),i(f)}):"current-location"==f.destination?c.getCurrentPosition().then(function(a){f.destination=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),i(f)}):i(f))},f=function(f,g,h,i){var j=f;a=i,b=g,c=h;var k=function(c,f,g,h){h=h[0]||h[1];var i=j.orgAttributes(f),k=j.filter(g),l=j.getOptions(k,{scope:c}),m=j.getEvents(c,k),n=j.getAttrsToObserve(i),o=d(l,m);h.addObject("directionsRenderers",o),n.forEach(function(a){!function(a){g.$observe(a,function(c){if("panel"==a)b(function(){var a=document.getElementById(c)||document.querySelector(c);a&&o.setPanel(a)});else if(l[a]!==c){var d=j.toOptionValue(c,{key:a});l[a]=d,e(o,l)}})}(a)}),a.getMap().then(function(){e(o,l)}),f.bind("$destroy",function(){h.deleteObject("directionsRenderers",o)})};return{restrict:"E",require:["?^map","?^ngMap"],link:k}};f.$inject=["Attr2MapOptions","$timeout","NavigatorGeolocation","NgMap"],angular.module("ngMap").directive("directions",f)}(),function(){"use strict";angular.module("ngMap").directive("drawingManager",["Attr2MapOptions",function(a){var b=a;return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,c,d,e){e=e[0]||e[1];var f=b.filter(d),g=b.getOptions(f,{scope:a}),h=b.getControlOptions(f),i=b.getEvents(a,f),j=new google.maps.drawing.DrawingManager({drawingMode:g.drawingmode,drawingControl:g.drawingcontrol,drawingControlOptions:h.drawingControlOptions,circleOptions:g.circleoptions,markerOptions:g.markeroptions,polygonOptions:g.polygonoptions,polylineOptions:g.polylineoptions,rectangleOptions:g.rectangleoptions});d.$observe("drawingControlOptions",function(a){j.drawingControlOptions=b.getControlOptions({drawingControlOptions:a}).drawingControlOptions,j.setDrawingMode(null),j.setMap(e.map)});for(var k in i)google.maps.event.addListener(j,k,i[k]);e.addObject("mapDrawingManager",j),c.bind("$destroy",function(){e.deleteObject("mapDrawingManager",j)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("dynamicMapsEngineLayer",["Attr2MapOptions",function(a){var b=a,c=function(a,b){var c=new google.maps.visualization.DynamicMapsEngineLayer(a);for(var d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,d,e,f){f=f[0]||f[1];var g=b.filter(e),h=b.getOptions(g,{scope:a}),i=b.getEvents(a,g,i),j=c(h,i);f.addObject("mapsEngineLayers",j)}}}])}(),function(){"use strict";angular.module("ngMap").directive("fusionTablesLayer",["Attr2MapOptions",function(a){var b=a,c=function(a,b){var c=new google.maps.FusionTablesLayer(a);for(var d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,d,e,f){f=f[0]||f[1];var g=b.filter(e),h=b.getOptions(g,{scope:a}),i=b.getEvents(a,g,i),j=c(h,i);f.addObject("fusionTablesLayers",j)}}}])}(),function(){"use strict";angular.module("ngMap").directive("heatmapLayer",["Attr2MapOptions","$window",function(a,b){var c=a;return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,d,e,f){f=f[0]||f[1];var g=c.filter(e),h=c.getOptions(g,{scope:a});if(h.data=b[e.data]||a[e.data],!(h.data instanceof Array))throw"invalid heatmap data";h.data=new google.maps.MVCArray(h.data);var i=new google.maps.visualization.HeatmapLayer(h);c.getEvents(a,g),f.addObject("heatmapLayers",i)}}}])}(),function(){"use strict";var a=function(a,b,c,d,e){var f=a,g=function(a,d,e){var f;!a.position||a.position instanceof google.maps.LatLng||delete a.position,f=new google.maps.InfoWindow(a);for(var g in d)g&&google.maps.event.addListener(f,g,d[g]);var h=e.html().trim();if(1!=angular.element(h).length)throw"info-window working as a template must have a container";return f.__template=h.replace(/\s?ng-non-bindable[='"]+/,""),f.__open=function(a,d,e){c(function(){e&&(d.anchor=e);var c=b(f.__template)(d);f.setContent(c[0]),d.$apply(),e&&e.getPosition?f.open(a,e):e&&e instanceof google.maps.LatLng?(f.open(a),f.setPosition(e)):f.open(a);var g=f.content.parentElement.parentElement.parentElement;g.className="ng-map-info-window"})},f},h=function(a,b,c,h){h=h[0]||h[1],b.css("display","none");var i,j=f.orgAttributes(b),k=f.filter(c),l=f.getOptions(k,{scope:a}),m=f.getEvents(a,k);!l.position||l.position instanceof google.maps.LatLng||(i=l.position);var n=g(l,m,b);i&&e.getGeoLocation(i).then(function(b){n.setPosition(b),n.__open(h.map,a,b);var e=c.geoCallback;e&&d(e)(a)}),h.addObject("infoWindows",n),h.observeAttrSetObj(j,c,n),h.showInfoWindow=h.map.showInfoWindow=h.showInfoWindow||function(b,c,d){var e="string"==typeof b?b:c,f="string"==typeof b?c:d;if("string"==typeof f)if("undefined"!=typeof h.map.markers&&"undefined"!=typeof h.map.markers[f])f=h.map.markers[f];else{if("undefined"==typeof h.map.customMarkers[f])throw new Error("Cant open info window for id "+f+". Marker or CustomMarker is not defined");f=h.map.customMarkers[f]}var g=h.map.infoWindows[e],i=f?f:this.getPosition?this:null;g.__open(h.map,a,i),h.singleInfoWindow&&(h.lastInfoWindow&&a.hideInfoWindow(h.lastInfoWindow),h.lastInfoWindow=e)},h.hideInfoWindow=h.map.hideInfoWindow=h.hideInfoWindow||function(a,b){var c="string"==typeof a?a:b,d=h.map.infoWindows[c];d.close()},a.showInfoWindow=h.map.showInfoWindow,a.hideInfoWindow=h.map.hideInfoWindow,e.getMap().then(function(b){if(n.visible&&n.__open(b,a),n.visibleOnMarker){var c=n.visibleOnMarker;n.__open(b,a,b.markers[c])}})};return{restrict:"E",require:["?^map","?^ngMap"],link:h}};a.$inject=["Attr2MapOptions","$compile","$timeout","$parse","NgMap"],angular.module("ngMap").directive("infoWindow",a)}(),function(){"use strict";angular.module("ngMap").directive("kmlLayer",["Attr2MapOptions",function(a){var b=a,c=function(a,b){var c=new google.maps.KmlLayer(a);for(var d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,d,e,f){f=f[0]||f[1];var g=b.orgAttributes(d),h=b.filter(e),i=b.getOptions(h,{scope:a}),j=b.getEvents(a,h),k=c(i,j);f.addObject("kmlLayers",k),f.observeAttrSetObj(g,e,k),d.bind("$destroy",function(){f.deleteObject("kmlLayers",k)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("mapData",["Attr2MapOptions","NgMap",function(a,b){var c=a;return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,d,e){var f=c.filter(e),g=c.getOptions(f,{scope:a}),h=c.getEvents(a,f,h);b.getMap().then(function(b){for(var c in g){var d=g[c];"function"==typeof a[d]?b.data[c](a[d]):b.data[c](d)}for(var e in h)b.data.addListener(e,h[e])})}}}])}(),function(){"use strict";var a,b,c,d,e=function(c,e,f){var g=f.mapLazyLoadParams||f.mapLazyLoad;if(window.lazyLoadCallback=function(){a(function(){e.html(d),b(e.contents())(c)},100)},void 0===window.google||void 0===window.google.maps){var h=document.createElement("script");h.src=g+(g.indexOf("?")>-1?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+h.src+'"]')||document.body.appendChild(h)}else e.html(d),b(e.contents())(c)},f=function(a,b){return!b.mapLazyLoad&&void 0,d=a.html(),c=b.mapLazyLoad,void 0!==window.google&&void 0!==window.google.maps?!1:(a.html(""),{pre:e})},g=function(c,d){return b=c,a=d,{compile:f}};g.$inject=["$compile","$timeout"],angular.module("ngMap").directive("mapLazyLoad",g)}(),function(){"use strict";angular.module("ngMap").directive("mapType",["$parse","NgMap",function(a,b){return{restrict:"E",require:["?^map","?^ngMap"],link:function(c,d,e,f){f=f[0]||f[1];var g,h=e.name;if(!h)throw"invalid map-type name";if(g=a(e.object)(c),!g)throw"invalid map-type object";b.getMap().then(function(a){a.mapTypes.set(h,g)}),f.addObject("mapTypes",g)}}}])}(),function(){"use strict";var a=function(){return{restrict:"AE",controller:"__MapController",conrollerAs:"ngmap"}};angular.module("ngMap").directive("map",[a]),angular.module("ngMap").directive("ngMap",[a])}(),function(){"use strict";angular.module("ngMap").directive("mapsEngineLayer",["Attr2MapOptions",function(a){var b=a,c=function(a,b){var c=new google.maps.visualization.MapsEngineLayer(a);for(var d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,d,e,f){f=f[0]||f[1];var g=b.filter(e),h=b.getOptions(g,{scope:a}),i=b.getEvents(a,g,i),j=c(h,i);f.addObject("mapsEngineLayers",j)}}}])}(),function(){"use strict";var a,b,c,d=function(a,b){var d;if(c.defaultOptions.marker)for(var e in c.defaultOptions.marker)"undefined"==typeof a[e]&&(a[e]=c.defaultOptions.marker[e]);a.position instanceof google.maps.LatLng||(a.position=new google.maps.LatLng(0,0)),d=new google.maps.Marker(a),Object.keys(b).length>0;for(var f in b)f&&google.maps.event.addListener(d,f,b[f]);return d},e=function(e,f,g,h){h=h[0]||h[1];var i,j=a.orgAttributes(f),k=a.filter(g),l=a.getOptions(k,e,{scope:e}),m=a.getEvents(e,k);l.position instanceof google.maps.LatLng||(i=l.position);var n=d(l,m);h.addObject("markers",n),i&&c.getGeoLocation(i).then(function(a){n.setPosition(a),l.centered&&n.map.setCenter(a);var c=g.geoCallback;c&&b(c)(e)}),h.observeAttrSetObj(j,g,n),f.bind("$destroy",function(){h.deleteObject("markers",n)})},f=function(d,f,g){return a=d,b=f,c=g,{restrict:"E",require:["^?map","?^ngMap"],link:e}};f.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("marker",f)}(),function(){"use strict";angular.module("ngMap").directive("overlayMapType",["NgMap",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,c,d,e){e=e[0]||e[1];var f=d.initMethod||"insertAt",g=b[d.object];a.getMap().then(function(a){if("insertAt"==f){var b=parseInt(d.index,10);a.overlayMapTypes.insertAt(b,g)}else"push"==f&&a.overlayMapTypes.push(g)}),e.addObject("overlayMapTypes",g)}}}])}(),function(){"use strict";var a=function(a,b){var c=a,d=function(a,d,e,f){if("false"===e.placesAutoComplete)return!1;var g=c.filter(e),h=c.getOptions(g,{scope:a}),i=c.getEvents(a,g),j=new google.maps.places.Autocomplete(d[0],h);for(var k in i)google.maps.event.addListener(j,k,i[k]);var l=function(){b(function(){f&&f.$setViewValue(d.val())},100)};google.maps.event.addListener(j,"place_changed",l),d[0].addEventListener("change",l),e.$observe("types",function(a){if(a){var b=c.toOptionValue(a,{key:"types"});j.setTypes(b)}})};return{restrict:"A",require:"?ngModel",link:d}};a.$inject=["Attr2MapOptions","$timeout"],angular.module("ngMap").directive("placesAutoComplete",a)}(),function(){"use strict";var a=function(a,b){var c,d=a.name;switch(delete a.name,d){case"circle":a.center instanceof google.maps.LatLng||(a.center=new google.maps.LatLng(0,0)),c=new google.maps.Circle(a);break;case"polygon":c=new google.maps.Polygon(a);break;case"polyline":c=new google.maps.Polyline(a);break;case"rectangle":c=new google.maps.Rectangle(a);break;case"groundOverlay":case"image":var e=a.url,f={opacity:a.opacity,clickable:a.clickable,id:a.id};c=new google.maps.GroundOverlay(e,a.bounds,f)}for(var g in b)b[g]&&google.maps.event.addListener(c,g,b[g]);return c},b=function(b,c,d){var e=b,f=function(b,f,g,h){h=h[0]||h[1];var i,j,k=e.orgAttributes(f),l=e.filter(g),m=e.getOptions(l,{scope:b}),n=e.getEvents(b,l);j=m.name,m.center instanceof google.maps.LatLng||(i=m.center);var o=a(m,n);h.addObject("shapes",o),i&&"circle"==j&&d.getGeoLocation(i).then(function(a){o.setCenter(a),o.centered&&o.map.setCenter(a);var d=g.geoCallback;d&&c(d)(b)}),h.observeAttrSetObj(k,g,o),f.bind("$destroy",function(){h.deleteObject("shapes",o)})};return{restrict:"E",require:["?^map","?^ngMap"],link:f}};b.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("shape",b)}(),function(){"use strict";var a=function(a,b){var c=a,d=function(a,b,c){var d,e;b.container&&(e=document.getElementById(b.container),e=e||document.querySelector(b.container)),e?d=new google.maps.StreetViewPanorama(e,b):(d=a.getStreetView(),d.setOptions(b));for(var f in c)f&&google.maps.event.addListener(d,f,c[f]);return d},e=function(a,e,f){var g=c.filter(f),h=c.getOptions(g,{scope:a}),i=c.getControlOptions(g),j=angular.extend(h,i),k=c.getEvents(a,g);b.getMap().then(function(a){var b=d(a,j,k);a.setStreetView(b),!b.getPosition()&&b.setPosition(a.getCenter()),google.maps.event.addListener(b,"position_changed",function(){b.getPosition()!==a.getCenter()&&a.setCenter(b.getPosition())});var c=google.maps.event.addListener(a,"center_changed",function(){b.setPosition(a.getCenter()),google.maps.event.removeListener(c)})})};return{restrict:"E",require:["?^map","?^ngMap"],link:e}};a.$inject=["Attr2MapOptions","NgMap"],angular.module("ngMap").directive("streetViewPanorama",a)}(),function(){"use strict";angular.module("ngMap").directive("trafficLayer",["Attr2MapOptions",function(a){var b=a,c=function(a,b){var c=new google.maps.TrafficLayer(a);for(var d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,d,e,f){f=f[0]||f[1];var g=b.orgAttributes(d),h=b.filter(e),i=b.getOptions(h,{scope:a}),j=b.getEvents(a,h),k=c(i,j);f.addObject("trafficLayers",k),f.observeAttrSetObj(g,e,k),d.bind("$destroy",function(){f.deleteObject("trafficLayers",k)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("transitLayer",["Attr2MapOptions",function(a){var b=a,c=function(a,b){var c=new google.maps.TransitLayer(a);for(var d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,d,e,f){f=f[0]||f[1];var g=b.orgAttributes(d),h=b.filter(e),i=b.getOptions(h,{scope:a}),j=b.getEvents(a,h),k=c(i,j);f.addObject("transitLayers",k),f.observeAttrSetObj(g,e,k),d.bind("$destroy",function(){f.deleteObject("transitLayers",k)})}}}])}(),function(){"use strict";var a=/([\:\-\_]+(.))/g,b=/^moz([A-Z])/,c=function(){return function(c){return c.replace(a,function(a,b,c,d){return d?c.toUpperCase():c}).replace(b,"Moz$1")}};angular.module("ngMap").filter("camelCase",c)}(),function(){"use strict";var a=function(){return function(a){try{return JSON.parse(a),a}catch(b){return a.replace(/([\$\w]+)\s*:/g,function(a,b){return'"'+b+'":'}).replace(/'([^']+)'/g,function(a,b){return'"'+b+'"'})}}};angular.module("ngMap").filter("jsonize",a)}(),function(){"use strict";var isoDateRE=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,Attr2MapOptions=function($parse,$timeout,$log,NavigatorGeolocation,GeoCoder,camelCaseFilter,jsonizeFilter){var orgAttributes=function(a){a.length>0&&(a=a[0]);for(var b={},c=0;c<a.attributes.length;c++){var d=a.attributes[c];b[d.name]=d.value}return b},getJSON=function(a){var b=/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/;return a.match(b)&&(a="["+a+"]"),JSON.parse(jsonizeFilter(a))},getLatLng=function(a){var b=a;return a[0].constructor==Array?b=a.map(function(a){return new google.maps.LatLng(a[0],a[1])}):!isNaN(parseFloat(a[0]))&&isFinite(a[0])&&(b=new google.maps.LatLng(b[0],b[1])),b},toOptionValue=function(input,options){var output;try{output=getNumber(input)}catch(err){try{var output=getJSON(input);if(output instanceof Array)output=output[0].constructor==Object?output:getLatLng(output);else if(output===Object(output)){var newOptions=options;newOptions.doNotConverStringToNumber=!0,output=getOptions(output,newOptions)}}catch(err2){if(input.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{var exp="new google.maps."+input;output=eval(exp)}catch(e){output=input}else if(input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var matches=input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);output=google.maps[matches[1]][matches[2]]}catch(e){output=input}else if(input.match(/^[A-Z]+$/))try{var capitalizedKey=options.key.charAt(0).toUpperCase()+options.key.slice(1);options.key.match(/temperatureUnit|windSpeedUnit|labelColor/)?(capitalizedKey=capitalizedKey.replace(/s$/,""),output=google.maps.weather[capitalizedKey][input]):output=google.maps[capitalizedKey][input]}catch(e){output=input}else if(input.match(isoDateRE))try{output=new Date(input)}catch(e){output=input}else if(input.match(/^{/)&&options.scope)try{var expr=input.replace(/{{/,"").replace(/}}/g,"");output=options.scope.$eval(expr)}catch(err){output=input}else output=input}}if(("center"==options.key||"center"==options.key)&&output instanceof Array&&(output=new google.maps.LatLng(output[0],output[1])),"bounds"==options.key&&output instanceof Array&&(output=new google.maps.LatLngBounds(output[0],output[1])),"icons"==options.key&&output instanceof Array)for(var i=0;i<output.length;i++){var el=output[i];el.icon.path.match(/^[A-Z_]+$/)&&(el.icon.path=google.maps.SymbolPath[el.icon.path])}if("icon"==options.key&&output instanceof Object){(""+output.path).match(/^[A-Z_]+$/)&&(output.path=google.maps.SymbolPath[output.path]);for(var key in output){var arr=output[key];"anchor"==key||"origin"==key||"labelOrigin"==key?output[key]=new google.maps.Point(arr[0],arr[1]):("size"==key||"scaledSize"==key)&&(output[key]=new google.maps.Size(arr[0],arr[1]))}}return output},getAttrsToObserve=function(a){var b=[];if(!a.noWatcher)for(var c in a){var d=a[c];d&&d.match(/\{\{.*\}\}/)&&b.push(camelCaseFilter(c));
}return b},filter=function(a){var b={};for(var c in a)c.match(/^\$/)||c.match(/^ng[A-Z]/)||(b[c]=a[c]);return b},getOptions=function(a,b){b=b||{};var c={};for(var d in a)if(a[d]||0===a[d]){if(d.match(/^on[A-Z]/))continue;if(d.match(/ControlOptions$/))continue;c[d]="string"!=typeof a[d]?a[d]:b.doNotConverStringToNumber&&a[d].match(/^[0-9]+$/)?a[d]:toOptionValue(a[d],{key:d,scope:b.scope})}return c},getEvents=function(a,b){var c={},d=function(a){return"_"+a.toLowerCase()},e=function(b){var c=b.match(/([^\(]+)\(([^\)]*)\)/),d=c[1],e=c[2].replace(/event[ ,]*/,""),f=$parse("["+e+"]");return function(b){function c(a,b){return a[b]}var e=f(a),g=d.split(".").reduce(c,a);g&&g.apply(this,[b].concat(e)),$timeout(function(){a.$apply()})}};for(var f in b)if(b[f]){if(!f.match(/^on[A-Z]/))continue;var g=f.replace(/^on/,"");g=g.charAt(0).toLowerCase()+g.slice(1),g=g.replace(/([A-Z])/g,d);var h=b[f];c[g]=new e(h)}return c},getControlOptions=function(a){var b={};if("object"!=typeof a)return!1;for(var c in a)if(a[c]){if(!c.match(/(.*)ControlOptions$/))continue;var d=a[c],e=d.replace(/'/g,'"');e=e.replace(/([^"]+)|("[^"]+")/g,function(a,b,c){return b?b.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):c});try{var f=JSON.parse(e);for(var g in f)if(f[g]){var h=f[g];if("string"==typeof h?h=h.toUpperCase():"mapTypeIds"===g&&(h=h.map(function(a){return a.match(/^[A-Z]+$/)?google.maps.MapTypeId[a.toUpperCase()]:a})),"style"===g){var i=c.charAt(0).toUpperCase()+c.slice(1),j=i.replace(/Options$/,"")+"Style";f[g]=google.maps[j][h]}else f[g]="position"===g?google.maps.ControlPosition[h]:h}b[c]=f}catch(k){}}return b};return{filter:filter,getOptions:getOptions,getEvents:getEvents,getControlOptions:getControlOptions,toOptionValue:toOptionValue,getAttrsToObserve:getAttrsToObserve,orgAttributes:orgAttributes}};Attr2MapOptions.$inject=["$parse","$timeout","$log","NavigatorGeolocation","GeoCoder","camelCaseFilter","jsonizeFilter"],angular.module("ngMap").service("Attr2MapOptions",Attr2MapOptions)}(),function(){"use strict";var a,b=function(b){var c=a.defer(),d=new google.maps.Geocoder;return d.geocode(b,function(a,b){b==google.maps.GeocoderStatus.OK?c.resolve(a):c.reject(b)}),c.promise},c=function(c){return a=c,{geocode:b}};c.$inject=["$q"],angular.module("ngMap").service("GeoCoder",c)}(),function(){"use strict";var a,b=function(b){var c=a.defer();return navigator.geolocation?(void 0===b?b={timeout:5e3}:void 0===b.timeout&&(b.timeout=5e3),navigator.geolocation.getCurrentPosition(function(a){c.resolve(a)},function(a){c.reject(a)},b)):c.reject("Browser Geolocation service failed."),c.promise},c=function(c){return a=c,{getCurrentPosition:b}};c.$inject=["$q"],angular.module("ngMap").service("NavigatorGeolocation",c)}(),function(){"use strict";var a,b,c,d=[],e=function(c){var e=b.createElement("div");e.style.width="100%",e.style.height="100%",c.appendChild(e);var f=new a.google.maps.Map(e,{});return d.push(f),f},f=function(a){for(var b,c=0;c<d.length;c++){var e=d[c];if(!e.inUse){var f=e.getDiv();a.appendChild(f),b=e;break}}return b},g=function(a){var b=f(a);return b?c(function(){google.maps.event.trigger(b,"idle")},100):b=e(a),b.inUse=!0,b},h=function(a){a.inUse=!1},i=function(e,f,i){return b=e[0],a=f,c=i,{mapInstances:d,getMapInstance:g,returnMapInstance:h}};i.$inject=["$document","$window","$timeout"],angular.module("ngMap").factory("NgMapPool",i)}(),function(){"use strict";var a,b,c,d,e,f,g,h={},i=function(c,d){var e;return c.currentStyle?e=c.currentStyle[d]:a.getComputedStyle&&(e=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)),e},j=function(a){var b=h[a||0];return b.map instanceof google.maps.Map?void 0:(b.initializeMap(),b.map)},k=function(b){function d(b){h[f]?e.resolve(h[f].map):b>g?e.reject("could not find map"):a.setTimeout(function(){d(b+100)},100)}b=b||{};var e=c.defer(),f=b.id||0,g=b.timeout||2e3;return d(0),e.promise},l=function(a){if(a.map){var b=Object.keys(h).length;h[a.map.id||b]=a}},m=function(a){var b=Object.keys(h).length-1,c=a.map.id||b;if(a.map){for(var d in a.mapEvents)google.maps.event.clearListeners(a.map,d);a.map.controls&&a.map.controls.forEach(function(a){a.clear()})}a.map.heatmapLayers&&Object.keys(a.map.heatmapLayers).forEach(function(b){a.deleteObject("heatmapLayers",a.map.heatmapLayers[b])}),delete h[c]},n=function(a,b){var e=c.defer();return!a||a.match(/^current/i)?d.getCurrentPosition(b).then(function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new google.maps.LatLng(b,c);e.resolve(d)},function(a){e.reject(a)}):f.geocode({address:a}).then(function(a){e.resolve(a[0].geometry.location)},function(a){e.reject(a)}),e.promise},o=function(a,b){return function(c){if(c){var d=g("set-"+a),f=e.toOptionValue(c,{key:a});b[d]&&(a.match(/center|position/)&&"string"==typeof f?n(f).then(function(a){b[d](a)}):b[d](f))}}},p=function(a){var b=a.getAttribute("default-style");"true"==b?(a.style.display="block",a.style.height="300px"):("block"!=i(a,"display")&&(a.style.display="block"),i(a,"height").match(/^(0|auto)/)&&(a.style.height="300px"))};angular.module("ngMap").provider("NgMap",function(){var h={};this.setDefaultOptions=function(a){h=a};var i=function(i,q,r,s,t,u,v){return a=i,b=q[0],c=r,d=s,e=t,f=u,g=v,{defaultOptions:h,addMap:l,deleteMap:m,getMap:k,initMap:j,setStyle:p,getGeoLocation:n,observeAndSet:o}};i.$inject=["$window","$document","$q","NavigatorGeolocation","Attr2MapOptions","GeoCoder","camelCaseFilter"],this.$get=i})}(),function(){"use strict";var a,b=function(b,c){c=c||b.getCenter();var d=a.defer(),e=new google.maps.StreetViewService;return e.getPanoramaByLocation(c||b.getCenter,100,function(a,b){b===google.maps.StreetViewStatus.OK?d.resolve(a.location.pano):d.resolve(!1)}),d.promise},c=function(a,b){var c=new google.maps.StreetViewPanorama(a.getDiv(),{enableCloseButton:!0});c.setPano(b)},d=function(d){return a=d,{getPanorama:b,setPanorama:c}};d.$inject=["$q"],angular.module("ngMap").service("StreetView",d)}(),!function(a,b){b["true"]=a,function(b,c){"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&"object"==typeof a?module.exports=b():c.rangy=b()}(function(){function a(a,b){var c=typeof a[b];return c==u||!(c!=t||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=t||!a[b])}function c(a,b){return typeof a[b]!=v}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&A(a,z)&&C(a,y)}function f(a){return b(a,"body")?a.body:a.getElementsByTagName("body")[0]}function g(b){typeof console!=v&&a(console,"log")&&void 0}function h(a,b){F&&b?alert(a):g(a)}function i(a){H.initialized=!0,H.supported=!1,h("Rangy is not supported in this environment. Reason: "+a,H.config.alertOnFail)}function j(a){h("Rangy warning: "+a,H.config.alertOnWarn)}function k(a){return a.message||a.description||String(a)}function l(){if(F&&!H.initialized){var b,c=!1,d=!1;a(document,"createRange")&&(b=document.createRange(),A(b,x)&&C(b,w)&&(c=!0));var h=f(document);if(!h||"body"!=h.nodeName.toLowerCase())return void i("No body element found");if(h&&a(h,"createTextRange")&&(b=h.createTextRange(),e(b)&&(d=!0)),!c&&!d)return void i("Neither Range nor TextRange are available");H.initialized=!0,H.features={implementsDomRange:c,implementsTextRange:d};var j,l;for(var m in E)(j=E[m])instanceof p&&j.init(j,H);for(var n=0,o=K.length;o>n;++n)try{K[n](H)}catch(q){l="Rangy init listener threw an exception. Continuing. Detail: "+k(q),g(l)}}}function m(a,b,c){c&&(a+=" in module "+c.name),H.warn("DEPRECATED: "+a+" is deprecated. Please use "+b+" instead.")}function n(a,b,c,d){a[b]=function(){return m(b,c,d),a[c].apply(a,G.toArray(arguments))}}function o(a){a=a||window,l();for(var b=0,c=L.length;c>b;++b)L[b](a)}function p(a,b,c){this.name=a,this.dependencies=b,this.initialized=!1,this.supported=!1,this.initializer=c}function q(a,b,c){var d=new p(a,b,function(b){if(!b.initialized){b.initialized=!0;try{c(H,b),b.supported=!0}catch(d){var e="Module '"+a+"' failed to load: "+k(d);g(e),d.stack&&g(d.stack)}}});return E[a]=d,d}function r(){}function s(){}var t="object",u="function",v="undefined",w=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],x=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],y=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],z=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],A=d(a),B=d(b),C=d(c),D=[].forEach?function(a,b){a.forEach(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c],c)},E={},F=typeof window!=v&&typeof document!=v,G={isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:A,areHostObjects:B,areHostProperties:C,isTextRange:e,getBody:f,forEach:D},H={version:"1.3.0",initialized:!1,isBrowser:F,supported:!0,util:G,features:{},modules:E,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==v?!0:rangyAutoInitialize}};H.fail=i,H.warn=j;var I;({}).hasOwnProperty?(G.extend=I=function(a,b,c){var d,e;for(var f in b)b.hasOwnProperty(f)&&(d=a[f],e=b[f],c&&null!==d&&"object"==typeof d&&null!==e&&"object"==typeof e&&I(d,e,!0),a[f]=e);return b.hasOwnProperty("toString")&&(a.toString=b.toString),a},G.createOptions=function(a,b){var c={};return I(c,b),a&&I(c,a),c}):i("hasOwnProperty not supported"),F||i("Rangy can only run in a browser"),function(){var a;if(F){var b=document.createElement("div");b.appendChild(document.createElement("span"));var c=[].slice;try{1==c.call(b.childNodes,0)[0].nodeType&&(a=function(a){return c.call(a,0)})}catch(d){}}a||(a=function(a){for(var b=[],c=0,d=a.length;d>c;++c)b[c]=a[c];return b}),G.toArray=a}();var J;F&&(a(document,"addEventListener")?J=function(a,b,c){a.addEventListener(b,c,!1)}:a(document,"attachEvent")?J=function(a,b,c){a.attachEvent("on"+b,c)}:i("Document does not have required addEventListener or attachEvent method"),G.addListener=J);var K=[];G.deprecationNotice=m,G.createAliasForDeprecatedMethod=n,H.init=l,H.addInitListener=function(a){H.initialized?a(H):K.push(a)};var L=[];H.addShimListener=function(a){L.push(a)},F&&(H.shim=H.createMissingNativeApi=o,n(H,"createMissingNativeApi","shim")),p.prototype={init:function(){for(var a,b,c=this.dependencies||[],d=0,e=c.length;e>d;++d){if(b=c[d],a=E[b],!(a&&a instanceof p))throw new Error("required module '"+b+"' not found");if(a.init(),!a.supported)throw new Error("required module '"+b+"' not supported")}this.initializer(this)},fail:function(a){throw this.initialized=!0,this.supported=!1,new Error(a)},warn:function(a){H.warn("Module "+this.name+": "+a)},deprecationNotice:function(a,b){H.warn("DEPRECATED: "+a+" in module "+this.name+" is deprecated. Please use "+b+" instead")},createError:function(a){return new Error("Error in Rangy "+this.name+" module: "+a)}},H.createModule=function(a){var b,c;2==arguments.length?(b=arguments[1],c=[]):(b=arguments[2],c=arguments[1]);var d=q(a,c,b);H.initialized&&H.supported&&d.init()},H.createCoreModule=function(a,b,c){q(a,b,c)},H.RangePrototype=r,H.rangePrototype=new r,H.selectionPrototype=new s,H.createCoreModule("DomUtil",[],function(a,b){function c(a){var b;return typeof a.namespaceURI==F||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)++b;return b}function f(a){switch(a.nodeType){case 7:case 10:return 0;case 3:case 8:return a.length;default:return a.childNodes.length}}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(K(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b){return h(a,b,!0)}function j(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function k(a){var b=a.nodeType;return 3==b||4==b||8==b}function l(a){if(!a)return!1;var b=a.nodeType;return 3==b||8==b}function m(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function n(a,b,c){var d=a.cloneNode(!1);if(d.deleteData(0,b),a.deleteData(b,a.length-b),m(d,a),c)for(var f,g=0;f=c[g++];)f.node==a&&f.offset>b?(f.node=d,f.offset-=b):f.node==a.parentNode&&f.offset>e(a)&&++f.offset;return d}function o(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=F)return a.ownerDocument;if(typeof a.document!=F)return a.document;if(a.parentNode)return o(a.parentNode);throw b.createError("getDocument: no document found for node")}function p(a){var c=o(a);if(typeof c.defaultView!=F)return c.defaultView;if(typeof c.parentWindow!=F)return c.parentWindow;throw b.createError("Cannot get a window object for node")}function q(a){if(typeof a.contentDocument!=F)return a.contentDocument;if(typeof a.contentWindow!=F)return a.contentWindow.document;throw b.createError("getIframeDocument: No Document object found for iframe element")}function r(a){if(typeof a.contentWindow!=F)return a.contentWindow;if(typeof a.contentDocument!=F)return a.contentDocument.defaultView;throw b.createError("getIframeWindow: No Window object found for iframe element")}function s(a){return a&&G.isHostMethod(a,"setTimeout")&&G.isHostObject(a,"document")}function t(a,b,c){var d;if(a?G.isHostProperty(a,"nodeType")?d=1==a.nodeType&&"iframe"==a.tagName.toLowerCase()?q(a):o(a):s(a)&&(d=a.document):d=document,!d)throw b.createError(c+"(): Parameter must be a Window object or DOM node");return d}function u(a){for(var b;b=a.parentNode;)a=b;return a}function v(a,c,d,f){var h,i,k,l,m;if(a==d)return c===f?0:f>c?-1:1;if(h=j(d,a,!0))return c<=e(h)?-1:1;if(h=j(a,d,!0))return e(h)<f?-1:1;if(i=g(a,d),!i)throw new Error("comparePoints error: nodes have no common ancestor");if(k=a===i?i:j(a,i,!0),l=d===i?i:j(d,i,!0),k===l)throw b.createError("comparePoints got to case 4 and childA and childB are the same!");for(m=i.firstChild;m;){if(m===k)return-1;if(m===l)return 1;m=m.nextSibling}}function w(a){var b;try{return b=a.parentNode,!1}catch(c){return!0}}function x(a){if(!a)return"[No node]";if(L&&w(a))return"[Broken node]";if(k(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">[index:"+e(a)+",length:"+a.childNodes.length+"]["+(a.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return a.nodeName}function y(a){for(var b,c=o(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function z(a,b,c){var d=H(a),e=a.createElement("div");e.contentEditable=""+!!c,b&&(e.innerHTML=b);var f=d.firstChild;return f?d.insertBefore(e,f):d.appendChild(e),e}function A(a){return a.parentNode.removeChild(a)}function B(a){this.root=a,this._next=a}function C(a){return new B(a)}function D(a,b){this.node=a,this.offset=b}function E(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var F="undefined",G=a.util,H=G.getBody;G.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),G.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var I=document.createElement("div");G.areHostMethods(I,["insertBefore","appendChild","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),G.isHostProperty(I,"innerHTML")||b.fail("Element is missing innerHTML property");var J=document.createTextNode("test");G.areHostMethods(J,["splitText","deleteData","insertData","appendData","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"])||!G.areHostProperties(J,["data"]))||b.fail("Incomplete Text Node implementation");var K=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1},L=!1;!function(){var b=document.createElement("b");b.innerHTML="1";var c=b.firstChild;b.innerHTML="<br />",L=w(c),a.features.crashyTextNodes=L}();var M;typeof window.getComputedStyle!=F?M=function(a,b){return p(a).getComputedStyle(a,null)[b]}:typeof document.documentElement.currentStyle!=F?M=function(a,b){return a.currentStyle?a.currentStyle[b]:""}:b.fail("No means of obtaining computed style properties found"),B.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},D.prototype={equals:function(a){return!!a&&this.node===a.node&&this.offset==a.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},E.prototype.toString=function(){return this.message},a.dom={arrayContains:K,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,isOrIsAncestorOf:i,getClosestAncestorIn:j,isCharacterDataNode:k,isTextOrCommentNode:l,insertAfter:m,splitDataNode:n,getDocument:o,getWindow:p,getIframeWindow:r,getIframeDocument:q,getBody:H,isWindow:s,getContentDocument:t,getRootContainer:u,comparePoints:v,isBrokenNode:w,inspectNode:x,getComputedStyleProperty:M,createTestElement:z,removeNode:A,fragmentFromNodeChildren:y,createIterator:C,DomPosition:D},a.DOMException=E}),H.createCoreModule("DomRange",["DomUtil"],function(a,b){function c(a,b){return 3!=a.nodeType&&(P(a,b.startContainer)||P(a,b.endContainer))}function d(a){return a.document||Q(a.startContainer)}function e(a){return W(a.startContainer)}function f(a){return new L(a.parentNode,O(a))}function g(a){return new L(a.parentNode,O(a)+1)}function h(a,b,c){var d=11==a.nodeType?a.firstChild:a;return N(b)?c==b.length?J.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:S(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function i(a,b,c){if(z(a),z(b),d(b)!=d(a))throw new M("WRONG_DOCUMENT_ERR");var e=R(a.startContainer,a.startOffset,b.endContainer,b.endOffset),f=R(a.endContainer,a.endOffset,b.startContainer,b.startOffset);return c?0>=e&&f>=0:0>e&&f>0}function j(a){for(var b,c,e,f=d(a.range).createDocumentFragment();c=a.next();){if(b=a.isPartiallySelectedSubtree(),c=c.cloneNode(!b),b&&(e=a.getSubtreeIterator(),c.appendChild(j(e)),e.detach()),10==c.nodeType)throw new M("HIERARCHY_REQUEST_ERR");f.appendChild(c)}return f}function k(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),k(g,b,c),g.detach(),c.stop)return}else for(d=J.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function l(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),l(b),b.detach()):a.remove()}function m(a){for(var b,c,e=d(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),c=a.getSubtreeIterator(),b.appendChild(m(c)),c.detach()):a.remove(),10==b.nodeType)throw new M("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function n(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return k(new p(a,!1),function(b){if((!e||d.test(b.nodeType))&&(!f||c(b))){var h=a.startContainer;if(b!=h||!N(h)||a.startOffset!=h.length){var i=a.endContainer;b==i&&N(i)&&0==a.endOffset||g.push(b)}}}),g}function o(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+J.inspectNode(a.startContainer)+":"+a.startOffset+", "+J.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function p(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&N(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||N(this.sc)?T(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||N(this.ec)?T(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,V(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(ea(a,b))throw new M("INVALID_NODE_TYPE_ERR")}function s(a,b){if(!V(b,a.nodeType))throw new M("INVALID_NODE_TYPE_ERR")}function t(a,b){if(0>b||b>(N(a)?a.length:a.childNodes.length))throw new M("INDEX_SIZE_ERR")}function u(a,b){if(ca(a,!0)!==ca(b,!0))throw new M("WRONG_DOCUMENT_ERR")}function v(a){if(da(a,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function w(a,b){if(!a)throw new M(b)}function x(a,b){return b<=(N(a)?a.length:a.childNodes.length)}function y(a){return!!a.startContainer&&!!a.endContainer&&!(X&&(J.isBrokenNode(a.startContainer)||J.isBrokenNode(a.endContainer)))&&W(a.startContainer)==W(a.endContainer)&&x(a.startContainer,a.startOffset)&&x(a.endContainer,a.endOffset)}function z(a){if(!y(a))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+a.inspect()+")")}function A(a,b){z(a);var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset,g=c===e;N(e)&&f>0&&f<e.length&&S(e,f,b),N(c)&&d>0&&d<c.length&&(c=S(c,d,b),g?(f-=d,e=c):e==c.parentNode&&f>=O(c)&&f++,d=0),a.setStartAndEnd(c,d,e,f)}function B(a){z(a);var b=a.commonAncestorContainer.parentNode.cloneNode(!1);return b.appendChild(a.cloneContents()),b.innerHTML}function C(a){a.START_TO_START=ka,a.START_TO_END=la,a.END_TO_END=ma,a.END_TO_START=na,a.NODE_BEFORE=oa,a.NODE_AFTER=pa,a.NODE_BEFORE_AND_AFTER=qa,a.NODE_INSIDE=ra}function D(a){C(a),C(a.prototype)}function E(a,b){return function(){z(this);var c,d,e=this.startContainer,f=this.startOffset,h=this.commonAncestorContainer,i=new p(this,!0);e!==h&&(c=T(e,h,!0),d=g(c),e=d.node,f=d.offset),k(i,v),i.reset();var j=a(i);return i.detach(),b(this,e,f,e,f),j}}function F(b,d){function e(a,b){return function(c){s(c,Z),s(W(c),$);var d=(a?f:g)(c);(b?h:i)(this,d.node,d.offset)}}function h(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((W(b)!=W(e)||1==R(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function i(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((W(b)!=W(e)||-1==R(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}var j=function(){};j.prototype=a.rangePrototype,b.prototype=new j,K.extend(b.prototype,{setStart:function(a,b){r(a,!0),t(a,b),h(this,a,b)},setEnd:function(a,b){r(a,!0),t(a,b),i(this,a,b)},setStartAndEnd:function(){var a=arguments,b=a[0],c=a[1],e=b,f=c;switch(a.length){case 3:f=a[2];break;case 4:e=a[2],f=a[3]}d(this,b,c,e,f)},setBoundary:function(a,b,c){this["set"+(c?"Start":"End")](a,b)},setStartBefore:e(!0,!0),setStartAfter:e(!1,!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(a){z(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){r(a,!0),d(this,a,0,a,U(a))},selectNode:function(a){r(a,!1),s(a,Z);var b=f(a),c=g(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:E(m,d),deleteContents:E(l,d),canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},splitBoundaries:function(){A(this)},splitBoundariesPreservingPositions:function(a){A(this,a)},normalizeBoundaries:function(){z(this);var a,b=this.startContainer,c=this.startOffset,e=this.endContainer,f=this.endOffset,g=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(e=a,f=a.length,a.appendData(b.data),Y(b))},h=function(a){var d=a.previousSibling;if(d&&d.nodeType==a.nodeType){b=a;var g=a.length;if(c=d.length,a.insertData(0,d.data),Y(d),b==e)f+=c,e=b;else if(e==a.parentNode){var h=O(a);f==h?(e=a,f=g):f>h&&f--}}},i=!0;if(N(e))f==e.length?g(e):0==f&&(a=e.previousSibling,a&&a.nodeType==e.nodeType&&(f=a.length,b==e&&(i=!1),a.appendData(e.data),Y(e),e=a));else{if(f>0){var j=e.childNodes[f-1];j&&N(j)&&g(j)}i=!this.collapsed}if(i){if(N(b))0==c?h(b):c==b.length&&(a=b.nextSibling,a&&a.nodeType==b.nodeType&&(e==a&&(e=b,f+=b.length),b.appendData(a.data),Y(a)));else if(c<b.childNodes.length){var k=b.childNodes[c];k&&N(k)&&h(k)}}else b=e,c=f;d(this,b,c,e,f)},collapseToPoint:function(a,b){r(a,!0),t(a,b),this.setStartAndEnd(a,b)}}),D(b)}function G(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:J.getCommonAncestor(a.startContainer,a.endContainer)}function H(a,b,c,d,e){a.startContainer=b,a.startOffset=c,a.endContainer=d,a.endOffset=e,a.document=J.getDocument(b),G(a)}function I(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this.document=a,G(this)}var J=a.dom,K=a.util,L=J.DomPosition,M=a.DOMException,N=J.isCharacterDataNode,O=J.getNodeIndex,P=J.isOrIsAncestorOf,Q=J.getDocument,R=J.comparePoints,S=J.splitDataNode,T=J.getClosestAncestorIn,U=J.getNodeLength,V=J.arrayContains,W=J.getRootContainer,X=a.features.crashyTextNodes,Y=J.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,N(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!N(c)||c!==this.sc&&c!==this.ec?c.parentNode&&Y(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return c(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse(!1);else{a=new I(d(this.range));var b=this._current,c=b,e=0,f=b,g=U(b);P(b,this.sc)&&(c=this.sc,e=this.so),P(b,this.ec)&&(f=this.ec,g=this.eo),H(a,c,e,f,g)}return new p(a,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Z=[1,3,4,5,7,8,10],$=[2,9,11],_=[5,6,10,12],aa=[1,3,4,5,7,8,10,11],ba=[1,3,4,5,7,8],ca=q([9,11]),da=q(_),ea=q([6,10,12]),fa=document.createElement("style"),ga=!1;try{fa.innerHTML="<b>x</b>",ga=3==fa.firstChild.nodeType}catch(ha){}a.features.htmlParsingConforms=ga;var ia=ga?function(a){var b=this.startContainer,c=Q(b);if(!b)throw new M("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:N(b)&&(d=J.parentElement(b)),d=null===d||"HTML"==d.nodeName&&J.isHtmlNamespace(Q(d).documentElement)&&J.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,J.fragmentFromNodeChildren(d)}:function(a){var b=d(this),c=b.createElement("body");return c.innerHTML=a,J.fragmentFromNodeChildren(c)},ja=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ka=0,la=1,ma=2,na=3,oa=0,pa=1,qa=2,ra=3;K.extend(a.rangePrototype,{compareBoundaryPoints:function(a,b){z(this),u(this.startContainer,b.startContainer);var c,d,e,f,g=a==na||a==ka?"start":"end",h=a==la||a==ka?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],R(c,d,e,f)},insertNode:function(a){if(z(this),s(a,aa),v(this.startContainer),P(a,this.startContainer))throw new M("HIERARCHY_REQUEST_ERR");var b=h(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){z(this);var a,b;if(this.collapsed)return d(this).createDocumentFragment();if(this.startContainer===this.endContainer&&N(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=d(this).createDocumentFragment(),b.appendChild(a),b;var c=new p(this,!0);return a=j(c),c.detach(),a},canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},surroundContents:function(a){if(s(a,ba),!this.canSurroundContents())throw new M("INVALID_STATE_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);h(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){z(this);for(var a,b=new I(d(this)),c=ja.length;c--;)a=ja[c],b[a]=this[a];return b},toString:function(){z(this);var a=this.startContainer;if(a===this.endContainer&&N(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new p(this,!0);return k(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){z(this);var b=a.parentNode,c=O(a);if(!b)throw new M("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?qa:oa:e>0?pa:ra},comparePoint:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)<0?-1:R(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:ia,toHtml:function(){return B(this)},intersectsNode:function(a,b){if(z(this),W(a)!=e(this))return!1;var c=a.parentNode,d=O(a);if(!c)return!0;var f=R(c,d,this.endContainer,this.endOffset),g=R(c,d+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)>=0&&R(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a){return i(this,a,!1)},intersectsOrTouchesRange:function(a){return i(this,a,!0)},intersection:function(a){if(this.intersectsRange(a)){var b=R(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=R(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsOrTouchesRange(a)){var b=this.cloneRange();return-1==R(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==R(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new M("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==ra},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,U(a))<=0},containsRange:function(a){var b=this.intersection(a);return null!==b&&a.equals(b)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();return b.setEnd(d,d.length),this.containsRange(b)}return this.containsNodeContents(a)},getNodes:function(a,b){return z(this),n(this,a,b)},getDocument:function(){return d(this)},collapseBefore:function(a){this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){this.setStartAfter(a),this.collapse(!0)},getBookmark:function(b){var c=d(this),e=a.createRange(c);b=b||J.getBody(c),e.selectNodeContents(b);var f=this.intersection(e),g=0,h=0;return f&&(e.setEnd(f.startContainer,f.startOffset),g=e.toString().length,h=g+f.toString().length),{start:g,end:h,containerNode:b}},moveToBookmark:function(a){var b=a.containerNode,c=0;this.setStart(b,0),this.collapse(!0);for(var d,e,f,g,h=[b],i=!1,j=!1;!j&&(d=h.pop());)if(3==d.nodeType)e=c+d.length,!i&&a.start>=c&&a.start<=e&&(this.setStart(d,a.start-c),
i=!0),i&&a.end>=c&&a.end<=e&&(this.setEnd(d,a.end-c),j=!0),c=e;else for(g=d.childNodes,f=g.length;f--;)h.push(g[f])},getName:function(){return"DomRange"},equals:function(a){return I.rangesEqual(this,a)},isValid:function(){return y(this)},inspect:function(){return o(this)},detach:function(){}}),F(I,H),K.extend(I,{rangeProperties:ja,RangeIterator:p,copyComparisonConstants:D,createPrototypeRange:F,inspect:o,toHtml:B,getRangeDocument:d,rangesEqual:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}}),a.DomRange=I}),H.createCoreModule("WrappedRange",["DomRange"],function(a,b){var c,d,e=a.dom,f=a.util,g=e.DomPosition,h=a.DomRange,i=e.getBody,j=e.getContentDocument,k=e.isCharacterDataNode;if(a.features.implementsDomRange&&!function(){function d(a){for(var b,c=m.length;c--;)b=m[c],a[b]=a.nativeRange[b];a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset}function g(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e,h=!a.equals(a.nativeRange);(f||g||h)&&(a.setEnd(d,e),a.setStart(b,c))}var k,l,m=h.rangeProperties;c=function(a){if(!a)throw b.createError("WrappedRange: Range must be specified");this.nativeRange=a,d(this)},h.createPrototypeRange(c,g),k=c.prototype,k.selectNode=function(a){this.nativeRange.selectNode(a),d(this)},k.cloneContents=function(){return this.nativeRange.cloneContents()},k.surroundContents=function(a){this.nativeRange.surroundContents(a),d(this)},k.collapse=function(a){this.nativeRange.collapse(a),d(this)},k.cloneRange=function(){return new c(this.nativeRange.cloneRange())},k.refresh=function(){d(this)},k.toString=function(){return this.nativeRange.toString()};var n=document.createTextNode("test");i(document).appendChild(n);var o=document.createRange();o.setStart(n,0),o.setEnd(n,0);try{o.setStart(n,1),k.setStart=function(a,b){this.nativeRange.setStart(a,b),d(this)},k.setEnd=function(a,b){this.nativeRange.setEnd(a,b),d(this)},l=function(a){return function(b){this.nativeRange[a](b),d(this)}}}catch(p){k.setStart=function(a,b){try{this.nativeRange.setStart(a,b)}catch(c){this.nativeRange.setEnd(a,b),this.nativeRange.setStart(a,b)}d(this)},k.setEnd=function(a,b){try{this.nativeRange.setEnd(a,b)}catch(c){this.nativeRange.setStart(a,b),this.nativeRange.setEnd(a,b)}d(this)},l=function(a,b){return function(c){try{this.nativeRange[a](c)}catch(e){this.nativeRange[b](c),this.nativeRange[a](c)}d(this)}}}k.setStartBefore=l("setStartBefore","setEndBefore"),k.setStartAfter=l("setStartAfter","setEndAfter"),k.setEndBefore=l("setEndBefore","setStartBefore"),k.setEndAfter=l("setEndAfter","setStartAfter"),k.selectNodeContents=function(a){this.setStartAndEnd(a,0,e.getNodeLength(a))},o.selectNodeContents(n),o.setEnd(n,3);var q=document.createRange();q.selectNodeContents(n),q.setEnd(n,4),q.setStart(n,2),-1==o.compareBoundaryPoints(o.START_TO_END,q)&&1==o.compareBoundaryPoints(o.END_TO_START,q)?k.compareBoundaryPoints=function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:k.compareBoundaryPoints=function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)};var r=document.createElement("div");r.innerHTML="123";var s=r.firstChild,t=i(document);t.appendChild(r),o.setStart(s,1),o.setEnd(s,2),o.deleteContents(),"13"==s.data&&(k.deleteContents=function(){this.nativeRange.deleteContents(),d(this)},k.extractContents=function(){var a=this.nativeRange.extractContents();return d(this),a}),t.removeChild(r),t=null,f.isHostMethod(o,"createContextualFragment")&&(k.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),i(document).removeChild(n),k.getName=function(){return"WrappedRange"},a.WrappedRange=c,a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),a.createRange()}}(),a.features.implementsTextRange){var l=function(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var f=c.parentElement(),g=d==f?d:e.getCommonAncestor(d,f);return g==b?g:e.getCommonAncestor(b,g)},m=function(a){return 0==a.compareEndPoints("StartToEnd",a)},n=function(a,b,c,d,f){var h=a.duplicate();h.collapse(c);var i=h.parentElement();if(e.isOrIsAncestorOf(b,i)||(i=b),!i.canHaveHTML){var j=new g(i.parentNode,e.getNodeIndex(i));return{boundaryPosition:j,nodeInfo:{nodeIndex:j.offset,containerElement:j.node}}}var l=e.getDocument(i).createElement("span");l.parentNode&&e.removeNode(l);for(var m,n,o,p,q,r=c?"StartToStart":"StartToEnd",s=f&&f.containerElement==i?f.nodeIndex:0,t=i.childNodes.length,u=t,v=u;v==t?i.appendChild(l):i.insertBefore(l,i.childNodes[v]),h.moveToElementText(l),m=h.compareEndPoints(r,a),0!=m&&s!=u;){if(-1==m){if(u==s+1)break;s=v}else u=u==s+1?s:v;v=Math.floor((s+u)/2),i.removeChild(l)}if(q=l.nextSibling,-1==m&&q&&k(q)){h.setEndPoint(c?"EndToStart":"EndToEnd",a);var w;if(/[\r\n]/.test(q.data)){var x=h.duplicate(),y=x.text.replace(/\r\n/g,"\r").length;for(w=x.moveStart("character",y);-1==(m=x.compareEndPoints("StartToEnd",x));)w++,x.moveStart("character",1)}else w=h.text.length;p=new g(q,w)}else n=(d||!c)&&l.previousSibling,o=(d||c)&&l.nextSibling,p=o&&k(o)?new g(o,0):n&&k(n)?new g(n,n.data.length):new g(i,e.getNodeIndex(l));return e.removeNode(l),{boundaryPosition:p,nodeInfo:{nodeIndex:v,containerElement:i}}},o=function(a,b){var c,d,f,g,h=a.offset,j=e.getDocument(a.node),l=i(j).createTextRange(),m=k(a.node);return m?(c=a.node,d=c.parentNode):(g=a.node.childNodes,c=h<g.length?g[h]:null,d=a.node),f=j.createElement("span"),f.innerHTML="&#feff;",c?d.insertBefore(f,c):d.appendChild(f),l.moveToElementText(f),l.collapse(!b),d.removeChild(f),m&&l[b?"moveStart":"moveEnd"]("character",h),l};d=function(a){this.textRange=a,this.refresh()},d.prototype=new h(document),d.prototype.refresh=function(){var a,b,c,d=l(this.textRange);m(this.textRange)?b=a=n(this.textRange,d,!0,!0).boundaryPosition:(c=n(this.textRange,d,!0,!1),a=c.boundaryPosition,b=n(this.textRange,d,!1,!1,c.nodeInfo).boundaryPosition),this.setStart(a.node,a.offset),this.setEnd(b.node,b.offset)},d.prototype.getName=function(){return"WrappedTextRange"},h.copyComparisonConstants(d);var p=function(a){if(a.collapsed)return o(new g(a.startContainer,a.startOffset),!0);var b=o(new g(a.startContainer,a.startOffset),!0),c=o(new g(a.endContainer,a.endOffset),!1),d=i(h.getRangeDocument(a)).createTextRange();return d.setEndPoint("StartToStart",b),d.setEndPoint("EndToEnd",c),d};if(d.rangeToTextRange=p,d.prototype.toTextRange=function(){return p(this)},a.WrappedTextRange=d,!a.features.implementsDomRange||a.config.preferTextRange){var q=function(a){return a("return this;")()}(Function);"undefined"==typeof q.Range&&(q.Range=d),a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),i(a).createTextRange()},a.WrappedRange=d}}a.createRange=function(c){return c=j(c,b,"createRange"),new a.WrappedRange(a.createNativeRange(c))},a.createRangyRange=function(a){return a=j(a,b,"createRangyRange"),new h(a)},f.createAliasForDeprecatedMethod(a,"createIframeRange","createRange"),f.createAliasForDeprecatedMethod(a,"createIframeRangyRange","createRangyRange"),a.addShimListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(c)}),c=b=null})}),H.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(a,b){function c(a){return"string"==typeof a?/^backward(s)?$/i.test(a):!!a}function d(a,c){if(a){if(C.isWindow(a))return a;if(a instanceof r)return a.win;var d=C.getContentDocument(a,b,c);return C.getWindow(d)}return window}function e(a){return d(a,"getWinSelection").getSelection()}function f(a){return d(a,"getDocSelection").document.selection}function g(a){var b=!1;return a.anchorNode&&(b=1==C.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b}function h(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function i(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function j(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function k(b){var c;return b instanceof F?(c=a.createNativeRange(b.getDocument()),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset)):b instanceof G?c=b.nativeRange:J.implementsDomRange&&b instanceof C.getWindow(b.startContainer).Range&&(c=b),c}function l(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!C.isAncestorOf(a[0],a[b]))return!1;return!0}function m(a){var c=a.getNodes();if(!l(c))throw b.createError("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return c[0]}function n(a){return!!a&&"undefined"!=typeof a.text}function o(a,b){var c=new G(b);a._ranges=[c],h(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function p(b){if(b._ranges.length=0,"None"==b.docSelection.type)j(b);else{var c=b.docSelection.createRange();if(n(c))o(b,c);else{b.rangeCount=c.length;for(var d,e=L(c.item(0)),f=0;f<b.rangeCount;++f)d=a.createRange(e),d.selectNode(c.item(f)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,h(b,b._ranges[b.rangeCount-1],!1)}}}function q(a,c){for(var d=a.docSelection.createRange(),e=m(c),f=L(d.item(0)),g=M(f).createControlRange(),h=0,i=d.length;i>h;++h)g.add(d.item(h));try{g.add(e)}catch(j){throw b.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}g.select(),p(a)}function r(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function s(a){a.win=a.anchorNode=a.focusNode=a._ranges=null,a.rangeCount=a.anchorOffset=a.focusOffset=0,a.detached=!0}function t(a,b){for(var c,d,e=ba.length;e--;)if(c=ba[e],d=c.selection,"deleteAll"==b)s(d);else if(c.win==a)return"delete"==b?(ba.splice(e,1),!0):d;return"deleteAll"==b&&(ba.length=0),null}function u(a,c){for(var d,e=L(c[0].startContainer),f=M(e).createControlRange(),g=0,h=c.length;h>g;++g){d=m(c[g]);try{f.add(d)}catch(i){throw b.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}f.select(),p(a)}function v(a,b){if(a.win.document!=L(b))throw new H("WRONG_DOCUMENT_ERR")}function w(b){return function(c,d){var e;this.rangeCount?(e=this.getRangeAt(0),e["set"+(b?"Start":"End")](c,d)):(e=a.createRange(this.win.document),e.setStartAndEnd(c,d)),this.setSingleRange(e,this.isBackward())}}function x(a){var b=[],c=new I(a.anchorNode,a.anchorOffset),d=new I(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=F.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.config.checkSelectionRanges=!0;var y,z,A="boolean",B="number",C=a.dom,D=a.util,E=D.isHostMethod,F=a.DomRange,G=a.WrappedRange,H=a.DOMException,I=C.DomPosition,J=a.features,K="Control",L=C.getDocument,M=C.getBody,N=F.rangesEqual,O=E(window,"getSelection"),P=D.isHostObject(document,"selection");J.implementsWinGetSelection=O,J.implementsDocSelection=P;var Q=P&&(!O||a.config.preferTextRange);if(Q)y=f,a.isSelectionValid=function(a){var b=d(a,"isSelectionValid").document,c=b.selection;return"None"!=c.type||L(c.createRange().parentElement())==b};else{if(!O)return b.fail("Neither document.selection or window.getSelection() detected."),!1;y=e,a.isSelectionValid=function(){return!0}}a.getNativeSelection=y;var R=y();if(!R)return b.fail("Native selection was null (possibly issue 138?)"),!1;var S=a.createNativeRange(document),T=M(document),U=D.areHostProperties(R,["anchorNode","focusNode","anchorOffset","focusOffset"]);J.selectionHasAnchorAndFocus=U;var V=E(R,"extend");J.selectionHasExtend=V;var W=typeof R.rangeCount==B;J.selectionHasRangeCount=W;var X=!1,Y=!0,Z=V?function(b,c){var d=F.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.addRange(k(e)),b.extend(c.startContainer,c.startOffset)}:null;D.areHostMethods(R,["addRange","getRangeAt","removeAllRanges"])&&typeof R.rangeCount==B&&J.implementsDomRange&&!function(){var b=window.getSelection();if(b){for(var c=b.rangeCount,d=c>1,e=[],f=g(b),h=0;c>h;++h)e[h]=b.getRangeAt(h);var i=C.createTestElement(document,"",!1),j=i.appendChild(document.createTextNode("   ")),k=document.createRange();if(k.setStart(j,1),k.collapse(!0),b.removeAllRanges(),b.addRange(k),Y=1==b.rangeCount,b.removeAllRanges(),!d){var l=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(l&&parseInt(l[1])>=36)X=!1;else{var m=k.cloneRange();k.setStart(j,0),m.setEnd(j,3),m.setStart(j,2),b.addRange(k),b.addRange(m),X=2==b.rangeCount}}for(C.removeNode(i),b.removeAllRanges(),h=0;c>h;++h)0==h&&f?Z?Z(b,e[h]):(a.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),b.addRange(e[h])):b.addRange(e[h])}}(),J.selectionSupportsMultipleRanges=X,J.collapsedNonEditableSelectionsSupported=Y;var $,_=!1;T&&E(T,"createControlRange")&&($=T.createControlRange(),D.areHostProperties($,["item","add"])&&(_=!0)),J.implementsControlRange=_,z=U?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var aa;E(R,"getRangeAt")?aa=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:U&&(aa=function(b){var c=L(b.anchorNode),d=a.createRange(c);return d.setStartAndEnd(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&d.setStartAndEnd(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset),d}),r.prototype=a.selectionPrototype;var ba=[],ca=function(a){if(a&&a instanceof r)return a.refresh(),a;a=d(a,"getNativeSelection");var b=t(a),c=y(a),e=P?f(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh()):(b=new r(c,e,a),ba.push({win:a,selection:b})),b};a.getSelection=ca,D.createAliasForDeprecatedMethod(a,"getIframeSelection","getSelection");var da=r.prototype;if(!Q&&U&&D.areHostMethods(R,["removeAllRanges","addRange"])){da.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),j(this)};var ea=function(a,b){Z(a.nativeSelection,b),a.refresh()};W?da.addRange=function(b,d){if(_&&P&&this.docSelection.type==K)q(this,b);else if(c(d)&&V)ea(this,b);else{var e;X?e=this.rangeCount:(this.removeAllRanges(),e=0);var f=k(b).cloneRange();try{this.nativeSelection.addRange(f)}catch(g){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==e+1){if(a.config.checkSelectionRanges){var i=aa(this.nativeSelection,this.rangeCount-1);i&&!N(i,b)&&(b=new G(i))}this._ranges[this.rangeCount-1]=b,h(this,b,ha(this.nativeSelection)),this.isCollapsed=z(this)}else this.refresh()}}:da.addRange=function(a,b){c(b)&&V?ea(this,a):(this.nativeSelection.addRange(k(a)),this.refresh())},da.setRanges=function(a){if(_&&P&&a.length>1)u(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(E(R,"empty")&&E(S,"select")&&_&&Q))return b.fail("No means of selecting a Range or TextRange was found"),!1;da.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=L(this.anchorNode);else if(this.docSelection.type==K){var b=this.docSelection.createRange();b.length&&(a=L(b.item(0)))}if(a){var c=M(a).createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}j(this)},da.addRange=function(b){this.docSelection.type==K?q(this,b):(a.WrappedTextRange.rangeToTextRange(b).select(),this._ranges[0]=b,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,h(this,b,!1))},da.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?u(this,a):b&&this.addRange(a[0])}}da.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new H("INDEX_SIZE_ERR");return this._ranges[a].cloneRange()};var fa;if(Q)fa=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=M(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==K?p(b):n(c)?o(b,c):j(b)};else if(E(R,"getRangeAt")&&typeof R.rangeCount==B)fa=function(b){if(_&&P&&b.docSelection.type==K)p(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));h(b,b._ranges[b.rangeCount-1],ha(b.nativeSelection)),b.isCollapsed=z(b)}else j(b)};else{if(!U||typeof R.isCollapsed!=A||typeof S.collapsed!=A||!J.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;fa=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=aa(c,0),a._ranges=[b],a.rangeCount=1,i(a),a.isCollapsed=z(a)):j(a)}}da.refresh=function(a){var b=a?this._ranges.slice(0):null,c=this.anchorNode,d=this.anchorOffset;if(fa(this),a){var e=b.length;if(e!=this._ranges.length)return!0;if(this.anchorNode!=c||this.anchorOffset!=d)return!0;for(;e--;)if(!N(b[e],this._ranges[e]))return!0;return!1}};var ga=function(a,b){var c=a.getAllRanges();a.removeAllRanges();for(var d=0,e=c.length;e>d;++d)N(b,c[d])||a.addRange(c[d]);a.rangeCount||j(a)};_&&P?da.removeRange=function(a){if(this.docSelection.type==K){for(var b,c=this.docSelection.createRange(),d=m(a),e=L(c.item(0)),f=M(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),p(this)}else ga(this,a)}:da.removeRange=function(a){ga(this,a)};var ha;!Q&&U&&J.implementsDomRange?(ha=g,da.isBackward=function(){return ha(this)}):ha=da.isBackward=function(){return!1},da.isBackwards=da.isBackward,da.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},da.collapse=function(b,c){v(this,b);var d=a.createRange(b);d.collapseToPoint(b,c),this.setSingleRange(d),this.isCollapsed=!0},da.collapseToStart=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},da.collapseToEnd=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},da.selectAllChildren=function(b){v(this,b);var c=a.createRange(b);c.selectNodeContents(b),this.setSingleRange(c)},da.deleteFromDocument=function(){if(_&&P&&this.docSelection.type==K){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),C.removeNode(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();if(c.length){this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}}},da.eachRange=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(a(this.getRangeAt(c)))return b},da.getAllRanges=function(){var a=[];return this.eachRange(function(b){a.push(b)}),a},da.setSingleRange=function(a,b){this.removeAllRanges(),this.addRange(a,b)},da.callMethodOnEachRange=function(a,b){var c=[];return this.eachRange(function(d){c.push(d[a].apply(d,b||[]))}),c},da.setStart=w(!0),da.setEnd=w(!1),a.rangePrototype.select=function(a){ca(this.getDocument()).setSingleRange(this,a)},da.changeEachRange=function(a){var b=[],c=this.isBackward();this.eachRange(function(c){a(c),b.push(c)}),this.removeAllRanges(),c&&1==b.length?this.addRange(b[0],"backward"):this.setRanges(b)},da.containsNode=function(a,b){return this.eachRange(function(c){return c.containsNode(a,b)},!0)||!1},da.getBookmark=function(a){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[a])}},da.moveToBookmark=function(b){for(var c,d,e=[],f=0;c=b.rangeBookmarks[f++];)d=a.createRange(this.win),d.moveToBookmark(c),e.push(d);b.backward?this.setSingleRange(e[0],"backward"):this.setRanges(e)},da.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},da.restoreRanges=function(a){this.removeAllRanges();for(var b,c=0;b=a.ranges[c];++c)this.addRange(b,a.backward&&0==c)},da.toHtml=function(){var a=[];return this.eachRange(function(b){a.push(F.toHtml(b))}),a.join("")},J.implementsTextRange&&(da.getNativeTextRange=function(){var c;if(c=this.docSelection){var d=c.createRange();if(n(d))return d;throw b.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return a.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw b.createError("getNativeTextRange: selection contains no range")}),da.getName=function(){return"WrappedSelection"},da.inspect=function(){return x(this)},da.detach=function(){t(this.win,"delete"),s(this)},r.detachAll=function(){t(null,"deleteAll")},r.inspect=x,r.isDirectionBackward=c,a.Selection=r,a.selectionPrototype=da,a.addShimListener(function(a){"undefined"==typeof a.getSelection&&(a.getSelection=function(){return ca(a)}),a=null})});var M=!1,N=function(a){M||(M=!0,!H.initialized&&H.config.autoInitialize&&l())};return F&&("complete"==document.readyState?N():(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",N,!1),J(window,"load",N))),H},this),function(b,c){"function"==typeof define&&define.amd?define(["./rangy-core"],b):"undefined"!=typeof module&&"object"==typeof a?module.exports=b(require("rangy")):b(c.rangy)}(function(a){return a.createModule("SaveRestore",["WrappedRange"],function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=o.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(r)),f.insertNode(c),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),p(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(b,c){var e,f,g=a.DomRange.getRangeDocument(b),h=b.toString(),i=q(c);return b.collapsed?(f=d(b,!1),{document:g,markerId:f.id,collapsed:!0}):(f=d(b,!1),e=d(b,!0),{document:g,startMarkerId:e.id,endMarkerId:f.id,collapsed:!1,backward:i,toString:function(){return"original text: '"+h+"', new text: '"+b.toString()+"'"}})}function h(d,f){var g=d.document;"undefined"==typeof f&&(f=!0);var h=a.createRange(g);if(d.collapsed){var i=c(d.markerId,g);if(i){i.style.display="inline";var j=i.previousSibling;j&&3==j.nodeType?(p(i),h.collapseToPoint(j,j.length)):(h.collapseBefore(i),p(i))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(g,h,d.startMarkerId,!0),e(g,h,d.endMarkerId,!1);return f&&h.normalizeBoundaries(),h}function i(b,d){var e,h,i=[],j=q(d);b=b.slice(0),b.sort(f);for(var k=0,l=b.length;l>k;++k)i[k]=g(b[k],j);for(k=l-1;k>=0;--k)e=b[k],h=a.DomRange.getRangeDocument(e),e.collapsed?e.collapseAfter(c(i[k].markerId,h)):(e.setEndBefore(c(i[k].endMarkerId,h)),e.setStartAfter(c(i[k].startMarkerId,h)));return i}function j(c){if(!a.isSelectionValid(c))return b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var d=a.getSelection(c),e=d.getAllRanges(),f=1==e.length&&d.isBackward(),g=i(e,f);return f?d.setSingleRange(e[0],f):d.setRanges(e),{win:c,rangeInfos:g,restored:!1}}function k(a){for(var b=[],c=a.length,d=c-1;d>=0;d--)b[d]=h(a[d],!0);return b}function l(b,c){if(!b.restored){var d=b.rangeInfos,e=a.getSelection(b.win),f=k(d),g=d.length;1==g&&c&&a.features.selectionHasExtend&&d[0].backward?(e.removeAllRanges(),e.addRange(f[0],!0)):e.setRanges(f),b.restored=!0}}function m(a,b){var d=c(b,a);d&&p(d)}function n(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?m(a.doc,b.markerId):(m(a.doc,b.startMarkerId),m(a.doc,b.endMarkerId))}var o=a.dom,p=o.removeNode,q=a.Selection.isDirectionBackward,r="\ufeff";a.util.extend(a,{saveRange:g,restoreRange:h,saveRanges:i,restoreRanges:k,saveSelection:j,restoreSelection:l,removeMarkerElement:m,removeMarkers:n})}),a},this)}({},function(){return this}()),!function(a,b){b["true"]=a,function(a,b,c){"use strict";function d(){this.$get=["$$sanitizeUri",function(a){return function(b){"undefined"!=typeof arguments[1]&&(arguments[1].version="taSanitize");var c=[];return g(b,l(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function e(a){var c=[],d=l(c,b.noop);return d.chars(a),c.join("")}function f(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function g(a,c){function d(a,d,f,g){if(d=b.lowercase(d),D[d])for(;k.last()&&E[k.last()];)e("",k.last());C[d]&&k.last()==d&&e("",d),g=z[d]||!!g,g||k.push(d);var i={};f.replace(p,function(a,b,c,d,e){var f=c||d||e||"";i[b]=h(f)}),c.start&&c.start(d,i,g)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=k.length-1;f>=0&&k[f]!=d;f--);if(f>=0){for(e=k.length-1;e>=f;e--)c.end&&c.end(k[e]);k.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,g,i,j,k=[],l=a;for(k.last=function(){return k[k.length-1]};a;){if(j="",g=!0,k.last()&&G[k.last()]?(a=a.replace(new RegExp("([^]*)<\\s*\\/\\s*"+k.last()+"[^>]*>","i"),function(a,b){return b=b.replace(s,"$1").replace(v,"$1"),c.chars&&c.chars(h(b)),""}),e("",k.last())):(y.test(a)?(i=a.match(y))&&(i[0],c.whitespace&&c.whitespace(i[0]),a=a.replace(i[0],""),g=!1):t.test(a)?(i=a.match(t),i&&(c.comment&&c.comment(i[1]),a=a.replace(i[0],""),g=!1)):u.test(a)?(i=a.match(u),i&&(a=a.replace(i[0],""),g=!1)):r.test(a)?(i=a.match(o),i&&(a=a.substring(i[0].length),i[0].replace(o,e),g=!1)):q.test(a)&&(i=a.match(n),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(n,d)),g=!1):(j+="<",a=a.substring(1))),g&&(f=a.indexOf("<"),j+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(h(j)))),a==l)throw m("badparse","The sanitizer was unable to parse the following block of html: {0}",a);l=a}e()}function h(a){if(!a)return"";var b=N.exec(a),c=b[1],d=b[3],e=b[2];return e&&(M.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in M?M.textContent:M.innerText),c+e+d}function i(a){return a.replace(/&/g,"&amp;").replace(w,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(x,function(a){var b=a.charCodeAt(0);return 159>=b||173==b||b>=1536&&1540>=b||1807==b||6068==b||6069==b||b>=8204&&8207>=b||b>=8232&&8239>=b||b>=8288&&8303>=b||65279==b||b>=65520&&65535>=b?"&#"+b+";":a}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function j(a){var c="",d=a.split(";");return b.forEach(d,function(a){var d=a.split(":");if(2==d.length){var e=O(b.lowercase(d[0])),a=O(b.lowercase(d[1]));(("color"===e||"background-color"===e)&&(a.match(/^rgb\([0-9%,\. ]*\)$/i)||a.match(/^rgba\([0-9%,\. ]*\)$/i)||a.match(/^hsl\([0-9%,\. ]*\)$/i)||a.match(/^hsla\([0-9%,\. ]*\)$/i)||a.match(/^#[0-9a-f]{3,6}$/i)||a.match(/^[a-z]*$/i))||"text-align"===e&&("left"===a||"right"===a||"center"===a||"justify"===a)||"text-decoration"===e&&("underline"===a||"line-through"===a)||"font-weight"===e&&"bold"===a||"float"===e&&("left"===a||"right"===a||"none"===a)||("width"===e||"height"===e)&&a.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===e&&a.match(/^ltr|rtl|initial|inherit$/))&&(c+=e+": "+a+";")}}),c}function k(a,b,c,d){return"img"===a&&b["ta-insert-video"]&&("ta-insert-video"===c||"allowfullscreen"===c||"frameborder"===c||"contenteditable"===c&&"false"===d)?!0:!1}function l(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&G[a]&&(d=a),d||H[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,g){var h=b.lowercase(g),l="img"===a&&"src"===h||"background"===h;("style"===h&&""!==(d=j(d))||k(a,f,h,d)||L[h]===!0&&(I[h]!==!0||c(d,l)))&&(e(" "),e(g),e('="'),e(i(d)),e('"'))}),e(g?"/>":">"))},comment:function(a){e(a)},whitespace:function(a){e(i(a))},end:function(a){a=b.lowercase(a),d||H[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(i(a))}}}var m=b.$$minErr("$sanitize"),n=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,o=/^<\/\s*([\w:-]+)[^>]*>/,p=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,q=/^</,r=/^<\//,s=/<!--(.*?)-->/g,t=/(^<!--.*?-->)/,u=/<!DOCTYPE([^>]*?)>/i,v=/<!\[CDATA\[(.*?)]]>/g,w=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,x=/([^\#-~| |!])/g,y=/^(\s+)/,z=f("area,br,col,hr,img,wbr,input"),A=f("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),B=f("rp,rt"),C=b.extend({},B,A),D=b.extend({},A,f("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),E=b.extend({},B,f("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),F=f("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),G=f("script,style"),H=b.extend({},z,D,E,C,F),I=f("background,cite,href,longdesc,src,usemap,xlink:href"),J=f("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),K=f("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),L=b.extend({},I,K,J),M=document.createElement("pre"),N=/^(\s*)([\s\S]*?)(\s*)$/,O=function(){return String.prototype.trim?function(a){return b.isString(a)?a.trim():a}:function(a){return b.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();b.module("ngSanitize",[]).provider("$sanitize",d),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,d=/^mailto:/;return function(f,g){function h(a){a&&n.push(e(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(d,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular)}({},function(){return this}()),!function(a,b){function c(a){try{
return 0!==angular.element(a).length}catch(b){return!1}}function d(a,b){if(!a||""===a||e.hasOwnProperty(a))throw"textAngular Error: A unique name is required for a Tool Definition";if(b.display&&(""===b.display||!c(b.display))||!b.display&&!b.buttontext&&!b.iconclass)throw'textAngular Error: Tool Definition for "'+a+'" does not have a valid display/iconclass/buttontext value';e[a]=b}b["true"]=a;var e={};angular.module("textAngularSetup",[]).constant("taRegisterTool",d).value("taTools",e).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(a){},htmlEditorSetup:function(a){}},defaultFileDropHandler:function(a,b){var c=new FileReader;return"image"===a.type.substring(0,5)?(c.onload=function(){""!==c.result&&b("insertImage",c.result,!0)},c.readAsDataURL(a),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(a){var b=angular.element("<iframe></iframe>"),c=a.prop("attributes");angular.forEach(c,function(a){b.attr(a.name,a.value)}),b.attr("src",b.attr("ta-insert-video")),a.replaceWith(b)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(a,b){return{imgOnSelectAction:function(a,b,c){var d=function(){c.updateTaBindtaTextElement(),c.hidePopover()};a.preventDefault(),c.displayElements.popover.css("width","375px");var e=c.displayElements.popoverContainer;e.empty();var f=angular.element('<div class="btn-group" style="padding-right: 6px;">'),g=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');g.on("click",function(a){a.preventDefault(),b.css({width:"100%",height:""}),d()});var h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');h.on("click",function(a){a.preventDefault(),b.css({width:"50%",height:""}),d()});var i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');i.on("click",function(a){a.preventDefault(),b.css({width:"25%",height:""}),d()});var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');j.on("click",function(a){a.preventDefault(),b.css({width:"",height:""}),d()}),f.append(g),f.append(h),f.append(i),f.append(j),e.append(f),f=angular.element('<div class="btn-group" style="padding-right: 6px;">');var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');k.on("click",function(a){a.preventDefault(),b.css("float","left"),b.css("cssFloat","left"),b.css("styleFloat","left"),d()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');l.on("click",function(a){a.preventDefault(),b.css("float","right"),b.css("cssFloat","right"),b.css("styleFloat","right"),d()});var m=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');m.on("click",function(a){a.preventDefault(),b.css("float",""),b.css("cssFloat",""),b.css("styleFloat",""),d()}),f.append(k),f.append(m),f.append(l),e.append(f),f=angular.element('<div class="btn-group">');var n=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');n.on("click",function(a){a.preventDefault(),b.remove(),d()}),f.append(n),e.append(f),c.showPopover(b),c.showResizeOverlay(b)},aOnSelectAction:function(c,d,e){c.preventDefault(),e.displayElements.popover.css("width","436px");var f=e.displayElements.popoverContainer;f.empty(),f.css("line-height","28px");var g=angular.element('<a href="'+d.attr("href")+'" target="_blank">'+d.attr("href")+"</a>");g.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),f.append(g);var h=angular.element('<div class="btn-group pull-right">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+b.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');i.on("click",function(c){c.preventDefault();var f=a.prompt(b.insertLink.dialogPrompt,d.attr("href"));f&&""!==f&&"http://"!==f&&(d.attr("href",f),e.updateTaBindtaTextElement()),e.hidePopover()}),h.append(i);var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+b.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');j.on("click",function(a){a.preventDefault(),d.replaceWith(d.contents()),e.updateTaBindtaTextElement(),e.hidePopover()}),h.append(j);var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+b.editLink.targetToggle.buttontext+"</button>");"_blank"===d.attr("target")&&k.addClass("active"),k.on("click",function(a){a.preventDefault(),d.attr("target","_blank"===d.attr("target")?"":"_blank"),k.toggleClass("active"),e.updateTaBindtaTextElement()}),h.append(k),f.append(h),e.showPopover(d)},extractYoutubeVideoId:function(a){var b=/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i,c=a.match(b);return c&&c[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions",function(a,b,c,d,e,f,g){var h={};if(f("",h),g.forceTextAngularSanitize===!0&&"taSanitize"!==h.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");a("html",{iconclass:"fa fa-code",tooltiptext:c.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var i=function(a){return function(){return this.$editor().queryFormatBlockState(a)}},j=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(b){a(b.toLowerCase(),{buttontext:b.toUpperCase(),tooltiptext:c.heading.tooltip+b.charAt(1),action:j,activeState:i(b.toLowerCase())})}),a("p",{buttontext:"P",tooltiptext:c.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),a("pre",{buttontext:"pre",tooltiptext:c.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),a("ul",{iconclass:"fa fa-list-ul",tooltiptext:c.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),a("ol",{iconclass:"fa fa-list-ol",tooltiptext:c.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),a("quote",{iconclass:"fa fa-quote-right",tooltiptext:c.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("undo",{iconclass:"fa fa-undo",tooltiptext:c.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),a("redo",{iconclass:"fa fa-repeat",tooltiptext:c.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),a("bold",{iconclass:"fa fa-bold",tooltiptext:c.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),a("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:c.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="left"===a.css("text-align")||"left"===a.attr("align")||"right"!==a.css("text-align")&&"center"!==a.css("text-align")&&"justify"!==a.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),b=b||this.$editor().queryCommandState("justifyLeft")}}),a("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:c.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="right"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyRight")}}),a("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:c.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(a){var b=!1;return a&&(b="justify"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyFull")}}),a("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:c.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="center"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyCenter")}}),a("indent",{iconclass:"fa fa-indent",tooltiptext:c.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),a("outdent",{iconclass:"fa fa-outdent",tooltiptext:c.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),a("italics",{iconclass:"fa fa-italic",tooltiptext:c.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),a("underline",{iconclass:"fa fa-underline",tooltiptext:c.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),a("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:c.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),a("clear",{iconclass:"fa fa-ban",tooltiptext:c.clear.tooltip,action:function(a,b){var c;this.$editor().wrapSelection("removeFormat",null);var e=angular.element(d.getSelectionElement()),f=function(a){a=angular.element(a);var b=a;angular.forEach(a.children(),function(a){var c=angular.element("<p></p>");c.html(angular.element(a).html()),b.after(c),b=c}),a.remove()};if(angular.forEach(e.find("ul"),f),angular.forEach(e.find("ol"),f),"li"===e[0].tagName.toLowerCase()){var g=e[0].parentNode.childNodes,h=[],i=[],j=!1;for(c=0;c<g.length;c++)g[c]===e[0]?j=!0:j?i.push(g[c]):h.push(g[c]);var k=angular.element(e[0].parentNode),l=angular.element("<p></p>");if(l.html(angular.element(e[0]).html()),0===h.length||0===i.length)0===i.length?k.after(l):k[0].parentNode.insertBefore(l[0],k[0]),0===h.length&&0===i.length?k.remove():angular.element(e[0]).remove();else{var m=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">"),n=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">");for(c=0;c<h.length;c++)m.append(angular.element(h[c]));for(c=0;c<i.length;c++)n.append(angular.element(i[c]));k.after(n),k.after(l),k.after(m),k.remove()}d.setSelectionToElementEnd(l[0])}var o=this.$editor(),p=function(a){a=angular.element(a),a[0]!==o.displayElements.text[0]&&a.removeAttr("class"),angular.forEach(a.children(),p)};angular.forEach(e,p),"li"!==e[0].tagName.toLowerCase()&&"ol"!==e[0].tagName.toLowerCase()&&"ul"!==e[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),b()}}),a("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:c.insertImage.tooltip,action:function(){var a;return a=b.prompt(c.insertImage.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("insertImage",a,!0):void 0},onElementSelect:{element:"img",action:e.imgOnSelectAction}}),a("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:c.insertVideo.tooltip,action:function(){var a;if(a=b.prompt(c.insertVideo.dialogPrompt,"https://"),a&&""!==a&&"https://"!==a&&(videoId=e.extractYoutubeVideoId(a),videoId)){var d="https://www.youtube.com/embed/"+videoId,f='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+d+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",f,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:e.imgOnSelectAction}}),a("insertLink",{tooltiptext:c.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var a;return a=b.prompt(c.insertLink.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("createLink",a,!0):void 0},activeState:function(a){return a?"A"===a[0].tagName:!1},onElementSelect:{element:"a",action:e.aOnSelectAction}}),a("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerHTML||"",c=0;return""!==b.replace(/\s*<[^>]*?>\s*/g,"")&&(c=b.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=c,this.$editor().wordcount=c,!1}}),a("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerText||a[0].textContent,c=b.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=c,this.$editor().charcount=c,!1}})}]),"undefined"!=typeof module&&"undefined"!=typeof a&&module.exports===a&&(module.exports="textAngular"),function(){"use strict";var b={ie:function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},c=!1;b.webkit&&(document.addEventListener("mousedown",function(a){var b=a||window.event,d=b.target;if(c&&null!==d){for(var e=!1,f=d;null!==f&&"html"!==f.tagName.toLowerCase()&&!e;)e="true"===f.contentEditable,f=f.parentNode;e||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),d.focus(),d.select&&d.select())}c=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">'))}));var d=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,f=/^(ul|li|ol)$/i,g=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var h,i,j,k,l,m;if(b.ie>8||void 0===b.ie){for(var n=document.styleSheets,o=0;o<n.length;o++)if((0===n[o].media.length||n[o].media.mediaText.match(/(all|screen)/gi))&&n[o].href&&n[o].href.match(/textangular\.(min\.|)css/gi)){h=n[o];break}h||(h=function(){var a=document.createElement("style");return b.webkit&&a.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(a),a.sheet}()),i=function(a,b){return k(h,a,b)},k=function(a,b,c){var d,e;return a.cssRules?d=Math.max(a.cssRules.length-1,0):a.rules&&(d=Math.max(a.rules.length-1,0)),a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d),h.rules?e=h.rules[d]:h.cssRules&&(e=h.cssRules[d]),e},m=function(a,b){var c,d;for(c=0;c<b.length;c++)if(b[c].cssText===a.cssText){d=c;break}return d},j=function(a){l(h,a)},l=function(a,b){var c=a.cssRules||a.rules;if(c&&0!==c.length){var d=m(b,c);a.removeRule?a.removeRule(d):a.deleteRule(d)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(a){return a?""===a?void 0===b.ie?"div":b.ie<=8?"P":"p":b.ie<=8?a.toUpperCase():a:b.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(a,b){return function(c){var d=angular.element("<div></div>");return d[0].innerHTML=c,angular.forEach(a,function(a){var c=[];a.selector&&""!==a.selector?c=d.find(a.selector):a.customAttribute&&""!==a.customAttribute&&(c=b.getByAttribute(d,a.customAttribute)),angular.forEach(c,function(b){b=angular.element(b),a.selector&&""!==a.selector&&a.customAttribute&&""!==a.customAttribute?void 0!==b.attr(a.customAttribute)&&a.renderLogic(b):a.renderLogic(b)})}),d[0].innerHTML}}]).factory("taFixChrome",function(){var a=function(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c,d,e=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",g=0;b=e.exec(a);)c=b[3]||b[4],c&&c.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(c=c.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),d="<"+b[1].trim(),c.trim().length>0&&(d+=" style="+b[2].substring(0,1)+c+b[2].substring(0,1)),d+=b[5].trim()+">",f+=a.substring(g,b.index)+d,g=b.index+b[0].length);return f+=a.substring(g),g>0?f.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):a};return a}).factory("taSanitize",["$sanitize",function(a){function b(a,b){for(var c,d=0,e=0,f=/<[^>]*>/gi;c=f.exec(a);)if(e=c.index,"/"===c[0].substr(1,1)){if(0===d)break;d--}else d++;return b+a.substring(0,e)+angular.element(b)[0].outerHTML.substring(b.length)+a.substring(e)}function c(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var d,f,g,h,i,k,l=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,m="",n="",o=0;f=l.exec(a);){h=f[3]||f[4];var p=new RegExp(j,"i");if(angular.isString(h)&&p.test(h)){i="";for(var q=new RegExp(j,"ig");g=q.exec(h);)for(d=0;d<e.length;d++)g[2*d+2]&&(i+="<"+e[d].tag+">");k=c(a.substring(o,f.index)),n+=m.length>0?b(k,m):k,h=h.replace(new RegExp(j,"ig"),""),n+="<"+f[1].trim(),h.length>0&&(n+=' style="'+h+'"'),n+=f[5]+">",o=f.index+f[0].length,m=i}}return n+=m.length>0?b(a.substring(o),m):a.substring(o)}function d(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",e=0;b=c.exec(a);){d+=a.substring(e,b.index),e=b.index+b[0].length;var f="<"+b[1]+b[5];/style=("([^"]+)"|'([^']+)')/gi.test(f)?f=f.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(b[3]||b[4])+';"'):f+=' style="text-align:'+(b[3]||b[4])+';"',f+=">",d+=f}return d+a.substring(e)}for(var e=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],f=[],g=0;g<e.length;g++){for(var h="("+e[g].property+":\\s*(",i=0;i<e[g].values.length;i++)i>0&&(h+="|"),h+=e[g].values[i];h+=");)",f.push(h)}var j="("+f.join("|")+")";return function(b,e,f){if(!f)try{b=c(b)}catch(g){}b=d(b);var h;try{h=a(b),f&&(h=b)}catch(g){h=e||""}var i,j=h.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),k=h.replace(/(&#(9|10);)*/gi,""),l=/<pre[^>]*>.*?<\/pre[^>]*>/gi,m=0,n=0;for(h="";null!==(i=l.exec(k))&&m<j.length;)h+=k.substring(n,i.index)+j[m],n=i.index+i[0].length,m++;return h+k.substring(n)}}]).factory("taToolExecuteAction",["$q","$log",function(a,b){return function(c){void 0!==c&&(this.$editor=function(){return c});var d,e=a.defer(),f=e.promise,g=this.$editor();try{d=this.action(e,g.startAction()),f["finally"](function(){g.endAction.call(g)})}catch(h){b.error(h)}(d||void 0===d)&&e.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(a,b,c){var e=function(b,c){var d,e,f=b.find("li");for(e=f.length-1;e>=0;e--)d=angular.element("<"+c+">"+f[e].innerHTML+"</"+c+">"),b.after(d);b.remove(),a.setSelectionToElementEnd(d[0])},g=function(b){/(<br(|\/)>)$/i.test(b.innerHTML.trim())?a.setSelectionBeforeElement(angular.element(b).find("br")[0]):a.setSelectionToElementEnd(b)},h=function(a,b){var c=angular.element("<"+b+">"+a[0].innerHTML+"</"+b+">");a.after(c),a.remove(),g(c.find("li")[0])},i=function(a,c,d){for(var e="",f=0;f<a.length;f++)e+="<"+b("li")+">"+a[f].innerHTML+"</"+b("li")+">";var h=angular.element("<"+d+">"+e+"</"+d+">");c.after(h),c.remove(),g(h.find("li")[0])};return function(g,j){return g=b(g),function(k,l,m,n){var o,p,q,r,s,t,u,v=angular.element("<"+g+">");try{u=a.getSelectionElement()}catch(w){}var x=angular.element(u);if(void 0!==u){var y=u.tagName.toLowerCase();if("insertorderedlist"===k.toLowerCase()||"insertunorderedlist"===k.toLowerCase()){var z=b("insertorderedlist"===k.toLowerCase()?"ol":"ul");if(y===z)return e(x,g);if("li"===y&&x.parent()[0].tagName.toLowerCase()===z&&1===x.parent().children().length)return e(x.parent(),g);if("li"===y&&x.parent()[0].tagName.toLowerCase()!==z&&1===x.parent().children().length)return h(x.parent(),z);if(y.match(d)&&!x.hasClass("ta-bind")){if("ol"===y||"ul"===y)return h(x,z);var A=!1;return angular.forEach(x.children(),function(a){a.tagName.match(d)&&(A=!0)}),A?i(x.children(),x,z):i([angular.element("<div>"+u.innerHTML+"</div>")[0]],x,z)}if(y.match(d)){if(r=a.getOnlySelectedElements(),0===r.length)p=angular.element("<"+z+"><li>"+u.innerHTML+"</li></"+z+">"),x.html(""),x.append(p);else{if(1===r.length&&("ol"===r[0].tagName.toLowerCase()||"ul"===r[0].tagName.toLowerCase()))return r[0].tagName.toLowerCase()===z?e(angular.element(r[0]),g):h(angular.element(r[0]),z);q="";var B=[];for(o=0;o<r.length;o++)if(3!==r[o].nodeType){var C=angular.element(r[o]);if("li"===r[o].tagName.toLowerCase())continue;q+="ol"===r[o].tagName.toLowerCase()||"ul"===r[o].tagName.toLowerCase()?C[0].innerHTML:"span"!==r[o].tagName.toLowerCase()||"ol"!==r[o].childNodes[0].tagName.toLowerCase()&&"ul"!==r[o].childNodes[0].tagName.toLowerCase()?"<"+b("li")+">"+C[0].innerHTML+"</"+b("li")+">":C[0].childNodes[0].innerHTML,B.unshift(C)}p=angular.element("<"+z+">"+q+"</"+z+">"),B.pop().replaceWith(p),angular.forEach(B,function(a){a.remove()})}return void a.setSelectionToElementEnd(p[0])}}else{if("formatblock"===k.toLowerCase()){for(t=m.toLowerCase().replace(/[<>]/gi,""),"default"===t.trim()&&(t=g,m="<"+g+">"),p="li"===y?x.parent():x;!p[0].tagName||!p[0].tagName.match(d)&&!p.parent().attr("contenteditable");)p=p.parent(),y=(p[0].tagName||"").toLowerCase();if(y===t){r=p.children();var D=!1;for(o=0;o<r.length;o++)D=D||r[o].tagName.match(d);D?(p.after(r),s=p.next(),p.remove(),p=s):(v.append(p[0].childNodes),p.after(v),p.remove(),p=v)}else if(p.parent()[0].tagName.toLowerCase()!==t||p.parent().hasClass("ta-bind"))if(y.match(f))p.wrap(m);else{for(r=a.getOnlySelectedElements(),0===r.length&&(r=[p[0]]),o=0;o<r.length;o++)if(3===r[o].nodeType||!r[o].tagName.match(d))for(;3===r[o].nodeType||!r[o].tagName||!r[o].tagName.match(d);)r[o]=r[o].parentNode;if(angular.element(r[0]).hasClass("ta-bind"))p=angular.element(m),p[0].innerHTML=r[0].innerHTML,r[0].innerHTML=p[0].outerHTML;else if("blockquote"===t){for(q="",o=0;o<r.length;o++)q+=r[o].outerHTML;for(p=angular.element(m),p[0].innerHTML=q,r[0].parentNode.insertBefore(p[0],r[0]),o=r.length-1;o>=0;o--)r[o].parentNode&&r[o].parentNode.removeChild(r[o])}else for(o=0;o<r.length;o++)p=angular.element(m),p[0].innerHTML=r[o].innerHTML,r[o].parentNode.insertBefore(p[0],r[o]),r[o].parentNode.removeChild(r[o])}else{var E=p.parent(),F=E.contents();for(o=0;o<F.length;o++)E.parent().hasClass("ta-bind")&&3===F[o].nodeType&&(v=angular.element("<"+g+">"),v[0].innerHTML=F[o].outerHTML,F[o]=v[0]),E.parent()[0].insertBefore(F[o],E[0]);E.remove()}return void a.setSelectionToElementEnd(p[0])}if("createlink"===k.toLowerCase()){var G='<a href="'+m+'" target="'+(n.a.target?n.a.target:"")+'">',H="</a>",I=a.getSelection();if(I.collapsed)a.insertHtml(G+m+H,j);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var J=angular.element(G+H)[0];rangy.getSelection().getRangeAt(0).surroundContents(J)}return}if("inserthtml"===k.toLowerCase())return void a.insertHtml(m,j)}}try{c[0].execCommand(k,l,m)}catch(w){}}}}]).service("taSelection",["$window","$document","taDOM",function(a,b,c){var e=b[0],f=a.rangy,h=function(a,b){return a.tagName&&a.tagName.match(/^br$/i)&&0===b&&!a.previousSibling?{element:a.parentNode,offset:0}:{element:a,offset:b}},i={getSelection:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer,c={start:h(a.startContainer,a.startOffset),end:h(a.endContainer,a.endOffset),collapsed:a.collapsed};return b=3===b.nodeType?b.parentNode:b,b.parentNode===c.start.element||b.parentNode===c.end.element?c.container=b.parentNode:c.container=b,c},getOnlySelectedElements:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer;return b=3===b.nodeType?b.parentNode:b,a.getNodes([1],function(a){return a.parentNode===b})},getSelectionElement:function(){return i.getSelection().container},setSelection:function(a,b,c){var d=f.createRange();d.setStart(a,b),d.setEnd(a,c),f.getSelection().setSingleRange(d)},setSelectionBeforeElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionAfterElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!1),f.getSelection().setSingleRange(b)},setSelectionToElementStart:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionToElementEnd:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!1),a.childNodes&&a.childNodes[a.childNodes.length-1]&&"br"===a.childNodes[a.childNodes.length-1].nodeName&&(b.startOffset=b.endOffset=b.startOffset-1),f.getSelection().setSingleRange(b)},insertHtml:function(a,b){var h,j,k,l,m,n,o,p=angular.element("<div>"+a+"</div>"),q=f.getSelection().getRangeAt(0),r=e.createDocumentFragment(),s=p[0].childNodes,t=!0;if(s.length>0){for(l=[],k=0;k<s.length;k++)"p"===s[k].nodeName.toLowerCase()&&""===s[k].innerHTML.trim()||3===s[k].nodeType&&""===s[k].nodeValue.trim()||(t=t&&!d.test(s[k].nodeName),l.push(s[k]));for(var u=0;u<l.length;u++)n=r.appendChild(l[u]);!t&&q.collapsed&&/^(|<br(|\/)>)$/i.test(q.startContainer.innerHTML)&&q.selectNode(q.startContainer)}else t=!0,n=r=e.createTextNode(a);if(t)q.deleteContents();else if(q.collapsed&&q.startContainer!==b)if(q.startContainer.innerHTML&&q.startContainer.innerHTML.match(/^<[^>]*>$/i))h=q.startContainer,1===q.startOffset?(q.setStartAfter(h),q.setEndAfter(h)):(q.setStartBefore(h),q.setEndBefore(h));else{if(3===q.startContainer.nodeType&&q.startContainer.parentNode!==b)for(h=q.startContainer.parentNode,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,q.startContainer,q.startOffset);!g.test(h.nodeName);){angular.element(h).after(j),h=h.parentNode;var v=j;j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,v)}else h=q.startContainer,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,void 0,void 0,q.startOffset);if(angular.element(h).after(j),q.setStartAfter(h),q.setEndAfter(h),/^(|<br(|\/)>)$/i.test(h.innerHTML.trim())&&(q.setStartBefore(h),q.setEndBefore(h),angular.element(h).remove()),/^(|<br(|\/)>)$/i.test(j.innerHTML.trim())&&angular.element(j).remove(),"li"===h.nodeName.toLowerCase()){for(o=e.createDocumentFragment(),m=0;m<r.childNodes.length;m++)p=angular.element("<li>"),c.transferChildNodes(r.childNodes[m],p[0]),c.transferNodeAttributes(r.childNodes[m],p[0]),o.appendChild(p[0]);r=o,n&&(n=r.childNodes[r.childNodes.length-1],n=n.childNodes[n.childNodes.length-1])}}else q.deleteContents();q.insertNode(r),n&&i.setSelectionToElementEnd(n)}};return i}]).service("taDOM",function(){var a={getByAttribute:function(b,c){var d=[],e=b.children();return e.length&&angular.forEach(e,function(b){d=d.concat(a.getByAttribute(angular.element(b),c))}),void 0!==b.attr(c)&&d.push(b),d},transferChildNodes:function(a,b){for(b.innerHTML="";a.childNodes.length>0;)b.appendChild(a.childNodes[0]);return b},splitNodes:function(b,c,d,e,f,g){if(!e&&isNaN(g))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var h=document.createDocumentFragment(),i=document.createDocumentFragment(),j=0;b.length>0&&(isNaN(g)||g!==j)&&b[0]!==e;)h.appendChild(b[0]),j++;for(!isNaN(f)&&f>=0&&b[0]&&(h.appendChild(document.createTextNode(b[0].nodeValue.substring(0,f))),b[0].nodeValue=b[0].nodeValue.substring(f));b.length>0;)i.appendChild(b[0]);a.transferChildNodes(h,c),a.transferChildNodes(i,d)},transferNodeAttributes:function(a,b){for(var c=0;c<a.attributes.length;c++)b.setAttribute(a.attributes[c].name,a.attributes[c].value);return b}};return a}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMaxText));if(isNaN(e))throw"Max text must be an integer";c.$observe("taMaxText",function(a){if(e=parseInt(a),isNaN(e))throw"Max text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMaxText=function(a){var b=angular.element("<div/>");return b.html(a),b.text().length<=e}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMinText));if(isNaN(e))throw"Min text must be an integer";c.$observe("taMinText",function(a){if(e=parseInt(a),isNaN(e))throw"Min text must be an integer";d.$dirty&&d.$validate();
}),d.$validators.taMinText=function(a){var b=angular.element("<div/>");return b.html(a),!b.text().length||b.text().length>=e}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var a=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(b){return function(c){if(!c)return!0;var d,e=/(^[^<]|>)[^<]/i.exec(c);return e?d=e.index:(c=c.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),d=c.indexOf(">")),c=c.trim().substring(d,d+100),/^[^<>]+$/i.test(c)?!1:0===c.length||c===b||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(c)?!0:/>\s*[^\s<]/i.test(c)||a.test(c)?!1:!0}}}]).directive("taButton",[function(){return{link:function(a,b,c){b.attr("unselectable","on"),b.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(a,e,f,h,k,l,m,n,o,q,r,s,t,u){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(l,v,w,x){function y(a){var b;return R.forEach(function(c){if(c.keyCode===a.keyCode){var d=(a.metaKey?O:0)+(a.ctrlKey?N:0)+(a.shiftKey?Q:0)+(a.altKey?P:0);if(c.forbiddenModifiers&d)return;c.mustHaveModifiers.every(function(a){return d&a})&&(b=c.specialKey)}}),b}var z,A,B,C,D=x[0],E=x[1]||{},F=void 0!==v.attr("contenteditable")&&v.attr("contenteditable"),G=F||"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase(),H=!1,I=!1,J=!1,K=w.taUnsafeSanitizer||q.disableSanitizer,L=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,M=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,N=1,O=2,P=4,Q=8,R=[{specialKey:"UndoKey",forbiddenModifiers:P+Q,mustHaveModifiers:[O+N],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:P,mustHaveModifiers:[O+N,Q],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:P+Q,mustHaveModifiers:[O+N],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:O+Q+P+N,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:O+P+N,mustHaveModifiers:[Q],keyCode:9}];void 0===w.taDefaultWrap&&(w.taDefaultWrap="p"),""===w.taDefaultWrap?(B="",C=void 0===b.ie?"<div><br></div>":b.ie>=11?"<p><br></p>":b.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(B=void 0===b.ie||b.ie>=11?"<"+w.taDefaultWrap+"><br></"+w.taDefaultWrap+">":b.ie<=8?"<"+w.taDefaultWrap.toUpperCase()+"></"+w.taDefaultWrap.toUpperCase()+">":"<"+w.taDefaultWrap+"></"+w.taDefaultWrap+">",C=void 0===b.ie||b.ie>=11?"<"+w.taDefaultWrap+"><br></"+w.taDefaultWrap+">":b.ie<=8?"<"+w.taDefaultWrap.toUpperCase()+">&nbsp;</"+w.taDefaultWrap.toUpperCase()+">":"<"+w.taDefaultWrap+">&nbsp;</"+w.taDefaultWrap+">"),E.$options||(E.$options={});var S=r(C),T=function(a){if(S(a))return a;var b=angular.element("<div>"+a+"</div>");if(0===b.children().length)a="<"+w.taDefaultWrap+">"+a+"</"+w.taDefaultWrap+">";else{var c,e=b[0].childNodes,f=!1;for(c=0;c<e.length&&!(f=e[c].nodeName.toLowerCase().match(d));c++);if(f)for(a="",c=0;c<e.length;c++){var g=e[c],h=g.nodeName.toLowerCase();if("#comment"===h)a+="<!--"+g.nodeValue+"-->";else if("#text"===h){var i=g.textContent;a+=i.trim()?"<"+w.taDefaultWrap+">"+i+"</"+w.taDefaultWrap+">":i}else if(h.match(d))a+=g.outerHTML;else{var j=g.outerHTML||g.nodeValue;a+=""!==j.trim()?"<"+w.taDefaultWrap+">"+j+"</"+w.taDefaultWrap+">":j}}else a="<"+w.taDefaultWrap+">"+a+"</"+w.taDefaultWrap+">"}return a};w.taPaste&&(A=s(w.taPaste)),v.addClass("ta-bind");var U;l["$undoManager"+(w.id||"")]=D.$undoManager={_stack:[],_index:0,_max:1e3,push:function(a){return"undefined"==typeof a||null===a||"undefined"!=typeof this.current()&&null!==this.current()&&a===this.current()?a:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(a),U&&e.cancel(U),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,a)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(a){return 0>a||a>this._stack.length-1?void 0:(this._index=a,this.current())},current:function(){return this._stack[this._index]}};var V,W=l["$undoTaBind"+(w.id||"")]=function(){if(!H&&F){var a=D.$undoManager.undo();"undefined"!=typeof a&&null!==a&&(ka(a),Z(a,!1),V&&e.cancel(V),V=e(function(){v[0].focus(),m.setSelectionToElementEnd(v[0])},1))}},X=l["$redoTaBind"+(w.id||"")]=function(){if(!H&&F){var a=D.$undoManager.redo();"undefined"!=typeof a&&null!==a&&(ka(a),Z(a,!1),V&&e.cancel(V),V=e(function(){v[0].focus(),m.setSelectionToElementEnd(v[0])},1))}},Y=function(){if(F)return v[0].innerHTML;if(G)return v.val();throw"textAngular Error: attempting to update non-editable taBind"},Z=function(a,b,c){J=c||!1,("undefined"==typeof b||null===b)&&(b=F),("undefined"==typeof a||null===a)&&(a=Y()),S(a)?(""!==D.$viewValue&&D.$setViewValue(""),b&&""!==D.$undoManager.current()&&D.$undoManager.push("")):(ja(),D.$viewValue!==a&&(D.$setViewValue(a),b&&D.$undoManager.push(a))),D.$render()};l["updateTaBind"+(w.id||"")]=function(){H||Z(void 0,void 0,!0)};var $=function(b){return D.$oldViewValue=a(k(b),D.$oldViewValue,K)};if(v.attr("required")&&(D.$validators.required=function(a,b){return!S(a||b)}),D.$parsers.push($),D.$parsers.unshift(T),D.$formatters.push($),D.$formatters.unshift(T),D.$formatters.unshift(function(a){return D.$undoManager.push(a||"")}),G)if(l.events={},F){var _=!1,aa=function(b){if(b&&b.trim().length){if(b.match(/class=["']*Mso(Normal|List)/i)||b.match(/content=["']*Word.Document/i)){var c=b.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);c=c?c[1]:b,c=c.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var d=angular.element("<div>"+c+"</div>"),f=angular.element("<div></div>"),g={element:null,lastIndent:[],lastLi:null,isUl:!1};g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0};for(var h=function(a){g.isUl=a,g.element=angular.element(a?"<ul>":"<ol>"),g.lastIndent=[],g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0},g.lastLevelMatch=null},i=0;i<=d[0].childNodes.length;i++)if(d[0].childNodes[i]&&"#text"!==d[0].childNodes[i].nodeName){var j=d[0].childNodes[i].tagName.toLowerCase();if("p"===j||"h1"===j||"h2"===j||"h3"===j||"h4"===j||"h5"===j||"h6"===j){var k=angular.element(d[0].childNodes[i]),n=(k.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(n){if(k[0].childNodes.length<2||k[0].childNodes[1].childNodes.length<1)continue;var o="bullet"===n[1].toLowerCase()||"number"!==n[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(k[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(k[0].childNodes[1].childNodes[0].innerHTML)),p=(k.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),q=parseFloat(p?p[1]:0),r=(k.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(r&&r[2]&&(q=parseInt(r[2])),r&&(!g.lastLevelMatch||r[1]!==g.lastLevelMatch[1])||!n[3]||"first"===n[3].toLowerCase()||null===g.lastIndent.peek()||g.isUl!==o&&g.lastIndent.peek()===q)h(o),f.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()<q)g.element=angular.element(o?"<ul>":"<ol>"),g.lastLi.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()>q){for(;null!=g.lastIndent.peek()&&g.lastIndent.peek()>q;)if("li"!==g.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(g.element.parent()[0].tagName.toLowerCase()))break;g.element=g.element.parent(),g.lastIndent.pop()}else g.element=g.element.parent();g.isUl="ul"===g.element[0].tagName.toLowerCase(),o!==g.isUl&&(h(o),f.append(g.element))}g.lastLevelMatch=r,q!==g.lastIndent.peek()&&g.lastIndent.push(q),g.lastLi=angular.element("<li>"),g.element.append(g.lastLi),g.lastLi.html(k.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),k.remove()}else h(!1),f.append(k)}}var s=function(a){a=angular.element(a);for(var b=a[0].childNodes.length-1;b>=0;b--)a.after(a[0].childNodes[b]);a.remove()};angular.forEach(f.find("span"),function(a){a.removeAttribute("lang"),a.attributes.length<=0&&s(a)}),angular.forEach(f.find("font"),s),b=f.html()}else{if(b=b.replace(/<(|\/)meta[^>]*?>/gi,""),b.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(b.match(/<[^>]*?(text-angular)[^>]*?>/)){var u=angular.element("<div>"+b+"</div>");u.find("textarea").remove();for(var w=t.getByAttribute(u,"ta-bind"),x=0;x<w.length;x++){for(var y=w[x][0].parentNode.parentNode,z=0;z<w[x][0].childNodes.length;z++)y.parentNode.insertBefore(w[x][0].childNodes[z],y);y.parentNode.removeChild(y)}b=u.html().replace('<br class="Apple-interchange-newline">',"")}}else b.match(/^<span/)&&(b.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(b=b.replace(/<(|\/)span[^>]*?>/gi,"")));b=b.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(b)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(b)===!1&&(b=b.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),b=b.replace(/^[ |\u00A0]+/gm,function(a){for(var b="",c=0;c<a.length;c++)b+="&nbsp;";return b}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),A&&(b=A(l,{$html:b})||b),b=a(b,"",K),m.insertHtml(b,v[0]),e(function(){D.$setViewValue(Y()),_=!1,v.removeClass("processing-paste")},0)}else _=!1,v.removeClass("processing-paste")};v.on("paste",l.events.paste=function(a,b){if(b&&angular.extend(a,b),H||_)return a.stopPropagation(),a.preventDefault(),!1;_=!0,v.addClass("processing-paste");var c,d=(a.originalEvent||a).clipboardData;if(d&&d.getData&&d.types.length>0){for(var g="",i=0;i<d.types.length;i++)g+=" "+d.types[i];return/text\/html/i.test(g)?c=d.getData("text/html"):/text\/plain/i.test(g)&&(c=d.getData("text/plain")),aa(c),a.stopPropagation(),a.preventDefault(),!1}var j=f.rangy.saveSelection(),k=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');h.find("body").append(k),k[0].focus(),e(function(){f.rangy.restoreSelection(j),aa(k[0].innerHTML),v[0].focus(),k.remove()},0)}),v.on("cut",l.events.cut=function(a){H?a.preventDefault():e(function(){D.$setViewValue(Y())},0)}),v.on("keydown",l.events.keydown=function(a,b){b&&angular.extend(a,b),a.specialKey=y(a);var c;if(q.keyMappings.forEach(function(b){a.specialKey===b.commandKeyCode&&(a.specialKey=void 0),b.testForKey(a)&&(c=b.commandKeyCode),("UndoKey"===b.commandKeyCode||"RedoKey"===b.commandKeyCode)&&(b.enablePropagation||a.preventDefault())}),"undefined"!=typeof c&&(a.specialKey=c),"undefined"==typeof a.specialKey||"UndoKey"===a.specialKey&&"RedoKey"===a.specialKey||(a.preventDefault(),u.sendKeyCommand(l,a)),!H&&("UndoKey"===a.specialKey&&(W(),a.preventDefault()),"RedoKey"===a.specialKey&&(X(),a.preventDefault()),13===a.keyCode&&!a.shiftKey)){var d,e=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},f=m.getSelectionElement();if(!f.tagName.match(g))return;var h=angular.element(B),i=["blockquote","ul","ol"];if(e(i,f.parentNode.tagName.toLowerCase())){if(/^<br(|\/)>$/i.test(f.innerHTML.trim())&&!f.nextSibling){d=angular.element(f);var j=d.parent();j.after(h),d.remove(),0===j.children().length&&j.remove(),m.setSelectionToElementStart(h[0]),a.preventDefault()}/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(f.innerHTML.trim())&&(d=angular.element(f),d.after(h),d.remove(),m.setSelectionToElementStart(h[0]),a.preventDefault())}}});var ba;if(v.on("keyup",l.events.keyup=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=m.getSelection();return void(c.start.element===v[0]&&v.children().length&&m.setSelectionToElementStart(v.children()[0]))}if(U&&e.cancel(U),!H&&!L.test(a.keyCode)){if(""!==B&&13===a.keyCode&&!a.shiftKey){for(var d=m.getSelectionElement();!d.tagName.match(g)&&d!==v[0];)d=d.parentNode;if(d.tagName.toLowerCase()!==w.taDefaultWrap&&"li"!==d.tagName.toLowerCase()&&(""===d.innerHTML.trim()||"<br>"===d.innerHTML.trim())){var f=angular.element(B);angular.element(d).replaceWith(f),m.setSelectionToElementStart(f[0])}}var h=Y();""!==B&&""===h.trim()?(ka(B),m.setSelectionToElementStart(v.children()[0])):"<"!==h.substring(0,1)&&""!==w.taDefaultWrap;var i=z!==a.keyCode&&M.test(a.keyCode);ba&&e.cancel(ba),ba=e(function(){Z(h,i,!0)},E.$options.debounce||400),i||(U=e(function(){D.$undoManager.push(h)},250)),z=a.keyCode}}),v.on("blur",l.events.blur=function(){I=!1,H?(J=!0,D.$render()):Z(void 0,void 0,!0)}),w.placeholder&&(b.ie>8||void 0===b.ie)){var ca;if(!w.id)throw"textAngular Error: An unique ID is required for placeholders to work";ca=i("#"+w.id+".placeholder-text:before",'content: "'+w.placeholder+'"'),l.$on("$destroy",function(){j(ca)})}v.on("focus",l.events.focus=function(){I=!0,v.removeClass("placeholder-text"),ja()}),v.on("mouseup",l.events.mouseup=function(){var a=m.getSelection();a.start.element===v[0]&&v.children().length&&m.setSelectionToElementStart(v.children()[0])}),v.on("mousedown",l.events.mousedown=function(a,b){b&&angular.extend(a,b),a.stopPropagation()})}else{v.on("change blur",l.events.change=l.events.blur=function(){H||D.$setViewValue(Y())}),v.on("keydown",l.events.keydown=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=this.selectionStart,d=this.selectionEnd,e=v.val();if(a.shiftKey){var f=e.lastIndexOf("\n",c),g=e.lastIndexOf("	",c);-1!==g&&g>=f&&(v.val(e.substring(0,g)+e.substring(g+1)),this.selectionStart=this.selectionEnd=c-1)}else v.val(e.substring(0,c)+"	"+e.substring(d)),this.selectionStart=this.selectionEnd=c+1;a.preventDefault()}});var da=function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},ea=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])},fa=function(a,b){var c="",d=a.childNodes;return b++,c+=da("	",b-1)+a.outerHTML.substring(0,4),ea(d,function(a,d){var e=d.nodeName.toLowerCase();return"#comment"===e?void(c+="<!--"+d.nodeValue+"-->"):"#text"===e?void(c+=d.textContent):void(d.outerHTML&&(c+="ul"===e||"ol"===e?"\n"+fa(d,b):"\n"+da("	",b)+d.outerHTML))}),c+="\n"+da("	",b-1)+a.outerHTML.substring(a.outerHTML.lastIndexOf("<"))};D.$formatters.unshift(function(a){var b=angular.element("<div>"+a+"</div>")[0].childNodes;return b.length>0&&(a="",ea(b,function(b,c){var d=c.nodeName.toLowerCase();return"#comment"===d?void(a+="<!--"+c.nodeValue+"-->"):"#text"===d?void(a+=c.textContent):void(c.outerHTML&&(a.length>0&&(a+="\n"),a+="ul"===d||"ol"===d?""+fa(c,0):""+c.outerHTML))})),a})}var ga,ha=function(a){return l.$emit("ta-element-select",this),a.preventDefault(),!1},ia=function(a,b){if(b&&angular.extend(a,b),!p&&!H){p=!0;var c;c=a.originalEvent?a.originalEvent.dataTransfer:a.dataTransfer,l.$emit("ta-drop-event",this,a,c),e(function(){p=!1,Z(void 0,void 0,!0)},100)}},ja=l["reApplyOnSelectorHandlers"+(w.id||"")]=function(){H||angular.forEach(n,function(a){v.find(a).off("click",ha).on("click",ha)})},ka=function(a){v[0].innerHTML=a},la=!1;D.$render=function(){if(!la){la=!0;var a=D.$viewValue||"";J||(F&&I&&(v.removeClass("placeholder-text"),ga&&e.cancel(ga),ga=e(function(){I||(v[0].focus(),m.setSelectionToElementEnd(v.children()[v.children().length-1])),ga=void 0},1)),F?(ka(w.placeholder?""===a?B:a:""===a?B:a),H?v.off("drop",ia):(ja(),v.on("drop",ia))):"textarea"!==v[0].tagName.toLowerCase()&&"input"!==v[0].tagName.toLowerCase()?ka(o(a)):v.val(a)),F&&w.placeholder&&(""===a?I?v.removeClass("placeholder-text"):v.addClass("placeholder-text"):v.removeClass("placeholder-text")),la=J=!1}},w.taReadonly&&(H=l.$eval(w.taReadonly),H?(v.addClass("ta-readonly"),("textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase())&&v.attr("disabled","disabled"),void 0!==v.attr("contenteditable")&&v.attr("contenteditable")&&v.removeAttr("contenteditable")):(v.removeClass("ta-readonly"),"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase()?v.removeAttr("disabled"):F&&v.attr("contenteditable","true")),l.$watch(w.taReadonly,function(a,b){b!==a&&(a?(v.addClass("ta-readonly"),("textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase())&&v.attr("disabled","disabled"),void 0!==v.attr("contenteditable")&&v.attr("contenteditable")&&v.removeAttr("contenteditable"),angular.forEach(n,function(a){v.find(a).on("click",ha)}),v.off("drop",ia)):(v.removeClass("ta-readonly"),"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase()?v.removeAttr("disabled"):F&&v.attr("contenteditable","true"),angular.forEach(n,function(a){v.find(a).off("click",ha)}),v.on("drop",ia)),H=a)})),F&&!H&&(angular.forEach(n,function(a){v.find(a).on("click",ha)}),v.on("drop",ia),v.on("blur",function(){b.webkit&&(c=!0)}))}}}]);var p=!1,q=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);q.config([function(){angular.forEach(e,function(a,b){delete e[b]})}]),q.run([function(){if("function"==typeof define&&define.amd)define(function(a){window.rangy=a("rangy"),window.rangy.saveSelection=a("rangy/lib/rangy-selectionsaverestore")});else if("function"==typeof require&&"undefined"!=typeof module&&"object"==typeof a)window.rangy=require("rangy"),window.rangy.saveSelection=require("rangy/lib/rangy-selectionsaverestore");else{if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}}]),q.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(a,b,c,d,e,f,g,h,i,j,k,l){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A,B=o.serial?o.serial:Math.floor(1e16*Math.random());m._name=o.name?o.name:"textAngularEditor"+B;var C=function(a,c,d){b(function(){var b=function(){a.off(c,b),d.apply(this,arguments)};a.on(c,b)},100)};if(y=e(o.taDefaultWrap),angular.extend(m,angular.copy(c),{wrapSelection:function(a,b,c){"undo"===a.toLowerCase()?m["$undoTaBindtaTextElement"+B]():"redo"===a.toLowerCase()?m["$redoTaBindtaTextElement"+B]():(y(a,!1,b,m.defaultTagAttributes),c&&m["reApplyOnSelectorHandlerstaTextElement"+B](),m.displayElements.text[0].focus())},showHtml:m.$eval(o.taShowHtml)||!1}),o.taFocussedClass&&(m.classes.focussed=o.taFocussedClass),o.taTextEditorClass&&(m.classes.textEditor=o.taTextEditorClass),o.taHtmlEditorClass&&(m.classes.htmlEditor=o.taHtmlEditorClass),o.taDefaultTagAttributes)try{angular.extend(m.defaultTagAttributes,angular.fromJson(o.taDefaultTagAttributes))}catch(D){j.error(D)}o.taTextEditorSetup&&(m.setup.textEditorSetup=m.$parent.$eval(o.taTextEditorSetup)),o.taHtmlEditorSetup&&(m.setup.htmlEditorSetup=m.$parent.$eval(o.taHtmlEditorSetup)),o.taFileDrop?m.fileDropHandler=m.$parent.$eval(o.taFileDrop):m.fileDropHandler=m.defaultFileDropHandler,w=n[0].innerHTML,n[0].innerHTML="",m.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},m.displayElements.popover.append(m.displayElements.popoverArrow),m.displayElements.popover.append(m.displayElements.popoverContainer),m.displayElements.scrollWindow.append(m.displayElements.popover),m.displayElements.popover.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),m.showPopover=function(a){m.displayElements.popover.css("display","block"),m.reflowPopover(a),i.addClass(m.displayElements.popover,"in"),C(h.find("body"),"click keyup",function(){m.hidePopover()})},m.reflowPopover=function(a){m.displayElements.text[0].offsetHeight-51>a[0].offsetTop?(m.displayElements.popover.css("top",a[0].offsetTop+a[0].offsetHeight+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("top").addClass("bottom")):(m.displayElements.popover.css("top",a[0].offsetTop-54+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("bottom").addClass("top"));var b=m.displayElements.text[0].offsetWidth-m.displayElements.popover[0].offsetWidth,c=a[0].offsetLeft+a[0].offsetWidth/2-m.displayElements.popover[0].offsetWidth/2;m.displayElements.popover.css("left",Math.max(0,Math.min(b,c))+"px"),m.displayElements.popoverArrow.css("margin-left",Math.min(c,Math.max(0,c-b))-11+"px")},m.hidePopover=function(){m.displayElements.popover.css("display",""),m.displayElements.popoverContainer.attr("style",""),m.displayElements.popoverContainer.attr("class","popover-content"),m.displayElements.popover.removeClass("in")},m.displayElements.resize.overlay.append(m.displayElements.resize.background),angular.forEach(m.displayElements.resize.anchors,function(a){m.displayElements.resize.overlay.append(a)}),m.displayElements.resize.overlay.append(m.displayElements.resize.info),m.displayElements.scrollWindow.append(m.displayElements.resize.overlay),m.reflowResizeOverlay=function(a){a=angular.element(a)[0],m.displayElements.resize.overlay.css({display:"block",left:a.offsetLeft-5+"px",top:a.offsetTop-5+"px",width:a.offsetWidth+10+"px",height:a.offsetHeight+10+"px"}),m.displayElements.resize.info.text(a.offsetWidth+" x "+a.offsetHeight)},m.showResizeOverlay=function(a){var b=h.find("body");z=function(c){var d={width:parseInt(a.attr("width")),height:parseInt(a.attr("height")),x:c.clientX,y:c.clientY};(void 0===d.width||isNaN(d.width))&&(d.width=a[0].offsetWidth),(void 0===d.height||isNaN(d.height))&&(d.height=a[0].offsetHeight),m.hidePopover();var e=d.height/d.width,f=function(b){function c(a){return Math.round(Math.max(0,a))}var f={x:Math.max(0,d.width+(b.clientX-d.x)),y:Math.max(0,d.height+(b.clientY-d.y))},g=void 0!==o.taResizeForceAspectRatio,h=o.taResizeMaintainAspectRatio,i=g||h&&!b.shiftKey;if(i){var j=f.y/f.x;f.x=e>j?f.x:f.y/e,f.y=e>j?f.x*e:f.y}var k=angular.element(a);k.css("height",c(f.y)+"px"),k.css("width",c(f.x)+"px"),m.reflowResizeOverlay(a)};b.on("mousemove",f),C(b,"mouseup",function(a){a.preventDefault(),a.stopPropagation(),b.off("mousemove",f),m.$apply(function(){m.hidePopover(),m.updateTaBindtaTextElement()},100)}),c.stopPropagation(),c.preventDefault()},m.displayElements.resize.anchors[3].off("mousedown"),m.displayElements.resize.anchors[3].on("mousedown",z),m.reflowResizeOverlay(a),C(b,"click",function(){m.hideResizeOverlay()})},m.hideResizeOverlay=function(){m.displayElements.resize.anchors[3].off("mousedown",z),m.displayElements.resize.overlay.css("display","")},m.setup.htmlEditorSetup(m.displayElements.html),m.setup.textEditorSetup(m.displayElements.text),m.displayElements.html.attr({id:"taHtmlElement"+B,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.text.attr({id:"taTextElement"+B,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),o.taDefaultWrap&&m.displayElements.text.attr("ta-default-wrap",o.taDefaultWrap),o.taUnsafeSanitizer&&(m.displayElements.text.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer),m.displayElements.html.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer)),m.displayElements.scrollWindow.append(m.displayElements.text),n.append(m.displayElements.scrollWindow),n.append(m.displayElements.html),m.displayElements.forminput.attr("name",m._name),n.append(m.displayElements.forminput),o.tabindex&&(n.removeAttr("tabindex"),m.displayElements.text.attr("tabindex",o.tabindex),m.displayElements.html.attr("tabindex",o.tabindex)),o.placeholder&&(m.displayElements.text.attr("placeholder",o.placeholder),m.displayElements.html.attr("placeholder",o.placeholder)),o.taDisabled&&(m.displayElements.text.attr("ta-readonly","disabled"),m.displayElements.html.attr("ta-readonly","disabled"),m.disabled=m.$parent.$eval(o.taDisabled),m.$parent.$watch(o.taDisabled,function(a){m.disabled=a,m.disabled?n.addClass(m.classes.disabled):n.removeClass(m.classes.disabled)})),o.taPaste&&(m._pasteHandler=function(a){return l(o.taPaste)(m.$parent,{$html:a})},m.displayElements.text.attr("ta-paste","_pasteHandler($html)")),a(m.displayElements.scrollWindow)(m),a(m.displayElements.html)(m),m.updateTaBindtaTextElement=m["updateTaBindtaTextElement"+B],m.updateTaBindtaHtmlElement=m["updateTaBindtaHtmlElement"+B],n.addClass("ta-root"),m.displayElements.scrollWindow.addClass("ta-text ta-editor "+m.classes.textEditor),m.displayElements.html.addClass("ta-html ta-editor "+m.classes.htmlEditor),m._actionRunning=!1;var E=!1;if(m.startAction=function(){return m._actionRunning=!0,E=g.rangy.saveSelection(),function(){E&&g.rangy.restoreSelection(E)}},m.endAction=function(){m._actionRunning=!1,E&&(m.showHtml?m.displayElements.html[0].focus():m.displayElements.text[0].focus(),g.rangy.removeMarkers(E)),E=!1,m.updateSelectedStyles(),m.showHtml||m["updateTaBindtaTextElement"+B]()},u=function(){m.focussed=!0,n.addClass(m.classes.focussed),x.focus(),n.triggerHandler("focus")},m.displayElements.html.on("focus",u),m.displayElements.text.on("focus",u),v=function(a){return m._actionRunning||h[0].activeElement===m.displayElements.html[0]||h[0].activeElement===m.displayElements.text[0]||(n.removeClass(m.classes.focussed),x.unfocus(),b(function(){m._bUpdateSelectedStyles=!1,n.triggerHandler("blur"),m.focussed=!1},0)),a.preventDefault(),!1},m.displayElements.html.on("blur",v),m.displayElements.text.on("blur",v),m.displayElements.text.on("paste",function(a){n.triggerHandler("paste",a)}),m.queryFormatBlockState=function(a){return!m.showHtml&&a.toLowerCase()===h[0].queryCommandValue("formatBlock").toLowerCase()},m.queryCommandState=function(a){return m.showHtml?"":h[0].queryCommandState(a)},m.switchView=function(){m.showHtml=!m.showHtml,i.enabled(!1,m.displayElements.html),i.enabled(!1,m.displayElements.text),m.showHtml?b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.html[0].focus()},100):b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.text[0].focus()},100)},o.ngModel){var F=!0;p.$render=function(){if(F){F=!1;var a=m.$parent.$eval(o.ngModel);void 0!==a&&null!==a||!w||""===w||p.$setViewValue(w)}m.displayElements.forminput.val(p.$viewValue),m.html=p.$viewValue||""},n.attr("required")&&(p.$validators.required=function(a,b){var c=a||b;return!(!c||""===c.trim())})}else m.displayElements.forminput.val(w),m.html=w;if(m.$watch("html",function(a,b){a!==b&&(o.ngModel&&p.$viewValue!==a&&p.$setViewValue(a),m.displayElements.forminput.val(a))}),o.taTargetToolbars)x=f.registerEditor(m._name,m,o.taTargetToolbars.split(","));else{var G=angular.element('<div text-angular-toolbar name="textAngularToolbar'+B+'">');o.taToolbar&&G.attr("ta-toolbar",o.taToolbar),o.taToolbarClass&&G.attr("ta-toolbar-class",o.taToolbarClass),o.taToolbarGroupClass&&G.attr("ta-toolbar-group-class",o.taToolbarGroupClass),o.taToolbarButtonClass&&G.attr("ta-toolbar-button-class",o.taToolbarButtonClass),o.taToolbarActiveButtonClass&&G.attr("ta-toolbar-active-button-class",o.taToolbarActiveButtonClass),o.taFocussedClass&&G.attr("ta-focussed-class",o.taFocussedClass),n.prepend(G),a(G)(m.$parent),x=f.registerEditor(m._name,m,["textAngularToolbar"+B])}m.$on("$destroy",function(){f.unregisterEditor(m._name),angular.element(window).off("blur")}),m.$on("ta-element-select",function(a,b){x.triggerElementSelect(a,b)&&m["reApplyOnSelectorHandlerstaTextElement"+B]()}),m.$on("ta-drop-event",function(a,c,d,e){m.displayElements.text[0].focus(),e&&e.files&&e.files.length>0?(angular.forEach(e.files,function(a){try{k.when(m.fileDropHandler(a,m.wrapSelection)||m.fileDropHandler!==m.defaultFileDropHandler&&k.when(m.defaultFileDropHandler(a,m.wrapSelection))).then(function(){m["updateTaBindtaTextElement"+B]()})}catch(b){j.error(b)}}),d.preventDefault(),d.stopPropagation()):b(function(){m["updateTaBindtaTextElement"+B]()},0)}),m._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){m._bUpdateSelectedStyles=!1,m.focussed=!1}),m.updateSelectedStyles=function(){var a;A&&b.cancel(A),void 0!==(a=d.getSelectionElement())&&a.parentNode!==m.displayElements.text[0]?x.updateSelectedStyles(angular.element(a)):x.updateSelectedStyles(),m._bUpdateSelectedStyles&&(A=b(m.updateSelectedStyles,200))},q=function(){return m.focussed?void(m._bUpdateSelectedStyles||(m._bUpdateSelectedStyles=!0,m.$apply(function(){m.updateSelectedStyles()}))):void(m._bUpdateSelectedStyles=!1)},m.displayElements.html.on("keydown",q),m.displayElements.text.on("keydown",q),r=function(){m._bUpdateSelectedStyles=!1},m.displayElements.html.on("keyup",r),m.displayElements.text.on("keyup",r),s=function(a,b){b&&angular.extend(a,b),m.$apply(function(){return x.sendKeyCommand(a)?(m._bUpdateSelectedStyles||m.updateSelectedStyles(),a.preventDefault(),!1):void 0})},m.displayElements.html.on("keypress",s),m.displayElements.text.on("keypress",s),t=function(){m._bUpdateSelectedStyles=!1,m.$apply(function(){m.updateSelectedStyles()})},m.displayElements.html.on("mouseup",t),m.displayElements.text.on("mouseup",t)}}}]),q.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(a,b,c){var d={},e={};return{registerEditor:function(c,f,g){if(!c||""===c)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(e[c])throw'textAngular Error: An Editor with name "'+c+'" already exists';var h=[];return angular.forEach(g,function(a){d[a]&&h.push(d[a])}),e[c]={scope:f,toolbars:g,_registerToolbar:function(a){this.toolbars.indexOf(a.name)>=0&&h.push(a)},editorFunctions:{disable:function(){angular.forEach(h,function(a){a.disabled=!0})},enable:function(){angular.forEach(h,function(a){a.disabled=!1})},focus:function(){angular.forEach(h,function(a){a._parent=f,a.disabled=!1,a.focussed=!0,f.focussed=!0})},unfocus:function(){angular.forEach(h,function(a){a.disabled=!0,a.focussed=!1}),f.focussed=!1},updateSelectedStyles:function(a){angular.forEach(h,function(b){angular.forEach(b.tools,function(c){c.activeState&&(b._parent=f,c.active=c.activeState(a))})})},sendKeyCommand:function(c){var d=!1;return(c.ctrlKey||c.metaKey||c.specialKey)&&angular.forEach(b,function(b,e){if(b.commandKeyCode&&(b.commandKeyCode===c.which||b.commandKeyCode===c.specialKey))for(var g=0;g<h.length;g++)if(void 0!==h[g].tools[e]){a.call(h[g].tools[e],f),d=!0;break}}),d},triggerElementSelect:function(a,c){var d=function(a,b){for(var c=!0,d=0;d<b.length;d++)c=c&&a.attr(b[d]);return c},e=[],g={},i=!1;c=angular.element(c);var j=!1;if(angular.forEach(b,function(a,b){a.onElementSelect&&a.onElementSelect.element&&a.onElementSelect.element.toLowerCase()===c[0].tagName.toLowerCase()&&(!a.onElementSelect.filter||a.onElementSelect.filter(c))&&(j=j||angular.isArray(a.onElementSelect.onlyWithAttrs)&&d(c,a.onElementSelect.onlyWithAttrs),
(!a.onElementSelect.onlyWithAttrs||d(c,a.onElementSelect.onlyWithAttrs))&&(g[b]=a))}),j?(angular.forEach(g,function(a,b){a.onElementSelect.onlyWithAttrs&&d(c,a.onElementSelect.onlyWithAttrs)&&e.push({name:b,tool:a})}),e.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(g,function(a,b){e.push({name:b,tool:a})}),e.length>0)for(var k=0;k<e.length;k++){for(var l=e[k].tool,m=e[k].name,n=0;n<h.length;n++)if(void 0!==h[n].tools[m]){l.onElementSelect.action.call(h[n].tools[m],a,c,f),i=!0;break}if(i)break}return i}}},e[c].editorFunctions},retrieveEditor:function(a){return e[a]},unregisterEditor:function(a){delete e[a]},registerToolbar:function(a){if(!a)throw"textAngular Error: A toolbar requires a scope";if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";if(d[a.name])throw'textAngular Error: A toolbar with name "'+a.name+'" already exists';d[a.name]=a,angular.forEach(e,function(b){b._registerToolbar(a)})},retrieveToolbar:function(a){return d[a]},retrieveToolbarsViaEditor:function(a){var b=[],c=this;return angular.forEach(this.retrieveEditor(a).toolbars,function(a){b.push(c.retrieveToolbar(a))}),b},unregisterToolbar:function(a){delete d[a]},updateToolsDisplay:function(a){var b=this;angular.forEach(a,function(a,c){b.updateToolDisplay(c,a)})},resetToolsDisplay:function(){var a=this;angular.forEach(b,function(b,c){a.resetToolDisplay(c)})},updateToolDisplay:function(a,b){var c=this;angular.forEach(d,function(d,e){c.updateToolbarToolDisplay(e,a,b)})},resetToolDisplay:function(a){var b=this;angular.forEach(d,function(c,d){b.resetToolbarToolDisplay(d,a)})},updateToolbarToolDisplay:function(a,b,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(b,c)},resetToolbarToolDisplay:function(a,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(c,b[c],!0)},removeTool:function(a){delete b[a],angular.forEach(d,function(b){delete b.tools[a];for(var c=0;c<b.toolbar.length;c++){for(var d,e=0;e<b.toolbar[c].length;e++){if(b.toolbar[c][e]===a){d={group:c,index:e};break}if(void 0!==d)break}void 0!==d&&(b.toolbar[d.group].slice(d.index,1),b._$element.children().eq(d.group).children().eq(d.index).remove())}})},addTool:function(a,b,e,f){c(a,b),angular.forEach(d,function(c){c.addTool(a,b,e,f)})},addToolToToolbar:function(a,b,e,f,g){c(a,b),d[e].addTool(a,b,f,g)},refreshEditor:function(a){if(!e[a])throw'textAngular Error: No Editor with name "'+a+'" exists';e[a].scope.updateTaBindtaTextElement(),e[a].scope.$$phase||e[a].scope.$digest()},sendKeyCommand:function(a,b){var c=e[a._name];return c&&c.editorFunctions.sendKeyCommand(b)?(a._bUpdateSelectedStyles||a.updateSelectedStyles(),b.preventDefault(),!1):void 0}}}]),q.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(a,b,c,d,e,f){return{scope:{name:"@"},restrict:"EA",link:function(g,h,i){if(!g.name||""===g.name)throw"textAngular Error: A toolbar requires a name";angular.extend(g,angular.copy(c)),i.taToolbar&&(g.toolbar=g.$parent.$eval(i.taToolbar)),i.taToolbarClass&&(g.classes.toolbar=i.taToolbarClass),i.taToolbarGroupClass&&(g.classes.toolbarGroup=i.taToolbarGroupClass),i.taToolbarButtonClass&&(g.classes.toolbarButton=i.taToolbarButtonClass),i.taToolbarActiveButtonClass&&(g.classes.toolbarButtonActive=i.taToolbarActiveButtonClass),i.taFocussedClass&&(g.classes.focussed=i.taFocussedClass),g.disabled=!0,g.focussed=!1,g._$element=h,h[0].innerHTML="",h.addClass("ta-toolbar "+g.classes.toolbar),g.$watch("focussed",function(){g.focussed?h.addClass(g.classes.focussed):h.removeClass(g.classes.focussed)});var j=function(b,c){var d;if(d=b&&b.display?angular.element(b.display):angular.element("<button type='button'>"),b&&b["class"]?d.addClass(b["class"]):d.addClass(g.classes.toolbarButton),d.attr("name",c.name),d.attr("ta-button","ta-button"),d.attr("ng-disabled","isDisabled()"),d.attr("tabindex","-1"),d.attr("ng-click","executeAction()"),d.attr("ng-class","displayActiveToolClass(active)"),b&&b.tooltiptext&&d.attr("title",b.tooltiptext),b&&!b.display&&!c._display&&(d[0].innerHTML="",b.buttontext&&(d[0].innerHTML=b.buttontext),b.iconclass)){var e=angular.element("<i>"),f=d[0].innerHTML;e.addClass(b.iconclass),d[0].innerHTML="",d.append(e),f&&""!==f&&d.append("&nbsp;"+f)}return c._lastToolDefinition=angular.copy(b),a(d)(c)};g.tools={},g._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var k={$window:f,$editor:function(){return g._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(a){return a?g.classes.toolbarButtonActive:""},executeAction:e};angular.forEach(g.toolbar,function(a){var b=angular.element("<div>");b.addClass(g.classes.toolbarGroup),angular.forEach(a,function(a){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]),b.append(g.tools[a].$element)}),h.append(b)}),g.updateToolDisplay=function(a,b,c){var d=g.tools[a];if(d){if(d._lastToolDefinition&&!c&&(b=angular.extend({},d._lastToolDefinition,b)),null===b.buttontext&&null===b.iconclass&&null===b.display)throw'textAngular Error: Tool Definition for updating "'+a+'" does not have a valid display/iconclass/buttontext value';null===b.buttontext&&delete b.buttontext,null===b.iconclass&&delete b.iconclass,null===b.display&&delete b.display;var e=j(b,d);d.$element.replaceWith(e),d.$element=e}},g.addTool=function(a,b,c,e){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]);var f;void 0===c&&(c=g.toolbar.length-1),f=angular.element(h.children()[c]),void 0===e?(f.append(g.tools[a].$element),g.toolbar[c][g.toolbar[c].length-1]=a):(f.children().eq(e).after(g.tools[a].$element),g.toolbar[c][e]=a)},b.registerToolbar(g),g.$on("$destroy",function(){b.unregisterToolbar(g.name)})}}}])}()}({},function(){return this}()),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Uc.apply(null,arguments)}function b(a){Uc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Da(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a){return void 0===a}function n(a,b){var c,d,e;if(m(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),m(b._i)||(a._i=b._i),m(b._f)||(a._f=b._f),m(b._l)||(a._l=b._l),m(b._strict)||(a._strict=b._strict),m(b._tzm)||(a._tzm=b._tzm),m(b._isUTC)||(a._isUTC=b._isUTC),m(b._offset)||(a._offset=b._offset),m(b._pf)||(a._pf=j(b)),m(b._locale)||(a._locale=b._locale),Wc.length>0)for(c in Wc)d=Wc[c],e=b[d],m(e)||(a[d]=e);return a}function o(b){n(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Xc===!1&&(Xc=!0,a.updateOffset(this),Xc=!1)}function p(a){return a instanceof o||null!=a&&null!=a._isAMomentObject}function q(a){return 0>a?Math.ceil(a):Math.floor(a)}function r(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=q(b)),c}function s(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&r(a[d])!==r(b[d]))&&g++;return g+f}function t(){}function u(a){return a?a.toLowerCase().replace("_","-"):a}function v(a){for(var b,c,d,e,f=0;f<a.length;){for(e=u(a[f]).split("-"),b=e.length,c=u(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=w(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&s(e,c,!0)>=b-1)break;b--}f++}return null}function w(a){var b=null;if(!Yc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Vc._abbr,require("./locale/"+a),x(b)}catch(c){}return Yc[a]}function x(a,b){var c;return a&&(c=m(b)?z(a):y(a,b),c&&(Vc=c)),Vc._abbr}function y(a,b){return null!==b?(b.abbr=a,Yc[a]=Yc[a]||new t,Yc[a].set(b),x(a),Yc[a]):(delete Yc[a],null)}function z(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Vc;if(!c(a)){if(b=w(a))return b;a=[a]}return v(a)}function A(a,b){var c=a.toLowerCase();Zc[c]=Zc[c+"s"]=Zc[b]=a}function B(a){return"string"==typeof a?Zc[a]||Zc[a.toLowerCase()]:void 0}function C(a){var b,c,d={};for(c in a)f(a,c)&&(b=B(c),b&&(d[b]=a[c]));return d}function D(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function E(b,c){return function(d){return null!=d?(G(this,b,d),a.updateOffset(this,c),this):F(this,b)}}function F(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function G(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function H(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=B(a),D(this[a]))return this[a](b);return this}function I(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function J(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(bd[a]=e),b&&(bd[b[0]]=function(){return I(e.apply(this,arguments),b[1],b[2])}),c&&(bd[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function L(a){var b,c,d=a.match($c);for(b=0,c=d.length;c>b;b++)bd[d[b]]?d[b]=bd[d[b]]:d[b]=K(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),ad[b]=ad[b]||L(b),ad[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(_c.lastIndex=0;d>=0&&_c.test(a);)a=a.replace(_c,c),_c.lastIndex=0,d-=1;return a}function O(a,b,c){td[a]=D(b)?b:function(a,d){return a&&c?c:b}}function P(a,b){return f(td,a)?td[a](b._strict,b._locale):new RegExp(Q(a))}function Q(a){return R(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function R(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=r(a)}),c=0;c<a.length;c++)ud[a[c]]=d}function T(a,b){S(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function U(a,b,c){null!=b&&f(ud,a)&&ud[a](b,c._a,c,a)}function V(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function W(a,b){return c(this._months)?this._months[a.month()]:this._months[Ed.test(b)?"format":"standalone"][a.month()]}function X(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Ed.test(b)?"format":"standalone"][a.month()]}function Y(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function Z(a,b){var c;return a.isValid()?"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),V(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a):a}function $(b){return null!=b?(Z(this,b),a.updateOffset(this,!0),this):F(this,"Month")}function _(){return V(this.year(),this.month())}function aa(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex}function ba(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex}function ca(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=h([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=R(d[b]),e[b]=R(e[b]),f[b]=R(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")$","i")}function da(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[wd]<0||c[wd]>11?wd:c[xd]<1||c[xd]>V(c[vd],c[wd])?xd:c[yd]<0||c[yd]>24||24===c[yd]&&(0!==c[zd]||0!==c[Ad]||0!==c[Bd])?yd:c[zd]<0||c[zd]>59?zd:c[Ad]<0||c[Ad]>59?Ad:c[Bd]<0||c[Bd]>999?Bd:-1,j(a)._overflowDayOfYear&&(vd>b||b>xd)&&(b=xd),j(a)._overflowWeeks&&-1===b&&(b=Cd),j(a)._overflowWeekday&&-1===b&&(b=Dd),j(a).overflow=b),a}function ea(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&void 0}function fa(a,b){var c=!0;return g(function(){return c&&(ea(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ga(a,b){Jd[a]||(ea(b),Jd[a]=!0)}function ha(a){var b,c,d,e,f,g,h=a._i,i=Kd.exec(h)||Ld.exec(h);if(i){for(j(a).iso=!0,b=0,c=Nd.length;c>b;b++)if(Nd[b][1].exec(i[1])){e=Nd[b][0],d=Nd[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Od.length;c>b;b++)if(Od[b][1].exec(i[3])){f=(i[2]||" ")+Od[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Md.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),wa(a)}else a._isValid=!1}function ia(b){var c=Pd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ha(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ja(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ka(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function la(a){return ma(a)?366:365}function ma(a){return a%4===0&&a%100!==0||a%400===0}function na(){return ma(this.year())}function oa(a,b,c){var d=7+b-c,e=(7+ka(a,0,d).getUTCDay()-b)%7;return-e+d-1}function pa(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=oa(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=la(f)+j):j>la(a)?(f=a+1,g=j-la(a)):(f=a,g=j),{year:f,dayOfYear:g}}function qa(a,b,c){var d,e,f=oa(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+ra(e,b,c)):g>ra(a.year(),b,c)?(d=g-ra(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function ra(a,b,c){var d=oa(a,b,c),e=oa(a+1,b,c);return(la(a)-d+e)/7}function sa(a,b,c){return null!=a?a:null!=b?b:c}function ta(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ua(a){var b,c,d,e,f=[];if(!a._d){for(d=ta(a),a._w&&null==a._a[xd]&&null==a._a[wd]&&va(a),a._dayOfYear&&(e=sa(a._a[vd],d[vd]),a._dayOfYear>la(e)&&(j(a)._overflowDayOfYear=!0),c=ka(e,0,a._dayOfYear),a._a[wd]=c.getUTCMonth(),a._a[xd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[yd]&&0===a._a[zd]&&0===a._a[Ad]&&0===a._a[Bd]&&(a._nextDay=!0,a._a[yd]=0),a._d=(a._useUTC?ka:ja).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[yd]=24)}}function va(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=sa(b.GG,a._a[vd],qa(Ea(),1,4).year),d=sa(b.W,1),e=sa(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=sa(b.gg,a._a[vd],qa(Ea(),f,g).year),d=sa(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>ra(c,f,g)?j(a)._overflowWeeks=!0:null!=i?j(a)._overflowWeekday=!0:(h=pa(c,d,e,f,g),a._a[vd]=h.year,a._dayOfYear=h.dayOfYear)}function wa(b){if(b._f===a.ISO_8601)return void ha(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=N(b._f,b._locale).match($c)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(P(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),bd[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),U(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[yd]<=12&&b._a[yd]>0&&(j(b).bigHour=void 0),b._a[yd]=xa(b._locale,b._a[yd],b._meridiem),ua(b),da(b)}function xa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function ya(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],wa(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function za(a){if(!a._d){var b=C(a._i);a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ua(a)}}function Aa(a){var b=new o(da(Ba(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Ba(a){var b=a._i,e=a._f;return a._locale=a._locale||z(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),p(b)?new o(da(b)):(c(e)?ya(a):e?wa(a):d(b)?a._d=b:Ca(a),k(a)||(a._d=null),a))}function Ca(b){var f=b._i;void 0===f?b._d=new Date(a.now()):d(f)?b._d=new Date(+f):"string"==typeof f?ia(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ua(b)):"object"==typeof f?za(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Da(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,Aa(f)}function Ea(a,b,c,d){return Da(a,b,c,d,!1)}function Fa(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Ea();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Ga(){var a=[].slice.call(arguments,0);return Fa("isBefore",a)}function Ha(){var a=[].slice.call(arguments,0);return Fa("isAfter",a)}function Ia(a){var b=C(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=z(),this._bubble()}function Ja(a){return a instanceof Ia}function Ka(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+I(~~(a/60),2)+b+I(~~a%60,2)})}function La(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(Ud)||["-",0,0],f=+(60*e[1])+r(e[2]);return"+"===e[0]?f:-f}function Ma(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(p(b)||d(b)?+b:+Ea(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Ea(b).local()}function Na(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Oa(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=La(qd,b):Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Na(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?cb(this,Za(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Na(this):null!=b?this:NaN}function Pa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Qa(a){return this.utcOffset(0,a)}function Ra(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Na(this),"m")),this}function Sa(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(La(pd,this._i)),this}function Ta(a){return this.isValid()?(a=a?Ea(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Ua(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Va(){if(!m(this._isDSTShifted))return this._isDSTShifted;var a={};if(n(a,this),a=Ba(a),a._a){var b=a._isUTC?h(a._a):Ea(a._a);this._isDSTShifted=this.isValid()&&s(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Wa(){return this.isValid()?!this._isUTC:!1}function Xa(){return this.isValid()?this._isUTC:!1}function Ya(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Za(a,b){var c,d,e,g=a,h=null;return Ja(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Vd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:r(h[xd])*c,h:r(h[yd])*c,m:r(h[zd])*c,s:r(h[Ad])*c,ms:r(h[Bd])*c}):(h=Wd.exec(a))?(c="-"===h[1]?-1:1,g={y:$a(h[2],c),M:$a(h[3],c),d:$a(h[4],c),h:$a(h[5],c),m:$a(h[6],c),s:$a(h[7],c),w:$a(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=ab(Ea(g.from),Ea(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ia(g),Ja(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function $a(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function _a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function ab(a,b){var c;return a.isValid()&&b.isValid()?(b=Ma(b,a),a.isBefore(b)?c=_a(a,b):(c=_a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function bb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ga(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Za(c,d),cb(this,e,a),this}}function cb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;b.isValid()&&(e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&G(b,"Date",F(b,"Date")+g*d),h&&Z(b,F(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function db(a,b){var c=a||Ea(),d=Ma(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse",g=b&&(D(b[f])?b[f]():b[f]);return this.format(g||this.localeData().calendar(f,this,Ea(c)))}function eb(){return new o(this)}function fb(a,b){var c=p(a)?a:Ea(a);return this.isValid()&&c.isValid()?(b=B(m(b)?"millisecond":b),"millisecond"===b?+this>+c:+c<+this.clone().startOf(b)):!1}function gb(a,b){var c=p(a)?a:Ea(a);return this.isValid()&&c.isValid()?(b=B(m(b)?"millisecond":b),"millisecond"===b?+c>+this:+this.clone().endOf(b)<+c):!1}function hb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function ib(a,b){var c,d=p(a)?a:Ea(a);return this.isValid()&&d.isValid()?(b=B(b||"millisecond"),"millisecond"===b?+this===+d:(c=+d,+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))):!1}function jb(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function kb(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function lb(a,b,c){var d,e,f,g;return this.isValid()?(d=Ma(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=B(b),"year"===b||"month"===b||"quarter"===b?(g=mb(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:q(g)):NaN):NaN}function mb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function nb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ob(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?D(Date.prototype.toISOString)?this.toDate().toISOString():M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function pb(b){var c=M(this,b||a.defaultFormat);return this.localeData().postformat(c)}function qb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function rb(a){return this.from(Ea(),a)}function sb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function tb(a){return this.to(Ea(),a)}function ub(a){var b;return void 0===a?this._locale._abbr:(b=z(a),null!=b&&(this._locale=b),this)}function vb(){return this._locale}function wb(a){switch(a=B(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function xb(a){return a=B(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function yb(){return+this._d-6e4*(this._offset||0)}function zb(){return Math.floor(+this/1e3)}function Ab(){return this._offset?new Date(+this):this._d}function Bb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Cb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Db(){return this.isValid()?this.toISOString():"null"}function Eb(){return k(this)}function Fb(){return g({},j(this))}function Gb(){return j(this).overflow}function Hb(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ib(a,b){J(0,[a,a.length],0,b)}function Jb(a){return Nb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Kb(a){return Nb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Lb(){return ra(this.year(),1,4)}function Mb(){var a=this.localeData()._week;return ra(this.year(),a.dow,a.doy)}function Nb(a,b,c,d,e){var f;return null==a?qa(this,d,e).year:(f=ra(a,d,e),b>f&&(b=f),Ob.call(this,a,b,c,d,e))}function Ob(a,b,c,d,e){var f=pa(a,b,c,d,e),g=ka(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Pb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Qb(a){return qa(a,this._week.dow,this._week.doy).week}function Rb(){return this._week.dow}function Sb(){return this._week.doy}function Tb(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ub(a){var b=qa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Vb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Wb(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function Xb(a){return this._weekdaysShort[a.day()]}function Yb(a){return this._weekdaysMin[a.day()]}function Zb(a,b,c){var d,e,f;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=Ea([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function $b(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Vb(a,this.localeData()),this.add(a-b,"d")):b}function _b(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function ac(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN}function bc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function cc(){return this.hours()%12||12}function dc(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function ec(a,b){return b._meridiemParse}function fc(a){return"p"===(a+"").toLowerCase().charAt(0)}function gc(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function hc(a,b){b[Bd]=r(1e3*("0."+a))}function ic(){return this._isUTC?"UTC":""}function jc(){return this._isUTC?"Coordinated Universal Time":""}function kc(a){return Ea(1e3*a)}function lc(){return Ea.apply(null,arguments).parseZone()}function mc(a,b,c){var d=this._calendar[a];return D(d)?d.call(b,c):d}function nc(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function oc(){return this._invalidDate}function pc(a){return this._ordinal.replace("%d",a)}function qc(a){return a}function rc(a,b,c,d){var e=this._relativeTime[c];return D(e)?e(a,b,c,d):e.replace(/%d/i,a)}function sc(a,b){var c=this._relativeTime[a>0?"future":"past"];return D(c)?c(b):c.replace(/%s/i,b)}function tc(a){var b,c;for(c in a)b=a[c],D(b)?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function uc(a,b,c,d){var e=z(),f=h().set(d,b);return e[c](f,a)}function vc(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return uc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=uc(a,f,c,e);return g}function wc(a,b){return vc(a,b,"months",12,"month")}function xc(a,b){return vc(a,b,"monthsShort",12,"month")}function yc(a,b){return vc(a,b,"weekdays",7,"day")}function zc(a,b){return vc(a,b,"weekdaysShort",7,"day")}function Ac(a,b){return vc(a,b,"weekdaysMin",7,"day")}function Bc(){var a=this._data;return this._milliseconds=se(this._milliseconds),this._days=se(this._days),this._months=se(this._months),a.milliseconds=se(a.milliseconds),a.seconds=se(a.seconds),a.minutes=se(a.minutes),a.hours=se(a.hours),a.months=se(a.months),a.years=se(a.years),this}function Cc(a,b,c,d){var e=Za(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Dc(a,b){return Cc(this,a,b,1)}function Ec(a,b){return Cc(this,a,b,-1)}function Fc(a){return 0>a?Math.floor(a):Math.ceil(a);
}function Gc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Fc(Ic(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=q(f/1e3),i.seconds=a%60,b=q(a/60),i.minutes=b%60,c=q(b/60),i.hours=c%24,g+=q(c/24),e=q(Hc(g)),h+=e,g-=Fc(Ic(e)),d=q(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function Hc(a){return 4800*a/146097}function Ic(a){return 146097*a/4800}function Jc(a){var b,c,d=this._milliseconds;if(a=B(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+Hc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(Ic(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function Kc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12)}function Lc(a){return function(){return this.as(a)}}function Mc(a){return a=B(a),this[a+"s"]()}function Nc(a){return function(){return this._data[a]}}function Oc(){return q(this.days()/7)}function Pc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Qc(a,b,c){var d=Za(a).abs(),e=Ie(d.as("s")),f=Ie(d.as("m")),g=Ie(d.as("h")),h=Ie(d.as("d")),i=Ie(d.as("M")),j=Ie(d.as("y")),k=e<Je.s&&["s",e]||1>=f&&["m"]||f<Je.m&&["mm",f]||1>=g&&["h"]||g<Je.h&&["hh",g]||1>=h&&["d"]||h<Je.d&&["dd",h]||1>=i&&["M"]||i<Je.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Pc.apply(null,k)}function Rc(a,b){return void 0===Je[a]?!1:void 0===b?Je[a]:(Je[a]=b,!0)}function Sc(a){var b=this.localeData(),c=Qc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Tc(){var a,b,c,d=Ke(this._milliseconds)/1e3,e=Ke(this._days),f=Ke(this._months);a=q(d/60),b=q(a/60),d%=60,a%=60,c=q(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Uc,Vc,Wc=a.momentProperties=[],Xc=!1,Yc={},Zc={},$c=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,_c=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ad={},bd={},cd=/\d/,dd=/\d\d/,ed=/\d{3}/,fd=/\d{4}/,gd=/[+-]?\d{6}/,hd=/\d\d?/,id=/\d\d\d\d?/,jd=/\d\d\d\d\d\d?/,kd=/\d{1,3}/,ld=/\d{1,4}/,md=/[+-]?\d{1,6}/,nd=/\d+/,od=/[+-]?\d+/,pd=/Z|[+-]\d\d:?\d\d/gi,qd=/Z|[+-]\d\d(?::?\d\d)?/gi,rd=/[+-]?\d+(\.\d{1,3})?/,sd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,td={},ud={},vd=0,wd=1,xd=2,yd=3,zd=4,Ad=5,Bd=6,Cd=7,Dd=8;J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),J("MMMM",0,0,function(a){return this.localeData().months(this,a)}),A("month","M"),O("M",hd),O("MM",hd,dd),O("MMM",function(a,b){return b.monthsShortRegex(a)}),O("MMMM",function(a,b){return b.monthsRegex(a)}),S(["M","MM"],function(a,b){b[wd]=r(a)-1}),S(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[wd]=e:j(c).invalidMonth=a});var Ed=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Fd="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Gd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Hd=sd,Id=sd,Jd={};a.suppressDeprecationWarnings=!1;var Kd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ld=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Md=/Z|[+-]\d\d(?::?\d\d)?/,Nd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Od=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Pd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=fa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),J("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),A("year","y"),O("Y",od),O("YY",hd,dd),O("YYYY",ld,fd),O("YYYYY",md,gd),O("YYYYYY",md,gd),S(["YYYYY","YYYYYY"],vd),S("YYYY",function(b,c){c[vd]=2===b.length?a.parseTwoDigitYear(b):r(b)}),S("YY",function(b,c){c[vd]=a.parseTwoDigitYear(b)}),S("Y",function(a,b){b[vd]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return r(a)+(r(a)>68?1900:2e3)};var Qd=E("FullYear",!1);a.ISO_8601=function(){};var Rd=fa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:l()}),Sd=fa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:l()}),Td=function(){return Date.now?Date.now():+new Date};Ka("Z",":"),Ka("ZZ",""),O("Z",qd),O("ZZ",qd),S(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=La(qd,a)});var Ud=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Vd=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Wd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Za.fn=Ia.prototype;var Xd=bb(1,"add"),Yd=bb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Zd=fa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ib("gggg","weekYear"),Ib("ggggg","weekYear"),Ib("GGGG","isoWeekYear"),Ib("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),O("G",od),O("g",od),O("GG",hd,dd),O("gg",hd,dd),O("GGGG",ld,fd),O("gggg",ld,fd),O("GGGGG",md,gd),O("ggggg",md,gd),T(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=r(a)}),T(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),J("Q",0,"Qo","quarter"),A("quarter","Q"),O("Q",cd),S("Q",function(a,b){b[wd]=3*(r(a)-1)}),J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),O("w",hd),O("ww",hd,dd),O("W",hd),O("WW",hd,dd),T(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=r(a)});var $d={dow:0,doy:6};J("D",["DD",2],"Do","date"),A("date","D"),O("D",hd),O("DD",hd,dd),O("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),S(["D","DD"],xd),S("Do",function(a,b){b[xd]=r(a.match(hd)[0],10)});var _d=E("Date",!0);J("d",0,"do","day"),J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),J("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),O("d",hd),O("e",hd),O("E",hd),O("dd",sd),O("ddd",sd),O("dddd",sd),T(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:j(c).invalidWeekday=a}),T(["d","e","E"],function(a,b,c,d){b[d]=r(a)});var ae="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),be="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ce="Su_Mo_Tu_We_Th_Fr_Sa".split("_");J("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),O("DDD",kd),O("DDDD",ed),S(["DDD","DDDD"],function(a,b,c){c._dayOfYear=r(a)}),J("H",["HH",2],0,"hour"),J("h",["hh",2],0,cc),J("hmm",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)}),J("hmmss",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}),J("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),J("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}),dc("a",!0),dc("A",!1),A("hour","h"),O("a",ec),O("A",ec),O("H",hd),O("h",hd),O("HH",hd,dd),O("hh",hd,dd),O("hmm",id),O("hmmss",jd),O("Hmm",id),O("Hmmss",jd),S(["H","HH"],yd),S(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),S(["h","hh"],function(a,b,c){b[yd]=r(a),j(c).bigHour=!0}),S("hmm",function(a,b,c){var d=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d)),j(c).bigHour=!0}),S("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d,2)),b[Ad]=r(a.substr(e)),j(c).bigHour=!0}),S("Hmm",function(a,b,c){var d=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d))}),S("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d,2)),b[Ad]=r(a.substr(e))});var de=/[ap]\.?m?\.?/i,ee=E("Hours",!0);J("m",["mm",2],0,"minute"),A("minute","m"),O("m",hd),O("mm",hd,dd),S(["m","mm"],zd);var fe=E("Minutes",!1);J("s",["ss",2],0,"second"),A("second","s"),O("s",hd),O("ss",hd,dd),S(["s","ss"],Ad);var ge=E("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),O("S",kd,cd),O("SS",kd,dd),O("SSS",kd,ed);var he;for(he="SSSS";he.length<=9;he+="S")O(he,nd);for(he="S";he.length<=9;he+="S")S(he,hc);var ie=E("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");var je=o.prototype;je.add=Xd,je.calendar=db,je.clone=eb,je.diff=lb,je.endOf=xb,je.format=pb,je.from=qb,je.fromNow=rb,je.to=sb,je.toNow=tb,je.get=H,je.invalidAt=Gb,je.isAfter=fb,je.isBefore=gb,je.isBetween=hb,je.isSame=ib,je.isSameOrAfter=jb,je.isSameOrBefore=kb,je.isValid=Eb,je.lang=Zd,je.locale=ub,je.localeData=vb,je.max=Sd,je.min=Rd,je.parsingFlags=Fb,je.set=H,je.startOf=wb,je.subtract=Yd,je.toArray=Bb,je.toObject=Cb,je.toDate=Ab,je.toISOString=ob,je.toJSON=Db,je.toString=nb,je.unix=zb,je.valueOf=yb,je.creationData=Hb,je.year=Qd,je.isLeapYear=na,je.weekYear=Jb,je.isoWeekYear=Kb,je.quarter=je.quarters=Pb,je.month=$,je.daysInMonth=_,je.week=je.weeks=Tb,je.isoWeek=je.isoWeeks=Ub,je.weeksInYear=Mb,je.isoWeeksInYear=Lb,je.date=_d,je.day=je.days=$b,je.weekday=_b,je.isoWeekday=ac,je.dayOfYear=bc,je.hour=je.hours=ee,je.minute=je.minutes=fe,je.second=je.seconds=ge,je.millisecond=je.milliseconds=ie,je.utcOffset=Oa,je.utc=Qa,je.local=Ra,je.parseZone=Sa,je.hasAlignedHourOffset=Ta,je.isDST=Ua,je.isDSTShifted=Va,je.isLocal=Wa,je.isUtcOffset=Xa,je.isUtc=Ya,je.isUTC=Ya,je.zoneAbbr=ic,je.zoneName=jc,je.dates=fa("dates accessor is deprecated. Use date instead.",_d),je.months=fa("months accessor is deprecated. Use month instead",$),je.years=fa("years accessor is deprecated. Use year instead",Qd),je.zone=fa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Pa);var ke=je,le={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},me={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},ne="Invalid date",oe="%d",pe=/\d{1,2}/,qe={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},re=t.prototype;re._calendar=le,re.calendar=mc,re._longDateFormat=me,re.longDateFormat=nc,re._invalidDate=ne,re.invalidDate=oc,re._ordinal=oe,re.ordinal=pc,re._ordinalParse=pe,re.preparse=qc,re.postformat=qc,re._relativeTime=qe,re.relativeTime=rc,re.pastFuture=sc,re.set=tc,re.months=W,re._months=Fd,re.monthsShort=X,re._monthsShort=Gd,re.monthsParse=Y,re._monthsRegex=Id,re.monthsRegex=ba,re._monthsShortRegex=Hd,re.monthsShortRegex=aa,re.week=Qb,re._week=$d,re.firstDayOfYear=Sb,re.firstDayOfWeek=Rb,re.weekdays=Wb,re._weekdays=ae,re.weekdaysMin=Yb,re._weekdaysMin=ce,re.weekdaysShort=Xb,re._weekdaysShort=be,re.weekdaysParse=Zb,re.isPM=fc,re._meridiemParse=de,re.meridiem=gc,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=fa("moment.lang is deprecated. Use moment.locale instead.",x),a.langData=fa("moment.langData is deprecated. Use moment.localeData instead.",z);var se=Math.abs,te=Lc("ms"),ue=Lc("s"),ve=Lc("m"),we=Lc("h"),xe=Lc("d"),ye=Lc("w"),ze=Lc("M"),Ae=Lc("y"),Be=Nc("milliseconds"),Ce=Nc("seconds"),De=Nc("minutes"),Ee=Nc("hours"),Fe=Nc("days"),Ge=Nc("months"),He=Nc("years"),Ie=Math.round,Je={s:45,m:45,h:22,d:26,M:11},Ke=Math.abs,Le=Ia.prototype;Le.abs=Bc,Le.add=Dc,Le.subtract=Ec,Le.as=Jc,Le.asMilliseconds=te,Le.asSeconds=ue,Le.asMinutes=ve,Le.asHours=we,Le.asDays=xe,Le.asWeeks=ye,Le.asMonths=ze,Le.asYears=Ae,Le.valueOf=Kc,Le._bubble=Gc,Le.get=Mc,Le.milliseconds=Be,Le.seconds=Ce,Le.minutes=De,Le.hours=Ee,Le.days=Fe,Le.weeks=Oc,Le.months=Ge,Le.years=He,Le.humanize=Sc,Le.toISOString=Tc,Le.toString=Tc,Le.toJSON=Tc,Le.locale=ub,Le.localeData=vb,Le.toIsoString=fa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tc),Le.lang=Zd,J("X",0,0,"unix"),J("x",0,0,"valueOf"),O("x",od),O("X",rd),S("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),S("x",function(a,b,c){c._d=new Date(r(a))}),a.version="2.11.2",b(Ea),a.fn=ke,a.min=Ga,a.max=Ha,a.now=Td,a.utc=h,a.unix=kc,a.months=wc,a.isDate=d,a.locale=x,a.invalid=l,a.duration=Za,a.isMoment=p,a.weekdays=yc,a.parseZone=lc,a.localeData=z,a.isDuration=Ja,a.monthsShort=xc,a.weekdaysMin=Ac,a.defineLocale=y,a.weekdaysShort=zc,a.normalizeUnits=B,a.relativeTimeThreshold=Rc,a.prototype=ke;var Me=a;return Me}),function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){function c(){var b,c,d,e,f,g=Array.prototype.slice.call(arguments),h={};for(b=0;Ka.length>b;b++){for(c=Ka[b],d=null,e=0;g.length>e;e++)f=g[e][c],a.isPlainObject(f)?d=a.extend(d||{},f):null!=f&&(d=null);null!==d&&(h[c]=d)}return g.unshift({}),g.push(h),a.extend.apply(a,g)}function d(b){var c,d={views:b.views||{}};return a.each(b,function(b,e){"views"!=b&&(a.isPlainObject(e)&&!/(time|duration|interval)$/i.test(b)&&-1==a.inArray(b,Ka)?(c=null,a.each(e,function(a,e){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(a)?(d.views[a]||(d.views[a]={}),d.views[a][b]=e):(c||(c={}),c[a]=e)}),c&&(d[b]=c)):d[b]=e)}),d}function e(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1}),b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function f(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function g(){a("body").addClass("fc-not-allowed")}function h(){a("body").removeClass("fc-not-allowed")}function i(b,c,d){var e=Math.floor(c/b.length),f=Math.floor(c-e*(b.length-1)),g=[],h=[],i=[],k=0;j(b),b.each(function(c,d){var j=c===b.length-1?f:e,l=a(d).outerHeight(!0);j>l?(g.push(d),h.push(l),i.push(a(d).height())):k+=l}),d&&(c-=k,e=Math.floor(c/g.length),f=Math.floor(c-e*(g.length-1))),a(g).each(function(b,c){var d=b===g.length-1?f:e,j=h[b],k=i[b],l=d-(j-k);d>j&&a(c).height(l)})}function j(a){a.height("")}function k(b){var c=0;return b.find("> *").each(function(b,d){var e=a(d).outerWidth();e>c&&(c=e)}),c++,b.width(c),c}function l(a,b){return a.height(b).addClass("fc-scroller"),a[0].scrollHeight-1>a[0].clientHeight?!0:(m(a),!1)}function m(a){a.height("").removeClass("fc-scroller")}function n(b){var c=b.css("position"),d=b.parents().filter(function(){var b=a(this);return/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&d.length?d:a(b[0].ownerDocument||document)}function o(a){var b=a.offset();return{left:b.left,right:b.left+a.outerWidth(),top:b.top,bottom:b.top+a.outerHeight()}}function p(a){var b=a.offset(),c=r(a),d=b.left+u(a,"border-left-width")+c.left,e=b.top+u(a,"border-top-width")+c.top;return{left:d,right:d+a[0].clientWidth,top:e,bottom:e+a[0].clientHeight}}function q(a){var b=a.offset(),c=b.left+u(a,"border-left-width")+u(a,"padding-left"),d=b.top+u(a,"border-top-width")+u(a,"padding-top");return{left:c,right:c+a.width(),top:d,bottom:d+a.height()}}function r(a){var b=a.innerWidth()-a[0].clientWidth,c={left:0,right:0,top:0,bottom:a.innerHeight()-a[0].clientHeight};return s()&&"rtl"==a.css("direction")?c.left=b:c.right=b,c}function s(){return null===La&&(La=t()),La}function t(){var b=a("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),c=b.children(),d=c.offset().left>b.offset().left;return b.remove(),d}function u(a,b){return parseFloat(a.css(b))||0}function v(a){return 1==a.which&&!a.ctrlKey}function w(a,b){var c={left:Math.max(a.left,b.left),right:Math.min(a.right,b.right),top:Math.max(a.top,b.top),bottom:Math.min(a.bottom,b.bottom)};return c.left<c.right&&c.top<c.bottom?c:!1}function x(a,b){return{left:Math.min(Math.max(a.left,b.left),b.right),top:Math.min(Math.max(a.top,b.top),b.bottom)}}function y(a){return{left:(a.left+a.right)/2,top:(a.top+a.bottom)/2}}function z(a,b){return{left:a.left-b.left,top:a.top-b.top}}function A(a,b){var c,d,e,f,g=a.start,h=a.end,i=b.start,j=b.end;return h>i&&j>g?(g>=i?(c=g.clone(),e=!0):(c=i.clone(),e=!1),j>=h?(d=h.clone(),f=!0):(d=j.clone(),f=!1),{start:c,end:d,isStart:e,isEnd:f}):void 0}function B(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days"),ms:a.time()-c.time()})}function C(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days")})}function D(a,c,d){return b.duration(Math.round(a.diff(c,d,!0)),d)}function E(a,b){var c,d,e;for(c=0;Qa.length>c&&(d=Qa[c],e=F(d,a,b),!(e>=1&&V(e)));c++);return d}function F(a,c,d){return null!=d?d.diff(c,a,!0):b.isDuration(c)?c.as(a):c.end.diff(c.start,a,!0)}function G(a){return Boolean(a.hours()||a.minutes()||a.seconds()||a.milliseconds())}function H(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function I(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function J(a){var b=function(){};return b.prototype=a,new b}function K(a,b){for(var c in a)M(a,c)&&(b[c]=a[c])}function L(a,b){var c,d,e=["constructor","toString","valueOf"];for(c=0;e.length>c;c++)d=e[c],a[d]!==Object.prototype[d]&&(b[d]=a[d])}function M(a,b){return Ra.call(a,b)}function N(b){return/undefined|null|boolean|number|string/.test(a.type(b))}function O(b,c,d){if(a.isFunction(b)&&(b=[b]),b){var e,f;for(e=0;b.length>e;e++)f=b[e].apply(c,d)||f;return f}}function P(){for(var a=0;arguments.length>a;a++)if(void 0!==arguments[a])return arguments[a]}function Q(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function R(a){return a.replace(/&.*?;/g,"")}function S(b){var c=[];return a.each(b,function(a,b){null!=b&&c.push(a+":"+b)}),c.join(";")}function T(a){return a.charAt(0).toUpperCase()+a.slice(1)}function U(a,b){return a-b}function V(a){return 0===a%1}function W(a,b){var c=a[b];return function(){return c.apply(a,arguments)}}function X(a,b){var c,d,e,f,g=function(){var h=+new Date-f;b>h&&h>0?c=setTimeout(g,b-h):(c=null,a.apply(e,d),c||(e=d=null))};return function(){e=this,d=arguments,f=+new Date,c||(c=setTimeout(g,b))}}function Y(c,d,e){var f,g,h,i,j=c[0],k=1==c.length&&"string"==typeof j;return b.isMoment(j)?(i=b.apply(null,c),$(j,i)):H(j)||void 0===j?i=b.apply(null,c):(f=!1,g=!1,k?Sa.test(j)?(j+="-01",c=[j],f=!0,g=!0):(h=Ta.exec(j))&&(f=!h[5],g=!0):a.isArray(j)&&(g=!0),i=d||f?b.utc.apply(b,c):b.apply(null,c),f?(i._ambigTime=!0,i._ambigZone=!0):e&&(g?i._ambigZone=!0:k&&(i.utcOffset?i.utcOffset(j):i.zone(j)))),i._fullCalendar=!0,i}function Z(a,c){var d,e,f=!1,g=!1,h=a.length,i=[];for(d=0;h>d;d++)e=a[d],b.isMoment(e)||(e=Ia.moment.parseZone(e)),f=f||e._ambigTime,g=g||e._ambigZone,i.push(e);for(d=0;h>d;d++)e=i[d],c||!f||e._ambigTime?g&&!e._ambigZone&&(i[d]=e.clone().stripZone()):i[d]=e.clone().stripTime();return i}function $(a,b){a._ambigTime?b._ambigTime=!0:b._ambigTime&&(b._ambigTime=!1),a._ambigZone?b._ambigZone=!0:b._ambigZone&&(b._ambigZone=!1)}function _(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}function aa(a,b){return Va.format.call(a,b)}function ba(a,b){return ca(a,ha(b))}function ca(a,b){var c,d="";for(c=0;b.length>c;c++)d+=da(a,b[c]);return d}function da(a,b){var c,d;return"string"==typeof b?b:(c=b.token)?Wa[c]?Wa[c](a):aa(a,c):b.maybe&&(d=ca(a,b.maybe),d.match(/[1-9]/))?d:""}function ea(a,b,c,d,e){var f;return a=Ia.moment.parseZone(a),b=Ia.moment.parseZone(b),f=(a.localeData||a.lang).call(a),c=f.longDateFormat(c)||c,d=d||" - ",fa(a,b,ha(c),d,e)}function fa(a,b,c,d,e){var f,g,h,i,j="",k="",l="",m="",n="";for(g=0;c.length>g&&(f=ga(a,b,c[g]),f!==!1);g++)j+=f;for(h=c.length-1;h>g&&(f=ga(a,b,c[h]),f!==!1);h--)k=f+k;for(i=g;h>=i;i++)l+=da(a,c[i]),m+=da(b,c[i]);return(l||m)&&(n=e?m+d+l:l+d+m),j+n+k}function ga(a,b,c){var d,e;return"string"==typeof c?c:(d=c.token)&&(e=Xa[d.charAt(0)],e&&a.isSame(b,e))?aa(a,d):!1}function ha(a){return a in Ya?Ya[a]:Ya[a]=ia(a)}function ia(a){for(var b,c=[],d=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;b=d.exec(a);)b[1]?c.push(b[1]):b[2]?c.push({maybe:ia(b[2])}):b[3]?c.push({token:b[3]}):b[5]&&c.push(b[5]);return c}function ja(){}function ka(a,b){return a||b?a&&b?a.grid===b.grid&&a.row===b.row&&a.col===b.col:!1:!0}function la(a){var b=na(a);return"background"===b||"inverse-background"===b}function ma(a){return"inverse-background"===na(a)}function na(a){return P((a.source||{}).rendering,a.rendering)}function oa(a){var b,c,d={};for(b=0;a.length>b;b++)c=a[b],(d[c._id]||(d[c._id]=[])).push(c);return d}function pa(a,b){return a.eventStartMS-b.eventStartMS}function qa(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||(a.event.title||"").localeCompare(b.event.title)}function ra(c){var d,e,f,g,h=Ia.dataAttrPrefix;return h&&(h+="-"),d=c.data(h+"event")||null,d&&(d="object"==typeof d?a.extend({},d):{},e=d.start,null==e&&(e=d.time),f=d.duration,g=d.stick,delete d.start,delete d.time,delete d.duration,delete d.stick),null==e&&(e=c.data(h+"start")),null==e&&(e=c.data(h+"time")),null==f&&(f=c.data(h+"duration")),null==g&&(g=c.data(h+"stick")),e=null!=e?b.duration(e):null,f=null!=f?b.duration(f):null,g=Boolean(g),{eventProps:d,startTime:e,duration:f,stick:g}}function sa(a,b){var c,d;for(c=0;b.length>c;c++)if(d=b[c],d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0;return!1}function ta(a,b){return a.leftCol-b.leftCol}function ua(a){var b,c,d;if(a.sort(qa),b=va(a),wa(b),c=b[0]){for(d=0;c.length>d;d++)xa(c[d]);for(d=0;c.length>d;d++)ya(c[d],0,0)}}function va(a){var b,c,d,e=[];for(b=0;a.length>b;b++){for(c=a[b],d=0;e.length>d&&za(c,e[d]).length;d++);c.level=d,(e[d]||(e[d]=[])).push(c)}return e}function wa(a){var b,c,d,e,f;for(b=0;a.length>b;b++)for(c=a[b],d=0;c.length>d;d++)for(e=c[d],e.forwardSegs=[],f=b+1;a.length>f;f++)za(e,a[f],e.forwardSegs)}function xa(a){var b,c,d=a.forwardSegs,e=0;if(void 0===a.forwardPressure){for(b=0;d.length>b;b++)c=d[b],xa(c),e=Math.max(e,1+c.forwardPressure);a.forwardPressure=e}}function ya(a,b,c){var d,e=a.forwardSegs;if(void 0===a.forwardCoord)for(e.length?(e.sort(Ba),ya(e[0],b+1,c),a.forwardCoord=e[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),d=0;e.length>d;d++)ya(e[d],0,a.forwardCoord)}function za(a,b,c){c=c||[];for(var d=0;b.length>d;d++)Aa(a,b[d])&&c.push(b[d]);return c}function Aa(a,b){return a.bottom>b.top&&a.top<b.bottom}function Ba(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||qa(a,b)}function Ca(c,d){function e(){U?h()&&(k(),i()):f()}function f(){V=P.theme?"ui":"fc",c.addClass("fc"),P.isRTL?c.addClass("fc-rtl"):c.addClass("fc-ltr"),P.theme?c.addClass("ui-widget"):c.addClass("fc-unthemed"),U=a("<div class='fc-view-container'/>").prependTo(c),S=O.header=new Fa(O,P),T=S.render(),T&&c.prepend(T),i(P.defaultView),P.handleWindowResize&&(Z=X(m,P.windowResizeDelay),a(window).resize(Z))}function g(){W&&W.removeElement(),S.destroy(),U.remove(),c.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),Z&&a(window).unbind("resize",Z)}function h(){return c.is(":visible")}function i(b){da++,W&&b&&W.type!==b&&(S.deactivateButton(W.type),H(),W.removeElement(),W=O.view=null),!W&&b&&(W=O.view=ca[b]||(ca[b]=O.instantiateView(b)),W.setElement(a("<div class='fc-view fc-"+b+"-view' />").appendTo(U)),S.activateButton(b)),W&&($=W.massageCurrentDate($),W.isDisplayed&&$.isWithin(W.intervalStart,W.intervalEnd)||h()&&(H(),W.display($),I(),u(),v(),q())),I(),da--}function j(a){return h()?(a&&l(),da++,W.updateSize(!0),da--,!0):void 0}function k(){h()&&l()}function l(){Y="number"==typeof P.contentHeight?P.contentHeight:"number"==typeof P.height?P.height-(T?T.outerHeight(!0):0):Math.round(U.width()/Math.max(P.aspectRatio,.5))}function m(a){!da&&a.target===window&&W.start&&j(!0)&&W.trigger("windowResize",ba)}function n(){p(),r()}function o(){h()&&(H(),W.displayEvents(ea),I())}function p(){H(),W.clearEvents(),I()}function q(){!P.lazyFetching||_(W.start,W.end)?r():o()}function r(){aa(W.start,W.end)}function s(a){ea=a,o()}function t(){o()}function u(){S.updateTitle(W.title)}function v(){var a=O.getNow();a.isWithin(W.intervalStart,W.intervalEnd)?S.disableButton("today"):S.enableButton("today")}function w(a,b){a=O.moment(a),b=b?O.moment(b):a.hasTime()?a.clone().add(O.defaultTimedEventDuration):a.clone().add(O.defaultAllDayEventDuration),W.select({start:a,end:b})}function x(){W&&W.unselect()}function y(){$=W.computePrevDate($),i()}function z(){$=W.computeNextDate($),i()}function A(){$.add(-1,"years"),i()}function B(){$.add(1,"years"),i()}function C(){$=O.getNow(),i()}function D(a){$=O.moment(a),i()}function E(a){$.add(b.duration(a)),i()}function F(a,b){var c;b=b||"day",c=O.getViewSpec(b)||O.getUnitViewSpec(b),$=a,i(c?c.type:null)}function G(){return $.clone()}function H(){U.css({width:"100%",height:U.height(),overflow:"hidden"})}function I(){U.css({width:"",height:"",overflow:""})}function K(){return O}function L(){return W}function M(a,b){return void 0===b?P[a]:void(("height"==a||"contentHeight"==a||"aspectRatio"==a)&&(P[a]=b,j(!0)))}function N(a,b){return P[a]?P[a].apply(b||ba,Array.prototype.slice.call(arguments,2)):void 0}var O=this;O.initOptions(d||{});var P=this.options;O.render=e,O.destroy=g,O.refetchEvents=n,O.reportEvents=s,O.reportEventChange=t,O.rerenderEvents=o,O.changeView=i,O.select=w,O.unselect=x,O.prev=y,O.next=z,O.prevYear=A,O.nextYear=B,O.today=C,O.gotoDate=D,O.incrementDate=E,O.zoomTo=F,O.getDate=G,O.getCalendar=K,O.getView=L,O.option=M,O.trigger=N;var Q=J(Ea(P.lang));if(P.monthNames&&(Q._months=P.monthNames),P.monthNamesShort&&(Q._monthsShort=P.monthNamesShort),P.dayNames&&(Q._weekdays=P.dayNames),P.dayNamesShort&&(Q._weekdaysShort=P.dayNamesShort),null!=P.firstDay){var R=J(Q._week);R.dow=P.firstDay,Q._week=R}Q._fullCalendar_weekCalc=function(a){return"function"==typeof a?a:"local"===a?a:"iso"===a||"ISO"===a?"ISO":void 0}(P.weekNumberCalculation),O.defaultAllDayEventDuration=b.duration(P.defaultAllDayEventDuration),O.defaultTimedEventDuration=b.duration(P.defaultTimedEventDuration),O.moment=function(){var a;return"local"===P.timezone?(a=Ia.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===P.timezone?Ia.moment.utc.apply(null,arguments):Ia.moment.parseZone.apply(null,arguments),"_locale"in a?a._locale=Q:a._lang=Q,a},O.getIsAmbigTimezone=function(){return"local"!==P.timezone&&"UTC"!==P.timezone},O.rezoneDate=function(a){return O.moment(a.toArray())},O.getNow=function(){var a=P.now;return"function"==typeof a&&(a=a()),O.moment(a)},O.getEventEnd=function(a){return a.end?a.end.clone():O.getDefaultEventEnd(a.allDay,a.start)},O.getDefaultEventEnd=function(a,b){var c=b.clone();return a?c.stripTime().add(O.defaultAllDayEventDuration):c.add(O.defaultTimedEventDuration),O.getIsAmbigTimezone()&&c.stripZone(),c},O.humanizeDuration=function(a){return(a.locale||a.lang).call(a,P.lang).humanize()},Ga.call(O,P);var S,T,U,V,W,Y,Z,$,_=O.isFetchNeeded,aa=O.fetchEvents,ba=c[0],ca={},da=0,ea=[];$=null!=P.defaultDate?O.moment(P.defaultDate):O.getNow(),O.getSuggestedViewHeight=function(){return void 0===Y&&k(),Y},O.isHeightAuto=function(){return"auto"===P.contentHeight||"auto"===P.height}}function Da(b){a.each(mb,function(a,c){null==b[a]&&(b[a]=c(b))})}function Ea(a){var c=b.localeData||b.langData;return c.call(b,a)||c.call(b,"en")}function Fa(b,c){function d(){var b=c.header;return n=c.theme?"ui":"fc",b?o=a("<div class='fc-toolbar'/>").append(f("left")).append(f("right")).append(f("center")).append('<div class="fc-clear"/>'):void 0}function e(){o.remove()}function f(d){var e=a('<div class="fc-'+d+'"/>'),f=c.header[d];return f&&a.each(f.split(" "),function(){var d,f=a(),g=!0;a.each(this.split(","),function(d,e){var h,i,j,k,l,m,o,q,r;"title"==e?(f=f.add(a("<h2>&nbsp;</h2>")),g=!1):(h=b.getViewSpec(e),h?(i=function(){b.changeView(e)},p.push(e),j=h.buttonTextOverride,k=h.buttonTextDefault):b[e]&&(i=function(){b[e]()},j=(b.overrides.buttonText||{})[e],k=c.buttonText[e]),i&&(l=c.themeButtonIcons[e],m=c.buttonIcons[e],o=j?Q(j):l&&c.theme?"<span class='ui-icon ui-icon-"+l+"'></span>":m&&!c.theme?"<span class='fc-icon fc-icon-"+m+"'></span>":Q(k),q=["fc-"+e+"-button",n+"-button",n+"-state-default"],r=a('<button type="button" class="'+q.join(" ")+'">'+o+"</button>").click(function(){r.hasClass(n+"-state-disabled")||(i(),(r.hasClass(n+"-state-active")||r.hasClass(n+"-state-disabled"))&&r.removeClass(n+"-state-hover"))}).mousedown(function(){r.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-down")}).mouseup(function(){r.removeClass(n+"-state-down")}).hover(function(){r.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-hover")},function(){r.removeClass(n+"-state-hover").removeClass(n+"-state-down")}),f=f.add(r)))}),g&&f.first().addClass(n+"-corner-left").end().last().addClass(n+"-corner-right").end(),f.length>1?(d=a("<div/>"),g&&d.addClass("fc-button-group"),d.append(f),e.append(d)):e.append(f)}),e}function g(a){o.find("h2").text(a)}function h(a){o.find(".fc-"+a+"-button").addClass(n+"-state-active")}function i(a){o.find(".fc-"+a+"-button").removeClass(n+"-state-active")}function j(a){o.find(".fc-"+a+"-button").attr("disabled","disabled").addClass(n+"-state-disabled")}function k(a){o.find(".fc-"+a+"-button").removeAttr("disabled").removeClass(n+"-state-disabled")}function l(){return p}var m=this;m.render=d,m.destroy=e,m.updateTitle=g,m.activateButton=h,m.deactivateButton=i,m.disableButton=j,m.enableButton=k,m.getViewsWithButtons=l;var n,o=a(),p=[]}function Ga(c){function d(a,b){return!S||a.clone().stripZone()<S.clone().stripZone()||b.clone().stripZone()>T.clone().stripZone();
}function e(a,b){S=a,T=b,aa=[];var c=++Z,d=Y.length;$=d;for(var e=0;d>e;e++)f(Y[e],c)}function f(b,c){g(b,function(d){var e,f,g,h=a.isArray(b.events);if(c==Z){if(d)for(e=0;d.length>e;e++)f=d[e],g=h?f:u(f,b),g&&aa.push.apply(aa,z(g));$--,$||W(aa)}})}function g(b,d){var e,f,h=Ia.sourceFetchers;for(e=0;h.length>e;e++){if(f=h[e].call(R,b,S.clone(),T.clone(),c.timezone,d),f===!0)return;if("object"==typeof f)return void g(f,d)}var i=b.events;if(i)a.isFunction(i)?(s(),i.call(R,S.clone(),T.clone(),c.timezone,function(a){d(a),t()})):a.isArray(i)?d(i):d();else{var j=b.url;if(j){var k,l=b.success,m=b.error,n=b.complete;k=a.isFunction(b.data)?b.data():b.data;var o=a.extend({},k||{}),p=P(b.startParam,c.startParam),q=P(b.endParam,c.endParam),r=P(b.timezoneParam,c.timezoneParam);p&&(o[p]=S.format()),q&&(o[q]=T.format()),c.timezone&&"local"!=c.timezone&&(o[r]=c.timezone),s(),a.ajax(a.extend({},nb,b,{data:o,success:function(b){b=b||[];var c=O(l,this,arguments);a.isArray(c)&&(b=c),d(b)},error:function(){O(m,this,arguments),d()},complete:function(){O(n,this,arguments),t()}}))}else d()}}function h(a){var b=i(a);b&&(Y.push(b),$++,f(b,Z))}function i(b){var c,d,e=Ia.sourceNormalizers;if(a.isFunction(b)||a.isArray(b)?c={events:b}:"string"==typeof b?c={url:b}:"object"==typeof b&&(c=a.extend({},b)),c){for(c.className?"string"==typeof c.className&&(c.className=c.className.split(/\s+/)):c.className=[],a.isArray(c.events)&&(c.origArray=c.events,c.events=a.map(c.events,function(a){return u(a,c)})),d=0;e.length>d;d++)e[d].call(R,c);return c}}function j(b){Y=a.grep(Y,function(a){return!k(a,b)}),aa=a.grep(aa,function(a){return!k(a.source,b)}),W(aa)}function k(a,b){return a&&b&&l(a)==l(b)}function l(a){return("object"==typeof a?a.origArray||a.googleCalendarId||a.url||a.events:null)||a}function m(a){a.start=R.moment(a.start),a.end=a.end?R.moment(a.end):null,A(a,n(a)),W(aa)}function n(b){var c={};return a.each(b,function(a,b){o(a)&&void 0!==b&&N(b)&&(c[a]=b)}),c}function o(a){return!/^_|^(id|allDay|start|end)$/.test(a)}function p(a,b){var c,d,e,f=u(a);if(f){for(c=z(f),d=0;c.length>d;d++)e=c[d],e.source||(b&&(X.events.push(e),e.source=X),aa.push(e));return W(aa),c}return[]}function q(b){var c,d;for(null==b?b=function(){return!0}:a.isFunction(b)||(c=b+"",b=function(a){return a._id==c}),aa=a.grep(aa,b,!0),d=0;Y.length>d;d++)a.isArray(Y[d].events)&&(Y[d].events=a.grep(Y[d].events,b,!0));W(aa)}function r(b){return a.isFunction(b)?a.grep(aa,b):null!=b?(b+="",a.grep(aa,function(a){return a._id==b})):aa}function s(){_++||U("loading",null,!0,V())}function t(){--_||U("loading",null,!1,V())}function u(d,e){var f,g,h,i={};if(c.eventDataTransform&&(d=c.eventDataTransform(d)),e&&e.eventDataTransform&&(d=e.eventDataTransform(d)),a.extend(i,d),e&&(i.source=e),i._id=d._id||(void 0===d.id?"_fc"+ob++:d.id+""),i.className=d.className?"string"==typeof d.className?d.className.split(/\s+/):d.className:[],f=d.start||d.date,g=d.end,I(f)&&(f=b.duration(f)),I(g)&&(g=b.duration(g)),d.dow||b.isDuration(f)||b.isDuration(g))i.start=f?b.duration(f):null,i.end=g?b.duration(g):null,i._recurring=!0;else{if(f&&(f=R.moment(f),!f.isValid()))return!1;g&&(g=R.moment(g),g.isValid()||(g=null)),h=d.allDay,void 0===h&&(h=P(e?e.allDayDefault:void 0,c.allDayDefault)),v(f,g,h,i)}return i}function v(a,b,c,d){d.start=a,d.end=b,d.allDay=c,w(d),Ha(d)}function w(a){x(a),a.end&&!a.end.isAfter(a.start)&&(a.end=null),a.end||(a.end=c.forceEventDuration?R.getDefaultEventEnd(a.allDay,a.start):null)}function x(a){null==a.allDay&&(a.allDay=!(a.start.hasTime()||a.end&&a.end.hasTime())),a.allDay?(a.start.stripTime(),a.end&&a.end.stripTime()):(a.start.hasTime()||(a.start=R.rezoneDate(a.start)),a.end&&!a.end.hasTime()&&(a.end=R.rezoneDate(a.end)))}function y(b){var c;return b.end||(c=b.allDay,null==c&&(c=!b.start.hasTime()),b=a.extend({},b),b.end=R.getDefaultEventEnd(c,b.start)),b}function z(b,c,d){var e,f,g,h,i,j,k,l,m,n=[];if(c=c||S,d=d||T,b)if(b._recurring){if(f=b.dow)for(e={},g=0;f.length>g;g++)e[f[g]]=!0;for(h=c.clone().stripTime();h.isBefore(d);)(!e||e[h.day()])&&(i=b.start,j=b.end,k=h.clone(),l=null,i&&(k=k.time(i)),j&&(l=h.clone().time(j)),m=a.extend({},b),v(k,l,!i&&!j,m),n.push(m)),h.add(1,"days")}else n.push(b);return n}function A(b,c,d){function e(a,b){return d?D(a,b,d):c.allDay?C(a,b):B(a,b)}var f,g,h,i,j,k,l={};return c=c||{},c.start||(c.start=b.start.clone()),void 0===c.end&&(c.end=b.end?b.end.clone():null),null==c.allDay&&(c.allDay=b.allDay),w(c),f={start:b._start.clone(),end:b._end?b._end.clone():R.getDefaultEventEnd(b._allDay,b._start),allDay:c.allDay},w(f),g=null!==b._end&&null===c.end,h=e(c.start,f.start),c.end?(i=e(c.end,f.end),j=i.subtract(h)):j=null,a.each(c,function(a,b){o(a)&&void 0!==b&&(l[a]=b)}),k=E(r(b._id),g,c.allDay,h,j,l),{dateDelta:h,durationDelta:j,undo:k}}function E(b,c,d,e,f,g){var h=R.getIsAmbigTimezone(),i=[];return e&&!e.valueOf()&&(e=null),f&&!f.valueOf()&&(f=null),a.each(b,function(b,j){var k,l;k={start:j.start.clone(),end:j.end?j.end.clone():null,allDay:j.allDay},a.each(g,function(a){k[a]=j[a]}),l={start:j._start,end:j._end,allDay:d},w(l),c?l.end=null:f&&!l.end&&(l.end=R.getDefaultEventEnd(l.allDay,l.start)),e&&(l.start.add(e),l.end&&l.end.add(e)),f&&l.end.add(f),h&&!l.allDay&&(e||f)&&(l.start.stripZone(),l.end&&l.end.stripZone()),a.extend(j,g,l),Ha(j),i.push(function(){a.extend(j,k),Ha(j)})}),function(){for(var a=0;i.length>a;a++)i[a]()}}function F(b){var d,e=c.businessHours,f={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},g=R.getView();return e&&(d=a.extend({},f,"object"==typeof e?e:{})),d?(b&&(d.start=null,d.end=null),z(u(d),g.start,g.end)):[]}function G(a,b){var d=b.source||{},e=P(b.constraint,d.constraint,c.eventConstraint),f=P(b.overlap,d.overlap,c.eventOverlap);return a=y(a),K(a,e,f,b)}function H(a){return K(a,c.selectConstraint,c.selectOverlap)}function J(b,c){var d,e;return c&&(d=a.extend({},c,b),e=z(u(d))[0]),e?G(b,e):(b=y(b),H(b))}function K(b,c,d,e){var f,g,h,i,j,k;if(b=a.extend({},b),b.start=b.start.clone().stripZone(),b.end=b.end.clone().stripZone(),null!=c){for(f=L(c),g=!1,i=0;f.length>i;i++)if(M(f[i],b)){g=!0;break}if(!g)return!1}for(h=R.getPeerEvents(e,b),i=0;h.length>i;i++)if(j=h[i],Q(j,b)){if(d===!1)return!1;if("function"==typeof d&&!d(j,e))return!1;if(e){if(k=P(j.overlap,(j.source||{}).overlap),k===!1)return!1;if("function"==typeof k&&!k(e,j))return!1}}return!0}function L(a){return"businessHours"===a?F():"object"==typeof a?z(u(a)):r(a)}function M(a,b){var c=a.start.clone().stripZone(),d=R.getEventEnd(a).stripZone();return b.start>=c&&d>=b.end}function Q(a,b){var c=a.start.clone().stripZone(),d=R.getEventEnd(a).stripZone();return d>b.start&&b.end>c}var R=this;R.isFetchNeeded=d,R.fetchEvents=e,R.addEventSource=h,R.removeEventSource=j,R.updateEvent=m,R.renderEvent=p,R.removeEvents=q,R.clientEvents=r,R.mutateEvent=A,R.normalizeEventRange=w,R.normalizeEventRangeTimes=x,R.ensureVisibleEventRange=y;var S,T,U=R.trigger,V=R.getView,W=R.reportEvents,X={events:[]},Y=[X],Z=0,$=0,_=0,aa=[];a.each((c.events?[c.events]:[]).concat(c.eventSources||[]),function(a,b){var c=i(b);c&&Y.push(c)}),R.getBusinessHoursEvents=F,R.isEventRangeAllowed=G,R.isSelectionRangeAllowed=H,R.isExternalDropRangeAllowed=J,R.getEventCache=function(){return aa}}function Ha(a){a._allDay=a.allDay,a._start=a.start.clone(),a._end=a.end?a.end.clone():null}var Ia=a.fullCalendar={version:"2.3.1"},Ja=Ia.views={};a.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1),d=this;return this.each(function(e,f){var g,h=a(f),i=h.data("fullCalendar");"string"==typeof b?i&&a.isFunction(i[b])&&(g=i[b].apply(i,c),e||(d=g),"destroy"===b&&h.removeData("fullCalendar")):i||(i=new Ia.CalendarBase(h,b),h.data("fullCalendar",i),i.render())}),d};var Ka=["header","buttonText","buttonIcons","themeButtonIcons"];Ia.intersectionToSeg=A,Ia.applyAll=O,Ia.debounce=X,Ia.isInt=V,Ia.htmlEscape=Q,Ia.cssToStr=S,Ia.proxy=W,Ia.getClientRect=p,Ia.getContentRect=q,Ia.getScrollbarWidths=r;var La=null;Ia.computeIntervalUnit=E,Ia.durationHasTime=G;var Ma,Na,Oa,Pa=["sun","mon","tue","wed","thu","fri","sat"],Qa=["year","month","week","day","hour","minute","second","millisecond"],Ra={}.hasOwnProperty,Sa=/^\s*\d{4}-\d\d$/,Ta=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,Ua=b.fn,Va=a.extend({},Ua);Ia.moment=function(){return Y(arguments)},Ia.moment.utc=function(){var a=Y(arguments,!0);return a.hasTime()&&a.utc(),a},Ia.moment.parseZone=function(){return Y(arguments,!0,!0)},Ua.clone=function(){var a=Va.clone.apply(this,arguments);return $(this,a),this._fullCalendar&&(a._fullCalendar=!0),a},Ua.week=Ua.weeks=function(a){var b=(this._locale||this._lang)._fullCalendar_weekCalc;return null==a&&"function"==typeof b?b(this):"ISO"===b?Va.isoWeek.apply(this,arguments):Va.week.apply(this,arguments)},Ua.time=function(a){if(!this._fullCalendar)return Va.time.apply(this,arguments);if(null==a)return b.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,b.isDuration(a)||b.isMoment(a)||(a=b.duration(a));var c=0;return b.isDuration(a)&&(c=24*Math.floor(a.asDays())),this.hours(c+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())},Ua.stripTime=function(){var a;return this._ambigTime||(a=this.toArray(),this.utc(),Na(this,a.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},Ua.hasTime=function(){return!this._ambigTime},Ua.stripZone=function(){var a,b;return this._ambigZone||(a=this.toArray(),b=this._ambigTime,this.utc(),Na(this,a),this._ambigTime=b||!1,this._ambigZone=!0),this},Ua.hasZone=function(){return!this._ambigZone},Ua.local=function(){var a=this.toArray(),b=this._ambigZone;return Va.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,b&&Oa(this,a),this},Ua.utc=function(){return Va.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},a.each(["zone","utcOffset"],function(a,b){Va[b]&&(Ua[b]=function(a){return null!=a&&(this._ambigTime=!1,this._ambigZone=!1),Va[b].apply(this,arguments)})}),Ua.format=function(){return this._fullCalendar&&arguments[0]?ba(this,arguments[0]):this._ambigTime?aa(this,"YYYY-MM-DD"):this._ambigZone?aa(this,"YYYY-MM-DD[T]HH:mm:ss"):Va.format.apply(this,arguments)},Ua.toISOString=function(){return this._ambigTime?aa(this,"YYYY-MM-DD"):this._ambigZone?aa(this,"YYYY-MM-DD[T]HH:mm:ss"):Va.toISOString.apply(this,arguments)},Ua.isWithin=function(a,b){var c=Z([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]},Ua.isSame=function(a,b){var c;return this._fullCalendar?b?(c=Z([this,a],!0),Va.isSame.call(c[0],c[1],b)):(a=Ia.moment.parseZone(a),Va.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)):Va.isSame.apply(this,arguments)},a.each(["isBefore","isAfter"],function(a,b){Ua[b]=function(a,c){var d;return this._fullCalendar?(d=Z([this,a]),Va[b].call(d[0],d[1],c)):Va[b].apply(this,arguments)}}),Ma="_d"in b()&&"updateOffset"in b,Na=Ma?function(a,c){a._d.setTime(Date.UTC.apply(Date,c)),b.updateOffset(a,!1)}:_,Oa=Ma?function(a,c){a._d.setTime(+new Date(c[0]||0,c[1]||0,c[2]||0,c[3]||0,c[4]||0,c[5]||0,c[6]||0)),b.updateOffset(a,!1)}:_;var Wa={t:function(a){return aa(a,"a").charAt(0)},T:function(a){return aa(a,"A").charAt(0)}};Ia.formatRange=ea;var Xa={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},Ya={};Ia.Class=ja,ja.extend=function(a){var b,c=this;return a=a||{},M(a,"constructor")&&(b=a.constructor),"function"!=typeof b&&(b=a.constructor=function(){c.apply(this,arguments)}),b.prototype=J(c.prototype),K(a,b.prototype),L(a,b.prototype),K(c,b),b},ja.mixin=function(a){K(a.prototype||a,this.prototype)};var Za=ja.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(a){this.options=a||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var b=this,c=this.options;this.el=a('<div class="fc-popover"/>').addClass(c.className||"").css({top:0,left:0}).append(c.content).appendTo(c.parentEl),this.el.on("click",".fc-close",function(){b.hide()}),c.autoHide&&a(document).on("mousedown",this.documentMousedownProxy=W(this,"documentMousedown"))},documentMousedown:function(b){this.el&&!a(b.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),a(document).off("mousedown",this.documentMousedownProxy)},position:function(){var b,c,d,e,f,g=this.options,h=this.el.offsetParent().offset(),i=this.el.outerWidth(),j=this.el.outerHeight(),k=a(window),l=n(this.el);e=g.top||0,f=void 0!==g.left?g.left:void 0!==g.right?g.right-i:0,l.is(window)||l.is(document)?(l=k,b=0,c=0):(d=l.offset(),b=d.top,c=d.left),b+=k.scrollTop(),c+=k.scrollLeft(),g.viewportConstrain!==!1&&(e=Math.min(e,b+l.outerHeight()-j-this.margin),e=Math.max(e,b+this.margin),f=Math.min(f,c+l.outerWidth()-i-this.margin),f=Math.max(f,c+this.margin)),this.el.css({top:e-h.top,left:f-h.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}}),$a=ja.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,bounds:null,constructor:function(a){this.grid=a},build:function(){this.rowCoords=this.grid.computeRowCoords(),this.colCoords=this.grid.computeColCoords(),this.computeBounds()},clear:function(){this.rowCoords=null,this.colCoords=null},getCell:function(b,c){var d,e,f,g=this.rowCoords,h=g.length,i=this.colCoords,j=i.length,k=null,l=null;if(this.inBounds(b,c)){for(d=0;h>d;d++)if(e=g[d],c>=e.top&&e.bottom>c){k=d;break}for(d=0;j>d;d++)if(e=i[d],b>=e.left&&e.right>b){l=d;break}if(null!==k&&null!==l)return f=this.grid.getCell(k,l),f.grid=this.grid,a.extend(f,g[k],i[l]),f}return null},computeBounds:function(){this.bounds=this.containerEl?p(this.containerEl):null},inBounds:function(a,b){var c=this.bounds;return c?a>=c.left&&c.right>a&&b>=c.top&&c.bottom>b:!0}}),_a=ja.extend({coordMaps:null,constructor:function(a){this.coordMaps=a},build:function(){var a,b=this.coordMaps;for(a=0;b.length>a;a++)b[a].build()},getCell:function(a,b){var c,d=this.coordMaps,e=null;for(c=0;d.length>c&&!e;c++)e=d[c].getCell(a,b);return e},clear:function(){var a,b=this.coordMaps;for(a=0;b.length>a;a++)b[a].clear()}}),ab=Ia.DragListener=ja.extend({options:null,isListening:!1,isDragging:!1,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(a){a=a||{},this.options=a,this.subjectEl=a.subjectEl},mousedown:function(a){v(a)&&(a.preventDefault(),this.startListening(a),this.options.distance||this.startDrag(a))},startListening:function(b){var c;this.isListening||(b&&this.options.scroll&&(c=n(a(b.target)),c.is(window)||c.is(document)||(this.scrollEl=c,this.scrollHandlerProxy=X(W(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),a(document).on("mousemove",this.mousemoveProxy=W(this,"mousemove")).on("mouseup",this.mouseupProxy=W(this,"mouseup")).on("selectstart",this.preventDefault),b?(this.originX=b.pageX,this.originY=b.pageY):(this.originX=0,this.originY=0),this.isListening=!0,this.listenStart(b))},listenStart:function(a){this.trigger("listenStart",a)},mousemove:function(a){var b,c,d=a.pageX-this.originX,e=a.pageY-this.originY;this.isDragging||(b=this.options.distance||1,c=d*d+e*e,c>=b*b&&this.startDrag(a)),this.isDragging&&this.drag(d,e,a)},startDrag:function(a){this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.dragStart(a))},dragStart:function(a){var b=this.subjectEl;this.trigger("dragStart",a),(this.subjectHref=b?b.attr("href"):null)&&b.removeAttr("href")},drag:function(a,b,c){this.trigger("drag",a,b,c),this.updateScroll(c)},mouseup:function(a){this.stopListening(a)},stopDrag:function(a){this.isDragging&&(this.stopScrolling(),this.dragStop(a),this.isDragging=!1)},dragStop:function(a){var b=this;this.trigger("dragStop",a),setTimeout(function(){b.subjectHref&&b.subjectEl.attr("href",b.subjectHref)},0)},stopListening:function(b){this.stopDrag(b),this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),a(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.listenStop(b))},listenStop:function(a){this.trigger("listenStop",a)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var a=this.scrollEl;this.scrollBounds=a?o(a):null},updateScroll:function(a){var b,c,d,e,f=this.scrollSensitivity,g=this.scrollBounds,h=0,i=0;g&&(b=(f-(a.pageY-g.top))/f,c=(f-(g.bottom-a.pageY))/f,d=(f-(a.pageX-g.left))/f,e=(f-(g.right-a.pageX))/f,b>=0&&1>=b?h=-1*b*this.scrollSpeed:c>=0&&1>=c&&(h=c*this.scrollSpeed),d>=0&&1>=d?i=-1*d*this.scrollSpeed:e>=0&&1>=e&&(i=e*this.scrollSpeed)),this.setScrollVel(h,i)},setScrollVel:function(a,b){this.scrollTopVel=a,this.scrollLeftVel=b,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(W(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;0>this.scrollTopVel?0>=a.scrollTop()&&(this.scrollTopVel=0):this.scrollTopVel>0&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0),0>this.scrollLeftVel?0>=a.scrollLeft()&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1e3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b),this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),bb=ab.extend({coordMap:null,origCell:null,cell:null,coordAdjust:null,constructor:function(a,b){ab.prototype.constructor.call(this,b),this.coordMap=a},listenStart:function(a){var b,c,d,e=this.subjectEl;ab.prototype.listenStart.apply(this,arguments),this.computeCoords(),a?(c={left:a.pageX,top:a.pageY},d=c,e&&(b=o(e),d=x(d,b)),this.origCell=this.getCell(d.left,d.top),e&&this.options.subjectCenter&&(this.origCell&&(b=w(this.origCell,b)||b),d=y(b)),this.coordAdjust=z(d,c)):(this.origCell=null,this.coordAdjust=null)},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},dragStart:function(a){var b;ab.prototype.dragStart.apply(this,arguments),b=this.getCell(a.pageX,a.pageY),b&&this.cellOver(b)},drag:function(a,b,c){var d;ab.prototype.drag.apply(this,arguments),d=this.getCell(c.pageX,c.pageY),ka(d,this.cell)||(this.cell&&this.cellOut(),d&&this.cellOver(d))},dragStop:function(){this.cellDone(),ab.prototype.dragStop.apply(this,arguments)},cellOver:function(a){this.cell=a,this.trigger("cellOver",a,ka(a,this.origCell),this.origCell)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cellDone(),this.cell=null)},cellDone:function(){this.cell&&this.trigger("cellDone",this.cell)},listenStop:function(){ab.prototype.listenStop.apply(this,arguments),this.origCell=this.cell=null,this.coordMap.clear()},scrollStop:function(){ab.prototype.scrollStop.apply(this,arguments),this.computeCoords()},getCell:function(a,b){return this.coordAdjust&&(a+=this.coordAdjust.left,b+=this.coordAdjust.top),this.coordMap.getCell(a,b)}}),cb=ja.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(b,c){this.options=c=c||{},this.sourceEl=b,this.parentEl=c.parentEl?a(c.parentEl):b.parent()},start:function(b){this.isFollowing||(this.isFollowing=!0,this.mouseY0=b.pageY,this.mouseX0=b.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),a(document).on("mousemove",this.mousemoveProxy=W(this,"mousemove")))},stop:function(b,c){function d(){this.isAnimating=!1,e.destroyEl(),this.top0=this.left0=null,c&&c()}var e=this,f=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,a(document).off("mousemove",this.mousemoveProxy),b&&f&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:f,complete:d})):d())},getEl:function(){var a=this.el;return a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),a},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl(),null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0,this.leftDelta=a.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),db=ja.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(a){this.view=a,this.isRTL=a.opt("isRTL")},rowHtml:function(a,b){var c,d,e=this.getHtmlRenderer("cell",a),f="";for(b=b||0,c=0;this.colCnt>c;c++)d=this.getCell(b,c),f+=e(d);return f=this.bookendCells(f,a,b),"<tr>"+f+"</tr>"},bookendCells:function(a,b,c){var d=this.getHtmlRenderer("intro",b)(c||0),e=this.getHtmlRenderer("outro",b)(c||0),f=this.isRTL?e:d,g=this.isRTL?d:e;return"string"==typeof a?f+a+g:a.prepend(f).append(g)},getHtmlRenderer:function(a,b){var c,d,e,f,g=this.view;return c=a+"Html",b&&(d=b+T(a)+"Html"),d&&(f=g[d])?e=g:d&&(f=this[d])?e=this:(f=g[c])?e=g:(f=this[c])&&(e=this),"function"==typeof f?function(){return f.apply(e,arguments)||""}:function(){return f||""}}}),eb=Ia.Grid=db.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,coordMap:null,elsByFill:null,externalDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,cellDuration:null,largeUnit:null,constructor:function(){db.apply(this,arguments),this.coordMap=new $a(this),this.elsByFill={},this.externalDragStartProxy=W(this,"externalDragStart")},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(a){var b,c,d=this.view;this.start=a.start.clone(),this.end=a.end.clone(),this.rowData=[],this.colData=[],this.updateCells(),this.colHeadFormat=d.opt("columnFormat")||this.computeColHeadFormat(),this.eventTimeFormat=d.opt("eventTimeFormat")||d.opt("timeFormat")||this.computeEventTimeFormat(),b=d.opt("displayEventTime"),null==b&&(b=this.computeDisplayEventTime()),c=d.opt("displayEventEnd"),null==c&&(c=this.computeDisplayEventEnd()),this.displayEventTime=b,this.displayEventEnd=c},updateCells:function(){},rangeToSegs:function(){},diffDates:function(a,b){return this.largeUnit?D(a,b,this.largeUnit):B(a,b)},getCell:function(b,c){var d;return null==c&&("number"==typeof b?(c=b%this.colCnt,b=Math.floor(b/this.colCnt)):(c=b.col,b=b.row)),d={row:b,col:c},a.extend(d,this.getRowData(b),this.getColData(c)),a.extend(d,this.computeCellRange(d)),d},computeCellRange:function(a){var b=this.computeCellDate(a);return{start:b,end:b.clone().add(this.cellDuration)}},computeCellDate:function(){},getRowData:function(a){return this.rowData[a]||{}},getColData:function(a){return this.colData[a]||{}},getRowEl:function(){},getColEl:function(){},getCellDayEl:function(a){return this.getColEl(a.col)||this.getRowEl(a.row)},computeRowCoords:function(){var a,b,c,d=[];for(a=0;this.rowCnt>a;a++)b=this.getRowEl(a),c=b.offset().top,d.push({top:c,bottom:c+b.outerHeight()});return d},computeColCoords:function(){var a,b,c,d=[];for(a=0;this.colCnt>a;a++)b=this.getColEl(a),c=b.offset().left,d.push({left:c,right:c+b.outerWidth()});return d},setElement:function(b){var c=this;this.el=b,b.on("mousedown",function(b){a(b.target).is(".fc-event-container *, .fc-more")||a(b.target).closest(".fc-popover").length||c.dayMousedown(b)}),this.bindSegHandlers(),this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},destroyDates:function(){},bindGlobalHandlers:function(){a(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){a(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(a){var b,c,d=this,e=this.view,f=e.opt("selectable"),i=new bb(this.coordMap,{scroll:e.opt("dragScroll"),dragStart:function(){e.unselect()},cellOver:function(a,e,h){h&&(b=e?a:null,f&&(c=d.computeSelection(h,a),c?d.renderSelection(c):g()))},cellOut:function(){b=null,c=null,d.destroySelection(),h()},listenStop:function(a){b&&e.trigger("dayClick",d.getCellDayEl(b),b.start,a),c&&e.reportSelection(c,a),h()}});i.mousedown(a)},renderRangeHelper:function(a,b){var c=this.fabricateHelperEvent(a,b);this.renderHelper(c,b)},fabricateHelperEvent:function(a,b){var c=b?J(b.event):{};return c.start=a.start.clone(),c.end=a.end?a.end.clone():null,c.allDay=null,this.view.calendar.normalizeEventRange(c),c.className=(c.className||[]).concat("fc-helper"),b||(c.editable=!1),c},renderHelper:function(){},destroyHelper:function(){},renderSelection:function(a){this.renderHighlight(a)},destroySelection:function(){this.destroyHighlight()},computeSelection:function(a,b){var c,d=[a.start,a.end,b.start,b.end];return d.sort(U),c={start:d[0].clone(),end:d[3].clone()},this.view.calendar.isSelectionRangeAllowed(c)?c:null},renderHighlight:function(a){this.renderFill("highlight",this.rangeToSegs(a))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(){},destroyFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(b,c){var d,e=this,f=this[b+"SegEl"],g="",h=[];if(c.length){for(d=0;c.length>d;d++)g+=this.fillSegHtml(b,c[d]);a(g).each(function(b,d){var g=c[b],i=a(d);f&&(i=f.call(e,g,i)),i&&(i=a(i),i.is(e.fillSegTag)&&(g.el=i,h.push(g)))})}return h},fillSegTag:"div",fillSegHtml:function(a,b){var c=this[a+"SegClasses"],d=this[a+"SegCss"],e=c?c.call(this,b):[],f=S(d?d.call(this,b):{});return"<"+this.fillSegTag+(e.length?' class="'+e.join(" ")+'"':"")+(f?' style="'+f+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(a){var b=this.view,c=a.start;return'<th class="fc-day-header '+b.widgetHeaderClass+" fc-"+Pa[c.day()]+'">'+Q(c.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(a){var b=this.view,c=a.start,d=this.getDayClasses(c);return d.unshift("fc-day",b.widgetContentClass),'<td class="'+d.join(" ")+'" data-date="'+c.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow().stripTime(),d=["fc-"+Pa[a.day()]];return 1==b.intervalDuration.as("months")&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month"),a.isSame(c,"day")?d.push("fc-today",b.highlightStateClass):c>a?d.push("fc-past"):d.push("fc-future"),d}});eb.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(a){var b,c,d=this.eventsToSegs(a),e=[],f=[];for(b=0;d.length>b;b++)c=d[b],la(c.event)?e.push(c):f.push(c);e=this.renderBgSegs(e)||e,f=this.renderFgSegs(f)||f,this.segs=e.concat(f)},destroyEvents:function(){this.triggerSegMouseout(),this.destroyFgSegs(),this.destroyBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(){},destroyFgSegs:function(){},renderFgSegEls:function(b,c){var d,e=this.view,f="",g=[];if(b.length){for(d=0;b.length>d;d++)f+=this.fgSegHtml(b[d],c);a(f).each(function(c,d){var f=b[c],h=e.resolveEventEl(f.event,a(d));h&&(h.data("fc-seg",f),f.el=h,g.push(f))})}return g},fgSegHtml:function(){},renderBgSegs:function(a){return this.renderFill("bgEvent",a)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){var b=a.event,c=b.source||{};return["fc-bgevent"].concat(b.className,c.className||[])},bgEventSegCss:function(a){var b=this.view,c=a.event,d=c.source||{};return{"background-color":c.backgroundColor||c.color||d.backgroundColor||d.color||b.opt("eventBackgroundColor")||b.opt("eventColor")}},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var b=this,c=this.view;a.each({mouseenter:function(a,c){b.triggerSegMouseover(a,c)},mouseleave:function(a,c){b.triggerSegMouseout(a,c)},click:function(a,b){return c.trigger("eventClick",this,a.event,b)},mousedown:function(d,e){a(e.target).is(".fc-resizer")&&c.isEventResizable(d.event)?b.segResizeMousedown(d,e,a(e.target).is(".fc-start-resizer")):c.isEventDraggable(d.event)&&b.segDragMousedown(d,e)}},function(c,d){b.el.on(c,".fc-event-container > *",function(c){var e=a(this).data("fc-seg");return!e||b.isDraggingSeg||b.isResizingSeg?void 0:d.call(this,e,c)})})},triggerSegMouseover:function(a,b){this.mousedOverSeg||(this.mousedOverSeg=a,this.view.trigger("eventMouseover",a.el[0],a.event,b))},triggerSegMouseout:function(a,b){b=b||{},this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",a.el[0],a.event,b))},segDragMousedown:function(a,b){var c,d=this,e=this.view,f=e.calendar,i=a.el,j=a.event,k=new cb(a.el,{parentEl:e.el,opacity:e.opt("dragOpacity"),revertDuration:e.opt("dragRevertDuration"),zIndex:2}),l=new bb(e.coordMap,{distance:5,scroll:e.opt("dragScroll"),subjectEl:i,subjectCenter:!0,listenStart:function(a){k.hide(),k.start(a)},dragStart:function(b){d.triggerSegMouseout(a,b),d.segDragStart(a,b),e.hideEvent(j)},cellOver:function(b,h,i){a.cell&&(i=a.cell),c=d.computeEventDrop(i,b,j),c&&!f.isEventRangeAllowed(c,j)&&(g(),c=null),c&&e.renderDrag(c,a)?k.hide():k.show(),h&&(c=null)},cellOut:function(){e.destroyDrag(),k.show(),c=null},cellDone:function(){h()},dragStop:function(b){k.stop(!c,function(){e.destroyDrag(),e.showEvent(j),d.segDragStop(a,b),c&&e.reportEventDrop(j,c,this.largeUnit,i,b)})},listenStop:function(){k.stop()}});l.mousedown(b)},segDragStart:function(a,b){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",a.el[0],a.event,b,{})},segDragStop:function(a,b){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",a.el[0],a.event,b,{})},computeEventDrop:function(a,b,c){var d,e,f=this.view.calendar,g=a.start,h=b.start;return g.hasTime()===h.hasTime()?(d=this.diffDates(h,g),c.allDay&&G(d)?(e={start:c.start.clone(),end:f.getEventEnd(c),allDay:!1},f.normalizeEventRangeTimes(e)):e={start:c.start.clone(),end:c.end?c.end.clone():null,allDay:c.allDay},e.start.add(d),e.end&&e.end.add(d)):e={start:h.clone(),end:null,allDay:!h.hasTime()},e},applyDragOpacity:function(a){var b=this.view.opt("dragOpacity");
null!=b&&a.each(function(a,c){c.style.opacity=b})},externalDragStart:function(b,c){var d,e,f=this.view;f.opt("droppable")&&(d=a((c?c.item:null)||b.target),e=f.opt("dropAccept"),(a.isFunction(e)?e.call(d[0],d):d.is(e))&&(this.isDraggingExternal||this.listenToExternalDrag(d,b,c)))},listenToExternalDrag:function(a,b,c){var d,e,f=this,i=ra(a);d=new bb(this.coordMap,{listenStart:function(){f.isDraggingExternal=!0},cellOver:function(a){e=f.computeExternalDrop(a,i),e?f.renderDrag(e):g()},cellOut:function(){e=null,f.destroyDrag(),h()},dragStop:function(){f.destroyDrag(),h(),e&&f.view.reportExternalDrop(i,e,a,b,c)},listenStop:function(){f.isDraggingExternal=!1}}),d.startDrag(b)},computeExternalDrop:function(a,b){var c={start:a.start.clone(),end:null};return b.startTime&&!c.start.hasTime()&&c.start.time(b.startTime),b.duration&&(c.end=c.start.clone().add(b.duration)),this.view.calendar.isExternalDropRangeAllowed(c,b.eventProps)?c:null},renderDrag:function(){},destroyDrag:function(){},segResizeMousedown:function(a,b,c){var d,e,f=this,i=this.view,j=i.calendar,k=a.el,l=a.event,m=j.getEventEnd(l);d=new bb(this.coordMap,{distance:5,scroll:i.opt("dragScroll"),subjectEl:k,dragStart:function(b){f.triggerSegMouseout(a,b),f.segResizeStart(a,b)},cellOver:function(b,d,h){e=c?f.computeEventStartResize(h,b,l):f.computeEventEndResize(h,b,l),e&&(j.isEventRangeAllowed(e,l)?e.start.isSame(l.start)&&e.end.isSame(m)&&(e=null):(g(),e=null)),e&&(i.hideEvent(l),f.renderEventResize(e,a))},cellOut:function(){e=null},cellDone:function(){f.destroyEventResize(),i.showEvent(l),h()},dragStop:function(b){f.segResizeStop(a,b),e&&i.reportEventResize(l,e,this.largeUnit,k,b)}}),d.mousedown(b)},segResizeStart:function(a,b){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",a.el[0],a.event,b,{})},segResizeStop:function(a,b){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",a.el[0],a.event,b,{})},computeEventStartResize:function(a,b,c){return this.computeEventResize("start",a,b,c)},computeEventEndResize:function(a,b,c){return this.computeEventResize("end",a,b,c)},computeEventResize:function(a,b,c,d){var e,f,g=this.view.calendar,h=this.diffDates(c[a],b[a]);return e={start:d.start.clone(),end:g.getEventEnd(d),allDay:d.allDay},e.allDay&&G(h)&&(e.allDay=!1,g.normalizeEventRangeTimes(e)),e[a].add(h),e.start.isBefore(e.end)||(f=d.allDay?g.defaultAllDayEventDuration:g.defaultTimedEventDuration,this.cellDuration&&f>this.cellDuration&&(f=this.cellDuration),"start"==a?e.start=e.end.clone().subtract(f):e.end=e.start.clone().add(f)),e},renderEventResize:function(){},destroyEventResize:function(){},getEventTimeText:function(a,b,c){return null==b&&(b=this.eventTimeFormat),null==c&&(c=this.displayEventEnd),this.displayEventTime&&a.start.hasTime()?c&&a.end?this.view.formatRange(a,b):a.start.format(b):""},getSegClasses:function(a,b,c){var d=a.event,e=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(d.className,d.source?d.source.className:[]);return b&&e.push("fc-draggable"),c&&e.push("fc-resizable"),e},getEventSkinCss:function(a){var b=this.view,c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor");return{"background-color":a.backgroundColor||d||c.backgroundColor||e||b.opt("eventBackgroundColor")||f,"border-color":a.borderColor||d||c.borderColor||e||b.opt("eventBorderColor")||f,color:a.textColor||c.textColor||b.opt("eventTextColor")}},eventsToSegs:function(a,b){var c,d=this.eventsToRanges(a),e=[];for(c=0;d.length>c;c++)e.push.apply(e,this.eventRangeToSegs(d[c],b));return e},eventsToRanges:function(b){var c=this,d=oa(b),e=[];return a.each(d,function(a,b){b.length&&e.push.apply(e,ma(b[0])?c.eventsToInverseRanges(b):c.eventsToNormalRanges(b))}),e},eventsToNormalRanges:function(a){var b,c,d,e,f=this.view.calendar,g=[];for(b=0;a.length>b;b++)c=a[b],d=c.start.clone().stripZone(),e=f.getEventEnd(c).stripZone(),g.push({event:c,start:d,end:e,eventStartMS:+d,eventDurationMS:e-d});return g},eventsToInverseRanges:function(a){var b,c,d=this.view,e=d.start.clone().stripZone(),f=d.end.clone().stripZone(),g=this.eventsToNormalRanges(a),h=[],i=a[0],j=e;for(g.sort(pa),b=0;g.length>b;b++)c=g[b],c.start>j&&h.push({event:i,start:j,end:c.start}),j=c.end;return f>j&&h.push({event:i,start:j,end:f}),h},eventRangeToSegs:function(a,b){var c,d,e;for(c=b?b(a):this.rangeToSegs(a),d=0;c.length>d;d++)e=c[d],e.event=a.event,e.eventStartMS=a.eventStartMS,e.eventDurationMS=a.eventDurationMS;return c}}),Ia.compareSegs=qa,Ia.dataAttrPrefix="";var fb=eb.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,constructor:function(){eb.apply(this,arguments),this.cellDuration=b.duration(1,"day")},renderDates:function(a){var b,c,d,e=this.view,f=this.rowCnt,g=this.colCnt,h=f*g,i="";for(b=0;f>b;b++)i+=this.dayRowHtml(b,a);for(this.el.html(i),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),c=0;h>c;c++)d=this.getCell(c),e.trigger("dayRender",null,d.start,this.dayEls.eq(c))},destroyDates:function(){this.destroySegPopover()},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents(!0),b=this.eventsToSegs(a);this.renderFill("businessHours",b,"bgevent")},dayRowHtml:function(a,b){var c=this.view,d=["fc-row","fc-week",c.widgetContentClass];return b&&d.push("fc-rigid"),'<div class="'+d.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",a)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a){return this.bgCellHtml(a)},computeColHeadFormat:function(){return this.rowCnt>1?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},updateCells:function(){var a,b,c,d;if(this.updateCellDates(),a=this.cellDates,this.breakOnWeeks){for(b=a[0].day(),d=1;a.length>d&&a[d].day()!=b;d++);c=Math.ceil(a.length/d)}else c=1,d=a.length;this.rowCnt=c,this.colCnt=d},updateCellDates:function(){for(var a=this.view,b=this.start.clone(),c=[],d=-1,e=[];b.isBefore(this.end);)a.isHiddenDay(b)?e.push(d+.5):(d++,e.push(d),c.push(b.clone())),b.add(1,"days");this.cellDates=c,this.dayToCellOffsets=e},computeCellDate:function(a){var b=this.colCnt,c=a.row*b+(this.isRTL?b-a.col-1:a.col);return this.cellDates[c].clone()},getRowEl:function(a){return this.rowEls.eq(a)},getColEl:function(a){return this.dayEls.eq(a)},getCellDayEl:function(a){return this.dayEls.eq(a.row*this.colCnt+a.col)},computeRowCoords:function(){var a=eb.prototype.computeRowCoords.call(this);return a[a.length-1].bottom+=this.bottomCoordPadding,a},rangeToSegs:function(a){var b,c,d,e,f,g,h,i,j,k,l=this.isRTL,m=this.rowCnt,n=this.colCnt,o=[];for(a=this.view.computeDayRange(a),b=this.dateToCellOffset(a.start),c=this.dateToCellOffset(a.end.subtract(1,"days")),d=0;m>d;d++)e=d*n,f=e+n-1,i=Math.max(e,b),j=Math.min(f,c),i=Math.ceil(i),j=Math.floor(j),j>=i&&(g=i===b,h=j===c,i-=e,j-=e,k={row:d,isStart:g,isEnd:h},l?(k.leftCol=n-j-1,k.rightCol=n-i-1):(k.leftCol=i,k.rightCol=j),o.push(k));return o},dateToCellOffset:function(a){var b=this.dayToCellOffsets,c=a.diff(this.start,"days");return 0>c?b[0]-1:c>=b.length?b[b.length-1]+1:b[c]},renderDrag:function(a,b){return this.renderHighlight(this.view.calendar.ensureVisibleEventRange(a)),b&&!b.el.closest(this.el).length?(this.renderRangeHelper(a,b),this.applyDragOpacity(this.helperEls),!0):void 0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderEventResize:function(a,b){this.renderHighlight(a),this.renderRangeHelper(a,b)},destroyEventResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(b,c){var d,e=[],f=this.eventsToSegs([b]);f=this.renderFgSegEls(f),d=this.renderSegRows(f),this.rowEls.each(function(b,f){var g,h=a(f),i=a('<div class="fc-helper-skeleton"><table/></div>');g=c&&c.row===b?c.el.position().top:h.find(".fc-content-skeleton tbody").position().top,i.css("top",g).find("table").append(d[b].tbodyEl),h.append(i),e.push(i[0])}),this.helperEls=a(e)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(b,c,d){var e,f,g,h=[];for(c=this.renderFillSegEls(b,c),e=0;c.length>e;e++)f=c[e],g=this.renderFillRow(b,f,d),this.rowEls.eq(f.row).append(g),h.push(g[0]);return this.elsByFill[b]=a(h),c},renderFillRow:function(b,c,d){var e,f,g=this.colCnt,h=c.leftCol,i=c.rightCol+1;return d=d||b.toLowerCase(),e=a('<div class="fc-'+d+'-skeleton"><table><tr/></table></div>'),f=e.find("tr"),h>0&&f.append('<td colspan="'+h+'"/>'),f.append(c.el.attr("colspan",i-h)),g>i&&f.append('<td colspan="'+(g-i)+'"/>'),this.bookendCells(f,b),e}});fb.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover(),eb.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return eb.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(b){var c=a.grep(b,function(a){return a.event.allDay});return eb.prototype.renderBgSegs.call(this,c)},renderFgSegs:function(b){var c;return b=this.renderFgSegEls(b),c=this.rowStructs=this.renderSegRows(b),this.rowEls.each(function(b,d){a(d).find(".fc-content-skeleton > table").append(c[b].tbodyEl)}),b},destroyFgSegs:function(){for(var a,b=this.rowStructs||[];a=b.pop();)a.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(a){var b,c,d=[];for(b=this.groupSegRows(a),c=0;b.length>c;c++)d.push(this.renderSegRow(c,b[c]));return d},fgSegHtml:function(a,b){var c,d,e=this.view,f=a.event,g=e.isEventDraggable(f),h=!b&&f.allDay&&a.isStart&&e.isEventResizableFromStart(f),i=!b&&f.allDay&&a.isEnd&&e.isEventResizableFromEnd(f),j=this.getSegClasses(a,g,h||i),k=S(this.getEventSkinCss(f)),l="";return j.unshift("fc-day-grid-event","fc-h-event"),a.isStart&&(c=this.getEventTimeText(f),c&&(l='<span class="fc-time">'+Q(c)+"</span>")),d='<span class="fc-title">'+(Q(f.title||"")||"&nbsp;")+"</span>",'<a class="'+j.join(" ")+'"'+(f.url?' href="'+Q(f.url)+'"':"")+(k?' style="'+k+'"':"")+'><div class="fc-content">'+(this.isRTL?d+" "+l:l+" "+d)+"</div>"+(h?'<div class="fc-resizer fc-start-resizer" />':"")+(i?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(b,c){function d(b){for(;b>g;)k=(r[e-1]||[])[g],k?k.attr("rowspan",parseInt(k.attr("rowspan")||1,10)+1):(k=a("<td/>"),h.append(k)),q[e][g]=k,r[e][g]=k,g++}var e,f,g,h,i,j,k,l=this.colCnt,m=this.buildSegLevels(c),n=Math.max(1,m.length),o=a("<tbody/>"),p=[],q=[],r=[];for(e=0;n>e;e++){if(f=m[e],g=0,h=a("<tr/>"),p.push([]),q.push([]),r.push([]),f)for(i=0;f.length>i;i++){for(j=f[i],d(j.leftCol),k=a('<td class="fc-event-container"/>').append(j.el),j.leftCol!=j.rightCol?k.attr("colspan",j.rightCol-j.leftCol+1):r[e][g]=k;j.rightCol>=g;)q[e][g]=k,p[e][g]=j,g++;h.append(k)}d(l),this.bookendCells(h,"eventSkeleton"),o.append(h)}return{row:b,tbodyEl:o,cellMatrix:q,segMatrix:p,segLevels:m,segs:c}},buildSegLevels:function(a){var b,c,d,e=[];for(a.sort(qa),b=0;a.length>b;b++){for(c=a[b],d=0;e.length>d&&sa(c,e[d]);d++);c.level=d,(e[d]||(e[d]=[])).push(c)}for(d=0;e.length>d;d++)e[d].sort(ta);return e},groupSegRows:function(a){var b,c=[];for(b=0;this.rowCnt>b;b++)c.push([]);for(b=0;a.length>b;b++)c[a[b].row].push(a[b]);return c}}),fb.mixin({segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var b,c,d=this.rowStructs||[];for(b=0;d.length>b;b++)this.unlimitRow(b),c=a?"number"==typeof a?a:this.computeRowLevelLimit(b):!1,c!==!1&&this.limitRow(b,c)},computeRowLevelLimit:function(b){function c(b,c){f=Math.max(f,a(c).outerHeight())}var d,e,f,g=this.rowEls.eq(b),h=g.height(),i=this.rowStructs[b].tbodyEl.children();for(d=0;i.length>d;d++)if(e=i.eq(d).removeClass("fc-limited"),f=0,e.find("> td > :first-child").each(c),e.position().top+f>h)return d;return!1},limitRow:function(b,c){function d(d){for(;d>x;)e=u.getCell(b,x),k=u.getCellSegs(e,c),k.length&&(n=g[c-1][x],t=u.renderMoreLink(e,k),s=a("<div/>").append(t),n.append(s),w.push(s[0])),x++}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this,v=this.rowStructs[b],w=[],x=0;if(c&&v.segLevels.length>c){for(f=v.segLevels[c-1],g=v.cellMatrix,h=v.tbodyEl.children().slice(c).addClass("fc-limited").get(),i=0;f.length>i;i++){for(j=f[i],d(j.leftCol),m=[],l=0;j.rightCol>=x;)e=this.getCell(b,x),k=this.getCellSegs(e,c),m.push(k),l+=k.length,x++;if(l){for(n=g[c-1][j.leftCol],o=n.attr("rowspan")||1,p=[],q=0;m.length>q;q++)r=a('<td class="fc-more-cell"/>').attr("rowspan",o),k=m[q],e=this.getCell(b,j.leftCol+q),t=this.renderMoreLink(e,[j].concat(k)),s=a("<div/>").append(t),r.append(s),p.push(r[0]),w.push(r[0]);n.addClass("fc-limited").after(a(p)),h.push(n[0])}}d(this.colCnt),v.moreEls=a(w),v.limitedEls=a(h)}},unlimitRow:function(a){var b=this.rowStructs[a];b.moreEls&&(b.moreEls.remove(),b.moreEls=null),b.limitedEls&&(b.limitedEls.removeClass("fc-limited"),b.limitedEls=null)},renderMoreLink:function(b,c){var d=this,e=this.view;return a('<a class="fc-more"/>').text(this.getMoreLinkText(c.length)).on("click",function(f){var g=e.opt("eventLimitClick"),h=b.start,i=a(this),j=d.getCellDayEl(b),k=d.getCellSegs(b),l=d.resliceDaySegs(k,h),m=d.resliceDaySegs(c,h);"function"==typeof g&&(g=e.trigger("eventLimitClick",null,{date:h,dayEl:j,moreEl:i,segs:l,hiddenSegs:m},f)),"popover"===g?d.showSegPopover(b,i,l):"string"==typeof g&&e.calendar.zoomTo(h,g)})},showSegPopover:function(a,b,c){var d,e,f=this,g=this.view,h=b.parent();d=1==this.rowCnt?g.el:this.rowEls.eq(a.row),e={className:"fc-more-popover",content:this.renderSegPopoverContent(a,c),parentEl:this.el,top:d.offset().top,autoHide:!0,viewportConstrain:g.opt("popoverViewportConstrain"),hide:function(){f.segPopover.destroy(),f.segPopover=null,f.popoverSegs=null}},this.isRTL?e.right=h.offset().left+h.outerWidth()+1:e.left=h.offset().left-1,this.segPopover=new Za(e),this.segPopover.show()},renderSegPopoverContent:function(b,c){var d,e=this.view,f=e.opt("theme"),g=b.start.format(e.opt("dayPopoverFormat")),h=a('<div class="fc-header '+e.widgetHeaderClass+'"><span class="fc-close '+(f?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+Q(g)+'</span><div class="fc-clear"/></div><div class="fc-body '+e.widgetContentClass+'"><div class="fc-event-container"></div></div>'),i=h.find(".fc-event-container");for(c=this.renderFgSegEls(c,!0),this.popoverSegs=c,d=0;c.length>d;d++)c[d].cell=b,i.append(c[d].el);return h},resliceDaySegs:function(b,c){var d=a.map(b,function(a){return a.event}),e=c.clone().stripTime(),f=e.clone().add(1,"days"),g={start:e,end:f};return b=this.eventsToSegs(d,function(a){var b=A(a,g);return b?[b]:[]}),b.sort(qa),b},getMoreLinkText:function(a){var b=this.view.opt("eventLimitText");return"function"==typeof b?b(a):"+"+a+" "+b},getCellSegs:function(a,b){for(var c,d=this.rowStructs[a.row].segMatrix,e=b||0,f=[];d.length>e;)c=d[e][a.col],c&&f.push(c),e++;return f}});var gb=eb.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){eb.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr")},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(a),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a){return this.bgCellHtml(a)},slatRowHtml:function(){for(var a,c,d,e=this.view,f=this.isRTL,g="",h=0===this.slotDuration.asMinutes()%15,i=b.duration(+this.minTime);this.maxTime>i;)a=this.start.clone().time(i),c=a.minutes(),d='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(h&&c?"":"<span>"+Q(a.format(this.axisFormat))+"</span>")+"</td>",g+="<tr "+(c?'class="fc-minor"':"")+">"+(f?"":d)+'<td class="'+e.widgetContentClass+'"/>'+(f?d:"")+"</tr>",i.add(this.slotDuration);return g},processOptions:function(){var a=this.view,c=a.opt("slotDuration"),d=a.opt("snapDuration");c=b.duration(c),d=d?b.duration(d):c,this.slotDuration=c,this.snapDuration=d,this.cellDuration=d,this.minTime=b.duration(a.opt("minTime")),this.maxTime=b.duration(a.opt("maxTime")),this.axisFormat=a.opt("axisFormat")||a.opt("smallTimeFormat")},computeColHeadFormat:function(){return this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},updateCells:function(){var a,b=this.view,c=[];for(a=this.start.clone();a.isBefore(this.end);)c.push({day:a.clone()}),a.add(1,"day"),a=b.skipHiddenDays(a);this.isRTL&&c.reverse(),this.colData=c,this.colCnt=c.length,this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellDate:function(a){var b=this.computeSnapTime(a.row);return this.view.calendar.rezoneDate(a.day).time(b)},getColEl:function(a){return this.dayEls.eq(a)},computeSnapTime:function(a){return b.duration(this.minTime+this.snapDuration*a)},rangeToSegs:function(a){var b,c,d,e,f=this.colCnt,g=[];for(a={start:a.start.clone().stripZone(),end:a.end.clone().stripZone()},c=0;f>c;c++)d=this.colData[c].day,e={start:d.clone().time(this.minTime),end:d.clone().time(this.maxTime)},b=A(a,e),b&&(b.col=c,g.push(b));return g},updateSize:function(a){this.computeSlatTops(),a&&this.updateSegVerticals()},computeRowCoords:function(){var a,b,c=this.el.offset().top,d=[];for(a=0;this.rowCnt>a;a++)b={top:c+this.computeTimeTop(this.computeSnapTime(a))},a>0&&(d[a-1].bottom=b.top),d.push(b);return b.bottom=b.top+this.computeTimeTop(this.computeSnapTime(a)),d},computeDateTop:function(a,c){return this.computeTimeTop(b.duration(a.clone().stripZone()-c.clone().stripTime()))},computeTimeTop:function(a){var b,c,d,e,f=(a-this.minTime)/this.slotDuration;return f=Math.max(0,f),f=Math.min(this.slatEls.length,f),b=Math.floor(f),c=f-b,d=this.slatTops[b],c?(e=this.slatTops[b+1],d+(e-d)*c):d},computeSlatTops:function(){var b,c=[];this.slatEls.each(function(d,e){b=a(e).position().top,c.push(b)}),c.push(b+this.slatEls.last().outerHeight()),this.slatTops=c},renderDrag:function(a,b){return b?(this.renderRangeHelper(a,b),this.applyDragOpacity(this.helperEl),!0):void this.renderHighlight(this.view.calendar.ensureVisibleEventRange(a))},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderEventResize:function(a,b){this.renderRangeHelper(a,b)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(b,c){var d,e,f,g,h=this.eventsToSegs([b]);for(h=this.renderFgSegEls(h),d=this.renderSegTable(h),e=0;h.length>e;e++)f=h[e],c&&c.col===f.col&&(g=c.el,f.el.css({left:g.css("left"),right:g.css("right"),"margin-left":g.css("margin-left"),"margin-right":g.css("margin-right")}));this.helperEl=a('<div class="fc-helper-skeleton"/>').append(d).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(a){this.view.opt("selectHelper")?this.renderRangeHelper(a):this.renderHighlight(a)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderFill:function(b,c,d){var e,f,g,h,i,j,k,l,m,n;if(c.length){for(c=this.renderFillSegEls(b,c),e=this.groupSegCols(c),d=d||b.toLowerCase(),f=a('<div class="fc-'+d+'-skeleton"><table><tr/></table></div>'),g=f.find("tr"),h=0;e.length>h;h++)if(i=e[h],j=a("<td/>").appendTo(g),i.length)for(k=a('<div class="fc-'+d+'-container"/>').appendTo(j),l=this.colData[h].day,m=0;i.length>m;m++)n=i[m],k.append(n.el.css({top:this.computeDateTop(n.start,l),bottom:-this.computeDateTop(n.end,l)}));this.bookendCells(g,b),this.el.append(f),this.elsByFill[b]=f}return c}});gb.mixin({eventSkeletonEl:null,renderFgSegs:function(b){return b=this.renderFgSegEls(b),this.el.append(this.eventSkeletonEl=a('<div class="fc-content-skeleton"/>').append(this.renderSegTable(b))),b},destroyFgSegs:function(){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(b){var c,d,e,f,g,h,i=a("<table><tr/></table>"),j=i.find("tr");for(c=this.groupSegCols(b),this.computeSegVerticals(b),f=0;c.length>f;f++){for(g=c[f],ua(g),h=a('<div class="fc-event-container"/>'),d=0;g.length>d;d++)e=g[d],e.el.css(this.generateSegPositionCss(e)),30>e.bottom-e.top&&e.el.addClass("fc-short"),h.append(e.el);j.append(a("<td/>").append(h))}return this.bookendCells(j,"eventSkeleton"),i},updateSegVerticals:function(){var a,b=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(b),a=0;b.length>a;a++)b[a].el.css(this.generateSegVerticalCss(b[a]))},computeSegVerticals:function(a){var b,c;for(b=0;a.length>b;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},fgSegHtml:function(a,b){var c,d,e,f=this.view,g=a.event,h=f.isEventDraggable(g),i=!b&&a.isStart&&f.isEventResizableFromStart(g),j=!b&&a.isEnd&&f.isEventResizableFromEnd(g),k=this.getSegClasses(a,h,i||j),l=S(this.getEventSkinCss(g));return k.unshift("fc-time-grid-event","fc-v-event"),f.isMultiDayEvent(g)?(a.isStart||a.isEnd)&&(c=this.getEventTimeText(a),d=this.getEventTimeText(a,"LT"),e=this.getEventTimeText(a,null,!1)):(c=this.getEventTimeText(g),d=this.getEventTimeText(g,"LT"),e=this.getEventTimeText(g,null,!1)),'<a class="'+k.join(" ")+'"'+(g.url?' href="'+Q(g.url)+'"':"")+(l?' style="'+l+'"':"")+'><div class="fc-content">'+(c?'<div class="fc-time" data-start="'+Q(e)+'" data-full="'+Q(d)+'"><span>'+Q(c)+"</span></div>":"")+(g.title?'<div class="fc-title">'+Q(g.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(j?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},generateSegPositionCss:function(a){var b,c,d=this.view.opt("slotEventOverlap"),e=a.backwardCoord,f=a.forwardCoord,g=this.generateSegVerticalCss(a);return d&&(f=Math.min(1,e+2*(f-e))),this.isRTL?(b=1-f,c=e):(b=e,c=1-f),g.zIndex=a.level+1,g.left=100*b+"%",g.right=100*c+"%",d&&a.forwardPressure&&(g[this.isRTL?"marginLeft":"marginRight"]=20),g},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(a){var b,c=[];for(b=0;this.colCnt>b;b++)c.push([]);for(b=0;a.length>b;b++)c[a[b].col].push(a[b]);return c}});var hb=Ia.View=ja.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,isDisplayed:!1,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(a,c,d,e){this.calendar=a,this.type=this.name=c,this.options=d,this.intervalDuration=e||b.duration(1,"day"),this.nextDayThreshold=b.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.documentMousedownProxy=W(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(a){return this.options[a]},trigger:function(a,b){var c=this.calendar;return c.trigger.apply(c,[a,b||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(a){this.setRange(this.computeRange(a))},setRange:function(b){a.extend(this,b),this.updateTitle()},computeRange:function(a){var b,c,d=E(this.intervalDuration),e=a.clone().startOf(d),f=e.clone().add(this.intervalDuration);return/year|month|week|day/.test(d)?(e.stripTime(),f.stripTime()):(e.hasTime()||(e=this.calendar.rezoneDate(e)),f.hasTime()||(f=this.calendar.rezoneDate(f))),b=e.clone(),b=this.skipHiddenDays(b),c=f.clone(),c=this.skipHiddenDays(c,-1,!0),{intervalUnit:d,intervalStart:e,intervalEnd:f,start:b,end:c}},computePrevDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(a,b){return 1>=this.intervalDuration.as("days")&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,b),a.startOf("day")),a},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(a,b,c){var d=a.end;return d.hasTime()||(d=d.clone().subtract(1)),ea(a.start,d,b,c,this.opt("isRTL"))},setElement:function(a){this.el=a,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.destroySkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(a){var b=null;this.isDisplayed&&(b=this.queryScroll()),this.clear(),this.setDate(a),this.render(),this.updateSize(),this.renderBusinessHours(),this.isDisplayed=!0,b=this.computeInitialScroll(b),this.forceScroll(b),this.triggerRender()},clear:function(){this.isDisplayed&&(this.unselect(),this.clearEvents(),this.triggerDestroy(),this.destroyBusinessHours(),this.destroy(),this.isDisplayed=!1)},render:function(){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),this.renderDates()},destroy:function(){this.destroyDates()},renderSkeleton:function(){},destroySkeleton:function(){},renderDates:function(){},destroyDates:function(){},renderBusinessHours:function(){},destroyBusinessHours:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerDestroy:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){a(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){a(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header",this.widgetContentClass=a+"-widget-content",this.highlightStateClass=a+"-state-highlight"},updateSize:function(a){var b;a&&(b=this.queryScroll()),this.updateHeight(),this.updateWidth(),a&&this.setScroll(b)},updateWidth:function(){},updateHeight:function(){var a=this.calendar;this.setHeight(a.getSuggestedViewHeight(),a.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(a){var b,c,d=this.scrollerEl;return b=this.el.add(d),b.css({position:"relative",left:-1}),c=this.el.outerHeight()-d.height(),b.css({position:"",left:""}),a-c},computeInitialScroll:function(){return 0},queryScroll:function(){return this.scrollerEl?this.scrollerEl.scrollTop():void 0},setScroll:function(a){return this.scrollerEl?this.scrollerEl.scrollTop(a):void 0},forceScroll:function(a){var b=this;this.setScroll(a),setTimeout(function(){b.setScroll(a)},0)},displayEvents:function(a){var b=this.queryScroll();this.clearEvents(),this.renderEvents(a),this.isEventsRendered=!0,this.setScroll(b),this.triggerEventRender()},clearEvents:function(){this.isEventsRendered&&(this.triggerEventDestroy(),this.destroyEvents(),this.isEventsRendered=!1)},renderEvents:function(){},destroyEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)}),this.trigger("eventAfterAllRender")},triggerEventDestroy:function(){this.renderedEventSegEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)})},resolveEventEl:function(b,c){var d=this.trigger("eventRender",b,b,c);return d===!1?c=null:d&&d!==!0&&(c=a(d)),c},showEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","hidden")},a)},renderedEventSegEach:function(a,b){var c,d=this.getEventSegs();for(c=0;d.length>c;c++)b&&d[c].event._id!==b._id||d[c].el&&a.call(this,d[c])},getEventSegs:function(){return[]},isEventDraggable:function(a){var b=a.source||{};return P(a.startEditable,b.startEditable,this.opt("eventStartEditable"),a.editable,b.editable,this.opt("editable"))},reportEventDrop:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventDrop(a,g.dateDelta,h,d,e),f.reportEventChange()},triggerEventDrop:function(a,b,c,d,e){this.trigger("eventDrop",d[0],a,b,c,e,{})},reportExternalDrop:function(b,c,d,e,f){var g,h,i=b.eventProps;i&&(g=a.extend({},i,c),h=this.calendar.renderEvent(g,b.stick)[0]),this.triggerExternalDrop(h,c,d,e,f)},triggerExternalDrop:function(a,b,c,d,e){this.trigger("drop",c[0],b.start,d,e),a&&this.trigger("eventReceive",null,a)},renderDrag:function(){},destroyDrag:function(){},isEventResizableFromStart:function(a){return this.opt("eventResizableFromStart")&&this.isEventResizable(a)},isEventResizableFromEnd:function(a){return this.isEventResizable(a)},isEventResizable:function(a){var b=a.source||{};return P(a.durationEditable,b.durationEditable,this.opt("eventDurationEditable"),a.editable,b.editable,this.opt("editable"))},reportEventResize:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventResize(a,g.durationDelta,h,d,e),f.reportEventChange()},triggerEventResize:function(a,b,c,d,e){this.trigger("eventResize",d[0],a,b,c,e,{})},select:function(a,b){this.unselect(b),this.renderSelection(a),this.reportSelection(a,b)},renderSelection:function(){},reportSelection:function(a,b){this.isSelected=!0,this.trigger("select",null,a.start,a.end,b)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,a))},destroySelection:function(){},documentMousedown:function(b){var c;this.isSelected&&this.opt("unselectAuto")&&v(b)&&(c=this.opt("unselectCancel"),c&&a(b.target).closest(c).length||this.unselect(b))},initHiddenDays:function(){var b,c=this.opt("hiddenDays")||[],d=[],e=0;for(this.opt("weekends")===!1&&c.push(0,6),b=0;7>b;b++)(d[b]=-1!==a.inArray(b,c))||e++;if(!e)throw"invalid hiddenDays";this.isHiddenDayHash=d},isHiddenDay:function(a){return b.isMoment(a)&&(a=a.day()),this.isHiddenDayHash[a]},skipHiddenDays:function(a,b,c){var d=a.clone();for(b=b||1;this.isHiddenDayHash[(d.day()+(c?b:0)+7)%7];)d.add(b,"days");return d},computeDayRange:function(a){var b,c=a.start.clone().stripTime(),d=a.end,e=null;return d&&(e=d.clone().stripTime(),b=+d.time(),b&&b>=this.nextDayThreshold&&e.add(1,"days")),(!d||c>=e)&&(e=c.clone().add(1,"days")),{start:c,end:e}},isMultiDayEvent:function(a){var b=this.computeDayRange(a);return b.end.diff(b.start,"days")>1}}),ib=Ia.Calendar=Ia.CalendarBase=ja.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,constructor:Ca,initOptions:function(a){var b,e,f,g;a=d(a),b=a.lang,e=jb[b],e||(b=ib.defaults.lang,e=jb[b]||{}),f=P(a.isRTL,e.isRTL,ib.defaults.isRTL),g=f?ib.rtlDefaults:{},this.dirDefaults=g,this.langDefaults=e,this.overrides=a,this.options=c(ib.defaults,g,e,a),Da(this.options),this.viewSpecCache={}},getViewSpec:function(a){var b=this.viewSpecCache;return b[a]||(b[a]=this.buildViewSpec(a))},getUnitViewSpec:function(b){var c,d,e;if(-1!=a.inArray(b,Qa))for(c=this.header.getViewsWithButtons(),a.each(Ia.views,function(a){c.push(a)}),d=0;c.length>d;d++)if(e=this.getViewSpec(c[d]),e&&e.singleUnit==b)return e},buildViewSpec:function(a){for(var d,e,f,g,h,i,j=this.overrides.views||{},k=[],l=[],m=a;m&&!d;)e=Ja[m]||{},f=j[m]||{},g=g||f.duration||e.duration,m=f.type||e.type,"function"==typeof e?(d=e,k.unshift(d.defaults||{})):k.unshift(e),l.unshift(f);return d?(i={"class":d,type:a},g&&(g=b.duration(g),g.valueOf()||(g=null)),
g&&(i.duration=g,h=E(g),1===g.as(h)&&(i.singleUnit=h,l.unshift(j[h]||{}))),i.defaults=c.apply(null,k),i.overrides=c.apply(null,l),this.buildViewSpecOptions(i),this.buildViewSpecButtonText(i,a),i):void 0},buildViewSpecOptions:function(a){a.options=c(ib.defaults,a.defaults,this.dirDefaults,this.langDefaults,this.overrides,a.overrides),Da(a.options)},buildViewSpecButtonText:function(a,b){function c(c){var d=c.buttonText||{};return d[b]||(a.singleUnit?d[a.singleUnit]:null)}a.buttonTextOverride=c(this.overrides)||a.overrides.buttonText,a.buttonTextDefault=c(this.langDefaults)||c(this.dirDefaults)||a.defaults.buttonText||c(ib.defaults)||(a.duration?this.humanizeDuration(a.duration):null)||b},instantiateView:function(a){var b=this.getViewSpec(a);return new b["class"](this,a,b.options,b.duration)},isValidViewType:function(a){return Boolean(this.getViewSpec(a))}});ib.defaults={titleRangeSeparator:" — ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},ib.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},ib.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var jb=Ia.langs={};Ia.datepickerLang=function(b,c,d){var e=jb[b]||(jb[b]={});e.isRTL=d.isRTL,e.weekNumberTitle=d.weekHeader,a.each(kb,function(a,b){e[a]=b(d)}),a.datepicker&&(a.datepicker.regional[c]=a.datepicker.regional[b]=d,a.datepicker.regional.en=a.datepicker.regional[""],a.datepicker.setDefaults(d))},Ia.lang=function(b,d){var e,f;e=jb[b]||(jb[b]={}),d&&(e=jb[b]=c(e,d)),f=Ea(b),a.each(lb,function(a,b){null==e[a]&&(e[a]=b(f,e))}),ib.defaults.lang=b};var kb={buttonText:function(a){return{prev:R(a.prevText),next:R(a.nextText),today:R(a.currentText)}},monthYearFormat:function(a){return a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"}},lb={dayOfMonthFormat:function(a,b){var c=a.longDateFormat("l");return c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),b.isRTL?c+=" ddd":c="ddd "+c,c},mediumTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(a){return a.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"")}},mb={smallDayDateFormat:function(a){return a.isRTL?"D dd":"dd D"},weekFormat:function(a){return a.isRTL?"w[ "+a.weekNumberTitle+"]":"["+a.weekNumberTitle+" ]w"},smallWeekFormat:function(a){return a.isRTL?"w["+a.weekNumberTitle+"]":"["+a.weekNumberTitle+"]w"}};Ia.lang("en",ib.englishDefaults),Ia.sourceNormalizers=[],Ia.sourceFetchers=[];var nb={dataType:"json",cache:!1},ob=1;ib.prototype.getPeerEvents=function(a){var b,c,d=this.getEventCache(),e=[];for(b=0;d.length>b;b++)c=d[b],a&&a._id===c._id||e.push(c);return e};var pb=Ja.basic=hb.extend({dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new fb(this),this.coordMap=this.dayGrid.coordMap},setRange:function(a){hb.prototype.setRange.call(this,a),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(a)},computeRange:function(a){var b=hb.prototype.computeRange.call(this,a);return/year|month/.test(b.intervalUnit)&&(b.start.startOf("week"),b.start=this.skipHiddenDays(b.start),b.end.weekday()&&(b.end.add(1,"week").startOf("week"),b.end=this.skipHiddenDays(b.end,-1,!0))),b},render:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(this.hasRigidRows())},destroy:function(){this.dayGrid.destroyDates(),this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){return this.weekNumbersVisible?'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+Q(this.opt("weekNumberTitle"))+"</span></th>":void 0},numberIntroHtml:function(a){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.dayGrid.getCell(a,0).start.format("w")+"</span></td>":void 0},dayIntroHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>":void 0},introHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>":void 0},numberCellHtml:function(a){var b,c=a.start;return this.dayNumbersVisible?(b=this.dayGrid.getDayClasses(c),b.unshift("fc-day-number"),'<td class="'+b.join(" ")+'" data-date="'+c.format()+'">'+c.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!=typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=k(this.el.find(".fc-week-number")))},setHeight:function(a,b){var c,d=this.opt("eventLimit");m(this.scrollerEl),f(this.headRowEl),this.dayGrid.destroySegPopover(),d&&"number"==typeof d&&this.dayGrid.limitRows(d),c=this.computeScrollerHeight(a),this.setGridHeight(c,b),d&&"number"!=typeof d&&this.dayGrid.limitRows(d),!b&&l(this.scrollerEl,c)&&(e(this.headRowEl,r(this.scrollerEl)),c=this.computeScrollerHeight(a),this.scrollerEl.height(c))},setGridHeight:function(a,b){b?j(this.dayGrid.rowEls):i(this.dayGrid.rowEls,a,!0)},renderEvents:function(a){this.dayGrid.renderEvents(a),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.dayGrid.destroyEvents()},renderDrag:function(a,b){return this.dayGrid.renderDrag(a,b)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(a){this.dayGrid.renderSelection(a)},destroySelection:function(){this.dayGrid.destroySelection()}}),qb=Ja.month=pb.extend({computeRange:function(a){var b,c=pb.prototype.computeRange.call(this,a);return this.isFixedWeeks()&&(b=Math.ceil(c.end.diff(c.start,"weeks",!0)),c.end.add(6-b,"weeks")),c},setGridHeight:function(a,b){b=b||"variable"===this.opt("weekMode"),b&&(a*=this.rowCnt/6),i(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}});qb.duration={months:1},qb.defaults={fixedWeekCount:!0},Ja.basicWeek={type:"basic",duration:{weeks:1}},Ja.basicDay={type:"basic",duration:{days:1}};var rb={allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0},sb=5,tb=Ja.agenda=hb.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new gb(this),this.opt("allDaySlot")?(this.dayGrid=new fb(this),this.coordMap=new _a([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(a){hb.prototype.setRange.call(this,a),this.timeGrid.setRange(a),this.dayGrid&&this.dayGrid.setRange(a)},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.setElement(this.el.find(".fc-time-grid")),this.timeGrid.renderDates(),this.bottomRuleEl=a('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroyDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.destroyDates(),this.dayGrid.removeElement())},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var a,b;return this.opt("weekNumbers")?(a=this.timeGrid.getCell(0).start,b=a.format(this.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+Q(b)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||Q(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(a){this.timeGrid.updateSize(a),hb.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=k(this.el.find(".fc-axis"))},setHeight:function(a,b){var c,d;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),m(this.scrollerEl),f(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),c=this.opt("eventLimit"),c&&"number"!=typeof c&&(c=sb),c&&this.dayGrid.limitRows(c)),b||(d=this.computeScrollerHeight(a),l(this.scrollerEl,d)?(e(this.noScrollRowEls,r(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d)):(this.scrollerEl.height(d).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var a=b.duration(this.opt("scrollTime")),c=this.timeGrid.computeTimeTop(a);return c=Math.ceil(c),c&&c++,c},renderEvents:function(a){var b,c,d=[],e=[],f=[];for(c=0;a.length>c;c++)a[c].allDay?d.push(a[c]):e.push(a[c]);b=this.timeGrid.renderEvents(e),this.dayGrid&&(f=this.dayGrid.renderEvents(d)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(a,b){return a.start.hasTime()?this.timeGrid.renderDrag(a,b):this.dayGrid?this.dayGrid.renderDrag(a,b):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(a){a.start.hasTime()||a.end.hasTime()?this.timeGrid.renderSelection(a):this.dayGrid&&this.dayGrid.renderSelection(a)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}});return tb.defaults=rb,Ja.agendaWeek={type:"agenda",duration:{weeks:1}},Ja.agendaDay={type:"agenda",duration:{days:1}},Ia}),angular.module("ui.calendar",[]).constant("uiCalendarConfig",{calendars:{}}).controller("uiCalendarCtrl",["$scope","$locale",function(a,b){var c=a.eventSources,d=a.calendarWatchEvent?a.calendarWatchEvent:angular.noop,e=function(b){return function(){if(a.$root.$$phase)return b.apply(this,arguments);var c=arguments,d=this;return a.$root.$apply(function(){return b.apply(d,c)})}},f=1;this.eventFingerprint=function(a){return a._id||(a._id=f++),""+a._id+(a.id||"")+(a.title||"")+(a.url||"")+(+a.start||"")+(+a.end||"")+(a.allDay||"")+(a.className||"")+d({event:a})||""};var g=1,h=1;this.sourceFingerprint=function(a){var b=""+(a.__id||(a.__id=g++)),c=angular.isObject(a)&&a.events;return c&&(b=b+"-"+(c.__id||(c.__id=h++))),b},this.allEvents=function(){for(var a=[],b=0,d=c.length;d>b;b++){var e=c[b];if(angular.isArray(e))a.push(e);else if(angular.isObject(e)&&angular.isArray(e.events)){var f={};for(var g in e)"_id"!==g&&"events"!==g&&(f[g]=e[g]);for(var h=0;h<e.events.length;h++)angular.extend(e.events[h],f);a.push(e.events)}}return Array.prototype.concat.apply([],a)},this.changeWatcher=function(a,b){var c,d=function(){for(var c,d,e=angular.isFunction(a)?a():a,g=[],h=0,i=e.length;i>h;h++)d=e[h],c=b(d),f[c]=d,g.push(c);return g},e=function(a,b){var c,d,e=[],f={};for(c=0,d=b.length;d>c;c++)f[b[c]]=!0;for(c=0,d=a.length;d>c;c++)f[a[c]]||e.push(a[c]);return e},f={},g=function(a,d){var g,h,i,j,k={},l=e(d,a);for(g=0,h=l.length;h>g;g++){var m=l[g];i=f[m],delete f[m];var n=b(i);n===m?c.onRemoved(i):(k[n]=m,c.onChanged(i))}var o=e(a,d);for(g=0,h=o.length;h>g;g++)j=o[g],i=f[j],k[j]||c.onAdded(i)};return c={subscribe:function(a,b){a.$watch(d,function(a,c){var d=!(b&&b(a,c)===!1);d&&g(a,c)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(a,b){var c={};return angular.extend(c,b),angular.extend(c,a),angular.forEach(c,function(a,b){"function"==typeof a&&(c[b]=e(c[b]))}),c},this.getLocaleConfig=function(a){if(!a.lang||a.useNgLocale){var c=function(a){var b,c;b=[];for(c in a)b[c]=a[c];return b},d=b.DATETIME_FORMATS;return{monthNames:c(d.MONTH),monthNamesShort:c(d.SHORTMONTH),dayNames:c(d.DAY),dayNamesShort:c(d.SHORTDAY)}}return{}}}]).directive("uiCalendar",["uiCalendarConfig",function(a){return{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&"},controller:"uiCalendarCtrl",link:function(b,c,d,e){function f(){var c,f=d.uiCalendar?b.$parent.$eval(d.uiCalendar):{};c=e.getFullCalendarConfig(f,a);var g=e.getLocaleConfig(c);angular.extend(g,c),l={eventSources:h},angular.extend(l,g),l.calendars=null;var i={};for(var j in l)"eventSources"!==j&&(i[j]=l[j]);return JSON.stringify(i)}var g,h=b.eventSources,i=!1,j=e.changeWatcher(h,e.sourceFingerprint),k=e.changeWatcher(e.allEvents,e.eventFingerprint),l=null;b.destroy=function(){g&&g.fullCalendar&&g.fullCalendar("destroy"),g=d.calendar?a.calendars[d.calendar]=$(c).html(""):$(c).html("")},b.init=function(){g.fullCalendar(l),d.calendar&&(a.calendars[d.calendar]=g)},j.onAdded=function(a){g.fullCalendar("addEventSource",a),i=!0},j.onRemoved=function(a){g.fullCalendar("removeEventSource",a),i=!0},j.onChanged=function(a){g.fullCalendar("refetchEvents"),i=!0},k.onAdded=function(a){g.fullCalendar("renderEvent",a,a.stick?!0:!1)},k.onRemoved=function(a){g.fullCalendar("removeEvents",a._id)},k.onChanged=function(a){for(var b=g.fullCalendar("clientEvents",a._id),c=0;c<b.length;c++){var d=b[c];d=angular.extend(d,a),g.fullCalendar("updateEvent",d)}},j.subscribe(b),k.subscribe(b,function(){return i===!0?(i=!1,!1):void 0}),b.$watch(f,function(a,c){b.destroy(),b.init()})}}}]),!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a){"use strict";var b=a.storageKey(),c=a.storage(),d=function(){var d=a.preferredLanguage();angular.isString(d)?a.use(d):c.put(b,a.use())};d.displayName="fallbackFromIncorrectStorageValue",c?c.get(b)?a.use(c.get(b))["catch"](d):d():angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}function b(){"use strict";var a,b,c=null,d=!1,e=!1;b={sanitize:function(a,b){return"text"===b&&(a=g(a)),a},escape:function(a,b){return"text"===b&&(a=f(a)),a},sanitizeParameters:function(a,b){return"params"===b&&(a=h(a,g)),a},escapeParameters:function(a,b){return"params"===b&&(a=h(a,f)),a}},b.escaped=b.escapeParameters,this.addStrategy=function(a,c){return b[a]=c,this},this.removeStrategy=function(a){return delete b[a],this},this.useStrategy=function(a){return d=!0,c=a,this},this.$get=["$injector","$log",function(f,g){var h={},i=function(a,c,d){return angular.forEach(d,function(d){if(angular.isFunction(d))a=d(a,c);else if(angular.isFunction(b[d]))a=b[d](a,c);else{if(!angular.isString(b[d]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+d+"'");if(!h[b[d]])try{h[b[d]]=f.get(b[d])}catch(e){throw h[b[d]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+d+"'")}a=h[b[d]](a,c)}}),a},j=function(){d||e||(g.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),e=!0)};return f.has("$sanitize")&&(a=f.get("$sanitize")),{useStrategy:function(a){return function(b){a.useStrategy(b)}}(this),sanitize:function(a,b,d){if(c||j(),arguments.length<3&&(d=c),!d)return a;var e=angular.isArray(d)?d:[d];return i(a,b,e)}}}];var f=function(a){var b=angular.element("<div></div>");return b.text(a),b.html()},g=function(b){if(!a)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return a(b)},h=function(a,b){if(angular.isObject(a)){var c=angular.isArray(a)?[]:{};return angular.forEach(a,function(a,d){c[d]=h(a,b)}),c}return angular.isNumber(a)?a:b(a)}}function c(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={},u=[],v=a,w=[],x="translate-cloak",y=!1,z=!1,A=".",B=!1,C=0,D=!0,E="default",F={"default":function(a){return(a||"").split("-").join("_")},java:function(a){var b=(a||"").split("-").join("_"),c=b.split("_");return c.length>1?c[0].toLowerCase()+"_"+c[1].toUpperCase():b},bcp47:function(a){var b=(a||"").split("_").join("-"),c=b.split("-");return c.length>1?c[0].toLowerCase()+"-"+c[1].toUpperCase():b}},G="2.9.0",H=function(){if(angular.isFunction(d.getLocale))return d.getLocale();var a,c,e=b.$get().navigator,f=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(e.languages))for(a=0;a<e.languages.length;a++)if(c=e.languages[a],c&&c.length)return c;for(a=0;a<f.length;a++)if(c=e[f[a]],c&&c.length)return c;return null};H.displayName="angular-translate/service: getFirstBrowserLanguage";var I=function(){var a=H()||"";return F[E]&&(a=F[E](a)),a};I.displayName="angular-translate/service: getLocale";var J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K=function(){return this.toString().replace(/^\s+|\s+$/g,"")},L=function(a){if(a){for(var b=[],c=angular.lowercase(a),d=0,e=u.length;e>d;d++)b.push(angular.lowercase(u[d]));if(J(b,c)>-1)return a;if(f){var g;for(var h in f){var i=!1,j=Object.prototype.hasOwnProperty.call(f,h)&&angular.lowercase(h)===angular.lowercase(a);if("*"===h.slice(-1)&&(i=h.slice(0,-1)===a.slice(0,h.length-1)),(j||i)&&(g=f[h],J(b,angular.lowercase(g))>-1))return g}}var k=a.split("_");return k.length>1&&J(b,angular.lowercase(k[0]))>-1?k[0]:void 0}},M=function(a,b){if(!a&&!b)return t;if(a&&!b){if(angular.isString(a))return t[a]}else angular.isObject(t[a])||(t[a]={}),angular.extend(t[a],N(b));return this};this.translations=M,this.cloakClassName=function(a){return a?(x=a,this):x},this.nestedObjectDelimeter=function(a){return a?(A=a,this):A};var N=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(h=a[e],angular.isObject(h)?N(h,b.concat(e),c,e):(f=b.length?""+b.join(A)+A+e:e,b.length&&e===d&&(g=""+b.join(A),c[g]="@:"+f),c[f]=h));return c};N.displayName="flatObject",this.addInterpolation=function(a){return w.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return n=a,this},this.useSanitizeValueStrategy=function(a){return c.useStrategy(a),this},this.preferredLanguage=function(a){return a?(O(a),this):e};var O=function(a){return a&&(e=a),e};this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(q=a,this):q},this.translationNotFoundIndicatorRight=function(a){return a?(r=a,this):r},this.fallbackLanguage=function(a){return P(a),this};var P=function(a){return a?(angular.isString(a)?(h=!0,g=[a]):angular.isArray(a)&&(h=!1,g=a),angular.isString(e)&&J(g,e)<0&&g.push(e),this):h?g[0]:g};this.use=function(a){if(a){if(!t[a]&&!o)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return i=a,this}return i};var Q=function(a){return a?(v=a,this):l?l+v:v};this.storageKey=Q,this.useUrlLoader=function(a,b){return this.useLoader("$translateUrlLoader",angular.extend({url:a},b))},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return o=a,p=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return k=a,this},this.storagePrefix=function(a){return a?(l=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return m=a,this},this.usePostCompiling=function(a){return y=!!a,this},this.forceAsyncReload=function(a){return z=!!a,this},this.uniformLanguageTag=function(a){return a?angular.isString(a)&&(a={standard:a}):a={},E=a.standard,this},this.determinePreferredLanguage=function(a){var b=a&&angular.isFunction(a)?a():I();return e=u.length?L(b)||b:b,this},this.registerAvailableLanguageKeys=function(a,b){return a?(u=a,b&&(f=b),this):u},this.useLoaderCache=function(a){return a===!1?s=void 0:a===!0?s=!0:"undefined"==typeof a?s="$translationCache":a&&(s=a),this},this.directivePriority=function(a){return void 0===a?C:(C=a,this)},this.statefulFilter=function(a){return void 0===a?D:(D=a,this)},this.$get=["$log","$injector","$rootScope","$q",function(a,b,c,d){var f,l,u,E=b.get(n||"$translateDefaultInterpolation"),F=!1,H={},I={},R=function(a,b,c,h,j){var m=j&&j!==i?L(j)||j:i;if(angular.isArray(a)){var n=function(a){for(var e={},f=[],g=function(a){var f=d.defer(),g=function(b){e[a]=b,f.resolve([a,b])};return R(a,b,c,h,j).then(g,g),f.promise},i=0,k=a.length;k>i;i++)f.push(g(a[i]));return d.all(f).then(function(){return e})};return n(a)}var o=d.defer();a&&(a=K.apply(a));var p=function(){var a=e?I[e]:I[m];if(l=0,k&&!a){var b=f.get(v);if(a=I[b],g&&g.length){var c=J(g,b);l=0===c?1:0,J(g,e)<0&&g.push(e)}}return a}();if(p){var q=function(){j||(m=i),ca(a,b,c,h,m).then(o.resolve,o.reject)};q.displayName="promiseResolved",p["finally"](q,o.reject)}else ca(a,b,c,h,m).then(o.resolve,o.reject);return o.promise},S=function(a){return q&&(a=[q,a].join(" ")),r&&(a=[a,r].join(" ")),a},T=function(a){i=a,k&&f.put(R.storageKey(),i),c.$emit("$translateChangeSuccess",{language:a}),E.setLocale(i);var b=function(a,b){H[b].setLocale(i)};b.displayName="eachInterpolatorLocaleSetter",angular.forEach(H,b),c.$emit("$translateChangeEnd",{language:a})},U=function(a){if(!a)throw"No language key specified for loading.";var e=d.defer();c.$emit("$translateLoadingStart",{language:a}),F=!0;var f=s;"string"==typeof f&&(f=b.get(f));var g=angular.extend({},p,{key:a,$http:angular.extend({},{cache:f},p.$http)}),h=function(b){var d={};c.$emit("$translateLoadingSuccess",{language:a}),angular.isArray(b)?angular.forEach(b,function(a){angular.extend(d,N(a))}):angular.extend(d,N(b)),F=!1,e.resolve({key:a,table:d}),c.$emit("$translateLoadingEnd",{language:a})};h.displayName="onLoaderSuccess";var i=function(a){c.$emit("$translateLoadingError",{language:a}),e.reject(a),c.$emit("$translateLoadingEnd",{language:a})};return i.displayName="onLoaderError",b.get(o)(g).then(h,i),e.promise};if(k&&(f=b.get(k),!f.get||!f.put))throw new Error("Couldn't use storage '"+k+"', missing get() or put() method!");if(w.length){var V=function(a){var c=b.get(a);c.setLocale(e||i),H[c.getInterpolationIdentifier()]=c};V.displayName="interpolationFactoryAdder",angular.forEach(w,V)}var W=function(a){var b=d.defer();if(Object.prototype.hasOwnProperty.call(t,a))b.resolve(t[a]);else if(I[a]){var c=function(a){M(a.key,a.table),b.resolve(a.table)};c.displayName="translationTableResolver",I[a].then(c,b.reject)}else b.reject();return b.promise},X=function(a,b,c,e){var f=d.defer(),g=function(d){if(Object.prototype.hasOwnProperty.call(d,b)){e.setLocale(a);var g=d[b];"@:"===g.substr(0,2)?X(a,g.substr(2),c,e).then(f.resolve,f.reject):f.resolve(e.interpolate(d[b],c)),e.setLocale(i)}else f.reject()};return g.displayName="fallbackTranslationResolver",W(a).then(g,f.reject),f.promise},Y=function(a,b,c,d){var e,f=t[a];if(f&&Object.prototype.hasOwnProperty.call(f,b)){if(d.setLocale(a),e=d.interpolate(f[b],c),"@:"===e.substr(0,2))return Y(a,e.substr(2),c,d);d.setLocale(i)}return e},Z=function(a,c){if(m){var d=b.get(m)(a,i,c);return void 0!==d?d:a}return a},$=function(a,b,c,e,f){var h=d.defer();if(a<g.length){var i=g[a];X(i,b,c,e).then(h.resolve,function(){$(a+1,b,c,e,f).then(h.resolve)})}else f?h.resolve(f):h.resolve(Z(b,c));return h.promise},_=function(a,b,c,d){var e;if(a<g.length){var f=g[a];e=Y(f,b,c,d),e||(e=_(a+1,b,c,d))}return e},aa=function(a,b,c,d){return $(u>0?u:l,a,b,c,d)},ba=function(a,b,c){return _(u>0?u:l,a,b,c)},ca=function(a,b,c,e,f){var h=d.defer(),i=f?t[f]:t,j=c?H[c]:E;if(i&&Object.prototype.hasOwnProperty.call(i,a)){var k=i[a];"@:"===k.substr(0,2)?R(k.substr(2),b,c,e,f).then(h.resolve,h.reject):h.resolve(j.interpolate(k,b))}else{var l;m&&!F&&(l=Z(a,b)),f&&g&&g.length?aa(a,b,j,e).then(function(a){h.resolve(a)},function(a){h.reject(S(a))}):m&&!F&&l?e?h.resolve(e):h.resolve(l):e?h.resolve(e):h.reject(S(a))}return h.promise},da=function(a,b,c,d){var e,f=d?t[d]:t,h=E;if(H&&Object.prototype.hasOwnProperty.call(H,c)&&(h=H[c]),f&&Object.prototype.hasOwnProperty.call(f,a)){var i=f[a];e="@:"===i.substr(0,2)?da(i.substr(2),b,c,d):h.interpolate(i,b)}else{var j;m&&!F&&(j=Z(a,b)),d&&g&&g.length?(l=0,e=ba(a,b,h)):e=m&&!F&&j?j:S(a)}return e},ea=function(a){j===a&&(j=void 0),I[a]=void 0};R.preferredLanguage=function(a){return a&&O(a),e},R.cloakClassName=function(){return x},R.nestedObjectDelimeter=function(){return A},R.fallbackLanguage=function(a){if(void 0!==a&&null!==a){if(P(a),o&&g&&g.length)for(var b=0,c=g.length;c>b;b++)I[g[b]]||(I[g[b]]=U(g[b]));R.use(R.use())}return h?g[0]:g},R.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=J(g,a);b>-1&&(u=b)}else u=0},R.proposedLanguage=function(){return j},R.storage=function(){return f},R.negotiateLocale=L,R.use=function(a){if(!a)return i;var b=d.defer();c.$emit("$translateChangeStart",{language:a});var e=L(a);return e&&(a=e),!z&&t[a]||!o||I[a]?j===a&&I[a]?I[a].then(function(a){return b.resolve(a.key),a},function(a){return b.reject(a),d.reject(a)}):(b.resolve(a),T(a)):(j=a,I[a]=U(a).then(function(c){return M(c.key,c.table),b.resolve(c.key),j===a&&T(c.key),c},function(a){return c.$emit("$translateChangeError",{language:a}),b.reject(a),c.$emit("$translateChangeEnd",{language:a}),d.reject(a)}),I[a]["finally"](function(){ea(a)})),b.promise},R.storageKey=function(){return Q()},R.isPostCompilingEnabled=function(){return y},R.isForceAsyncReloadEnabled=function(){return z},R.refresh=function(a){function b(){f.resolve(),c.$emit("$translateRefreshEnd",{language:a})}function e(){f.reject(),c.$emit("$translateRefreshEnd",{language:a})}if(!o)throw new Error("Couldn't refresh translation table, no loader registered!");var f=d.defer();if(c.$emit("$translateRefreshStart",{language:a}),a)if(t[a]){var h=function(c){M(c.key,c.table),a===i&&T(i),b()};h.displayName="refreshPostProcessor",U(a).then(h,e)}else e();else{var j=[],k={};if(g&&g.length)for(var l=0,m=g.length;m>l;l++)j.push(U(g[l])),k[g[l]]=!0;i&&!k[i]&&j.push(U(i));var n=function(a){t={},angular.forEach(a,function(a){M(a.key,a.table)}),i&&T(i),b()};n.displayName="refreshPostProcessor",d.all(j).then(n,e)}return f.promise},R.instant=function(a,b,c,d){var f=d&&d!==i?L(d)||d:i;if(null===a||angular.isUndefined(a))return a;if(angular.isArray(a)){for(var h={},j=0,k=a.length;k>j;j++)h[a[j]]=R.instant(a[j],b,c,d);return h}if(angular.isString(a)&&a.length<1)return a;a&&(a=K.apply(a));var l,n=[];e&&n.push(e),f&&n.push(f),g&&g.length&&(n=n.concat(g));for(var o=0,p=n.length;p>o;o++){var s=n[o];if(t[s]&&"undefined"!=typeof t[s][a]&&(l=da(a,b,c,f)),"undefined"!=typeof l)break}return l||""===l||(q||r?l=S(a):(l=E.interpolate(a,b),m&&!F&&(l=Z(a,b)))),l},R.versionInfo=function(){return G},R.loaderCache=function(){return s},R.directivePriority=function(){return C},R.statefulFilter=function(){return D},R.isReady=function(){return B};var fa=d.defer();fa.promise.then(function(){B=!0}),R.onReady=function(a){var b=d.defer();return angular.isFunction(a)&&b.promise.then(a),B?b.resolve():fa.promise.then(b.resolve),b.promise};var ga=c.$on("$translateReady",function(){fa.resolve(),ga(),ga=null}),ha=c.$on("$translateChangeEnd",function(){fa.resolve(),ha(),ha=null});if(o){if(angular.equals(t,{})&&R.use()&&R.use(R.use()),g&&g.length)for(var ia=function(a){return M(a.key,a.table),c.$emit("$translateChangeEnd",{language:a.key}),a},ja=0,ka=g.length;ka>ja;ja++){var la=g[ja];(z||!t[la])&&(I[la]=U(la).then(ia))}}else c.$emit("$translateReady",{language:R.use()});return R}]}function d(a,b){"use strict";var c,d={},e="default";return d.setLocale=function(a){c=a},d.getInterpolationIdentifier=function(){return e},d.useSanitizeValueStrategy=function(a){return b.useStrategy(a),this},d.interpolate=function(c,d){d=d||{},d=b.sanitize(d,"params");var e=a(c)(d);return e=b.sanitize(e,"text")},d}function e(a,b,c,d,e,g){"use strict";var h=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:a.directivePriority(),compile:function(b,i){var j=i.translateValues?i.translateValues:void 0,k=i.translateInterpolation?i.translateInterpolation:void 0,l=b[0].outerHTML.match(/translate-value-+/i),m="^(.*)("+c.startSymbol()+".*"+c.endSymbol()+")(.*)",n="^(.*)"+c.startSymbol()+"(.*)"+c.endSymbol()+"(.*)";return function(b,o,p){b.interpolateParams={},
b.preText="",b.postText="",b.translateNamespace=f(b);var q={},r=function(a,c,d){if(c.translateValues&&angular.extend(a,e(c.translateValues)(b.$parent)),l)for(var f in d)if(Object.prototype.hasOwnProperty.call(c,f)&&"translateValue"===f.substr(0,14)&&"translateValues"!==f){var g=angular.lowercase(f.substr(14,1))+f.substr(15);a[g]=d[f]}},s=function(a){if(angular.isFunction(s._unwatchOld)&&(s._unwatchOld(),s._unwatchOld=void 0),angular.equals(a,"")||!angular.isDefined(a)){var d=h.apply(o.text()),e=d.match(m);if(angular.isArray(e)){b.preText=e[1],b.postText=e[3],q.translate=c(e[2])(b.$parent);var f=d.match(n);angular.isArray(f)&&f[2]&&f[2].length&&(s._unwatchOld=b.$watch(f[2],function(a){q.translate=a,y()}))}else q.translate=d?d:void 0}else q.translate=a;y()},t=function(a){p.$observe(a,function(b){q[a]=b,y()})};r(b.interpolateParams,p,i);var u=!0;p.$observe("translate",function(a){"undefined"==typeof a?s(""):""===a&&u||(q.translate=a,y()),u=!1});for(var v in p)p.hasOwnProperty(v)&&"translateAttr"===v.substr(0,13)&&t(v);if(p.$observe("translateDefault",function(a){b.defaultText=a,y()}),j&&p.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),l){var w=function(a){p.$observe(a,function(c){var d=angular.lowercase(a.substr(14,1))+a.substr(15);b.interpolateParams[d]=c})};for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&"translateValue"===x.substr(0,14)&&"translateValues"!==x&&w(x)}var y=function(){for(var a in q)q.hasOwnProperty(a)&&void 0!==q[a]&&z(a,q[a],b,b.interpolateParams,b.defaultText,b.translateNamespace)},z=function(b,c,d,e,f,g){c?(g&&"."===c.charAt(0)&&(c=g+c),a(c,e,k,f,d.translateLanguage).then(function(a){A(a,d,!0,b)},function(a){A(a,d,!1,b)})):A(c,d,!1,b)},A=function(b,c,e,f){if("translate"===f){e||"undefined"==typeof c.defaultText||(b=c.defaultText),o.empty().append(c.preText+b+c.postText);var g=a.isPostCompilingEnabled(),h="undefined"!=typeof i.translateCompile,j=h&&"false"!==i.translateCompile;(g&&!h||j)&&d(o.contents())(c)}else{e||"undefined"==typeof c.defaultText||(b=c.defaultText);var k=p.$attr[f];"data-"===k.substr(0,5)&&(k=k.substr(5)),k=k.substr(15),o.attr(k,b)}};(j||l||p.translateDefault)&&b.$watch("interpolateParams",y,!0),b.$watch("translateLanguage",y);var B=g.$on("$translateChangeSuccess",y);o.text().length?s(p.translate?p.translate:""):p.translate&&s(p.translate),y(),b.$on("$destroy",B)}}}}function f(a){"use strict";return a.translateNamespace?a.translateNamespace:a.$parent?f(a.$parent):void 0}function g(a,b){"use strict";return{compile:function(c){var d=function(){c.addClass(a.cloakClassName())},e=function(){c.removeClass(a.cloakClassName())};return a.onReady(function(){e()}),d(),function(c,f,g){g.translateCloak&&g.translateCloak.length&&(g.$observe("translateCloak",function(b){a(b).then(e,d)}),b.$on("$translateChangeSuccess",function(){a(g.translateCloak).then(e,d)}))}}}}function h(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(a,b,c){a.translateNamespace=f(a),a.translateNamespace&&"."===c.translateNamespace.charAt(0)?a.translateNamespace+=c.translateNamespace:a.translateNamespace=c.translateNamespace}}}}}function f(a){"use strict";return a.translateNamespace?a.translateNamespace:a.$parent?f(a.$parent):void 0}function i(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(a,b,c){c.$observe("translateLanguage",function(b){a.translateLanguage=b})}}}}function j(a,b){"use strict";var c=function(c,d,e,f){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e,f)};return b.statefulFilter()&&(c.$stateful=!0),c}function k(a){"use strict";return a("translations")}return angular.module("pascalprecht.translate",["ng"]).run(a),a.$inject=["$translate"],a.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",b),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",c),c.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],c.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",d),d.$inject=["$interpolate","$translateSanitization"],d.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",e),e.$inject=["$translate","$q","$interpolate","$compile","$parse","$rootScope"],e.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateCloak",g),g.$inject=["$translate","$rootScope"],g.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",h),h.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",i),i.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",j),j.$inject=["$parse","$translate"],j.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",k),k.$inject=["$cacheFactory"],k.displayName="$translationCache","pascalprecht.translate"}),!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a,b){"use strict";return function(c){if(!c||!(angular.isArray(c.files)||angular.isString(c.prefix)&&angular.isString(c.suffix)))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");c.files||(c.files=[{prefix:c.prefix,suffix:c.suffix}]);for(var d=function(d){if(!d||!angular.isString(d.prefix)||!angular.isString(d.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");return b(angular.extend({url:[d.prefix,c.key,d.suffix].join(""),method:"GET",params:""},c.$http)).then(function(a){return a.data},function(){return a.reject(c.key)})},e=[],f=c.files.length,g=0;f>g;g++)e.push(d({prefix:c.files[g].prefix,key:c.key,suffix:c.files[g].suffix}));return a.all(e).then(function(a){for(var b=a.length,c={},d=0;b>d;d++)for(var e in a[d])c[e]=a[d][e];return c})}}return angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",a),a.$inject=["$q","$http"],a.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),!function(){"use strict";var a={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,"delete":46,comma:188},b=9007199254740991,c=["text","email","url"],d=angular.module("ngTagsInput",[]);d.directive("tagsInput",["$timeout","$document","$window","tagsInputConfig","tiUtil",function(d,e,f,g,h){function i(a,b,c,d){var e,f,g,i={};return e=function(b){return h.safeToString(b[a.displayProperty])},f=function(b,c){b[a.displayProperty]=c},g=function(b){var d=e(b);return d&&d.length>=a.minLength&&d.length<=a.maxLength&&a.allowedTagsPattern.test(d)&&!h.findInObjectArray(i.items,b,a.keyProperty||a.displayProperty)&&c({$tag:b})},i.items=[],i.addText=function(a){var b={};return f(b,a),i.add(b)},i.add=function(c){var d=e(c);return a.replaceSpacesWithDashes&&(d=h.replaceSpacesWithDashes(d)),f(c,d),g(c)?(i.items.push(c),b.trigger("tag-added",{$tag:c})):d&&b.trigger("invalid-tag",{$tag:c}),c},i.remove=function(a){var c=i.items[a];return d({$tag:c})?(i.items.splice(a,1),i.clearSelection(),b.trigger("tag-removed",{$tag:c}),c):void 0},i.select=function(a){0>a?a=i.items.length-1:a>=i.items.length&&(a=0),i.index=a,i.selected=i.items[a]},i.selectPrior=function(){i.select(--i.index)},i.selectNext=function(){i.select(++i.index)},i.removeSelected=function(){return i.remove(i.index)},i.clearSelection=function(){i.selected=null,i.index=-1},i.clearSelection(),i}function j(a){return-1!==c.indexOf(a)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(a,c,d){a.events=h.simplePubSub(),g.load("tagsInput",a,c,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",j],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,b],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,b],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),a.tagList=new i(a.options,a.events,h.handleUndefinedResult(a.onTagAdding,!0),h.handleUndefinedResult(a.onTagRemoving,!0)),this.registerAutocomplete=function(){var b=d.find("input");return{addTag:function(b){return a.tagList.add(b)},focusInput:function(){b[0].focus()},getTags:function(){return a.tagList.items},getCurrentTagText:function(){return a.newTag.text()},getOptions:function(){return a.options},on:function(b,c){return a.events.on(b,c),this}}},this.registerTagItem=function(){return{getOptions:function(){return a.options},removeTag:function(b){a.disabled||a.tagList.remove(b)}}}}],link:function(b,c,g,i){var j,k=[a.enter,a.comma,a.space,a.backspace,a["delete"],a.left,a.right],l=b.tagList,m=b.events,n=b.options,o=c.find("input"),p=["minTags","maxTags","allowLeftoverText"];j=function(){i.$setValidity("maxTags",l.items.length<=n.maxTags),i.$setValidity("minTags",l.items.length>=n.minTags),i.$setValidity("leftoverText",b.hasFocus||n.allowLeftoverText?!0:!b.newTag.text())},i.$isEmpty=function(a){return!a||!a.length},b.newTag={text:function(a){return angular.isDefined(a)?(b.text=a,void m.trigger("input-change",a)):b.text||""},invalid:null},b.track=function(a){return a[n.keyProperty||n.displayProperty]},b.$watch("tags",function(a){a?(l.items=h.makeObjectArray(a,n.displayProperty),b.tags=l.items):l.items=[]}),b.$watch("tags.length",function(){j(),i.$validate()}),g.$observe("disabled",function(a){b.disabled=a}),b.eventHandlers={input:{keydown:function(a){m.trigger("input-keydown",a)},focus:function(){b.hasFocus||(b.hasFocus=!0,m.trigger("input-focus"))},blur:function(){d(function(){var a=e.prop("activeElement"),d=a===o[0],f=c[0].contains(a);(d||!f)&&(b.hasFocus=!1,m.trigger("input-blur"))})},paste:function(a){a.getTextData=function(){var b=a.clipboardData||a.originalEvent&&a.originalEvent.clipboardData;return b?b.getData("text/plain"):f.clipboardData.getData("Text")},m.trigger("input-paste",a)}},host:{click:function(){b.disabled||o[0].focus()}},tag:{click:function(a){m.trigger("tag-clicked",{$tag:a})}}},m.on("tag-added",b.onTagAdded).on("invalid-tag",b.onInvalidTag).on("tag-removed",b.onTagRemoved).on("tag-clicked",b.onTagClicked).on("tag-added",function(){b.newTag.text("")}).on("tag-added tag-removed",function(){b.tags=l.items,i.$setDirty()}).on("invalid-tag",function(){b.newTag.invalid=!0}).on("option-change",function(a){-1!==p.indexOf(a.name)&&j()}).on("input-change",function(){l.clearSelection(),b.newTag.invalid=null}).on("input-focus",function(){c.triggerHandler("focus"),i.$setValidity("leftoverText",!0)}).on("input-blur",function(){n.addOnBlur&&!n.addFromAutocompleteOnly&&l.addText(b.newTag.text()),c.triggerHandler("blur"),j()}).on("input-keydown",function(c){var d,e,f,g,i=c.keyCode,j={};if(!h.isModifierOn(c)&&-1!==k.indexOf(i)){if(j[a.enter]=n.addOnEnter,j[a.comma]=n.addOnComma,j[a.space]=n.addOnSpace,d=!n.addFromAutocompleteOnly&&j[i],e=(i===a.backspace||i===a["delete"])&&l.selected,g=i===a.backspace&&0===b.newTag.text().length&&n.enableEditingLastTag,f=(i===a.backspace||i===a.left||i===a.right)&&0===b.newTag.text().length&&!n.enableEditingLastTag,d)l.addText(b.newTag.text());else if(g){var m;l.selectPrior(),m=l.removeSelected(),m&&b.newTag.text(m[n.displayProperty])}else e?l.removeSelected():f&&(i===a.left||i===a.backspace?l.selectPrior():i===a.right&&l.selectNext());(d||f||e||g)&&c.preventDefault()}}).on("input-paste",function(a){if(n.addOnPaste){var b=a.getTextData(),c=b.split(n.pasteSplitPattern);c.length>1&&(c.forEach(function(a){l.addText(a)}),a.preventDefault())}})}}}]),d.directive("tiTagItem",["tiUtil",function(a){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(b,c,d,e){var f=e.registerTagItem(),g=f.getOptions();b.$$template=g.template,b.$$removeTagSymbol=g.removeTagSymbol,b.$getDisplayText=function(){return a.safeToString(b.data[g.displayProperty])},b.$removeTag=function(){f.removeTag(b.$index)},b.$watch("$parent.$index",function(a){b.$index=a})}}}]),d.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function(b,c,d,e,f,g){function h(a,b,c){var d,f,h,i={};return h=function(){return b.tagsInput.keyProperty||b.tagsInput.displayProperty},d=function(a,c){return a.filter(function(a){return!g.findInObjectArray(c,a,h(),function(a,c){return b.tagsInput.replaceSpacesWithDashes&&(a=g.replaceSpacesWithDashes(a),c=g.replaceSpacesWithDashes(c)),g.defaultComparer(a,c)})})},i.reset=function(){f=null,i.items=[],i.visible=!1,i.index=-1,i.selected=null,i.query=null},i.show=function(){b.selectFirstMatch?i.select(0):i.selected=null,i.visible=!0},i.load=g.debounce(function(c,j){i.query=c;var k=e.when(a({$query:c}));f=k,k.then(function(a){k===f&&(a=g.makeObjectArray(a.data||a,h()),a=d(a,j),i.items=a.slice(0,b.maxResultsToShow),i.items.length>0?i.show():i.reset())})},b.debounceDelay),i.selectNext=function(){i.select(++i.index)},i.selectPrior=function(){i.select(--i.index)},i.select=function(a){0>a?a=i.items.length-1:a>=i.items.length&&(a=0),i.index=a,i.selected=i.items[a],c.trigger("suggestion-selected",a)},i.reset(),i}function i(a,b){var c=a.find("li").eq(b),d=c.parent(),e=c.prop("offsetTop"),f=c.prop("offsetHeight"),g=d.prop("clientHeight"),h=d.prop("scrollTop");h>e?d.prop("scrollTop",e):e+f>g+h&&d.prop("scrollTop",e+f-g)}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function(a,b,c){a.events=g.simplePubSub(),f.load("autoComplete",a,c,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),a.suggestionList=new h(a.source,a.options,a.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return a.options},getQuery:function(){return a.suggestionList.query}}}}],link:function(b,c,d,e){var f,h=[a.enter,a.tab,a.escape,a.up,a.down],j=b.suggestionList,k=e.registerAutocomplete(),l=b.options,m=b.events;l.tagsInput=k.getOptions(),f=function(a){return a&&a.length>=l.minLength||!a&&l.loadOnEmpty},b.addSuggestionByIndex=function(a){j.select(a),b.addSuggestion()},b.addSuggestion=function(){var a=!1;return j.selected&&(k.addTag(angular.copy(j.selected)),j.reset(),k.focusInput(),a=!0),a},b.track=function(a){return a[l.tagsInput.keyProperty||l.tagsInput.displayProperty]},k.on("tag-added tag-removed invalid-tag input-blur",function(){j.reset()}).on("input-change",function(a){f(a)?j.load(a,k.getTags()):j.reset()}).on("input-focus",function(){var a=k.getCurrentTagText();l.loadOnFocus&&f(a)&&j.load(a,k.getTags())}).on("input-keydown",function(c){var d=c.keyCode,e=!1;return g.isModifierOn(c)||-1===h.indexOf(d)?void 0:(j.visible?d===a.down?(j.selectNext(),e=!0):d===a.up?(j.selectPrior(),e=!0):d===a.escape?(j.reset(),e=!0):(d===a.enter||d===a.tab)&&(e=b.addSuggestion()):d===a.down&&b.options.loadOnDownArrow&&(j.load(k.getCurrentTagText(),k.getTags()),e=!0),e?(c.preventDefault(),c.stopImmediatePropagation(),!1):void 0)}),m.on("suggestion-selected",function(a){i(c,a)})}}}]),d.directive("tiAutocompleteMatch",["$sce","tiUtil",function(a,b){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(c,d,e,f){var g=f.registerAutocompleteMatch(),h=g.getOptions();c.$$template=h.template,c.$index=c.$parent.$index,c.$highlight=function(c){return h.highlightMatchedText&&(c=b.safeHighlight(c,g.getQuery())),a.trustAsHtml(c)},c.$getDisplayText=function(){return b.safeToString(c.data[h.displayProperty||h.tagsInput.displayProperty])}}}}]),d.directive("tiTranscludeAppend",function(){return function(a,b,c,d,e){e(function(a){b.append(a)})}}),d.directive("tiAutosize",["tagsInputConfig",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f,g,h=a.getTextAutosizeThreshold();f=angular.element('<span class="input"></span>'),f.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),c.parent().append(f),g=function(a){var b,e=a;return angular.isString(e)&&0===e.length&&(e=d.placeholder),e&&(f.text(e),f.css("display",""),b=f.prop("offsetWidth"),f.css("display","none")),c.css("width",b?b+h+"px":""),a},e.$parsers.unshift(g),e.$formatters.unshift(g),d.$observe("placeholder",function(a){e.$modelValue||g(a)})}}}]),d.directive("tiBindAttrs",function(){return function(a,b,c){a.$watch(c.tiBindAttrs,function(a){angular.forEach(a,function(a,b){c.$set(b,a)})},!0)}}),d.provider("tagsInputConfig",function(){var a={},b={},c=3;this.setDefaults=function(b,c){return a[b]=c,this},this.setActiveInterpolation=function(a,c){return b[a]=c,this},this.setTextAutosizeThreshold=function(a){return c=a,this},this.$get=["$interpolate",function(d){var e={};return e[String]=function(a){return a},e[Number]=function(a){return parseInt(a,10)},e[Boolean]=function(a){return"true"===a.toLowerCase()},e[RegExp]=function(a){return new RegExp(a)},{load:function(c,f,g,h){var i=function(){return!0};f.options={},angular.forEach(h,function(h,j){var k,l,m,n,o,p;k=h[0],l=h[1],m=h[2]||i,n=e[k],o=function(){var b=a[c]&&a[c][j];return angular.isDefined(b)?b:l},p=function(a){f.options[j]=a&&m(a)?n(a):o()},b[c]&&b[c][j]?g.$observe(j,function(a){p(a),f.events.trigger("option-change",{name:j,newValue:a})}):p(g[j]&&d(g[j])(f.$parent))})},getTextAutosizeThreshold:function(){return c}}}]}),d.factory("tiUtil",["$timeout",function(a){var b={};return b.debounce=function(b,c){var d;return function(){var e=arguments;a.cancel(d),d=a(function(){b.apply(null,e)},c)}},b.makeObjectArray=function(a,b){if(!angular.isArray(a)||0===a.length||angular.isObject(a[0]))return a;var c=[];return a.forEach(function(a){var d={};d[b]=a,c.push(d)}),c},b.findInObjectArray=function(a,c,d,e){var f=null;return e=e||b.defaultComparer,a.some(function(a){return e(a[d],c[d])?(f=a,!0):void 0}),f},b.defaultComparer=function(a,c){return b.safeToString(a).toLowerCase()===b.safeToString(c).toLowerCase()},b.safeHighlight=function(a,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}if(!c)return a;a=b.encodeHTML(a),c=b.encodeHTML(c);var e=new RegExp("&[^;]+;|"+d(c),"gi");return a.replace(e,function(a){return a.toLowerCase()===c.toLowerCase()?"<em>"+a+"</em>":a})},b.safeToString=function(a){return angular.isUndefined(a)||null==a?"":a.toString().trim()},b.encodeHTML=function(a){return b.safeToString(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},b.handleUndefinedResult=function(a,b){return function(){var c=a.apply(null,arguments);return angular.isUndefined(c)?b:c}},b.replaceSpacesWithDashes=function(a){return b.safeToString(a).replace(/\s/g,"-")},b.isModifierOn=function(a){return a.shiftKey||a.ctrlKey||a.altKey||a.metaKey},b.simplePubSub=function(){var a={};return{on:function(b,c){return b.split(" ").forEach(function(b){a[b]||(a[b]=[]),a[b].push(c)}),this},trigger:function(c,d){var e=a[c]||[];return e.every(function(a){return b.handleUndefinedResult(a,!0)(d)}),this}}},b}]),d.run(["$templateCache",function(a){a.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item data="::tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),a.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),a.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match data="::item"></ti-autocomplete-match></li></ul></div>'),a.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}(),!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30,defaultCollapsed:!1})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodeScope=null,a.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(a,b){function c(a){var b,d,e,f=0,g=a.childNodes();if(!g||0===g.length)return 0;for(e=g.length-1;e>=0;e--)b=g[e],d=1+c(b),f=Math.max(f,d);return f}this.scope=a,a.$element=b,a.$modelValue=null,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$handleScope=null,a.$type="uiTreeNode",a.$$allowNodeDrop=!1,a.collapsed=!1,a.init=function(c){var d=c[0];a.$treeScope=c[1]?c[1].scope:null,a.$parentNodeScope=d.scope.$nodeScope,a.$modelValue=d.scope.$modelValue[a.$index],a.$parentNodesScope=d.scope,d.scope.initSubNode(a),b.on("$destroy",function(){d.scope.destroySubNode(a)})},a.index=function(){return a.$parentNodesScope.$modelValue.indexOf(a.$modelValue)},a.dragEnabled=function(){return!(a.$treeScope&&!a.$treeScope.dragEnabled)},a.isSibling=function(b){return a.$parentNodesScope==b.$parentNodesScope},a.isChild=function(b){var c=a.childNodes();return c&&c.indexOf(b)>-1},a.prev=function(){var b=a.index();return b>0?a.siblings()[b-1]:null},a.siblings=function(){return a.$parentNodesScope.childNodes()},a.childNodesCount=function(){return a.childNodes()?a.childNodes().length:0},a.hasChild=function(){return a.childNodesCount()>0},a.childNodes=function(){return a.$childNodesScope&&a.$childNodesScope.$modelValue?a.$childNodesScope.childNodes():null},a.accept=function(b,c){return a.$childNodesScope&&a.$childNodesScope.$modelValue&&a.$childNodesScope.accept(b,c)},a.remove=function(){return a.$parentNodesScope.removeNode(a)},a.toggle=function(){a.collapsed=!a.collapsed},a.collapse=function(){a.collapsed=!0},a.expand=function(){a.collapsed=!1},a.depth=function(){var b=a.$parentNodeScope;return b?b.depth()+1:1},a.maxSubDepth=function(){return a.$childNodesScope?c(a.$childNodesScope):0}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$modelValue=null,a.$nodeScope=null,a.$treeScope=null,a.$type="uiTreeNodes",a.$nodesMap={},a.nodropEnabled=!1,a.maxDepth=0,a.cloneEnabled=!1,a.initSubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=b):null},a.destroySubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=null):null},a.accept=function(b,c){return a.$treeScope.$callbacks.accept(b,a,c)},a.beforeDrag=function(b){return a.$treeScope.$callbacks.beforeDrag(b)},a.isParent=function(b){return b.$parentNodesScope==a},a.hasChild=function(){return a.$modelValue.length>0},a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},a.removeNode=function(b){var c=a.$modelValue.indexOf(b.$modelValue);return c>-1?(a.safeApply(function(){a.$modelValue.splice(c,1)[0]}),a.$treeScope.$callbacks.removed(b)):null},a.insertNode=function(b,c){a.safeApply(function(){a.$modelValue.splice(b,0,c)})},a.childNodes=function(){var b,c=[];if(a.$modelValue)for(b=0;b<a.$modelValue.length;b++)c.push(a.$nodesMap[a.$modelValue[b].$$hashKey]);return c},a.depth=function(){return a.$nodeScope?a.$nodeScope.depth():0},a.outOfDepth=function(b){var c=a.maxDepth||a.$treeScope.maxDepth;return c>0?a.depth()+b.maxSubDepth()+1>c:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodesScope=null,a.$type="uiTree",a.$emptyElm=null,a.$callbacks=null,a.dragEnabled=!0,a.emptyPlaceholderEnabled=!0,a.maxDepth=0,a.dragDelay=0,a.cloneEnabled=!1,a.nodropEnabled=!1,a.isEmpty=function(){return a.$nodesScope&&a.$nodesScope.$modelValue&&0===a.$nodesScope.$modelValue.length},a.place=function(b){a.$nodesScope.$element.append(b),a.$emptyElm.remove()},this.resetEmptyElement=function(){a.$nodesScope.$modelValue&&0!==a.$nodesScope.$modelValue.length||!a.emptyPlaceholderEnabled?a.$emptyElm.remove():b.append(a.$emptyElm)},a.resetEmptyElement=this.resetEmptyElement;var c=function(a,b){var d,e,f=a.childNodes();for(d=0;d<f.length;d++)b?f[d].collapse():f[d].expand(),e=f[d].$childNodesScope,e&&c(e,b)};a.collapseAll=function(){c(a.$nodesScope,!0)},a.expandAll=function(){c(a.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(a,b){return{restrict:"A",scope:!0,controller:"TreeController",link:function(c,d,e,f){var g,h,i,j={accept:null,beforeDrag:null},k={};angular.extend(k,a),k.treeClass&&d.addClass(k.treeClass),"table"===d.prop("tagName").toLowerCase()?(c.$emptyElm=angular.element(b.document.createElement("tr")),h=d.find("tr"),i=h.length>0?angular.element(h).children().length:1e6,g=angular.element(b.document.createElement("td")).attr("colspan",i),c.$emptyElm.append(g)):c.$emptyElm=angular.element(b.document.createElement("div")),k.emptyTreeClass&&c.$emptyElm.addClass(k.emptyTreeClass),c.$watch("$nodesScope.$modelValue.length",function(a){angular.isNumber(a)&&f.resetEmptyElement()},!0),c.$watch(e.dragEnabled,function(a){"boolean"==typeof a&&(c.dragEnabled=a)}),c.$watch(e.emptyPlaceholderEnabled,function(a){"boolean"==typeof a&&(c.emptyPlaceholderEnabled=a,f.resetEmptyElement())}),c.$watch(e.nodropEnabled,function(a){"boolean"==typeof a&&(c.nodropEnabled=a)}),c.$watch(e.cloneEnabled,function(a){"boolean"==typeof a&&(c.cloneEnabled=a)}),c.$watch(e.maxDepth,function(a){"number"==typeof a&&(c.maxDepth=a)}),c.$watch(e.dragDelay,function(a){"number"==typeof a&&(c.dragDelay=a)}),j.accept=function(a,b){return!(b.nodropEnabled||b.$treeScope.nodropEnabled||b.outOfDepth(a))},j.beforeDrag=function(){return!0},j.removed=function(){},j.dropped=function(){},j.dragStart=function(){},j.dragMove=function(){},j.dragStop=function(){},j.beforeDrop=function(){},c.$watch(e.uiTree,function(a){angular.forEach(a,function(a,b){j[b]&&"function"==typeof a&&(j[b]=a)}),c.$callbacks=j},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(a){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(b,c,d,e){var f={};angular.extend(f,a),f.handleClass&&c.addClass(f.handleClass),b!=e.scope&&(b.$nodeScope=e.scope,e.scope.$handleScope=b)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout","$q","$rootElement",function(a,b,c,d,e,f,g){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(h,i,j,k){var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H={},I="ontouchstart"in window,J=null,K=document.body,L=document.documentElement;angular.extend(H,a),H.nodeClass&&i.addClass(H.nodeClass),h.init(k),h.collapsed=!!b.getNodeAttribute(h,"collapsed")||a.defaultCollapsed,h.sourceOnly=h.nodropEnabled||h.$treeScope.nodropEnabled,h.$watch(j.collapsed,function(a){"boolean"==typeof a&&(h.collapsed=a)}),h.$watch("collapsed",function(a){b.setNodeAttribute(h,"collapsed",a),j.$set("collapsed",a)}),u=function(a){if((I||2!=a.button&&3!=a.which)&&!(a.uiTreeDragging||a.originalEvent&&a.originalEvent.uiTreeDragging)){var e,f,j,k,u,v=angular.element(a.target),w=v.scope(),x=i.clone();if(w&&w.$type&&!("uiTreeNode"!=w.$type&&"uiTreeHandle"!=w.$type||"uiTreeNode"==w.$type&&w.$handleScope||(e=v.prop("tagName").toLowerCase(),"input"==e||"textarea"==e||"button"==e||"select"==e))){for(;v&&v[0]&&v[0]!=i;){if(b.nodrag(v))return;v=v.parent()}h.beforeDrag(h)&&(a.uiTreeDragging=!0,a.originalEvent&&(a.originalEvent.uiTreeDragging=!0),a.preventDefault(),j=b.eventObj(a),l=!0,m=b.dragInfo(h),f=i.prop("tagName"),"tr"===f.toLowerCase()?(o=angular.element(c.document.createElement(f)),k=angular.element(c.document.createElement("td")).addClass(H.placeholderClass).attr("colspan",i[0].children.length),o.append(k)):o=angular.element(c.document.createElement(f)).addClass(H.placeholderClass),p=angular.element(c.document.createElement(f)),H.hiddenClass&&p.addClass(H.hiddenClass),n=b.positionStarted(j,i),o.css("height",b.height(i)+"px"),q=angular.element(c.document.createElement(h.$parentNodesScope.$element.prop("tagName"))).addClass(h.$parentNodesScope.$element.attr("class")).addClass(H.dragClass),q.css("width",b.width(i)+"px"),q.css("z-index",9999),u=(i[0].querySelector(".angular-ui-tree-handle")||i[0]).currentStyle,u&&(document.body.setAttribute("ui-tree-cursor",d.find("body").css("cursor")||""),d.find("body").css({cursor:u.cursor+"!important"})),h.sourceOnly&&o.css("display","none"),i.after(o),i.after(p),q.append(m.isClone()&&h.sourceOnly?x:i),g.append(q),q.css({left:j.pageX-n.offsetX+"px",top:j.pageY-n.offsetY+"px"}),r={placeholder:o,dragging:q},D(),h.$apply(function(){h.$treeScope.$callbacks.dragStart(m.eventArgs(r,n))}),s=Math.max(K.scrollHeight,K.offsetHeight,L.clientHeight,L.scrollHeight,L.offsetHeight),t=Math.max(K.scrollWidth,K.offsetWidth,L.clientWidth,L.scrollWidth,L.offsetWidth))}}},v=function(a){var d,e,f,g,i,j,k,p,u,v,w,x,y,z,A,B,C=b.eventObj(a);if(q){if(a.preventDefault(),c.getSelection?c.getSelection().removeAllRanges():c.document.selection&&c.document.selection.empty(),f=C.pageX-n.offsetX,g=C.pageY-n.offsetY,0>f&&(f=0),0>g&&(g=0),g+10>s&&(g=s-10),f+10>t&&(f=t-10),q.css({left:f+"px",top:g+"px"}),i=window.pageYOffset||c.document.documentElement.scrollTop,j=i+(window.innerHeight||c.document.clientHeight||c.document.clientHeight),j<C.pageY&&s>=j&&window.scrollBy(0,10),i>C.pageY&&window.scrollBy(0,-10),b.positionMoved(a,n,l),l)return void(l=!1);if(p=b.offset(q).left-b.offset(o).left>=H.threshold,u=C.pageX-(c.pageXOffset||c.document.body.scrollLeft||c.document.documentElement.scrollLeft)-(c.document.documentElement.clientLeft||0),
v=C.pageY-(c.pageYOffset||c.document.body.scrollTop||c.document.documentElement.scrollTop)-(c.document.documentElement.clientTop||0),angular.isFunction(q.hide)?q.hide():(w=q[0].style.display,q[0].style.display="none"),c.document.elementFromPoint(u,v),y=angular.element(c.document.elementFromPoint(u,v)),angular.isFunction(q.show)?q.show():q[0].style.display=w,G=!y.scope()||!y.scope().$type,G&&(o.remove(),J&&(J.resetEmptyElement(),J=null)),n.dirAx&&n.distAxX>=H.levelThreshold&&(n.distAxX=0,n.distX>0&&(d=m.prev(),d&&!d.collapsed&&d.accept(h,d.childNodesCount())&&(d.$childNodesScope.$element.append(o),m.moveTo(d.$childNodesScope,d.childNodes(),d.childNodesCount()))),n.distX<0&&(e=m.next(),e||(k=m.parentNode(),k&&k.$parentNodesScope.accept(h,k.index()+1)&&(k.$element.after(o),m.moveTo(k.$parentNodesScope,k.siblings(),k.index()+1))))),!n.dirAx){if(x=y.scope(),z=!1,!x)return;if(!x.$treeScope||x.$parent.nodropEnabled||x.$treeScope.nodropEnabled||o.css("display",""),"uiTree"==x.$type&&x.dragEnabled&&(z=x.isEmpty()),"uiTreeHandle"==x.$type&&(x=x.$nodeScope),"uiTreeNode"!=x.$type&&!z)return;J&&o.parent()[0]!=J.$element[0]&&(J.resetEmptyElement(),J=null),z?(J=x,x.$nodesScope.accept(h,0)&&(x.place(o),m.moveTo(x.$nodesScope,x.$nodesScope.childNodes(),0))):x.dragEnabled()&&(y=x.$element,A=b.offset(y),B=x.horizontal?C.pageX<A.left+b.width(y)/2:C.pageY<A.top+b.height(y)/2,x.$parentNodesScope.accept(h,x.index())?B?(y[0].parentNode.insertBefore(o[0],y[0]),m.moveTo(x.$parentNodesScope,x.siblings(),x.index())):(y.after(o),m.moveTo(x.$parentNodesScope,x.siblings(),x.index()+1)):!B&&x.accept(h,x.childNodesCount())?(x.$childNodesScope.$element.append(o),m.moveTo(x.$childNodesScope,x.childNodes(),x.childNodesCount())):G=!0)}h.$apply(function(){h.$treeScope.$callbacks.dragMove(m.eventArgs(r,n))})}},w=function(a){var b=m.eventArgs(r,n);a.preventDefault(),E(),h.$treeScope.$apply(function(){f.when(h.$treeScope.$callbacks.beforeDrop(b)).then(function(a){a!==!1&&h.$$allowNodeDrop&&!G?(m.apply(),h.$treeScope.$callbacks.dropped(b)):C()})["catch"](function(){C()})["finally"](function(){p.replaceWith(h.$element),o.remove(),q&&(q.remove(),q=null),h.$treeScope.$callbacks.dragStop(b),h.$$allowNodeDrop=!1,m=null;var a=document.body.getAttribute("ui-tree-cursor");null!==a&&(d.find("body").css({cursor:a}),document.body.removeAttribute("ui-tree-cursor"))})})},x=function(a){h.dragEnabled()&&u(a)},y=function(a){v(a)},z=function(a){h.$$allowNodeDrop=!0,w(a)},A=function(a){w(a)},B=function(){var a;return{exec:function(b,c){c||(c=0),this.cancel(),a=e(b,c)},cancel:function(){e.cancel(a)}}}(),C=function(){i.bind("touchstart mousedown",function(a){B.exec(function(){x(a)},h.dragDelay||0)}),i.bind("touchend touchcancel mouseup",function(){B.cancel()})},C(),D=function(){angular.element(d).bind("touchend",z),angular.element(d).bind("touchcancel",z),angular.element(d).bind("touchmove",y),angular.element(d).bind("mouseup",z),angular.element(d).bind("mousemove",y),angular.element(d).bind("mouseleave",A)},E=function(){angular.element(d).unbind("touchend",z),angular.element(d).unbind("touchcancel",z),angular.element(d).unbind("touchmove",y),angular.element(d).unbind("mouseup",z),angular.element(d).unbind("mousemove",y),angular.element(d).unbind("mouseleave",A)},F=function(a){27==a.keyCode&&(h.$$allowNodeDrop=!1,w(a))},angular.element(c.document).bind("keydown",F),h.$on("$destroy",function(){angular.element(c.document).unbind("keydown",F)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(a){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(b,c,d,e){var f={},g=e[0],h=e[1],i=e[2];angular.extend(f,a),f.nodesClass&&c.addClass(f.nodesClass),h?(h.scope.$childNodesScope=b,b.$nodeScope=h.scope):i.scope.$nodesScope=b,b.$treeScope=i.scope,g&&(g.$render=function(){b.$modelValue=g.$modelValue}),b.$watch(function(){return d.maxDepth},function(a){"number"==typeof a&&(b.maxDepth=a)}),b.$watch(function(){return d.nodropEnabled},function(a){"undefined"!=typeof a&&(b.nodropEnabled=!0)},!0),d.$observe("horizontal",function(a){b.horizontal="undefined"!=typeof a})}}}])}(),function(){"use strict";angular.module("ui.tree").factory("UiTreeHelper",["$document","$window",function(a,b){return{nodesData:{},setNodeAttribute:function(a,b,c){if(!a.$modelValue)return null;var d=this.nodesData[a.$modelValue.$$hashKey];d||(d={},this.nodesData[a.$modelValue.$$hashKey]=d),d[b]=c},getNodeAttribute:function(a,b){if(!a.$modelValue)return null;var c=this.nodesData[a.$modelValue.$$hashKey];return c?c[b]:null},nodrag:function(a){return"undefined"!=typeof a.attr("data-nodrag")?"false"!==a.attr("data-nodrag"):!1},eventObj:function(a){var b=a;return void 0!==a.targetTouches?b=a.targetTouches.item(0):void 0!==a.originalEvent&&void 0!==a.originalEvent.targetTouches&&(b=a.originalEvent.targetTouches.item(0)),b},dragInfo:function(a){return{source:a,sourceInfo:{cloneModel:a.$treeScope.cloneEnabled===!0?angular.copy(a.$modelValue):void 0,nodeScope:a,index:a.index(),nodesScope:a.$parentNodesScope},index:a.index(),siblings:a.siblings().slice(0),parent:a.$parentNodesScope,moveTo:function(a,b,c){this.parent=a,this.siblings=b.slice(0);var d=this.siblings.indexOf(this.source);d>-1&&(this.siblings.splice(d,1),this.source.index()<c&&c--),this.siblings.splice(c,0,this.source),this.index=c},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(a){return angular.copy(a)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(a,b){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:a,pos:b}},apply:function(){var a=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,this.sourceInfo.cloneModel):(this.source.remove(),this.parent.insertNode(this.index,a)))}}},height:function(a){return a.prop("scrollHeight")},width:function(a){return a.prop("scrollWidth")},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}},positionStarted:function(a,b){var c={},d=a.pageX,e=a.pageY;return a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length>0&&(d=a.originalEvent.touches[0].pageX,e=a.originalEvent.touches[0].pageY),c.offsetX=d-this.offset(b).left,c.offsetY=e-this.offset(b).top,c.startX=c.lastX=d,c.startY=c.lastY=e,c.nowX=c.nowY=c.distX=c.distY=c.dirAx=0,c.dirX=c.dirY=c.lastDirX=c.lastDirY=c.distAxX=c.distAxY=0,c},positionMoved:function(a,b,c){var d,e=a.pageX,f=a.pageY;return a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length>0&&(e=a.originalEvent.touches[0].pageX,f=a.originalEvent.touches[0].pageY),b.lastX=b.nowX,b.lastY=b.nowY,b.nowX=e,b.nowY=f,b.distX=b.nowX-b.lastX,b.distY=b.nowY-b.lastY,b.lastDirX=b.dirX,b.lastDirY=b.dirY,b.dirX=0===b.distX?0:b.distX>0?1:-1,b.dirY=0===b.distY?0:b.distY>0?1:-1,d=Math.abs(b.distX)>Math.abs(b.distY)?1:0,c?(b.dirAx=d,void(b.moving=!0)):(b.dirAx!==d?(b.distAxX=0,b.distAxY=0):(b.distAxX+=Math.abs(b.distX),0!==b.dirX&&b.dirX!==b.lastDirX&&(b.distAxX=0),b.distAxY+=Math.abs(b.distY),0!==b.dirY&&b.dirY!==b.lastDirY&&(b.distAxY=0)),void(b.dirAx=d))}}}])}(),angular.module("templates-angularwizard",["step.html","wizard.html"]),angular.module("step.html",[]).run(["$templateCache",function(a){a.put("step.html",'<section ng-show="selected" ng-class="{current: selected, done: completed}" class="step" ng-transclude>\n</section>')}]),angular.module("wizard.html",[]).run(["$templateCache",function(a){a.put("wizard.html",'<div>\n    <div class="steps" ng-transclude></div>\n    <ul class="steps-indicator steps-{{getEnabledSteps().length}}" ng-if="!hideIndicators">\n      <li ng-class="{default: !step.completed && !step.selected, current: step.selected && !step.completed, done: step.completed && !step.selected, editing: step.selected && step.completed}" ng-repeat="step in getEnabledSteps()">\n        <a ng-click="goTo(step)">{{step.title || step.wzTitle}}</a>\n      </li>\n    </ul>\n</div>\n')}]),angular.module("mgo-angular-wizard",["templates-angularwizard"]),angular.module("mgo-angular-wizard").directive("wzStep",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{wzTitle:"@",canenter:"=",canexit:"=",disabled:"@?wzDisabled",description:"@",wzData:"="},require:"^wizard",templateUrl:function(a,b){return b.template||"step.html"},link:function(a,b,c,d){a.title=a.wzTitle,d.addStep(a)}}}),angular.module("mgo-angular-wizard").directive("wizard",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{currentStep:"=",onFinish:"&",hideIndicators:"=",editMode:"=",name:"@"},templateUrl:function(a,b){return b.template||"wizard.html"},controller:["$scope","$element","$log","WizardHandler","$q",function(a,b,c,d,e){function f(b){var c,d;return void 0===b.canenter?!0:"boolean"==typeof b.canenter?b.canenter:(d=b.canenter(a.context),angular.isFunction(d.then)?(c=e.defer(),d.then(function(a){c.resolve(a)}),c.promise):d===!0)}function g(b,c){var d,f;return"undefined"==typeof b.canexit||a.getStepNumber(c)<a.currentStepNumber()?!0:"boolean"==typeof b.canexit?b.canexit:(f=b.canexit(a.context),angular.isFunction(f.then)?(d=e.defer(),f.then(function(a){d.resolve(a)}),d.promise):f===!0)}function h(){angular.forEach(a.getEnabledSteps(),function(a){a.selected=!1}),a.selectedStep=null}var i=!0;d.addWizard(a.name||d.defaultName,this),a.$on("$destroy",function(){d.removeWizard(a.name||d.defaultName)}),a.steps=[];var j=function(b){var c=0,d=-1;return angular.forEach(a.getEnabledSteps(),function(a){a===b&&(d=c),c++}),d},k=function(b){var c=null;return angular.forEach(a.getEnabledSteps(),function(a){a.wzTitle===b&&(c=a)}),c};a.context={},a.$watch("currentStep",function(b){if(b){var c=a.selectedStep.wzTitle;a.selectedStep&&c!==a.currentStep&&a.goTo(k(a.currentStep))}}),a.$watch("[editMode, steps.length]",function(){var b=a.editMode;if(!angular.isUndefined(b)&&null!==b)if(b)angular.forEach(a.getEnabledSteps(),function(a){a.completed=!0});else{var c=a.currentStepNumber()-1;angular.forEach(a.getEnabledSteps(),function(a,b){b>=c&&(a.completed=!1)})}},!0),this.addStep=function(b){a.steps.push(b),1===a.getEnabledSteps().length&&a.goTo(a.getEnabledSteps()[0])},this.context=a.context,a.getStepNumber=function(a){return j(a)+1},a.goTo=function(b){if(i)h(),a.selectedStep=b,angular.isUndefined(a.currentStep)||(a.currentStep=b.wzTitle),b.selected=!0,a.$emit("wizard:stepChanged",{step:b,index:j(b)}),i=!1;else{var c;a.currentStepNumber()>0?c=a.currentStepNumber()-1:0===a.currentStepNumber()&&(c=0),e.all([g(a.getEnabledSteps()[c],b),f(b)]).then(function(c){c[0]&&c[1]&&(h(),a.selectedStep=b,angular.isUndefined(a.currentStep)||(a.currentStep=b.wzTitle),b.selected=!0,a.$emit("wizard:stepChanged",{step:b,index:j(b)}))})}},a.currentStepNumber=function(){return j(a.selectedStep)+1},a.getEnabledSteps=function(){return a.steps.filter(function(a){return"true"!==a.disabled})},this.currentStepTitle=function(){return a.selectedStep.wzTitle},this.currentStepDescription=function(){return a.selectedStep.description},this.currentStep=function(){return a.selectedStep},this.totalStepCount=function(){return a.getEnabledSteps().length},this.getEnabledSteps=function(){return a.getEnabledSteps()},this.currentStepNumber=function(){return a.currentStepNumber()},this.next=function(b){var c=a.getEnabledSteps(),d=j(a.selectedStep);if(angular.isFunction(b)){if(!b())return;d===c.length-1?this.finish():a.goTo(c[d+1])}b||(a.selectedStep.completed=!0),d===c.length-1?this.finish():a.goTo(c[d+1])},this.goTo=function(b){var c,d=a.getEnabledSteps();c=angular.isNumber(b)?d[b]:k(b),a.goTo(c)},this.finish=function(){a.onFinish&&a.onFinish()},this.previous=function(){var b=j(a.selectedStep);if(0===b)throw new Error("Can't go back. It's already in step 0");a.goTo(a.getEnabledSteps()[b-1])},this.cancel=function(){var b=j(a.selectedStep);if(0===b)throw new Error("Can't go back. It's already in step 0");a.goTo(a.getEnabledSteps()[0])},this.reset=function(){angular.forEach(a.getEnabledSteps(),function(a){a.completed=!1}),this.goTo(0)}}]}}),wizardButtonDirective("wzNext"),wizardButtonDirective("wzPrevious"),wizardButtonDirective("wzFinish"),wizardButtonDirective("wzCancel"),wizardButtonDirective("wzReset"),angular.module("mgo-angular-wizard").factory("WizardHandler",function(){var a={},b={};return a.defaultName="defaultWizard",a.addWizard=function(a,c){b[a]=c},a.removeWizard=function(a){delete b[a]},a.wizard=function(c){var d=c;return c||(d=a.defaultName),b[d]},a}),function(a){a.fn.bootstrapFileInput=function(){this.each(function(b,c){var d=a(c);if("undefined"==typeof d.attr("data-bfi-disabled")){var e="Browse";"undefined"!=typeof d.attr("title")&&(e=d.attr("title"));var f="";d.attr("class")&&(f=" "+d.attr("class")),d.wrap('<a class="file-input-wrapper btn btn-default '+f+'"></a>').parent().prepend(a("<span></span>").html(e))}}).promise().done(function(){a(".file-input-wrapper").mousemove(function(b){var c,d,e,f,g,h,i,j;d=a(this),c=d.find("input"),e=d.offset().left,f=d.offset().top,g=c.width(),h=c.height(),i=b.pageX,j=b.pageY,moveInputX=i-e-g+20,moveInputY=j-f-h/2,c.css({left:moveInputX,top:moveInputY})}),a("body").on("change",".file-input-wrapper input[type=file]",function(){var b;b=a(this).val(),a(this).parent().next(".file-input-name").remove(),b=a(this).prop("files")&&a(this).prop("files").length>1?a(this)[0].files.length+" files":b.substring(b.lastIndexOf("\\")+1,b.length);var c=a(this).data("filename-placement")||"outside";"inside"===c?(a(this).siblings("span").html(b),a(this).attr("title",b)):"outside"===c&&a(this).parent().after('<span class="file-input-name">'+b+"</span>")})})};var b="<style>.file-input-wrapper { overflow: hidden; position: relative; cursor: pointer; z-index: 1; }.file-input-wrapper input[type=file], .file-input-wrapper input[type=file]:focus, .file-input-wrapper input[type=file]:hover { position: absolute; top: 0; left: 0; cursor: pointer; opacity: 0; filter: alpha(opacity=0); z-index: 99; outline: 0; }.file-input-name { margin-left: 8px; }</style>";a("link[rel=stylesheet]").eq(0).before(b)}(jQuery),!function(a,b,c){"use strict";function d(a){return{require:"?ngModel",restrict:"A",link:function(c,d,e,f){function g(){var a=h(c);return b.isObject(a)&&a.hasOwnProperty("$viewValue")&&(a=a.$viewValue),a}if(f){var h=a(e.match),i=a(e.matchCaseless),j=a(e.notMatch);c.$watch(g,function(){f.$$parseAndValidate()}),f.$validators.match=function(){var a,d=g(),e=j(c);return a=i(c)?b.lowercase(f.$viewValue)===b.lowercase(d):f.$viewValue===d,a^=e,!!a}}}}}b.module("validation.match",[]),b.module("validation.match").directive("match",d),d.$inject=["$parse"]}(window,window.angular),!function(a){var b,c;!function(){function a(a,b){if(!b)return a;if(0===a.indexOf(".")){var c=b.split("/"),d=a.split("/"),e=c.length-1,f=d.length,g=0,h=0;a:for(var i=0;f>i;i++)switch(d[i]){case"..":if(!(e>g))break a;g++,h++;break;case".":h++;break;default:break a}return c.length=e-g,d=d.slice(h),c.concat(d).join("/")}return a}function d(b){function c(c,g){if("string"==typeof c){var h=d[c];return h||(h=f(a(c,b)),d[c]=h),h}c instanceof Array&&(g=g||function(){},g.apply(this,e(c,g,b)))}var d={};return c}function e(c,d,e){for(var h=[],i=g[e],j=0,k=Math.min(c.length,d.length);k>j;j++){var l,m=a(c[j],e);switch(m){case"require":l=i&&i.require||b;break;case"exports":l=i.exports;break;case"module":l=i;break;default:l=f(m)}h.push(l)}return h}function f(a){var b=g[a];if(!b)throw new Error("No "+a);if(!b.defined){var c=b.factory,d=c.apply(this,e(b.deps||[],c,a));"undefined"!=typeof d&&(b.exports=d),b.defined=1}return b.exports}var g={};c=function(a,b,c){g[a]={id:a,deps:b,factory:c,defined:0,exports:{},require:d(a)}},b=d("")}(),c("echarts/chart/line",["require","./base","zrender/shape/Polyline","../util/shape/Icon","../util/shape/HalfSmoothPolygon","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(a){function b(a,b,c,e,f){d.call(this,a,b,c,e,f),this.refresh(e)}function c(a,b,c){var d=b.x,e=b.y,g=b.width,h=b.height,i=h/2;b.symbol.match("empty")&&(a.fillStyle="#fff"),b.brushType="both";var j=b.symbol.replace("empty","").toLowerCase();j.match("star")?(i=j.replace("star","")-0||5,e-=1,j="star"):("rectangle"===j||"arrow"===j)&&(d+=(g-h)/2,g=h);var k="";if(j.match("image")&&(k=j.replace(new RegExp("^image:\\/\\/"),""),j="image",d+=Math.round((g-h)/2)-1,g=h+=2),j=f.prototype.iconLibrary[j]){var l=b.x,m=b.y;a.moveTo(l,m+i),a.lineTo(l+5,m+i),a.moveTo(l+b.width-5,m+i),a.lineTo(l+b.width,m+i);var n=this;j(a,{x:d+4,y:e+4,width:g-8,height:h-8,n:i,image:k},function(){n.modSelf(),c()})}else a.moveTo(d,e+i),a.lineTo(d+g,e+i)}var d=a("./base"),e=a("zrender/shape/Polyline"),f=a("../util/shape/Icon"),g=a("../util/shape/HalfSmoothPolygon");a("../component/axis"),a("../component/grid"),a("../component/dataZoom");var h=a("../config");h.line={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,dataFilter:"nearest",itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid",shadowColor:"rgba(0,0,0,0)",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0}},emphasis:{label:{show:!1}}},symbolSize:2,showAllSymbol:!1};var i=a("../util/ecData"),j=a("zrender/tool/util"),k=a("zrender/tool/color");return b.prototype={type:h.CHART_TYPE_LINE,_buildShape:function(){this.finalPLMap={},this._buildPosition()},_buildHorizontal:function(a,b,c,d){for(var e,f,g,h,i,j,k,l,m,n=this.series,o=c[0][0],p=n[o],q=this.component.xAxis.getAxis(p.xAxisIndex||0),r={},s=0,t=b;t>s&&null!=q.getNameByIndex(s);s++){f=q.getCoordByIndex(s);for(var u=0,v=c.length;v>u;u++){e=this.component.yAxis.getAxis(n[c[u][0]].yAxisIndex||0),i=h=k=j=e.getCoord(0);for(var w=0,x=c[u].length;x>w;w++)o=c[u][w],p=n[o],l=p.data[s],m=this.getDataFromOption(l,"-"),r[o]=r[o]||[],d[o]=d[o]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==m?(m>=0?(h-=w>0?e.getCoordSize(m):i-e.getCoord(m),g=h):0>m&&(j+=w>0?e.getCoordSize(m):e.getCoord(m)-k,g=j),r[o].push([f,g,s,q.getNameByIndex(s),f,i]),d[o].min>m&&(d[o].min=m,d[o].minY=g,d[o].minX=f),d[o].max<m&&(d[o].max=m,d[o].maxY=g,d[o].maxX=f),d[o].sum+=m,d[o].counter++):r[o].length>0&&(this.finalPLMap[o]=this.finalPLMap[o]||[],this.finalPLMap[o].push(r[o]),r[o]=[])}h=this.component.grid.getY();for(var y,u=0,v=c.length;v>u;u++)for(var w=0,x=c[u].length;x>w;w++)o=c[u][w],p=n[o],l=p.data[s],m=this.getDataFromOption(l,"-"),"-"==m&&this.deepQuery([l,p,this.option],"calculable")&&(y=this.deepQuery([l,p],"symbolSize"),h+=2*y+5,g=h,this.shapeList.push(this._getCalculableItem(o,s,q.getNameByIndex(s),f,g,"horizontal")))}for(var z in r)r[z].length>0&&(this.finalPLMap[z]=this.finalPLMap[z]||[],this.finalPLMap[z].push(r[z]),r[z]=[]);this._calculMarkMapXY(d,c,"y"),this._buildBorkenLine(a,this.finalPLMap,q,"horizontal")},_buildVertical:function(a,b,c,d){for(var e,f,g,h,i,j,k,l,m,n=this.series,o=c[0][0],p=n[o],q=this.component.yAxis.getAxis(p.yAxisIndex||0),r={},s=0,t=b;t>s&&null!=q.getNameByIndex(s);s++){g=q.getCoordByIndex(s);for(var u=0,v=c.length;v>u;u++){e=this.component.xAxis.getAxis(n[c[u][0]].xAxisIndex||0),i=h=k=j=e.getCoord(0);for(var w=0,x=c[u].length;x>w;w++)o=c[u][w],p=n[o],l=p.data[s],m=this.getDataFromOption(l,"-"),r[o]=r[o]||[],d[o]=d[o]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==m?(m>=0?(h+=w>0?e.getCoordSize(m):e.getCoord(m)-i,f=h):0>m&&(j-=w>0?e.getCoordSize(m):k-e.getCoord(m),f=j),r[o].push([f,g,s,q.getNameByIndex(s),i,g]),d[o].min>m&&(d[o].min=m,d[o].minX=f,d[o].minY=g),d[o].max<m&&(d[o].max=m,d[o].maxX=f,d[o].maxY=g),d[o].sum+=m,d[o].counter++):r[o].length>0&&(this.finalPLMap[o]=this.finalPLMap[o]||[],this.finalPLMap[o].push(r[o]),r[o]=[])}h=this.component.grid.getXend();for(var y,u=0,v=c.length;v>u;u++)for(var w=0,x=c[u].length;x>w;w++)o=c[u][w],p=n[o],l=p.data[s],m=this.getDataFromOption(l,"-"),"-"==m&&this.deepQuery([l,p,this.option],"calculable")&&(y=this.deepQuery([l,p],"symbolSize"),h-=2*y+5,f=h,this.shapeList.push(this._getCalculableItem(o,s,q.getNameByIndex(s),f,g,"vertical")))}for(var z in r)r[z].length>0&&(this.finalPLMap[z]=this.finalPLMap[z]||[],this.finalPLMap[z].push(r[z]),r[z]=[]);this._calculMarkMapXY(d,c,"x"),this._buildBorkenLine(a,this.finalPLMap,q,"vertical")},_buildOther:function(a,b,c,d){for(var e,f=this.series,g={},h=0,i=c.length;i>h;h++)for(var j=0,k=c[h].length;k>j;j++){var l=c[h][j],m=f[l];e=this.component.xAxis.getAxis(m.xAxisIndex||0);var n=this.component.yAxis.getAxis(m.yAxisIndex||0),o=n.getCoord(0);g[l]=g[l]||[],d[l]=d[l]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var p=0,q=m.data.length;q>p;p++){var r=m.data[p],s=this.getDataFromOption(r,"-");if(s instanceof Array){var t=e.getCoord(s[0]),u=n.getCoord(s[1]);g[l].push([t,u,p,s[0],t,o]),d[l].min0>s[0]&&(d[l].min0=s[0],d[l].minY0=u,d[l].minX0=t),d[l].max0<s[0]&&(d[l].max0=s[0],d[l].maxY0=u,d[l].maxX0=t),d[l].sum0+=s[0],d[l].counter0++,d[l].min1>s[1]&&(d[l].min1=s[1],d[l].minY1=u,d[l].minX1=t),d[l].max1<s[1]&&(d[l].max1=s[1],d[l].maxY1=u,d[l].maxX1=t),d[l].sum1+=s[1],d[l].counter1++}}}for(var v in g)g[v].length>0&&(this.finalPLMap[v]=this.finalPLMap[v]||[],this.finalPLMap[v].push(g[v]),g[v]=[]);this._calculMarkMapXY(d,c,"xy"),this._buildBorkenLine(a,this.finalPLMap,e,"other")},_buildBorkenLine:function(a,b,c,d){for(var f,h="other"==d?"horizontal":d,l=this.series,m=a.length-1;m>=0;m--){var n=a[m],o=l[n],p=b[n];if(o.type===this.type&&null!=p)for(var q=this._getBbox(n,h),r=this._sIndex2ColorMap[n],s=this.query(o,"itemStyle.normal.lineStyle.width"),t=this.query(o,"itemStyle.normal.lineStyle.type"),u=this.query(o,"itemStyle.normal.lineStyle.color"),v=this.getItemStyleColor(this.query(o,"itemStyle.normal.color"),n,-1),w=null!=this.query(o,"itemStyle.normal.areaStyle"),x=this.query(o,"itemStyle.normal.areaStyle.color"),y=0,z=p.length;z>y;y++){var A=p[y],B="other"!=d&&this._isLarge(h,A);if(B)A=this._getLargePointList(h,A,o.dataFilter);else for(var C=0,D=A.length;D>C;C++)f=o.data[A[C][2]],(this.deepQuery([f,o,this.option],"calculable")||this.deepQuery([f,o],"showAllSymbol")||"categoryAxis"===c.type&&c.isMainAxis(A[C][2])&&"none"!=this.deepQuery([f,o],"symbol"))&&this.shapeList.push(this._getSymbol(n,A[C][2],A[C][3],A[C][0],A[C][1],h));var E=new e({zlevel:o.zlevel,z:o.z,style:{miterLimit:s,pointList:A,strokeColor:u||v||r,lineWidth:s,lineType:t,smooth:this._getSmooth(o.smooth),smoothConstraint:q,shadowColor:this.query(o,"itemStyle.normal.lineStyle.shadowColor"),shadowBlur:this.query(o,"itemStyle.normal.lineStyle.shadowBlur"),shadowOffsetX:this.query(o,"itemStyle.normal.lineStyle.shadowOffsetX"),shadowOffsetY:this.query(o,"itemStyle.normal.lineStyle.shadowOffsetY")},hoverable:!1,_main:!0,_seriesIndex:n,_orient:h});if(i.pack(E,l[n],n,0,y,l[n].name),this.shapeList.push(E),w){var F=new g({zlevel:o.zlevel,z:o.z,style:{miterLimit:s,pointList:j.clone(A).concat([[A[A.length-1][4],A[A.length-1][5]],[A[0][4],A[0][5]]]),brushType:"fill",smooth:this._getSmooth(o.smooth),smoothConstraint:q,color:x?x:k.alpha(r,.5)},highlightStyle:{brushType:"fill"},hoverable:!1,_main:!0,_seriesIndex:n,_orient:h});i.pack(F,l[n],n,0,y,l[n].name),this.shapeList.push(F)}}}},_getBbox:function(a,b){var c=this.component.grid.getBbox(),d=this.xMarkMap[a];return null!=d.minX0?[[Math.min(d.minX0,d.maxX0,d.minX1,d.maxX1),Math.min(d.minY0,d.maxY0,d.minY1,d.maxY1)],[Math.max(d.minX0,d.maxX0,d.minX1,d.maxX1),Math.max(d.minY0,d.maxY0,d.minY1,d.maxY1)]]:("horizontal"===b?(c[0][1]=Math.min(d.minY,d.maxY),c[1][1]=Math.max(d.minY,d.maxY)):(c[0][0]=Math.min(d.minX,d.maxX),c[1][0]=Math.max(d.minX,d.maxX)),c)},_isLarge:function(a,b){return b.length<2?!1:"horizontal"===a?Math.abs(b[0][0]-b[1][0])<.5:Math.abs(b[0][1]-b[1][1])<.5},_getLargePointList:function(a,b,c){var d;d="horizontal"===a?this.component.grid.getWidth():this.component.grid.getHeight();var e=b.length,f=[];if("function"!=typeof c)switch(c){case"min":c=function(a){return Math.max.apply(null,a)};break;case"max":c=function(a){return Math.min.apply(null,a)};break;case"average":c=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/a.length};break;default:c=function(a){return a[0]}}for(var g=[],h=0;d>h;h++){var i=Math.floor(e/d*h),j=Math.min(Math.floor(e/d*(h+1)),e);if(!(i>=j)){for(var k=i;j>k;k++)g[k-i]="horizontal"===a?b[k][1]:b[k][0];g.length=j-i;for(var l=c(g),m=-1,n=1/0,k=i;j>k;k++){var o="horizontal"===a?b[k][1]:b[k][0],p=Math.abs(o-l);n>p&&(m=k,n=p)}var q=b[m].slice();"horizontal"===a?q[1]=l:q[0]=l,f.push(q)}}return f},_getSmooth:function(a){return a?.3:0},_getCalculableItem:function(a,b,c,d,e,f){var g=this.series,i=g[a].calculableHolderColor||this.ecTheme.calculableHolderColor||h.calculableHolderColor,j=this._getSymbol(a,b,c,d,e,f);return j.style.color=i,j.style.strokeColor=i,j.rotation=[0,0],j.hoverable=!1,j.draggable=!1,j.style.text=void 0,j},_getSymbol:function(a,b,c,d,e,f){var g=this.series,h=g[a],i=h.data[b],j=this.getSymbolShape(h,a,i,b,c,d,e,this._sIndex2ShapeMap[a],this._sIndex2ColorMap[a],"#fff","vertical"===f?"horizontal":"vertical");return j.zlevel=h.zlevel,j.z=h.z+1,this.deepQuery([i,h,this.option],"calculable")&&(this.setCalculable(j),j.draggable=!0),j},getMarkCoord:function(a,b){var c=this.series[a],d=this.xMarkMap[a],e=this.component.xAxis.getAxis(c.xAxisIndex),f=this.component.yAxis.getAxis(c.yAxisIndex);if(b.type&&("max"===b.type||"min"===b.type||"average"===b.type)){var g=null!=b.valueIndex?b.valueIndex:null!=d.maxX0?"1":"";return[d[b.type+"X"+g],d[b.type+"Y"+g],d[b.type+"Line"+g],d[b.type+g]]}return["string"!=typeof b.xAxis&&e.getCoordByIndex?e.getCoordByIndex(b.xAxis||0):e.getCoord(b.xAxis||0),"string"!=typeof b.yAxis&&f.getCoordByIndex?f.getCoordByIndex(b.yAxis||0):f.getCoord(b.yAxis||0)]},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()},ontooltipHover:function(a,b){for(var c,d,e=a.seriesIndex,f=a.dataIndex,g=e.length;g--;)if(c=this.finalPLMap[e[g]])for(var h=0,i=c.length;i>h;h++){d=c[h];for(var j=0,k=d.length;k>j;j++)f===d[j][2]&&b.push(this._getSymbol(e[g],d[j][2],d[j][3],d[j][0],d[j][1],"horizontal"))}},addDataAnimation:function(a,b){function c(){p--,0===p&&b&&b()}function d(a){a.style.controlPointList=null}for(var e=this.series,f={},g=0,h=a.length;h>g;g++)f[a[g][0]]=a[g];for(var i,j,k,l,m,n,o,p=0,g=this.shapeList.length-1;g>=0;g--)if(m=this.shapeList[g]._seriesIndex,f[m]&&!f[m][3]){if(this.shapeList[g]._main&&this.shapeList[g].style.pointList.length>1){if(n=this.shapeList[g].style.pointList,j=Math.abs(n[0][0]-n[1][0]),l=Math.abs(n[0][1]-n[1][1]),o="horizontal"===this.shapeList[g]._orient,f[m][2]){if("half-smooth-polygon"===this.shapeList[g].type){var q=n.length;this.shapeList[g].style.pointList[q-3]=n[q-2],this.shapeList[g].style.pointList[q-3][o?0:1]=n[q-4][o?0:1],this.shapeList[g].style.pointList[q-2]=n[q-1]}this.shapeList[g].style.pointList.pop(),o?(i=j,k=0):(i=0,k=-l)}else{if(this.shapeList[g].style.pointList.shift(),"half-smooth-polygon"===this.shapeList[g].type){var r=this.shapeList[g].style.pointList.pop();o?r[0]=n[0][0]:r[1]=n[0][1],this.shapeList[g].style.pointList.push(r)}o?(i=-j,k=0):(i=0,k=l)}this.shapeList[g].style.controlPointList=null,this.zr.modShape(this.shapeList[g])}else{if(f[m][2]&&this.shapeList[g]._dataIndex===e[m].data.length-1){this.zr.delShape(this.shapeList[g].id);continue}if(!f[m][2]&&0===this.shapeList[g]._dataIndex){this.zr.delShape(this.shapeList[g].id);continue}}this.shapeList[g].position=[0,0],p++,this.zr.animate(this.shapeList[g].id,"").when(this.query(this.option,"animationDurationUpdate"),{position:[i,k]}).during(d).done(c).start()}p||b&&b()}},f.prototype.iconLibrary.legendLineIcon=c,j.inherits(b,d),a("../chart").define("line",b),b}),c("echarts/chart/pie",["require","./base","zrender/shape/Text","zrender/shape/Ring","zrender/shape/Circle","zrender/shape/Sector","zrender/shape/Polyline","../config","../util/ecData","zrender/tool/util","zrender/tool/math","zrender/tool/color","../chart"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f);var g=this;g.shapeHandler.onmouseover=function(a){var b=a.target,c=j.get(b,"seriesIndex"),d=j.get(b,"dataIndex"),e=j.get(b,"special"),f=[b.style.x,b.style.y],h=b.style.startAngle,i=b.style.endAngle,k=((i+h)/2+360)%360,l=b.highlightStyle.color,m=g.getLabel(c,d,e,f,k,l,!0);m&&g.zr.addHoverShape(m);var n=g.getLabelLine(c,d,f,b.style.r0,b.style.r,k,l,!0);n&&g.zr.addHoverShape(n)},this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Ring"),f=a("zrender/shape/Circle"),g=a("zrender/shape/Sector"),h=a("zrender/shape/Polyline"),i=a("../config");i.pie={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,center:["50%","50%"],radius:[0,"75%"],clockWise:!0,startAngle:90,minAngle:0,selectedOffset:10,itemStyle:{normal:{borderColor:"rgba(0,0,0,0)",borderWidth:1,label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}}},emphasis:{borderColor:"rgba(0,0,0,0)",borderWidth:1,label:{show:!1},labelLine:{show:!1,length:20,lineStyle:{width:1,type:"solid"}}}}};var j=a("../util/ecData"),k=a("zrender/tool/util"),l=a("zrender/tool/math"),m=a("zrender/tool/color");return b.prototype={type:i.CHART_TYPE_PIE,_buildShape:function(){var a=this.series,b=this.component.legend;this.selectedMap={},this._selected={};var c,d,g;this._selectedMode=!1;for(var h,k=0,l=a.length;l>k;k++)if(a[k].type===i.CHART_TYPE_PIE){if(a[k]=this.reformOption(a[k]),this.legendHoverLink=a[k].legendHoverLink||this.legendHoverLink,h=a[k].name||"",this.selectedMap[h]=b?b.isSelected(h):!0,!this.selectedMap[h])continue;c=this.parseCenter(this.zr,a[k].center),d=this.parseRadius(this.zr,a[k].radius),this._selectedMode=this._selectedMode||a[k].selectedMode,this._selected[k]=[],this.deepQuery([a[k],this.option],"calculable")&&(g={zlevel:a[k].zlevel,z:a[k].z,hoverable:!1,style:{x:c[0],y:c[1],r0:d[0]<=10?0:d[0]-10,r:d[1]+10,brushType:"stroke",lineWidth:1,strokeColor:a[k].calculableHolderColor||this.ecTheme.calculableHolderColor||i.calculableHolderColor}},j.pack(g,a[k],k,void 0,-1),this.setCalculable(g),g=d[0]<=10?new f(g):new e(g),this.shapeList.push(g)),this._buildSinglePie(k),this.buildMark(k)}this.addShapeList()},_buildSinglePie:function(a){for(var b,c=this.series,d=c[a],e=d.data,f=this.component.legend,g=0,h=0,i=0,j=Number.NEGATIVE_INFINITY,k=[],l=0,m=e.length;m>l;l++)b=e[l].name,this.selectedMap[b]=f?f.isSelected(b):!0,this.selectedMap[b]&&!isNaN(e[l].value)&&(0!==+e[l].value?g++:h++,i+=+e[l].value,j=Math.max(j,+e[l].value));if(0!==i){for(var n,o,p,q,r,s,t=100,u=d.clockWise,v=(d.startAngle.toFixed(2)-0+360)%360,w=d.minAngle||.01,x=360-w*g-.01*h,y=d.roseType,l=0,m=e.length;m>l;l++)if(b=e[l].name,this.selectedMap[b]&&!isNaN(e[l].value)){if(o=f?f.getColor(b):this.zr.getColor(l),t=e[l].value/i,n="area"!=y?u?v-t*x-(0!==t?w:.01):t*x+v+(0!==t?w:.01):u?v-360/m:360/m+v,n=n.toFixed(2)-0,t=(100*t).toFixed(2),p=this.parseCenter(this.zr,d.center),q=this.parseRadius(this.zr,d.radius),r=+q[0],s=+q[1],"radius"===y?s=e[l].value/j*(s-r)*.8+.2*(s-r)+r:"area"===y&&(s=Math.sqrt(e[l].value/j)*(s-r)+r),u){var z;z=v,v=n,n=z}this._buildItem(k,a,l,t,e[l].selected,p,r,s,v,n,o),u||(v=n)}this._autoLabelLayout(k,p,s);for(var l=0,m=k.length;m>l;l++)this.shapeList.push(k[l]);
k=null}},_buildItem:function(a,b,c,d,e,f,g,h,i,k,l){var m=this.series,n=((k+i)/2+360)%360,o=this.getSector(b,c,d,e,f,g,h,i,k,l);j.pack(o,m[b],b,m[b].data[c],c,m[b].data[c].name,d),a.push(o);var p=this.getLabel(b,c,d,f,n,l,!1),q=this.getLabelLine(b,c,f,g,h,n,l,!1);q&&(j.pack(q,m[b],b,m[b].data[c],c,m[b].data[c].name,d),a.push(q)),p&&(j.pack(p,m[b],b,m[b].data[c],c,m[b].data[c].name,d),p._labelLine=q,a.push(p))},getSector:function(a,b,c,d,e,f,h,i,j,k){var n=this.series,o=n[a],p=o.data[b],q=[p,o],r=this.deepMerge(q,"itemStyle.normal")||{},s=this.deepMerge(q,"itemStyle.emphasis")||{},t=this.getItemStyleColor(r.color,a,b,p)||k,u=this.getItemStyleColor(s.color,a,b,p)||("string"==typeof t?m.lift(t,-.2):t),v={zlevel:o.zlevel,z:o.z,clickable:this.deepQuery(q,"clickable"),style:{x:e[0],y:e[1],r0:f,r:h,startAngle:i,endAngle:j,brushType:"both",color:t,lineWidth:r.borderWidth,strokeColor:r.borderColor,lineJoin:"round"},highlightStyle:{color:u,lineWidth:s.borderWidth,strokeColor:s.borderColor,lineJoin:"round"},_seriesIndex:a,_dataIndex:b};if(d){var w=((v.style.startAngle+v.style.endAngle)/2).toFixed(2)-0;v.style._hasSelected=!0,v.style._x=v.style.x,v.style._y=v.style.y;var x=this.query(o,"selectedOffset");v.style.x+=l.cos(w,!0)*x,v.style.y-=l.sin(w,!0)*x,this._selected[a][b]=!0}else this._selected[a][b]=!1;return this._selectedMode&&(v.onclick=this.shapeHandler.onclick),this.deepQuery([p,o,this.option],"calculable")&&(this.setCalculable(v),v.draggable=!0),(this._needLabel(o,p,!0)||this._needLabelLine(o,p,!0))&&(v.onmouseover=this.shapeHandler.onmouseover),v=new g(v)},getLabel:function(a,b,c,e,f,g,h){var i=this.series,j=i[a],m=j.data[b];if(this._needLabel(j,m,h)){var n,o,p,q=h?"emphasis":"normal",r=k.merge(k.clone(m.itemStyle)||{},j.itemStyle),s=r[q].label,t=s.textStyle||{},u=e[0],v=e[1],w=this.parseRadius(this.zr,j.radius),x="middle";s.position=s.position||r.normal.label.position,"center"===s.position?(n=u,o=v,p="center"):"inner"===s.position||"inside"===s.position?(w=(w[0]+w[1])*(s.distance||.5),n=Math.round(u+w*l.cos(f,!0)),o=Math.round(v-w*l.sin(f,!0)),g="#fff",p="center"):(w=w[1]- -r[q].labelLine.length,n=Math.round(u+w*l.cos(f,!0)),o=Math.round(v-w*l.sin(f,!0)),p=f>=90&&270>=f?"right":"left"),"center"!=s.position&&"inner"!=s.position&&"inside"!=s.position&&(n+="left"===p?20:-20),m.__labelX=n-("left"===p?5:-5),m.__labelY=o;var y=new d({zlevel:j.zlevel,z:j.z+1,hoverable:!1,style:{x:n,y:o,color:t.color||g,text:this.getLabelText(a,b,c,q),textAlign:t.align||p,textBaseline:t.baseline||x,textFont:this.getFont(t)},highlightStyle:{brushType:"fill"}});return y._radius=w,y._labelPosition=s.position||"outer",y._rect=y.getRect(y.style),y._seriesIndex=a,y._dataIndex=b,y}},getLabelText:function(a,b,c,d){var e=this.series,f=e[a],g=f.data[b],h=this.deepQuery([g,f],"itemStyle."+d+".label.formatter");return h?"function"==typeof h?h.call(this.myChart,{seriesIndex:a,seriesName:f.name||"",series:f,dataIndex:b,data:g,name:g.name,value:g.value,percent:c}):"string"==typeof h?(h=h.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}").replace("{d}","{d0}"),h=h.replace("{a0}",f.name).replace("{b0}",g.name).replace("{c0}",g.value).replace("{d0}",c)):void 0:g.name},getLabelLine:function(a,b,c,d,e,f,g,i){var j=this.series,m=j[a],n=m.data[b];if(this._needLabelLine(m,n,i)){var o=i?"emphasis":"normal",p=k.merge(k.clone(n.itemStyle)||{},m.itemStyle),q=p[o].labelLine,r=q.lineStyle||{},s=c[0],t=c[1],u=e,v=this.parseRadius(this.zr,m.radius)[1]- -q.length,w=l.cos(f,!0),x=l.sin(f,!0);return new h({zlevel:m.zlevel,z:m.z+1,hoverable:!1,style:{pointList:[[s+u*w,t-u*x],[s+v*w,t-v*x],[n.__labelX,n.__labelY]],strokeColor:r.color||g,lineType:r.type,lineWidth:r.width},_seriesIndex:a,_dataIndex:b})}},_needLabel:function(a,b,c){return this.deepQuery([b,a],"itemStyle."+(c?"emphasis":"normal")+".label.show")},_needLabelLine:function(a,b,c){return this.deepQuery([b,a],"itemStyle."+(c?"emphasis":"normal")+".labelLine.show")},_autoLabelLayout:function(a,b,c){for(var d=[],e=[],f=0,g=a.length;g>f;f++)("outer"===a[f]._labelPosition||"outside"===a[f]._labelPosition)&&(a[f]._rect._y=a[f]._rect.y,a[f]._rect.x<b[0]?d.push(a[f]):e.push(a[f]));this._layoutCalculate(d,b,c,-1),this._layoutCalculate(e,b,c,1)},_layoutCalculate:function(a,b,c,d){function e(b,c,d){for(var e=b;c>e;e++)if(a[e]._rect.y+=d,a[e].style.y+=d,a[e]._labelLine&&(a[e]._labelLine.style.pointList[1][1]+=d,a[e]._labelLine.style.pointList[2][1]+=d),e>b&&c>e+1&&a[e+1]._rect.y>a[e]._rect.y+a[e]._rect.height)return void f(e,d/2);f(c-1,d/2)}function f(b,c){for(var d=b;d>=0&&(a[d]._rect.y-=c,a[d].style.y-=c,a[d]._labelLine&&(a[d]._labelLine.style.pointList[1][1]-=c,a[d]._labelLine.style.pointList[2][1]-=c),!(d>0&&a[d]._rect.y>a[d-1]._rect.y+a[d-1]._rect.height));d--);}function g(a,b,c,d,e){for(var f,g,h,i=c[0],j=c[1],k=e>0?b?Number.MAX_VALUE:0:b?Number.MAX_VALUE:0,l=0,m=a.length;m>l;l++)g=Math.abs(a[l]._rect.y-j),h=a[l]._radius-d,f=d+h>g?Math.sqrt((d+h+20)*(d+h+20)-Math.pow(a[l]._rect.y-j,2)):Math.abs(a[l]._rect.x+(e>0?0:a[l]._rect.width)-i),b&&f>=k&&(f=k-10),!b&&k>=f&&(f=k+10),a[l]._rect.x=a[l].style.x=i+f*e,a[l]._labelLine&&(a[l]._labelLine.style.pointList[2][0]=i+(f-5)*e,a[l]._labelLine.style.pointList[1][0]=i+(f-20)*e),k=f}a.sort(function(a,b){return a._rect.y-b._rect.y});for(var h,i=0,j=a.length,k=[],l=[],m=0;j>m;m++)h=a[m]._rect.y-i,0>h&&e(m,j,-h,d),i=a[m]._rect.y+a[m]._rect.height;this.zr.getHeight()-i<0&&f(j-1,i-this.zr.getHeight());for(var m=0;j>m;m++)a[m]._rect.y>=b[1]?l.push(a[m]):k.push(a[m]);g(l,!0,b,c,d),g(k,!1,b,c,d)},reformOption:function(a){var b=k.merge;return a=b(b(a||{},k.clone(this.ecTheme.pie||{})),k.clone(i.pie)),a.itemStyle.normal.label.textStyle=this.getTextStyle(a.itemStyle.normal.label.textStyle),a.itemStyle.emphasis.label.textStyle=this.getTextStyle(a.itemStyle.emphasis.label.textStyle),this.z=a.z,this.zlevel=a.zlevel,a},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()},addDataAnimation:function(a,b){function c(){h--,0===h&&b&&b()}for(var d=this.series,e={},f=0,g=a.length;g>f;f++)e[a[f][0]]=a[f];var h=0,j={},k={},l={},m=this.shapeList;this.shapeList=[];for(var n,o,p,q={},f=0,g=a.length;g>f;f++)n=a[f][0],o=a[f][2],p=a[f][3],d[n]&&d[n].type===i.CHART_TYPE_PIE&&(o?(p||(j[n+"_"+d[n].data.length]="delete"),q[n]=1):p?q[n]=0:(j[n+"_-1"]="delete",q[n]=-1),this._buildSinglePie(n));for(var r,s,f=0,g=this.shapeList.length;g>f;f++)switch(n=this.shapeList[f]._seriesIndex,r=this.shapeList[f]._dataIndex,s=n+"_"+r,this.shapeList[f].type){case"sector":j[s]=this.shapeList[f];break;case"text":k[s]=this.shapeList[f];break;case"polyline":l[s]=this.shapeList[f]}this.shapeList=[];for(var t,f=0,g=m.length;g>f;f++)if(n=m[f]._seriesIndex,e[n]){if(r=m[f]._dataIndex+q[n],s=n+"_"+r,t=j[s],!t)continue;if("sector"===m[f].type)"delete"!=t?(h++,this.zr.animate(m[f].id,"style").when(400,{startAngle:t.style.startAngle,endAngle:t.style.endAngle}).done(c).start()):(h++,this.zr.animate(m[f].id,"style").when(400,q[n]<0?{startAngle:m[f].style.startAngle}:{endAngle:m[f].style.endAngle}).done(c).start());else if("text"===m[f].type||"polyline"===m[f].type)if("delete"===t)this.zr.delShape(m[f].id);else switch(m[f].type){case"text":h++,t=k[s],this.zr.animate(m[f].id,"style").when(400,{x:t.style.x,y:t.style.y}).done(c).start();break;case"polyline":h++,t=l[s],this.zr.animate(m[f].id,"style").when(400,{pointList:t.style.pointList}).done(c).start()}}this.shapeList=m,h||b&&b()},onclick:function(a){var b=this.series;if(this.isClick&&a.target){this.isClick=!1;for(var c,d=a.target,e=d.style,f=j.get(d,"seriesIndex"),g=j.get(d,"dataIndex"),h=0,k=this.shapeList.length;k>h;h++)if(this.shapeList[h].id===d.id){if(f=j.get(d,"seriesIndex"),g=j.get(d,"dataIndex"),e._hasSelected)d.style.x=d.style._x,d.style.y=d.style._y,d.style._hasSelected=!1,this._selected[f][g]=!1;else{var m=((e.startAngle+e.endAngle)/2).toFixed(2)-0;d.style._hasSelected=!0,this._selected[f][g]=!0,d.style._x=d.style.x,d.style._y=d.style.y,c=this.query(b[f],"selectedOffset"),d.style.x+=l.cos(m,!0)*c,d.style.y-=l.sin(m,!0)*c}this.zr.modShape(d.id)}else this.shapeList[h].style._hasSelected&&"single"===this._selectedMode&&(f=j.get(this.shapeList[h],"seriesIndex"),g=j.get(this.shapeList[h],"dataIndex"),this.shapeList[h].style.x=this.shapeList[h].style._x,this.shapeList[h].style.y=this.shapeList[h].style._y,this.shapeList[h].style._hasSelected=!1,this._selected[f][g]=!1,this.zr.modShape(this.shapeList[h].id));this.messageCenter.dispatch(i.EVENT.PIE_SELECTED,a.event,{selected:this._selected,target:j.get(d,"name")},this.myChart),this.zr.refreshNextFrame()}}},k.inherits(b,c),a("../chart").define("pie",b),b}),c("echarts/echarts",["require","./config","zrender/tool/util","zrender/tool/event","zrender/tool/env","zrender","zrender/config","./chart/island","./component/toolbox","./component","./component/title","./component/tooltip","./component/legend","./util/ecData","./chart","zrender/tool/color","./component/timeline","zrender/shape/Image","zrender/loadingEffect/Bar","zrender/loadingEffect/Bubble","zrender/loadingEffect/DynamicLine","zrender/loadingEffect/Ring","zrender/loadingEffect/Spin","zrender/loadingEffect/Whirling","./theme/macarons","./theme/infographic"],function(a){function b(){g.Dispatcher.call(this)}function c(a){a.innerHTML="",this._themeConfig={},this.dom=a,this._connected=!1,this._status={dragIn:!1,dragOut:!1,needRefresh:!1},this._curEventType=!1,this._chartList=[],this._messageCenter=new b,this._messageCenterOutSide=new b,this.resize=this.resize(),this._init()}function d(a,b,c,d,e){for(var f=a._chartList,g=f.length;g--;){var h=f[g];"function"==typeof h[b]&&h[b](c,d,e)}}var e=a("./config"),f=a("zrender/tool/util"),g=a("zrender/tool/event"),h={},i=a("zrender/tool/env").canvasSupported,j=new Date-0,k={},l="_echarts_instance_";h.version="2.2.7",h.dependencies={zrender:"2.1.1"},h.init=function(b,d){var e=a("zrender");e.version.replace(".","")-0<h.dependencies.zrender.replace(".","")-0&&void 0,b=b instanceof Array?b[0]:b;var f=b.getAttribute(l);return f||(f=j++,b.setAttribute(l,f)),k[f]&&k[f].dispose(),k[f]=new c(b),k[f].id=f,k[f].canvasSupported=i,k[f].setTheme(d),k[f]},h.getInstanceById=function(a){return k[a]},f.merge(b.prototype,g.Dispatcher.prototype,!0);var m=a("zrender/config").EVENT,n=["CLICK","DBLCLICK","MOUSEOVER","MOUSEOUT","DRAGSTART","DRAGEND","DRAGENTER","DRAGOVER","DRAGLEAVE","DROP"];return c.prototype={_init:function(){var b=this,c=a("zrender").init(this.dom);this._zr=c,this._messageCenter.dispatch=function(a,c,d,e){d=d||{},d.type=a,d.event=c,b._messageCenter.dispatchWithContext(a,d,e),b._messageCenterOutSide.dispatchWithContext(a,d,e)},this._onevent=function(a){return b.__onevent(a)};for(var d in e.EVENT)"CLICK"!=d&&"DBLCLICK"!=d&&"HOVER"!=d&&"MOUSEOUT"!=d&&"MAP_ROAM"!=d&&this._messageCenter.bind(e.EVENT[d],this._onevent,this);var f={};this._onzrevent=function(a){return b[f[a.type]](a)};for(var g=0,h=n.length;h>g;g++){var i=n[g],j=m[i];f[j]="_on"+i.toLowerCase(),c.on(j,this._onzrevent)}this.chart={},this.component={};var k=a("./chart/island");this._island=new k(this._themeConfig,this._messageCenter,c,{},this),this.chart.island=this._island;var l=a("./component/toolbox");this._toolbox=new l(this._themeConfig,this._messageCenter,c,{},this),this.component.toolbox=this._toolbox;var o=a("./component");o.define("title",a("./component/title")),o.define("tooltip",a("./component/tooltip")),o.define("legend",a("./component/legend")),(0===c.getWidth()||0===c.getHeight())&&void 0},__onevent:function(a){a.__echartsId=a.__echartsId||this.id;var b=a.__echartsId===this.id;switch(this._curEventType||(this._curEventType=a.type),a.type){case e.EVENT.LEGEND_SELECTED:this._onlegendSelected(a);break;case e.EVENT.DATA_ZOOM:if(!b){var c=this.component.dataZoom;c&&(c.silence(!0),c.absoluteZoom(a.zoom),c.silence(!1))}this._ondataZoom(a);break;case e.EVENT.DATA_RANGE:b&&this._ondataRange(a);break;case e.EVENT.MAGIC_TYPE_CHANGED:if(!b){var d=this.component.toolbox;d&&(d.silence(!0),d.setMagicType(a.magicType),d.silence(!1))}this._onmagicTypeChanged(a);break;case e.EVENT.DATA_VIEW_CHANGED:b&&this._ondataViewChanged(a);break;case e.EVENT.TOOLTIP_HOVER:b&&this._tooltipHover(a);break;case e.EVENT.RESTORE:this._onrestore();break;case e.EVENT.REFRESH:b&&this._onrefresh(a);break;case e.EVENT.TOOLTIP_IN_GRID:case e.EVENT.TOOLTIP_OUT_GRID:if(b){if(this._connected){var f=this.component.grid;f&&(a.x=(a.event.zrenderX-f.getX())/f.getWidth(),a.y=(a.event.zrenderY-f.getY())/f.getHeight())}}else{var f=this.component.grid;f&&this._zr.trigger("mousemove",{connectTrigger:!0,zrenderX:f.getX()+a.x*f.getWidth(),zrenderY:f.getY()+a.y*f.getHeight()})}}if(this._connected&&b&&this._curEventType===a.type){for(var g in this._connected)this._connected[g].connectedEventHandler(a);this._curEventType=null}(!b||!this._connected&&b)&&(this._curEventType=null)},_onclick:function(a){if(d(this,"onclick",a),a.target){var b=this._eventPackage(a.target);b&&null!=b.seriesIndex&&this._messageCenter.dispatch(e.EVENT.CLICK,a.event,b,this)}},_ondblclick:function(a){if(d(this,"ondblclick",a),a.target){var b=this._eventPackage(a.target);b&&null!=b.seriesIndex&&this._messageCenter.dispatch(e.EVENT.DBLCLICK,a.event,b,this)}},_onmouseover:function(a){if(a.target){var b=this._eventPackage(a.target);b&&null!=b.seriesIndex&&this._messageCenter.dispatch(e.EVENT.HOVER,a.event,b,this)}},_onmouseout:function(a){if(a.target){var b=this._eventPackage(a.target);b&&null!=b.seriesIndex&&this._messageCenter.dispatch(e.EVENT.MOUSEOUT,a.event,b,this)}},_ondragstart:function(a){this._status={dragIn:!1,dragOut:!1,needRefresh:!1},d(this,"ondragstart",a)},_ondragenter:function(a){d(this,"ondragenter",a)},_ondragover:function(a){d(this,"ondragover",a)},_ondragleave:function(a){d(this,"ondragleave",a)},_ondrop:function(a){d(this,"ondrop",a,this._status),this._island.ondrop(a,this._status)},_ondragend:function(a){if(d(this,"ondragend",a,this._status),this._timeline&&this._timeline.ondragend(a,this._status),this._island.ondragend(a,this._status),this._status.needRefresh){this._syncBackupData(this._option);var b=this._messageCenter;b.dispatch(e.EVENT.DATA_CHANGED,a.event,this._eventPackage(a.target),this),b.dispatch(e.EVENT.REFRESH,null,null,this)}},_onlegendSelected:function(a){this._status.needRefresh=!1,d(this,"onlegendSelected",a,this._status),this._status.needRefresh&&this._messageCenter.dispatch(e.EVENT.REFRESH,null,null,this)},_ondataZoom:function(a){this._status.needRefresh=!1,d(this,"ondataZoom",a,this._status),this._status.needRefresh&&this._messageCenter.dispatch(e.EVENT.REFRESH,null,null,this)},_ondataRange:function(a){this._clearEffect(),this._status.needRefresh=!1,d(this,"ondataRange",a,this._status),this._status.needRefresh&&this._zr.refreshNextFrame()},_onmagicTypeChanged:function(){this._clearEffect(),this._render(this._toolbox.getMagicOption())},_ondataViewChanged:function(a){this._syncBackupData(a.option),this._messageCenter.dispatch(e.EVENT.DATA_CHANGED,null,a,this),this._messageCenter.dispatch(e.EVENT.REFRESH,null,null,this)},_tooltipHover:function(a){var b=[];d(this,"ontooltipHover",a,b)},_onrestore:function(){this.restore()},_onrefresh:function(a){this._refreshInside=!0,this.refresh(a),this._refreshInside=!1},_syncBackupData:function(a){this.component.dataZoom&&this.component.dataZoom.syncBackupData(a)},_eventPackage:function(b){if(b){var c=a("./util/ecData"),d=c.get(b,"seriesIndex"),e=c.get(b,"dataIndex");return e=-1!=d&&this.component.dataZoom?this.component.dataZoom.getRealDataIndex(d,e):e,{seriesIndex:d,seriesName:(c.get(b,"series")||{}).name,dataIndex:e,data:c.get(b,"data"),name:c.get(b,"name"),value:c.get(b,"value"),special:c.get(b,"special")}}},_noDataCheck:function(a){for(var b=a.series,c=0,d=b.length;d>c;c++)if(b[c].type==e.CHART_TYPE_MAP||b[c].data&&b[c].data.length>0||b[c].markPoint&&b[c].markPoint.data&&b[c].markPoint.data.length>0||b[c].markLine&&b[c].markLine.data&&b[c].markLine.data.length>0||b[c].nodes&&b[c].nodes.length>0||b[c].links&&b[c].links.length>0||b[c].matrix&&b[c].matrix.length>0||b[c].eventList&&b[c].eventList.length>0)return!1;var f=this._option&&this._option.noDataLoadingOption||this._themeConfig.noDataLoadingOption||e.noDataLoadingOption||{text:this._option&&this._option.noDataText||this._themeConfig.noDataText||e.noDataText,effect:this._option&&this._option.noDataEffect||this._themeConfig.noDataEffect||e.noDataEffect};return this.clear(),this.showLoading(f),!0},_render:function(b){if(this._mergeGlobalConifg(b),!this._noDataCheck(b)){var c=b.backgroundColor;if(c)if(i||-1==c.indexOf("rgba"))this.dom.style.backgroundColor=c;else{var d=c.split(",");this.dom.style.filter="alpha(opacity="+100*d[3].substring(0,d[3].lastIndexOf(")"))+")",d.length=3,d[0]=d[0].replace("a",""),this.dom.style.backgroundColor=d.join(",")+")"}this._zr.clearAnimation(),this._chartList=[];var f=a("./chart"),g=a("./component");(b.xAxis||b.yAxis)&&(b.grid=b.grid||{},b.dataZoom=b.dataZoom||{});for(var h,j,k,l=["title","legend","tooltip","dataRange","roamController","grid","dataZoom","xAxis","yAxis","polar"],m=0,n=l.length;n>m;m++)j=l[m],k=this.component[j],b[j]?(k?k.refresh&&k.refresh(b):(h=g.get(/^[xy]Axis$/.test(j)?"axis":j),k=new h(this._themeConfig,this._messageCenter,this._zr,b,this,j),this.component[j]=k),this._chartList.push(k)):k&&(k.dispose(),this.component[j]=null,delete this.component[j]);for(var o,p,q,r={},m=0,n=b.series.length;n>m;m++)p=b.series[m].type,p?r[p]||(r[p]=!0,o=f.get(p),o?(this.chart[p]?(q=this.chart[p],q.refresh(b)):q=new o(this._themeConfig,this._messageCenter,this._zr,b,this),this._chartList.push(q),this.chart[p]=q):void 0):void 0;for(p in this.chart)p==e.CHART_TYPE_ISLAND||r[p]||(this.chart[p].dispose(),this.chart[p]=null,delete this.chart[p]);this.component.grid&&this.component.grid.refixAxisShape(this.component),this._island.refresh(b),this._toolbox.refresh(b),b.animation&&!b.renderAsImage?this._zr.refresh():this._zr.render();var s="IMG"+this.id,t=document.getElementById(s);b.renderAsImage&&i?(t?t.src=this.getDataURL(b.renderAsImage):(t=this.getImage(b.renderAsImage),t.id=s,t.style.position="absolute",t.style.left=0,t.style.top=0,this.dom.firstChild.appendChild(t)),this.un(),this._zr.un(),this._disposeChartList(),this._zr.clear()):t&&t.parentNode.removeChild(t),t=null,this._option=b}},restore:function(){this._clearEffect(),this._option=f.clone(this._optionRestore),this._disposeChartList(),this._island.clear(),this._toolbox.reset(this._option,!0),this._render(this._option)},refresh:function(a){this._clearEffect(),a=a||{};var b=a.option;!this._refreshInside&&b&&(b=this.getOption(),f.merge(b,a.option,!0),f.merge(this._optionRestore,a.option,!0),this._toolbox.reset(b)),this._island.refresh(b),this._toolbox.refresh(b),this._zr.clearAnimation();for(var c=0,d=this._chartList.length;d>c;c++)this._chartList[c].refresh&&this._chartList[c].refresh(b);this.component.grid&&this.component.grid.refixAxisShape(this.component),this._zr.refresh()},_disposeChartList:function(){this._clearEffect(),this._zr.clearAnimation();for(var a=this._chartList.length;a--;){var b=this._chartList[a];if(b){var c=b.type;this.chart[c]&&delete this.chart[c],this.component[c]&&delete this.component[c],b.dispose&&b.dispose()}}this._chartList=[]},_mergeGlobalConifg:function(b){for(var c=["backgroundColor","calculable","calculableColor","calculableHolderColor","nameConnector","valueConnector","animation","animationThreshold","animationDuration","animationDurationUpdate","animationEasing","addDataAnimation","symbolList","DRAG_ENABLE_TIME"],d=c.length;d--;){var f=c[d];null==b[f]&&(b[f]=null!=this._themeConfig[f]?this._themeConfig[f]:e[f])}var g=b.color;g&&g.length||(g=this._themeConfig.color||e.color),this._zr.getColor=function(b){var c=a("zrender/tool/color");return c.getColor(b,g)},i||(b.animation=!1,b.addDataAnimation=!1)},setOption:function(a,b){return a.timeline?this._setTimelineOption(a):this._setOption(a,b)},_setOption:function(a,b,c){return!b&&this._option?this._option=f.merge(this.getOption(),f.clone(a),!0):(this._option=f.clone(a),!c&&this._timeline&&this._timeline.dispose()),this._optionRestore=f.clone(this._option),this._option.series&&0!==this._option.series.length?(this.component.dataZoom&&(this._option.dataZoom||this._option.toolbox&&this._option.toolbox.feature&&this._option.toolbox.feature.dataZoom&&this._option.toolbox.feature.dataZoom.show)&&this.component.dataZoom.syncOption(this._option),this._toolbox.reset(this._option),this._render(this._option),this):void this._zr.clear()},getOption:function(){function a(a){var d=c._optionRestore[a];if(d)if(d instanceof Array)for(var e=d.length;e--;)b[a][e].data=f.clone(d[e].data);else b[a].data=f.clone(d.data)}var b=f.clone(this._option),c=this;return a("xAxis"),a("yAxis"),a("series"),b},setSeries:function(a,b){return b?(this._option.series=a,this.setOption(this._option,b)):this.setOption({series:a}),this},getSeries:function(){return this.getOption().series},_setTimelineOption:function(b){this._timeline&&this._timeline.dispose();var c=a("./component/timeline"),d=new c(this._themeConfig,this._messageCenter,this._zr,b,this);return this._timeline=d,this.component.timeline=this._timeline,this},addData:function(a,b,c,d,g){function h(){if(l._zr){l._zr.clearAnimation();for(var a=0,b=A.length;b>a;a++)A[a].motionlessOnce=j.addDataAnimation&&A[a].addDataAnimation;l._messageCenter.dispatch(e.EVENT.REFRESH,null,{option:j},l)}}for(var i=a instanceof Array?a:[[a,b,c,d,g]],j=this.getOption(),k=this._optionRestore,l=this,m=0,n=i.length;n>m;m++){a=i[m][0],b=i[m][1],c=i[m][2],d=i[m][3],g=i[m][4];var o=k.series[a],p=c?"unshift":"push",q=c?"pop":"shift";if(o){var r=o.data,s=j.series[a].data;if(r[p](b),s[p](b),d||(r[q](),b=s[q]()),null!=g){var t,u;if(o.type===e.CHART_TYPE_PIE&&(t=k.legend)&&(u=t.data)){var v=j.legend.data;if(u[p](g),v[p](g),!d){var w=f.indexOf(u,b.name);-1!=w&&u.splice(w,1),w=f.indexOf(v,b.name),-1!=w&&v.splice(w,1)}}else if(null!=k.xAxis&&null!=k.yAxis){var x,y,z=o.xAxisIndex||0;(null==k.xAxis[z].type||"category"===k.xAxis[z].type)&&(x=k.xAxis[z].data,y=j.xAxis[z].data,x[p](g),y[p](g),d||(x[q](),y[q]())),z=o.yAxisIndex||0,"category"===k.yAxis[z].type&&(x=k.yAxis[z].data,y=j.yAxis[z].data,x[p](g),y[p](g),d||(x[q](),y[q]()))}}this._option.series[a].data=j.series[a].data}}this._zr.clearAnimation();for(var A=this._chartList,B=0,C=function(){B--,0===B&&h()},m=0,n=A.length;n>m;m++)j.addDataAnimation&&A[m].addDataAnimation&&(B++,A[m].addDataAnimation(i,C));return this.component.dataZoom&&this.component.dataZoom.syncOption(j),this._option=j,j.addDataAnimation||setTimeout(h,0),this},addMarkPoint:function(a,b){return this._addMark(a,b,"markPoint")},addMarkLine:function(a,b){return this._addMark(a,b,"markLine")},_addMark:function(a,b,c){var d,e=this._option.series;if(e&&(d=e[a])){var g=this._optionRestore.series,h=g[a],i=d[c],j=h[c];i=d[c]=i||{data:[]},j=h[c]=j||{data:[]};for(var k in b)"data"===k?(i.data=i.data.concat(b.data),j.data=j.data.concat(b.data)):"object"!=typeof b[k]||null==i[k]?i[k]=j[k]=b[k]:(f.merge(i[k],b[k],!0),f.merge(j[k],b[k],!0));var l=this.chart[d.type];l&&l.addMark(a,b,c)}return this},delMarkPoint:function(a,b){return this._delMark(a,b,"markPoint")},delMarkLine:function(a,b){return this._delMark(a,b,"markLine")},_delMark:function(a,b,c){var d,e,f,g=this._option.series;if(!(g&&(d=g[a])&&(e=d[c])&&(f=e.data)))return this;b=b.split(" > ");for(var h=-1,i=0,j=f.length;j>i;i++){var k=f[i];if(k instanceof Array){if(k[0].name===b[0]&&k[1].name===b[1]){h=i;break}}else if(k.name===b[0]){h=i;break}}if(h>-1){f.splice(h,1),this._optionRestore.series[a][c].data.splice(h,1);var l=this.chart[d.type];l&&l.delMark(a,b.join(" > "),c)}return this},getDom:function(){return this.dom},getZrender:function(){return this._zr},getDataURL:function(a){if(!i)return"";if(0===this._chartList.length){var b="IMG"+this.id,c=document.getElementById(b);if(c)return c.src}var d=this.component.tooltip;switch(d&&d.hideTip(),a){case"jpeg":break;default:a="png"}var e=this._option.backgroundColor;return e&&"rgba(0,0,0,0)"===e.replace(" ","")&&(e="#fff"),this._zr.toDataURL("image/"+a,e)},getImage:function(a){var b=this._optionRestore.title,c=document.createElement("img");return c.src=this.getDataURL(a),c.title=b&&b.text||"ECharts",c},getConnectedDataURL:function(b){if(!this.isConnected())return this.getDataURL(b);var c=this.dom,d={self:{img:this.getDataURL(b),left:c.offsetLeft,top:c.offsetTop,right:c.offsetLeft+c.offsetWidth,bottom:c.offsetTop+c.offsetHeight}},e=d.self.left,f=d.self.top,g=d.self.right,h=d.self.bottom;for(var i in this._connected)c=this._connected[i].getDom(),d[i]={img:this._connected[i].getDataURL(b),left:c.offsetLeft,top:c.offsetTop,right:c.offsetLeft+c.offsetWidth,bottom:c.offsetTop+c.offsetHeight},e=Math.min(e,d[i].left),f=Math.min(f,d[i].top),g=Math.max(g,d[i].right),h=Math.max(h,d[i].bottom);var j=document.createElement("div");j.style.position="absolute",j.style.left="-4000px",j.style.width=g-e+"px",j.style.height=h-f+"px",document.body.appendChild(j);var k=a("zrender").init(j),l=a("zrender/shape/Image");for(var i in d)k.addShape(new l({style:{x:d[i].left-e,y:d[i].top-f,image:d[i].img}}));k.render();var m=this._option.backgroundColor;m&&"rgba(0,0,0,0)"===m.replace(/ /g,"")&&(m="#fff");var n=k.toDataURL("image/png",m);return setTimeout(function(){k.dispose(),j.parentNode.removeChild(j),j=null},100),n},getConnectedImage:function(a){var b=this._optionRestore.title,c=document.createElement("img");return c.src=this.getConnectedDataURL(a),c.title=b&&b.text||"ECharts",c},on:function(a,b){return this._messageCenterOutSide.bind(a,b,this),this},un:function(a,b){return this._messageCenterOutSide.unbind(a,b),this},connect:function(a){if(!a)return this;if(this._connected||(this._connected={}),a instanceof Array)for(var b=0,c=a.length;c>b;b++)this._connected[a[b].id]=a[b];else this._connected[a.id]=a;return this},disConnect:function(a){if(!a||!this._connected)return this;if(a instanceof Array)for(var b=0,c=a.length;c>b;b++)delete this._connected[a[b].id];else delete this._connected[a.id];for(var d in this._connected)return this;return this._connected=!1,this},connectedEventHandler:function(a){a.__echartsId!=this.id&&this._onevent(a)},isConnected:function(){return!!this._connected},showLoading:function(b){var c={bar:a("zrender/loadingEffect/Bar"),bubble:a("zrender/loadingEffect/Bubble"),dynamicLine:a("zrender/loadingEffect/DynamicLine"),ring:a("zrender/loadingEffect/Ring"),spin:a("zrender/loadingEffect/Spin"),whirling:a("zrender/loadingEffect/Whirling")};this._toolbox.hideDataView(),b=b||{};var d=b.textStyle||{};b.textStyle=d;var g=f.merge(f.merge(f.clone(d),this._themeConfig.textStyle),e.textStyle);d.textFont=g.fontStyle+" "+g.fontWeight+" "+g.fontSize+"px "+g.fontFamily,d.text=b.text||this._option&&this._option.loadingText||this._themeConfig.loadingText||e.loadingText,null!=b.x&&(d.x=b.x),null!=b.y&&(d.y=b.y),b.effectOption=b.effectOption||{},b.effectOption.textStyle=d;var h=b.effect;return("string"==typeof h||null==h)&&(h=c[b.effect||this._option&&this._option.loadingEffect||this._themeConfig.loadingEffect||e.loadingEffect]||c.spin),this._zr.showLoading(new h(b.effectOption)),this},hideLoading:function(){return this._zr.hideLoading(),this},setTheme:function(b){if(b){if("string"==typeof b)switch(b){case"macarons":b=a("./theme/macarons");break;case"infographic":b=a("./theme/infographic");break;default:b={}}else b=b||{};this._themeConfig=b}if(!i){var c=this._themeConfig.textStyle;c&&c.fontFamily&&c.fontFamily2&&(c.fontFamily=c.fontFamily2),c=e.textStyle,c.fontFamily=c.fontFamily2}this._timeline&&this._timeline.setTheme(!0),this._optionRestore&&this.restore()},resize:function(){var a=this;return function(){if(a._clearEffect(),a._zr.resize(),a._option&&a._option.renderAsImage&&i)return a._render(a._option),a;a._zr.clearAnimation(),a._island.resize(),a._toolbox.resize(),a._timeline&&a._timeline.resize();for(var b=0,c=a._chartList.length;c>b;b++)a._chartList[b].resize&&a._chartList[b].resize();return a.component.grid&&a.component.grid.refixAxisShape(a.component),a._zr.refresh(),a._messageCenter.dispatch(e.EVENT.RESIZE,null,null,a),a}},_clearEffect:function(){this._zr.modLayer(e.EFFECT_ZLEVEL,{motionBlur:!1}),this._zr.painter.clearLayer(e.EFFECT_ZLEVEL)},clear:function(){return this._disposeChartList(),this._zr.clear(),this._option={},this._optionRestore={},this.dom.style.backgroundColor=null,this},dispose:function(){var a=this.dom.getAttribute(l);a&&delete k[a],this._island.dispose(),this._toolbox.dispose(),this._timeline&&this._timeline.dispose(),this._messageCenter.unbind(),this.clear(),this._zr.dispose(),this._zr=null}},h}),c("echarts/chart/bar",["require","./base","zrender/shape/Rectangle","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Rectangle");a("../component/axis"),a("../component/grid"),a("../component/dataZoom");var e=a("../config");e.bar={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,barMinHeight:0,barGap:"30%",barCategoryGap:"20%",itemStyle:{normal:{barBorderColor:"#fff",barBorderRadius:0,barBorderWidth:0,label:{show:!1}},emphasis:{barBorderColor:"#fff",barBorderRadius:0,barBorderWidth:0,label:{show:!1}}}};var f=a("../util/ecData"),g=a("zrender/tool/util"),h=a("zrender/tool/color");return b.prototype={type:e.CHART_TYPE_BAR,_buildShape:function(){this._buildPosition()},_buildNormal:function(a,b,c,f,g){for(var h,i,j,k,l,m,n,o,p,q,r,s,t=this.series,u=c[0][0],v=t[u],w="horizontal"==g,x=this.component.xAxis,y=this.component.yAxis,z=w?x.getAxis(v.xAxisIndex):y.getAxis(v.yAxisIndex),A=this._mapSize(z,c),B=A.gap,C=A.barGap,D=A.barWidthMap,E=A.barMaxWidthMap,F=A.barWidth,G=A.barMinHeightMap,H=A.interval,I=this.deepQuery([this.ecTheme,e],"island.r"),J=0,K=b;K>J&&null!=z.getNameByIndex(J);J++){w?k=z.getCoordByIndex(J)-B/2:l=z.getCoordByIndex(J)+B/2;for(var L=0,M=c.length;M>L;L++){var N=t[c[L][0]].yAxisIndex||0,O=t[c[L][0]].xAxisIndex||0;h=w?y.getAxis(N):x.getAxis(O),n=m=p=o=h.getCoord(0);for(var P=0,Q=c[L].length;Q>P;P++)u=c[L][P],v=t[u],r=v.data[J],s=this.getDataFromOption(r,"-"),f[u]=f[u]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},j=Math.min(E[u]||Number.MAX_VALUE,D[u]||F),"-"!==s&&(s>0?(i=P>0?h.getCoordSize(s):w?n-h.getCoord(s):h.getCoord(s)-n,1===Q&&G[u]>i&&(i=G[u]),w?(m-=i,l=m):(k=m,m+=i)):0>s?(i=P>0?h.getCoordSize(s):w?h.getCoord(s)-p:p-h.getCoord(s),1===Q&&G[u]>i&&(i=G[u]),w?(l=o,o+=i):(o-=i,k=o)):(i=0,w?(m-=i,l=m):(k=m,m+=i)),f[u][J]=w?k+j/2:l-j/2,f[u].min>s&&(f[u].min=s,w?(f[u].minY=l,f[u].minX=f[u][J]):(f[u].minX=k+i,f[u].minY=f[u][J])),f[u].max<s&&(f[u].max=s,w?(f[u].maxY=l,f[u].maxX=f[u][J]):(f[u].maxX=k+i,f[u].maxY=f[u][J])),f[u].sum+=s,f[u].counter++,J%H===0&&(q=this._getBarItem(u,J,z.getNameByIndex(J),k,l-(w?0:j),w?j:i,w?i:j,w?"vertical":"horizontal"),this.shapeList.push(new d(q))));for(var P=0,Q=c[L].length;Q>P;P++)u=c[L][P],v=t[u],r=v.data[J],s=this.getDataFromOption(r,"-"),j=Math.min(E[u]||Number.MAX_VALUE,D[u]||F),"-"==s&&this.deepQuery([r,v,this.option],"calculable")&&(w?(m-=I,l=m):(k=m,m+=I),q=this._getBarItem(u,J,z.getNameByIndex(J),k,l-(w?0:j),w?j:I,w?I:j,w?"vertical":"horizontal"),q.hoverable=!1,q.draggable=!1,q.style.lineWidth=1,q.style.brushType="stroke",q.style.strokeColor=v.calculableHolderColor||this.ecTheme.calculableHolderColor||e.calculableHolderColor,this.shapeList.push(new d(q)));w?k+=j+C:l-=j+C}}this._calculMarkMapXY(f,c,w?"y":"x")},_buildHorizontal:function(a,b,c,d){return this._buildNormal(a,b,c,d,"horizontal")},_buildVertical:function(a,b,c,d){return this._buildNormal(a,b,c,d,"vertical")},_buildOther:function(a,b,c,e){for(var f=this.series,g=0,h=c.length;h>g;g++)for(var i=0,j=c[g].length;j>i;i++){var k=c[g][i],l=f[k],m=l.xAxisIndex||0,n=this.component.xAxis.getAxis(m),o=n.getCoord(0),p=l.yAxisIndex||0,q=this.component.yAxis.getAxis(p),r=q.getCoord(0);
e[k]=e[k]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var s=0,t=l.data.length;t>s;s++){var u=l.data[s],v=this.getDataFromOption(u,"-");if(v instanceof Array){var w,x,y=n.getCoord(v[0]),z=q.getCoord(v[1]),A=[u,l],B=this.deepQuery(A,"barWidth")||10,C=this.deepQuery(A,"barHeight");null!=C?(w="horizontal",v[0]>0?(B=y-o,y-=B):B=v[0]<0?o-y:0,x=this._getBarItem(k,s,v[0],y,z-C/2,B,C,w)):(w="vertical",v[1]>0?C=r-z:v[1]<0?(C=z-r,z-=C):C=0,x=this._getBarItem(k,s,v[0],y-B/2,z,B,C,w)),this.shapeList.push(new d(x)),y=n.getCoord(v[0]),z=q.getCoord(v[1]),e[k].min0>v[0]&&(e[k].min0=v[0],e[k].minY0=z,e[k].minX0=y),e[k].max0<v[0]&&(e[k].max0=v[0],e[k].maxY0=z,e[k].maxX0=y),e[k].sum0+=v[0],e[k].counter0++,e[k].min1>v[1]&&(e[k].min1=v[1],e[k].minY1=z,e[k].minX1=y),e[k].max1<v[1]&&(e[k].max1=v[1],e[k].maxY1=z,e[k].maxX1=y),e[k].sum1+=v[1],e[k].counter1++}}}this._calculMarkMapXY(e,c,"xy")},_mapSize:function(a,b,c){var d,e,f=this._findSpecialBarSzie(b,c),g=f.barWidthMap,h=f.barMaxWidthMap,i=f.barMinHeightMap,j=f.sBarWidthCounter,k=f.sBarWidthTotal,l=f.barGap,m=f.barCategoryGap,n=1;if(b.length!=j){if(c)d=a.getGap(),l=0,e=+(d/b.length).toFixed(2),0>=e&&(n=Math.floor(b.length/d),e=1);else if(d="string"==typeof m&&m.match(/%$/)?(a.getGap()*(100-parseFloat(m))/100).toFixed(2)-0:a.getGap()-m,"string"==typeof l&&l.match(/%$/)?(l=parseFloat(l)/100,e=+((d-k)/((b.length-1)*l+b.length-j)).toFixed(2),l=e*l):(l=parseFloat(l),e=+((d-k-l*(b.length-1))/(b.length-j)).toFixed(2)),0>=e)return this._mapSize(a,b,!0)}else if(d=j>1?"string"==typeof m&&m.match(/%$/)?+(a.getGap()*(100-parseFloat(m))/100).toFixed(2):a.getGap()-m:k,e=0,l=j>1?+((d-k)/(j-1)).toFixed(2):0,0>l)return this._mapSize(a,b,!0);return this._recheckBarMaxWidth(b,g,h,i,d,e,l,n)},_findSpecialBarSzie:function(a,b){for(var c,d,e,f,g=this.series,h={},i={},j={},k=0,l=0,m=0,n=a.length;n>m;m++)for(var o={barWidth:!1,barMaxWidth:!1},p=0,q=a[m].length;q>p;p++){var r=a[m][p],s=g[r];if(!b){if(o.barWidth)h[r]=c;else if(c=this.query(s,"barWidth"),null!=c){h[r]=c,l+=c,k++,o.barWidth=!0;for(var t=0,u=p;u>t;t++){var v=a[m][t];h[v]=c}}if(o.barMaxWidth)i[r]=d;else if(d=this.query(s,"barMaxWidth"),null!=d){i[r]=d,o.barMaxWidth=!0;for(var t=0,u=p;u>t;t++){var v=a[m][t];i[v]=d}}}j[r]=this.query(s,"barMinHeight"),e=null!=e?e:this.query(s,"barGap"),f=null!=f?f:this.query(s,"barCategoryGap")}return{barWidthMap:h,barMaxWidthMap:i,barMinHeightMap:j,sBarWidth:c,sBarMaxWidth:d,sBarWidthCounter:k,sBarWidthTotal:l,barGap:e,barCategoryGap:f}},_recheckBarMaxWidth:function(a,b,c,d,e,f,g,h){for(var i=0,j=a.length;j>i;i++){var k=a[i][0];c[k]&&c[k]<f&&(e-=f-c[k])}return{barWidthMap:b,barMaxWidthMap:c,barMinHeightMap:d,gap:e,barWidth:f,barGap:g,interval:h}},_getBarItem:function(a,b,c,d,e,g,i,j){var k,l=this.series,m=l[a],n=m.data[b],o=this._sIndex2ColorMap[a],p=[n,m],q=this.deepMerge(p,"itemStyle.normal"),r=this.deepMerge(p,"itemStyle.emphasis"),s=q.barBorderWidth;k={zlevel:m.zlevel,z:m.z,clickable:this.deepQuery(p,"clickable"),style:{x:d,y:e,width:g,height:i,brushType:"both",color:this.getItemStyleColor(this.deepQuery(p,"itemStyle.normal.color")||o,a,b,n),radius:q.barBorderRadius,lineWidth:s,strokeColor:q.barBorderColor},highlightStyle:{color:this.getItemStyleColor(this.deepQuery(p,"itemStyle.emphasis.color"),a,b,n),radius:r.barBorderRadius,lineWidth:r.barBorderWidth,strokeColor:r.barBorderColor},_orient:j};var t=k.style;k.highlightStyle.color=k.highlightStyle.color||("string"==typeof t.color?h.lift(t.color,-.3):t.color),t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.height=Math.ceil(t.height),t.width=Math.ceil(t.width),s>0&&t.height>s&&t.width>s?(t.y+=s/2,t.height-=s,t.x+=s/2,t.width-=s):t.brushType="fill",k.highlightStyle.textColor=k.highlightStyle.color,k=this.addLabel(k,m,n,c,j);for(var u=[t,k.highlightStyle],v=0,w=u.length;w>v;v++){var x=u[v].textPosition;if("insideLeft"===x||"insideRight"===x||"insideTop"===x||"insideBottom"===x){var y=5;switch(x){case"insideLeft":u[v].textX=t.x+y,u[v].textY=t.y+t.height/2,u[v].textAlign="left",u[v].textBaseline="middle";break;case"insideRight":u[v].textX=t.x+t.width-y,u[v].textY=t.y+t.height/2,u[v].textAlign="right",u[v].textBaseline="middle";break;case"insideTop":u[v].textX=t.x+t.width/2,u[v].textY=t.y+y/2,u[v].textAlign="center",u[v].textBaseline="top";break;case"insideBottom":u[v].textX=t.x+t.width/2,u[v].textY=t.y+t.height-y/2,u[v].textAlign="center",u[v].textBaseline="bottom"}u[v].textPosition="specific",u[v].textColor=u[v].textColor||"#fff"}}return this.deepQuery([n,m,this.option],"calculable")&&(this.setCalculable(k),k.draggable=!0),f.pack(k,l[a],a,l[a].data[b],b,c),k},getMarkCoord:function(a,b){var c,d,e=this.series[a],f=this.xMarkMap[a],g=this.component.xAxis.getAxis(e.xAxisIndex),h=this.component.yAxis.getAxis(e.yAxisIndex);if(!b.type||"max"!==b.type&&"min"!==b.type&&"average"!==b.type)if(f.isHorizontal){c="string"==typeof b.xAxis&&g.getIndexByName?g.getIndexByName(b.xAxis):b.xAxis||0;var i=f[c];i=null!=i?i:"string"!=typeof b.xAxis&&g.getCoordByIndex?g.getCoordByIndex(b.xAxis||0):g.getCoord(b.xAxis||0),d=[i,h.getCoord(b.yAxis||0)]}else{c="string"==typeof b.yAxis&&h.getIndexByName?h.getIndexByName(b.yAxis):b.yAxis||0;var j=f[c];j=null!=j?j:"string"!=typeof b.yAxis&&h.getCoordByIndex?h.getCoordByIndex(b.yAxis||0):h.getCoord(b.yAxis||0),d=[g.getCoord(b.xAxis||0),j]}else{var k=null!=b.valueIndex?b.valueIndex:null!=f.maxX0?"1":"";d=[f[b.type+"X"+k],f[b.type+"Y"+k],f[b.type+"Line"+k],f[b.type+k]]}return d},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()},addDataAnimation:function(a,b){function c(){p--,0===p&&b&&b()}for(var d=this.series,e={},g=0,h=a.length;h>g;g++)e[a[g][0]]=a[g];for(var i,j,k,l,m,n,o,p=0,g=this.shapeList.length-1;g>=0;g--)if(n=f.get(this.shapeList[g],"seriesIndex"),e[n]&&!e[n][3]&&"rectangle"===this.shapeList[g].type){if(o=f.get(this.shapeList[g],"dataIndex"),m=d[n],e[n][2]&&o===m.data.length-1){this.zr.delShape(this.shapeList[g].id);continue}if(!e[n][2]&&0===o){this.zr.delShape(this.shapeList[g].id);continue}"horizontal"===this.shapeList[g]._orient?(l=this.component.yAxis.getAxis(m.yAxisIndex||0).getGap(),k=e[n][2]?-l:l,i=0):(j=this.component.xAxis.getAxis(m.xAxisIndex||0).getGap(),i=e[n][2]?j:-j,k=0),this.shapeList[g].position=[0,0],p++,this.zr.animate(this.shapeList[g].id,"").when(this.query(this.option,"animationDurationUpdate"),{position:[i,k]}).done(c).start()}p||b&&b()}},g.inherits(b,c),a("../chart").define("bar",b),b}),c("echarts/chart/radar",["require","./base","zrender/shape/Polygon","../component/polar","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../util/accMath","../chart"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Polygon");a("../component/polar");var e=a("../config");e.radar={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,polarIndex:0,itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid"}},emphasis:{label:{show:!1}}},symbolSize:2};var f=a("../util/ecData"),g=a("zrender/tool/util"),h=a("zrender/tool/color");return b.prototype={type:e.CHART_TYPE_RADAR,_buildShape:function(){this.selectedMap={},this._symbol=this.option.symbolList,this._queryTarget,this._dropBoxList=[],this._radarDataCounter=0;for(var a,b=this.series,c=this.component.legend,d=0,f=b.length;f>d;d++)b[d].type===e.CHART_TYPE_RADAR&&(this.serie=this.reformOption(b[d]),this.legendHoverLink=b[d].legendHoverLink||this.legendHoverLink,a=this.serie.name||"",this.selectedMap[a]=c?c.isSelected(a):!0,this.selectedMap[a]&&(this._queryTarget=[this.serie,this.option],this.deepQuery(this._queryTarget,"calculable")&&this._addDropBox(d),this._buildSingleRadar(d),this.buildMark(d)));this.addShapeList()},_buildSingleRadar:function(a){for(var b,c,d,e,f=this.component.legend,g=this.serie.data,h=this.deepQuery(this._queryTarget,"calculable"),i=0;i<g.length;i++)d=g[i].name||"",this.selectedMap[d]=f?f.isSelected(d):!0,this.selectedMap[d]&&(f?(c=f.getColor(d),b=f.getItemShape(d),b&&(b.style.brushType=this.deepQuery([g[i],this.serie],"itemStyle.normal.areaStyle")?"both":"stroke",f.setItemShape(d,b))):c=this.zr.getColor(i),e=this._getPointList(this.serie.polarIndex,g[i]),this._addSymbol(e,c,i,a,this.serie.polarIndex),this._addDataShape(e,c,g[i],a,i,h),this._radarDataCounter++)},_getPointList:function(a,b){for(var c,d,e=[],f=this.component.polar,g=0,h=b.value.length;h>g;g++)d=this.getDataFromOption(b.value[g]),c="-"!=d?f.getVector(a,g,d):!1,c&&e.push(c);return e},_addSymbol:function(a,b,c,d,e){for(var g,h=this.series,i=this.component.polar,j=0,k=a.length;k>j;j++)g=this.getSymbolShape(this.deepMerge([h[d].data[c],h[d]]),d,h[d].data[c].value[j],j,i.getIndicatorText(e,j),a[j][0],a[j][1],this._symbol[this._radarDataCounter%this._symbol.length],b,"#fff","vertical"),g.zlevel=this.getZlevelBase(),g.z=this.getZBase()+1,f.set(g,"data",h[d].data[c]),f.set(g,"value",h[d].data[c].value),f.set(g,"dataIndex",c),f.set(g,"special",j),this.shapeList.push(g)},_addDataShape:function(a,b,c,e,g,i){var j=this.series,k=[c,this.serie],l=this.getItemStyleColor(this.deepQuery(k,"itemStyle.normal.color"),e,g,c),m=this.deepQuery(k,"itemStyle.normal.lineStyle.width"),n=this.deepQuery(k,"itemStyle.normal.lineStyle.type"),o=this.deepQuery(k,"itemStyle.normal.areaStyle.color"),p=this.deepQuery(k,"itemStyle.normal.areaStyle"),q={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:a,brushType:p?"both":"stroke",color:o||l||("string"==typeof b?h.alpha(b,.5):b),strokeColor:l||b,lineWidth:m,lineType:n},highlightStyle:{brushType:this.deepQuery(k,"itemStyle.emphasis.areaStyle")||p?"both":"stroke",color:this.deepQuery(k,"itemStyle.emphasis.areaStyle.color")||o||l||("string"==typeof b?h.alpha(b,.5):b),strokeColor:this.getItemStyleColor(this.deepQuery(k,"itemStyle.emphasis.color"),e,g,c)||l||b,lineWidth:this.deepQuery(k,"itemStyle.emphasis.lineStyle.width")||m,lineType:this.deepQuery(k,"itemStyle.emphasis.lineStyle.type")||n}};f.pack(q,j[e],e,c,g,c.name,this.component.polar.getIndicator(j[e].polarIndex)),i&&(q.draggable=!0,this.setCalculable(q)),q=new d(q),this.shapeList.push(q)},_addDropBox:function(a){var b=this.series,c=this.deepQuery(this._queryTarget,"polarIndex");if(!this._dropBoxList[c]){var d=this.component.polar.getDropBox(c);d.zlevel=this.getZlevelBase(),d.z=this.getZBase(),this.setCalculable(d),f.pack(d,b,a,void 0,-1),this.shapeList.push(d),this._dropBoxList[c]=!0}},ondragend:function(a,b){var c=this.series;if(this.isDragend&&a.target){var d=a.target,e=f.get(d,"seriesIndex"),g=f.get(d,"dataIndex");this.component.legend&&this.component.legend.del(c[e].data[g].name),c[e].data.splice(g,1),b.dragOut=!0,b.needRefresh=!0,this.isDragend=!1}},ondrop:function(b,c){var d=this.series;if(this.isDrop&&b.target){var e,g,h=b.target,i=b.dragged,j=f.get(h,"seriesIndex"),k=f.get(h,"dataIndex"),l=this.component.legend;if(-1===k)e={value:f.get(i,"value"),name:f.get(i,"name")},d[j].data.push(e),l&&l.add(e.name,i.style.color||i.style.strokeColor);else{var m=a("../util/accMath");e=d[j].data[k],l&&l.del(e.name),e.name+=this.option.nameConnector+f.get(i,"name"),g=f.get(i,"value");for(var n=0;n<g.length;n++)e.value[n]=m.accAdd(e.value[n],g[n]);l&&l.add(e.name,i.style.color||i.style.strokeColor)}c.dragIn=c.dragIn||!0,this.isDrop=!1}},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()}},g.inherits(b,c),a("../chart").define("radar",b),b}),c("echarts/chart/scatter",["require","./base","../util/shape/Symbol","../component/axis","../component/grid","../component/dataZoom","../component/dataRange","../config","zrender/tool/util","zrender/tool/color","../chart"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("../util/shape/Symbol");a("../component/axis"),a("../component/grid"),a("../component/dataZoom"),a("../component/dataRange");var e=a("../config");e.scatter={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbolSize:4,large:!1,largeThreshold:2e3,itemStyle:{normal:{label:{show:!1}},emphasis:{label:{show:!1}}}};var f=a("zrender/tool/util"),g=a("zrender/tool/color");return b.prototype={type:e.CHART_TYPE_SCATTER,_buildShape:function(){var a=this.series;this._sIndex2ColorMap={},this._symbol=this.option.symbolList,this._sIndex2ShapeMap={},this.selectedMap={},this.xMarkMap={};for(var b,c,d,f,h=this.component.legend,i=[],j=0,k=a.length;k>j;j++)if(b=a[j],c=b.name,b.type===e.CHART_TYPE_SCATTER){if(a[j]=this.reformOption(a[j]),this.legendHoverLink=a[j].legendHoverLink||this.legendHoverLink,this._sIndex2ShapeMap[j]=this.query(b,"symbol")||this._symbol[j%this._symbol.length],h){if(this.selectedMap[c]=h.isSelected(c),this._sIndex2ColorMap[j]=g.alpha(h.getColor(c),.5),d=h.getItemShape(c)){var f=this._sIndex2ShapeMap[j];d.style.brushType=f.match("empty")?"stroke":"both",f=f.replace("empty","").toLowerCase(),f.match("rectangle")&&(d.style.x+=Math.round((d.style.width-d.style.height)/2),d.style.width=d.style.height),f.match("star")&&(d.style.n=f.replace("star","")-0||5,f="star"),f.match("image")&&(d.style.image=f.replace(new RegExp("^image:\\/\\/"),""),d.style.x+=Math.round((d.style.width-d.style.height)/2),d.style.width=d.style.height,f="image"),d.style.iconType=f,h.setItemShape(c,d)}}else this.selectedMap[c]=!0,this._sIndex2ColorMap[j]=g.alpha(this.zr.getColor(j),.5);this.selectedMap[c]&&i.push(j)}this._buildSeries(i),this.addShapeList()},_buildSeries:function(a){if(0!==a.length){for(var b,c,d,e,f,g,h,i,j=this.series,k={},l=0,m=a.length;m>l;l++)if(b=a[l],c=j[b],0!==c.data.length){f=this.component.xAxis.getAxis(c.xAxisIndex||0),g=this.component.yAxis.getAxis(c.yAxisIndex||0),k[b]=[];for(var n=0,o=c.data.length;o>n;n++)d=c.data[n],e=this.getDataFromOption(d,"-"),"-"===e||e.length<2||(h=f.getCoord(e[0]),i=g.getCoord(e[1]),k[b].push([h,i,n,d.name||""]));this.xMarkMap[b]=this._markMap(f,g,c.data,k[b]),this.buildMark(b)}this._buildPointList(k)}},_markMap:function(a,b,c,d){for(var e,f={min0:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,sum0:0,counter0:0,average0:0,min1:Number.POSITIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum1:0,counter1:0,average1:0},g=0,h=d.length;h>g;g++)e=c[d[g][2]].value||c[d[g][2]],f.min0>e[0]&&(f.min0=e[0],f.minY0=d[g][1],f.minX0=d[g][0]),f.max0<e[0]&&(f.max0=e[0],f.maxY0=d[g][1],f.maxX0=d[g][0]),f.sum0+=e[0],f.counter0++,f.min1>e[1]&&(f.min1=e[1],f.minY1=d[g][1],f.minX1=d[g][0]),f.max1<e[1]&&(f.max1=e[1],f.maxY1=d[g][1],f.maxX1=d[g][0]),f.sum1+=e[1],f.counter1++;var i=this.component.grid.getX(),j=this.component.grid.getXend(),k=this.component.grid.getY(),l=this.component.grid.getYend();f.average0=f.sum0/f.counter0;var m=a.getCoord(f.average0);f.averageLine0=[[m,l],[m,k]],f.minLine0=[[f.minX0,l],[f.minX0,k]],f.maxLine0=[[f.maxX0,l],[f.maxX0,k]],f.average1=f.sum1/f.counter1;var n=b.getCoord(f.average1);return f.averageLine1=[[i,n],[j,n]],f.minLine1=[[i,f.minY1],[j,f.minY1]],f.maxLine1=[[i,f.maxY1],[j,f.maxY1]],f},_buildPointList:function(a){var b,c,d,e,f=this.series;for(var g in a)if(b=f[g],c=a[g],b.large&&b.data.length>b.largeThreshold)this.shapeList.push(this._getLargeSymbol(b,c,this.getItemStyleColor(this.query(b,"itemStyle.normal.color"),g,-1)||this._sIndex2ColorMap[g]));else for(var h=0,i=c.length;i>h;h++)d=c[h],e=this._getSymbol(g,d[2],d[3],d[0],d[1]),e&&this.shapeList.push(e)},_getSymbol:function(a,b,c,d,e){var f,g=this.series,h=g[a],i=h.data[b],j=this.component.dataRange;if(j){if(f=isNaN(i[2])?this._sIndex2ColorMap[a]:j.getColor(i[2]),!f)return null}else f=this._sIndex2ColorMap[a];var k=this.getSymbolShape(h,a,i,b,c,d,e,this._sIndex2ShapeMap[a],f,"rgba(0,0,0,0)","vertical");return k.zlevel=h.zlevel,k.z=h.z,k._main=!0,k},_getLargeSymbol:function(a,b,c){return new d({zlevel:a.zlevel,z:a.z,_main:!0,hoverable:!1,style:{pointList:b,color:c,strokeColor:c},highlightStyle:{pointList:[]}})},getMarkCoord:function(a,b){var c,d=this.series[a],e=this.xMarkMap[a],f=this.component.xAxis.getAxis(d.xAxisIndex),g=this.component.yAxis.getAxis(d.yAxisIndex);if(!b.type||"max"!==b.type&&"min"!==b.type&&"average"!==b.type)c=["string"!=typeof b.xAxis&&f.getCoordByIndex?f.getCoordByIndex(b.xAxis||0):f.getCoord(b.xAxis||0),"string"!=typeof b.yAxis&&g.getCoordByIndex?g.getCoordByIndex(b.yAxis||0):g.getCoord(b.yAxis||0)];else{var h=null!=b.valueIndex?b.valueIndex:1;c=[e[b.type+"X"+h],e[b.type+"Y"+h],e[b.type+"Line"+h],e[b.type+h]]}return c},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()},ondataRange:function(a,b){this.component.dataRange&&(this.refresh(),b.needRefresh=!0)}},f.inherits(b,c),a("../chart").define("scatter",b),b}),c("echarts/chart/funnel",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Polygon","../config","../util/ecData","../util/number","zrender/tool/util","zrender/tool/color","zrender/tool/area","../chart"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Line"),f=a("zrender/shape/Polygon"),g=a("../config");g.funnel={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,x:80,y:60,x2:80,y2:60,min:0,max:100,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",itemStyle:{normal:{borderColor:"#fff",borderWidth:1,label:{show:!0,position:"outer"},labelLine:{show:!0,length:10,lineStyle:{width:1,type:"solid"}}},emphasis:{borderColor:"rgba(0,0,0,0)",borderWidth:1,label:{show:!0},labelLine:{show:!0}}}};var h=a("../util/ecData"),i=a("../util/number"),j=a("zrender/tool/util"),k=a("zrender/tool/color"),l=a("zrender/tool/area");return b.prototype={type:g.CHART_TYPE_FUNNEL,_buildShape:function(){var a=this.series,b=this.component.legend;this._paramsMap={},this._selected={},this.selectedMap={};for(var c,d=0,e=a.length;e>d;d++)if(a[d].type===g.CHART_TYPE_FUNNEL){if(a[d]=this.reformOption(a[d]),this.legendHoverLink=a[d].legendHoverLink||this.legendHoverLink,c=a[d].name||"",this.selectedMap[c]=b?b.isSelected(c):!0,!this.selectedMap[c])continue;this._buildSingleFunnel(d),this.buildMark(d)}this.addShapeList()},_buildSingleFunnel:function(a){var b=this.component.legend,c=this.series[a],d=this._mapData(a),e=this._getLocation(a);this._paramsMap[a]={location:e,data:d};for(var f,g=0,h=[],j=0,k=d.length;k>j;j++)f=d[j].name,this.selectedMap[f]=b?b.isSelected(f):!0,this.selectedMap[f]&&!isNaN(d[j].value)&&(h.push(d[j]),g++);if(0!==g){for(var l,m,n,o,p=this._buildFunnelCase(a),q=c.funnelAlign,r=c.gap,s=g>1?(e.height-(g-1)*r)/g:e.height,t=e.y,u="descending"===c.sort?this._getItemWidth(a,h[0].value):i.parsePercent(c.minSize,e.width),v="descending"===c.sort?1:0,w=e.centerX,x=[],j=0,k=h.length;k>j;j++)if(f=h[j].name,this.selectedMap[f]&&!isNaN(h[j].value)){switch(l=k-2>=j?this._getItemWidth(a,h[j+v].value):"descending"===c.sort?i.parsePercent(c.minSize,e.width):i.parsePercent(c.maxSize,e.width),q){case"left":m=e.x;break;case"right":m=e.x+e.width-u;break;default:m=w-u/2}n=this._buildItem(a,h[j]._index,b?b.getColor(f):this.zr.getColor(h[j]._index),m,t,u,l,s,q),t+=s+r,o=n.style.pointList,x.unshift([o[0][0]-10,o[0][1]]),x.push([o[1][0]+10,o[1][1]]),0===j&&(0===u?(o=x.pop(),"center"==q&&(x[0][0]+=10),"right"==q&&(x[0][0]=o[0]),x[0][1]-="center"==q?10:15,1==k&&(o=n.style.pointList)):(x[x.length-1][1]-=5,x[0][1]-=5)),u=l}p&&(x.unshift([o[3][0]-10,o[3][1]]),x.push([o[2][0]+10,o[2][1]]),0===u?(o=x.pop(),"center"==q&&(x[0][0]+=10),"right"==q&&(x[0][0]=o[0]),x[0][1]+="center"==q?10:15):(x[x.length-1][1]+=5,x[0][1]+=5),p.style.pointList=x)}},_buildFunnelCase:function(a){var b=this.series[a];if(this.deepQuery([b,this.option],"calculable")){var c=this._paramsMap[a].location,d=10,e={hoverable:!1,style:{pointListd:[[c.x-d,c.y-d],[c.x+c.width+d,c.y-d],[c.x+c.width+d,c.y+c.height+d],[c.x-d,c.y+c.height+d]],brushType:"stroke",lineWidth:1,strokeColor:b.calculableHolderColor||this.ecTheme.calculableHolderColor||g.calculableHolderColor}};return h.pack(e,b,a,void 0,-1),this.setCalculable(e),e=new f(e),this.shapeList.push(e),e}},_getLocation:function(a){var b=this.series[a],c=this.zr.getWidth(),d=this.zr.getHeight(),e=this.parsePercent(b.x,c),f=this.parsePercent(b.y,d),g=null==b.width?c-e-this.parsePercent(b.x2,c):this.parsePercent(b.width,c);return{x:e,y:f,width:g,height:null==b.height?d-f-this.parsePercent(b.y2,d):this.parsePercent(b.height,d),centerX:e+g/2}},_mapData:function(a){function b(a,b){return"-"===a.value?1:"-"===b.value?-1:b.value-a.value}function c(a,c){return-b(a,c)}for(var d=this.series[a],e=j.clone(d.data),f=0,g=e.length;g>f;f++)e[f]._index=f;return"none"!=d.sort&&e.sort("descending"===d.sort?b:c),e},_buildItem:function(a,b,c,d,e,f,g,i,j){var k=this.series,l=k[a],m=l.data[b],n=this.getPolygon(a,b,c,d,e,f,g,i,j);h.pack(n,k[a],a,k[a].data[b],b,k[a].data[b].name),this.shapeList.push(n);var o=this.getLabel(a,b,c,d,e,f,g,i,j);h.pack(o,k[a],a,k[a].data[b],b,k[a].data[b].name),this.shapeList.push(o),this._needLabel(l,m,!1)||(o.invisible=!0);var p=this.getLabelLine(a,b,c,d,e,f,g,i,j);this.shapeList.push(p),this._needLabelLine(l,m,!1)||(p.invisible=!0);var q=[],r=[];return this._needLabelLine(l,m,!0)&&(q.push(p.id),r.push(p.id)),this._needLabel(l,m,!0)&&(q.push(o.id),r.push(n.id)),n.hoverConnect=q,o.hoverConnect=r,n},_getItemWidth:function(a,b){var c=this.series[a],d=this._paramsMap[a].location,e=c.min,f=c.max,g=i.parsePercent(c.minSize,d.width),h=i.parsePercent(c.maxSize,d.width);return(b-e)*(h-g)/(f-e)+g},getPolygon:function(a,b,c,d,e,g,h,i,j){var l,m=this.series[a],n=m.data[b],o=[n,m],p=this.deepMerge(o,"itemStyle.normal")||{},q=this.deepMerge(o,"itemStyle.emphasis")||{},r=this.getItemStyleColor(p.color,a,b,n)||c,s=this.getItemStyleColor(q.color,a,b,n)||("string"==typeof r?k.lift(r,-.2):r);switch(j){case"left":l=d;break;case"right":l=d+(g-h);break;default:l=d+(g-h)/2}var t={zlevel:m.zlevel,z:m.z,clickable:this.deepQuery(o,"clickable"),style:{pointList:[[d,e],[d+g,e],[l+h,e+i],[l,e+i]],brushType:"both",color:r,lineWidth:p.borderWidth,strokeColor:p.borderColor},highlightStyle:{color:s,lineWidth:q.borderWidth,strokeColor:q.borderColor}};return this.deepQuery([n,m,this.option],"calculable")&&(this.setCalculable(t),t.draggable=!0),new f(t)},getLabel:function(a,b,c,e,f,g,h,i,m){var n,o=this.series[a],p=o.data[b],q=this._paramsMap[a].location,r=j.merge(j.clone(p.itemStyle)||{},o.itemStyle),s="normal",t=r[s].label,u=t.textStyle||{},v=r[s].labelLine.length,w=this.getLabelText(a,b,s),x=this.getFont(u),y=c;t.position=t.position||r.normal.label.position,"inner"===t.position||"inside"===t.position||"center"===t.position?(n=m,y=Math.max(g,h)/2>l.getTextWidth(w,x)?"#fff":k.reverse(c)):n="left"===t.position?"right":"left";var z={zlevel:o.zlevel,z:o.z+1,style:{x:this._getLabelPoint(t.position,e,q,g,h,v,m),y:f+i/2,color:u.color||y,text:w,textAlign:u.align||n,textBaseline:u.baseline||"middle",textFont:x}};return s="emphasis",t=r[s].label||t,u=t.textStyle||u,v=r[s].labelLine.length||v,t.position=t.position||r.normal.label.position,w=this.getLabelText(a,b,s),x=this.getFont(u),y=c,"inner"===t.position||"inside"===t.position||"center"===t.position?(n=m,y=Math.max(g,h)/2>l.getTextWidth(w,x)?"#fff":k.reverse(c)):n="left"===t.position?"right":"left",z.highlightStyle={x:this._getLabelPoint(t.position,e,q,g,h,v,m),color:u.color||y,text:w,textAlign:u.align||n,textFont:x,brushType:"fill"},new d(z)},getLabelText:function(a,b,c){var d=this.series,e=d[a],f=e.data[b],g=this.deepQuery([f,e],"itemStyle."+c+".label.formatter");return g?"function"==typeof g?g.call(this.myChart,{seriesIndex:a,seriesName:e.name||"",series:e,dataIndex:b,data:f,name:f.name,value:f.value}):"string"==typeof g?g=g.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}").replace("{a0}",e.name).replace("{b0}",f.name).replace("{c0}",f.value):void 0:f.name},getLabelLine:function(a,b,c,d,f,g,h,i,k){var l=this.series[a],m=l.data[b],n=this._paramsMap[a].location,o=j.merge(j.clone(m.itemStyle)||{},l.itemStyle),p="normal",q=o[p].labelLine,r=o[p].labelLine.length,s=q.lineStyle||{},t=o[p].label;t.position=t.position||o.normal.label.position;var u={zlevel:l.zlevel,z:l.z+1,hoverable:!1,style:{xStart:this._getLabelLineStartPoint(d,n,g,h,k),yStart:f+i/2,xEnd:this._getLabelPoint(t.position,d,n,g,h,r,k),yEnd:f+i/2,strokeColor:s.color||c,lineType:s.type,lineWidth:s.width}};return p="emphasis",q=o[p].labelLine||q,r=o[p].labelLine.length||r,s=q.lineStyle||s,t=o[p].label||t,t.position=t.position,u.highlightStyle={xEnd:this._getLabelPoint(t.position,d,n,g,h,r,k),strokeColor:s.color||c,lineType:s.type,lineWidth:s.width},new e(u)},_getLabelPoint:function(a,b,c,d,e,f,g){switch(a="inner"===a||"inside"===a?"center":a){case"center":return"center"==g?b+d/2:"left"==g?b+10:b+d-10;case"left":return"auto"===f?c.x-10:"center"==g?c.centerX-Math.max(d,e)/2-f:"right"==g?b-(e>d?e-d:0)-f:c.x-f;default:return"auto"===f?c.x+c.width+10:"center"==g?c.centerX+Math.max(d,e)/2+f:"right"==g?c.x+c.width+f:b+Math.max(d,e)+f}},_getLabelLineStartPoint:function(a,b,c,d,e){return"center"==e?b.centerX:d>c?a+Math.min(c,d)/2:a+Math.max(c,d)/2},_needLabel:function(a,b,c){return this.deepQuery([b,a],"itemStyle."+(c?"emphasis":"normal")+".label.show")},_needLabelLine:function(a,b,c){return this.deepQuery([b,a],"itemStyle."+(c?"emphasis":"normal")+".labelLine.show")},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()}},j.inherits(b,c),a("../chart").define("funnel",b),b}),c("echarts/chart/chord",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Sector","../util/shape/Ribbon","../util/shape/Icon","zrender/shape/BezierCurve","../config","../util/ecData","zrender/tool/util","zrender/tool/vector","../data/Graph","../layout/Chord","../chart"],function(a){"use strict";function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.scaleLineLength=4,this.scaleUnitAngle=4,this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Line"),f=a("zrender/shape/Sector"),g=a("../util/shape/Ribbon"),h=a("../util/shape/Icon"),i=a("zrender/shape/BezierCurve"),j=a("../config");j.chord={zlevel:0,z:2,clickable:!0,radius:["65%","75%"],center:["50%","50%"],padding:2,sort:"none",sortSub:"none",startAngle:90,clockWise:!0,ribbonType:!0,minRadius:10,maxRadius:20,symbol:"circle",showScale:!1,showScaleText:!1,itemStyle:{normal:{borderWidth:0,borderColor:"#000",label:{show:!0,rotate:!1,distance:5},chordStyle:{width:1,color:"black",borderWidth:1,borderColor:"#999",opacity:.5}},emphasis:{borderWidth:0,borderColor:"#000",chordStyle:{width:1,color:"black",borderWidth:1,borderColor:"#999"}}}};var k=a("../util/ecData"),l=a("zrender/tool/util"),m=a("zrender/tool/vector"),n=a("../data/Graph"),o=a("../layout/Chord");return b.prototype={type:j.CHART_TYPE_CHORD,_init:function(){var a=this.series;this.selectedMap={};for(var b={},c={},d=0,e=a.length;e>d;d++)if(a[d].type===this.type){var f=this.isSelected(a[d].name);this.selectedMap[a[d].name]=f,f&&this.buildMark(d),this.reformOption(a[d]),b[a[d].name]=a[d]}for(var d=0,e=a.length;e>d;d++)if(a[d].type===this.type)if(a[d].insertToSerie){var g=b[a[d].insertToSerie];a[d]._referenceSerie=g}else c[a[d].name]=[a[d]];for(var d=0,e=a.length;e>d;d++)if(a[d].type===this.type&&a[d].insertToSerie){for(var h=a[d]._referenceSerie;h&&h._referenceSerie;)h=h._referenceSerie;c[h.name]&&this.selectedMap[a[d].name]&&c[h.name].push(a[d])}for(var i in c)this._buildChords(c[i]);this.addShapeList()},_getNodeCategory:function(a,b){return a.categories&&a.categories[b.category||0]},_getNodeQueryTarget:function(a,b){var c=this._getNodeCategory(a,b);return[b,c,a]},_getEdgeQueryTarget:function(a,b,c){return c=c||"normal",[b.itemStyle&&b.itemStyle[c],a.itemStyle[c].chordStyle]},_buildChords:function(a){for(var b=[],c=a[0],d=function(a){return a.layout.size>0},e=function(a){return function(b){return a.getEdge(b.node2,b.node1)}},f=0;f<a.length;f++){var g=a[f];if(this.selectedMap[g.name]){var h;g.matrix?h=this._getSerieGraphFromDataMatrix(g,c):g.links&&(h=this._getSerieGraphFromNodeLinks(g,c)),h.filterNode(d,this),g.ribbonType&&h.filterEdge(e(h)),b.push(h),h.__serie=g}}if(b.length){var i=b[0];if(!c.ribbonType){var j=c.minRadius,k=c.maxRadius,l=1/0,m=-1/0;i.eachNode(function(a){m=Math.max(a.layout.size,m),l=Math.min(a.layout.size,l)});var n=(k-j)/(m-l);i.eachNode(function(a){var b=this._getNodeQueryTarget(c,a),d=this.query(b,"symbolSize");a.layout.size=m===l?d||l:d||(a.layout.size-l)*n+j},this)}var p=new o;p.clockWise=c.clockWise,p.startAngle=c.startAngle*Math.PI/180,p.clockWise||(p.startAngle=-p.startAngle),p.padding=c.padding*Math.PI/180,p.sort=c.sort,p.sortSub=c.sortSub,p.directed=c.ribbonType,p.run(b);var q=this.query(c,"itemStyle.normal.label.show");if(c.ribbonType){this._buildSectors(c,0,i,c,b),q&&this._buildLabels(c,0,i,c,b);for(var f=0,r=0;f<a.length;f++)this.selectedMap[a[f].name]&&this._buildRibbons(a,f,b[r++],c);c.showScale&&this._buildScales(c,0,i)}else{this._buildNodeIcons(c,0,i,c,b),q&&this._buildLabels(c,0,i,c,b);for(var f=0,r=0;f<a.length;f++)this.selectedMap[a[f].name]&&this._buildEdgeCurves(a,f,b[r++],c,i)}this._initHoverHandler(a,b)}},_getSerieGraphFromDataMatrix:function(a,b){for(var c=[],d=0,e=[],f=0;f<a.matrix.length;f++)e[f]=a.matrix[f].slice();for(var g=a.data||a.nodes,f=0;f<g.length;f++){var h={},i=g[f];i.rawIndex=f;for(var j in i)"name"===j?h.id=i.name:h[j]=i[j];var k=this._getNodeCategory(b,i),l=k?k.name:i.name;if(this.selectedMap[l]=this.isSelected(l),this.selectedMap[l])c.push(h),d++;else{e.splice(d,1);for(var m=0;m<e.length;m++)e[m].splice(d,1)}}var o=n.fromMatrix(c,e,!0);return o.eachNode(function(a){a.layout={size:a.data.outValue},a.rawIndex=a.data.rawIndex}),o.eachEdge(function(a){a.layout={weight:a.data.weight}}),o},_getSerieGraphFromNodeLinks:function(a,b){for(var c=new n(!0),d=a.data||a.nodes,e=0,f=d.length;f>e;e++){var g=d[e];if(g&&!g.ignore){var h=this._getNodeCategory(b,g),i=h?h.name:g.name;if(this.selectedMap[i]=this.isSelected(i),this.selectedMap[i]){var j=c.addNode(g.name,g);j.rawIndex=e}}}for(var e=0,f=a.links.length;f>e;e++){var k=a.links[e],l=k.source,m=k.target;"number"==typeof l&&(l=d[l],l&&(l=l.name)),"number"==typeof m&&(m=d[m],m&&(m=m.name));var o=c.addEdge(l,m,k);o&&(o.rawIndex=e)}return c.eachNode(function(a){var c=a.data.value;if(null==c)if(c=0,b.ribbonType)for(var d=0;d<a.outEdges.length;d++)c+=a.outEdges[d].data.weight||0;else for(var d=0;d<a.edges.length;d++)c+=a.edges[d].data.weight||0;a.layout={size:c}}),c.eachEdge(function(a){a.layout={weight:null==a.data.weight?1:a.data.weight}}),c},_initHoverHandler:function(a,b){var c=a[0],d=b[0],e=this;d.eachNode(function(a){a.shape.onmouseover=function(){d.eachNode(function(a){a.shape.style.opacity=.1,a.labelShape&&(a.labelShape.style.opacity=.1,a.labelShape.modSelf()),a.shape.modSelf()});for(var c=0;c<b.length;c++)for(var f=0;f<b[c].edges.length;f++){var g=b[c].edges[f],h=e._getEdgeQueryTarget(b[c].__serie,g.data);g.shape.style.opacity=.1*e.deepQuery(h,"opacity"),g.shape.modSelf()}a.shape.style.opacity=1,a.labelShape&&(a.labelShape.style.opacity=1);for(var c=0;c<b.length;c++){var i=b[c].getNodeById(a.id);if(i)for(var f=0;f<i.outEdges.length;f++){var g=i.outEdges[f],h=e._getEdgeQueryTarget(b[c].__serie,g.data);g.shape.style.opacity=e.deepQuery(h,"opacity");var j=b[0].getNodeById(g.node2.id);j&&(j.shape&&(j.shape.style.opacity=1),j.labelShape&&(j.labelShape.style.opacity=1))}}e.zr.refreshNextFrame()},a.shape.onmouseout=function(){d.eachNode(function(a){a.shape.style.opacity=1,a.labelShape&&(a.labelShape.style.opacity=1,a.labelShape.modSelf()),a.shape.modSelf()});for(var a=0;a<b.length;a++)for(var f=0;f<b[a].edges.length;f++){var g=b[a].edges[f],h=[g.data,c];g.shape.style.opacity=e.deepQuery(h,"itemStyle.normal.chordStyle.opacity"),g.shape.modSelf()}e.zr.refreshNextFrame()}})},_buildSectors:function(a,b,c,d){var e=this.parseCenter(this.zr,d.center),g=this.parseRadius(this.zr,d.radius),h=d.clockWise,i=h?1:-1;c.eachNode(function(c){var j=this._getNodeCategory(d,c.data),l=this.getColor(j?j.name:c.id),m=c.layout.startAngle/Math.PI*180*i,n=c.layout.endAngle/Math.PI*180*i,o=new f({
zlevel:a.zlevel,z:a.z,style:{x:e[0],y:e[1],r0:g[0],r:g[1],startAngle:m,endAngle:n,brushType:"fill",opacity:1,color:l,clockWise:h},clickable:d.clickable,highlightStyle:{brushType:"fill"}});o.style.lineWidth=this.deepQuery([c.data,d],"itemStyle.normal.borderWidth"),o.highlightStyle.lineWidth=this.deepQuery([c.data,d],"itemStyle.emphasis.borderWidth"),o.style.strokeColor=this.deepQuery([c.data,d],"itemStyle.normal.borderColor"),o.highlightStyle.strokeColor=this.deepQuery([c.data,d],"itemStyle.emphasis.borderColor"),o.style.lineWidth>0&&(o.style.brushType="both"),o.highlightStyle.lineWidth>0&&(o.highlightStyle.brushType="both"),k.pack(o,a,b,c.data,c.rawIndex,c.id,c.category),this.shapeList.push(o),c.shape=o},this)},_buildNodeIcons:function(a,b,c,d){var e=this.parseCenter(this.zr,d.center),f=this.parseRadius(this.zr,d.radius),g=f[1];c.eachNode(function(c){var f=c.layout.startAngle,i=c.layout.endAngle,j=(f+i)/2,l=g*Math.cos(j),m=g*Math.sin(j),n=this._getNodeQueryTarget(d,c.data),o=this._getNodeCategory(d,c.data),p=this.deepQuery(n,"itemStyle.normal.color");p||(p=this.getColor(o?o.name:c.id));var q=new h({zlevel:a.zlevel,z:a.z+1,style:{x:-c.layout.size,y:-c.layout.size,width:2*c.layout.size,height:2*c.layout.size,iconType:this.deepQuery(n,"symbol"),color:p,brushType:"both",lineWidth:this.deepQuery(n,"itemStyle.normal.borderWidth"),strokeColor:this.deepQuery(n,"itemStyle.normal.borderColor")},highlightStyle:{color:this.deepQuery(n,"itemStyle.emphasis.color"),lineWidth:this.deepQuery(n,"itemStyle.emphasis.borderWidth"),strokeColor:this.deepQuery(n,"itemStyle.emphasis.borderColor")},clickable:d.clickable,position:[l+e[0],m+e[1]]});k.pack(q,a,b,c.data,c.rawIndex,c.id,c.category),this.shapeList.push(q),c.shape=q},this)},_buildLabels:function(a,b,c,e){var f=this.query(e,"itemStyle.normal.label.rotate"),g=this.query(e,"itemStyle.normal.label.distance"),h=this.parseCenter(this.zr,e.center),i=this.parseRadius(this.zr,e.radius),j=e.clockWise,k=j?1:-1;c.eachNode(function(b){var c=b.layout.startAngle/Math.PI*180*k,j=b.layout.endAngle/Math.PI*180*k,l=(c*-k+j*-k)/2;l%=360,0>l&&(l+=360);var n=90>=l||l>=270;l=l*Math.PI/180;var o=[Math.cos(l),-Math.sin(l)],p=0;p=e.ribbonType?e.showScaleText?35+g:g:g+b.layout.size;var q=m.scale([],o,i[1]+p);m.add(q,q,h);var r={zlevel:a.zlevel,z:a.z+1,hoverable:!1,style:{text:null==b.data.label?b.id:b.data.label,textAlign:n?"left":"right"}};f?(r.rotation=n?l:Math.PI+l,r.style.x=n?i[1]+p:-i[1]-p,r.style.y=0,r.position=h.slice()):(r.style.x=q[0],r.style.y=q[1]),r.style.color=this.deepQuery([b.data,e],"itemStyle.normal.label.textStyle.color")||"#000000",r.style.textFont=this.getFont(this.deepQuery([b.data,e],"itemStyle.normal.label.textStyle")),r=new d(r),this.shapeList.push(r),b.labelShape=r},this)},_buildRibbons:function(a,b,c,d){var e=a[b],f=this.parseCenter(this.zr,d.center),h=this.parseRadius(this.zr,d.radius);c.eachEdge(function(i,j){var l,m=c.getEdge(i.node2,i.node1);if(m&&!i.shape){if(m.shape)return void(i.shape=m.shape);var n=i.layout.startAngle/Math.PI*180,o=i.layout.endAngle/Math.PI*180,p=m.layout.startAngle/Math.PI*180,q=m.layout.endAngle/Math.PI*180;l=this.getColor(1===a.length?i.layout.weight<=m.layout.weight?i.node1.id:i.node2.id:e.name);var r,s,t=this._getEdgeQueryTarget(e,i.data),u=this._getEdgeQueryTarget(e,i.data,"emphasis"),v=new g({zlevel:e.zlevel,z:e.z,style:{x:f[0],y:f[1],r:h[0],source0:n,source1:o,target0:p,target1:q,brushType:"both",opacity:this.deepQuery(t,"opacity"),color:l,lineWidth:this.deepQuery(t,"borderWidth"),strokeColor:this.deepQuery(t,"borderColor"),clockWise:d.clockWise},clickable:d.clickable,highlightStyle:{brushType:"both",opacity:this.deepQuery(u,"opacity"),lineWidth:this.deepQuery(u,"borderWidth"),strokeColor:this.deepQuery(u,"borderColor")}});i.layout.weight<=m.layout.weight?(r=m.node1,s=m.node2):(r=i.node1,s=i.node2),k.pack(v,e,b,i.data,null==i.rawIndex?j:i.rawIndex,i.data.name||r.id+"-"+s.id,r.id,s.id),this.shapeList.push(v),i.shape=v}},this)},_buildEdgeCurves:function(a,b,c,d,e){var f=a[b],g=this.parseCenter(this.zr,d.center);c.eachEdge(function(a,c){var d=e.getNodeById(a.node1.id),h=e.getNodeById(a.node2.id),j=d.shape,l=h.shape,m=this._getEdgeQueryTarget(f,a.data),n=this._getEdgeQueryTarget(f,a.data,"emphasis"),o=new i({zlevel:f.zlevel,z:f.z,style:{xStart:j.position[0],yStart:j.position[1],xEnd:l.position[0],yEnd:l.position[1],cpX1:g[0],cpY1:g[1],lineWidth:this.deepQuery(m,"width"),strokeColor:this.deepQuery(m,"color"),opacity:this.deepQuery(m,"opacity")},highlightStyle:{lineWidth:this.deepQuery(n,"width"),strokeColor:this.deepQuery(n,"color"),opacity:this.deepQuery(n,"opacity")}});k.pack(o,f,b,a.data,null==a.rawIndex?c:a.rawIndex,a.data.name||a.node1.id+"-"+a.node2.id,a.node1.id,a.node2.id),this.shapeList.push(o),a.shape=o},this)},_buildScales:function(a,b,c){var f,g,h=a.clockWise,i=this.parseCenter(this.zr,a.center),j=this.parseRadius(this.zr,a.radius),k=h?1:-1,l=0,n=-1/0;a.showScaleText&&(c.eachNode(function(a){var b=a.data.value;b>n&&(n=b),l+=b}),n>1e10?(f="b",g=1e-9):n>1e7?(f="m",g=1e-6):n>1e4?(f="k",g=.001):(f="",g=1));var o=l/(360-a.padding);c.eachNode(function(b){for(var c=b.layout.startAngle/Math.PI*180,l=b.layout.endAngle/Math.PI*180,n=c;!(h&&n>l||!h&&l>n);){var p=n/180*Math.PI,q=[Math.cos(p),Math.sin(p)],r=m.scale([],q,j[1]+1);m.add(r,r,i);var s=m.scale([],q,j[1]+this.scaleLineLength);m.add(s,s,i);var t=new e({zlevel:a.zlevel,z:a.z-1,hoverable:!1,style:{xStart:r[0],yStart:r[1],xEnd:s[0],yEnd:s[1],lineCap:"round",brushType:"stroke",strokeColor:"#666",lineWidth:1}});this.shapeList.push(t),n+=k*this.scaleUnitAngle}if(a.showScaleText)for(var u=c,v=5*o*this.scaleUnitAngle,w=0;!(h&&u>l||!h&&l>u);){var p=u;p%=360,0>p&&(p+=360);var x=90>=p||p>=270,y=new d({zlevel:a.zlevel,z:a.z-1,hoverable:!1,style:{x:x?j[1]+this.scaleLineLength+4:-j[1]-this.scaleLineLength-4,y:0,text:Math.round(10*w)/10+f,textAlign:x?"left":"right"},position:i.slice(),rotation:x?[-p/180*Math.PI,0,0]:[-(p+180)/180*Math.PI,0,0]});this.shapeList.push(y),w+=v*g,u+=k*this.scaleUnitAngle*5}},this)},refresh:function(a){if(a&&(this.option=a,this.series=a.series),this.legend=this.component.legend,this.legend)this.getColor=function(a){return this.legend.getColor(a)},this.isSelected=function(a){return this.legend.isSelected(a)};else{var b={},c=0;this.getColor=function(a){return b[a]?b[a]:(b[a]||(b[a]=this.zr.getColor(c++)),b[a])},this.isSelected=function(){return!0}}this.backupShapeList(),this._init()},reformOption:function(a){var b=l.merge;a=b(b(a||{},this.ecTheme.chord),j.chord),a.itemStyle.normal.label.textStyle=this.getTextStyle(a.itemStyle.normal.label.textStyle),this.z=a.z,this.zlevel=a.zlevel}},l.inherits(b,c),a("../chart").define("chord",b),b}),c("echarts/chart/base",["require","zrender/shape/Image","../util/shape/Icon","../util/shape/MarkLine","../util/shape/Symbol","zrender/shape/Polyline","zrender/shape/ShapeBundle","../config","../util/ecData","../util/ecAnimation","../util/ecEffect","../util/accMath","../component/base","../layout/EdgeBundling","zrender/tool/util","zrender/tool/area"],function(a){function b(a){return null!=a.x&&null!=a.y}function c(a,b,c,d,e){o.call(this,a,b,c,d,e);var f=this;this.selectedMap={},this.lastShapeList=[],this.shapeHandler={onclick:function(){f.isClick=!0},ondragover:function(a){var b=a.target;b.highlightStyle=b.highlightStyle||{};var c=b.highlightStyle,d=c.brushTyep,e=c.strokeColor,g=c.lineWidth;c.brushType="stroke",c.strokeColor=f.ecTheme.calculableColor||j.calculableColor,c.lineWidth="icon"===b.type?30:10,f.zr.addHoverShape(b),setTimeout(function(){c&&(c.brushType=d,c.strokeColor=e,c.lineWidth=g)},20)},ondrop:function(a){null!=k.get(a.dragged,"data")&&(f.isDrop=!0)},ondragend:function(){f.isDragend=!0}}}var d=a("zrender/shape/Image"),e=a("../util/shape/Icon"),f=a("../util/shape/MarkLine"),g=a("../util/shape/Symbol"),h=a("zrender/shape/Polyline"),i=a("zrender/shape/ShapeBundle"),j=a("../config"),k=a("../util/ecData"),l=a("../util/ecAnimation"),m=a("../util/ecEffect"),n=a("../util/accMath"),o=a("../component/base"),p=a("../layout/EdgeBundling"),q=a("zrender/tool/util"),r=a("zrender/tool/area");return c.prototype={setCalculable:function(a){return a.dragEnableTime=this.ecTheme.DRAG_ENABLE_TIME||j.DRAG_ENABLE_TIME,a.ondragover=this.shapeHandler.ondragover,a.ondragend=this.shapeHandler.ondragend,a.ondrop=this.shapeHandler.ondrop,a},ondrop:function(a,b){if(this.isDrop&&a.target&&!b.dragIn){var c,d=a.target,e=a.dragged,f=k.get(d,"seriesIndex"),g=k.get(d,"dataIndex"),h=this.series,i=this.component.legend;if(-1===g){if(k.get(e,"seriesIndex")==f)return b.dragOut=b.dragIn=b.needRefresh=!0,void(this.isDrop=!1);c={value:k.get(e,"value"),name:k.get(e,"name")},this.type===j.CHART_TYPE_PIE&&c.value<0&&(c.value=0);for(var l=!1,m=h[f].data,o=0,p=m.length;p>o;o++)m[o].name===c.name&&"-"===m[o].value&&(h[f].data[o].value=c.value,l=!0);!l&&h[f].data.push(c),i&&i.add(c.name,e.style.color||e.style.strokeColor)}else c=h[f].data[g]||"-",null!=c.value?(h[f].data[g].value="-"!=c.value?n.accAdd(h[f].data[g].value,k.get(e,"value")):k.get(e,"value"),(this.type===j.CHART_TYPE_FUNNEL||this.type===j.CHART_TYPE_PIE)&&(i&&1===i.getRelatedAmount(c.name)&&this.component.legend.del(c.name),c.name+=this.option.nameConnector+k.get(e,"name"),i&&i.add(c.name,e.style.color||e.style.strokeColor))):h[f].data[g]="-"!=c?n.accAdd(h[f].data[g],k.get(e,"value")):k.get(e,"value");b.dragIn=b.dragIn||!0,this.isDrop=!1;var q=this;setTimeout(function(){q.zr.trigger("mousemove",a.event)},300)}},ondragend:function(a,b){if(this.isDragend&&a.target&&!b.dragOut){var c=a.target,d=k.get(c,"seriesIndex"),e=k.get(c,"dataIndex"),f=this.series;if(null!=f[d].data[e].value){f[d].data[e].value="-";var g=f[d].data[e].name,h=this.component.legend;h&&0===h.getRelatedAmount(g)&&h.del(g)}else f[d].data[e]="-";b.dragOut=!0,b.needRefresh=!0,this.isDragend=!1}},onlegendSelected:function(a,b){var c=a.selected;for(var d in this.selectedMap)this.selectedMap[d]!=c[d]&&(b.needRefresh=!0),this.selectedMap[d]=c[d]},_buildPosition:function(){this._symbol=this.option.symbolList,this._sIndex2ShapeMap={},this._sIndex2ColorMap={},this.selectedMap={},this.xMarkMap={};for(var a,b,c,d,e=this.series,f={top:[],bottom:[],left:[],right:[],other:[]},g=0,h=e.length;h>g;g++)e[g].type===this.type&&(e[g]=this.reformOption(e[g]),this.legendHoverLink=e[g].legendHoverLink||this.legendHoverLink,a=e[g].xAxisIndex,b=e[g].yAxisIndex,c=this.component.xAxis.getAxis(a),d=this.component.yAxis.getAxis(b),c.type===j.COMPONENT_TYPE_AXIS_CATEGORY?f[c.getPosition()].push(g):d.type===j.COMPONENT_TYPE_AXIS_CATEGORY?f[d.getPosition()].push(g):f.other.push(g));for(var i in f)f[i].length>0&&this._buildSinglePosition(i,f[i]);this.addShapeList()},_buildSinglePosition:function(a,b){var c=this._mapData(b),d=c.locationMap,e=c.maxDataLength;if(0!==e&&0!==d.length){switch(a){case"bottom":case"top":this._buildHorizontal(b,e,d,this.xMarkMap);break;case"left":case"right":this._buildVertical(b,e,d,this.xMarkMap);break;case"other":this._buildOther(b,e,d,this.xMarkMap)}for(var f=0,g=b.length;g>f;f++)this.buildMark(b[f])}},_mapData:function(a){for(var b,c,d,e,f=this.series,g=0,h={},i="__kener__stack__",k=this.component.legend,l=[],m=0,n=0,o=a.length;o>n;n++){if(b=f[a[n]],d=b.name,this._sIndex2ShapeMap[a[n]]=this._sIndex2ShapeMap[a[n]]||this.query(b,"symbol")||this._symbol[n%this._symbol.length],k){if(this.selectedMap[d]=k.isSelected(d),this._sIndex2ColorMap[a[n]]=k.getColor(d),e=k.getItemShape(d)){var p=e.style;if(this.type==j.CHART_TYPE_LINE)p.iconType="legendLineIcon",p.symbol=this._sIndex2ShapeMap[a[n]];else if(b.itemStyle.normal.barBorderWidth>0){var q=e.highlightStyle;p.brushType="both",p.x+=1,p.y+=1,p.width-=2,p.height-=2,p.strokeColor=q.strokeColor=b.itemStyle.normal.barBorderColor,q.lineWidth=3}k.setItemShape(d,e)}}else this.selectedMap[d]=!0,this._sIndex2ColorMap[a[n]]=this.zr.getColor(a[n]);this.selectedMap[d]&&(c=b.stack||i+a[n],null==h[c]?(h[c]=g,l[g]=[a[n]],g++):l[h[c]].push(a[n])),m=Math.max(m,b.data.length)}return{locationMap:l,maxDataLength:m}},_calculMarkMapXY:function(a,b,c){for(var d=this.series,e=0,f=b.length;f>e;e++)for(var g=0,h=b[e].length;h>g;g++){var i=b[e][g],j="xy"==c?0:"",k=this.component.grid,l=a[i];if("-1"!=c.indexOf("x")){l["counter"+j]>0&&(l["average"+j]=l["sum"+j]/l["counter"+j]);var m=this.component.xAxis.getAxis(d[i].xAxisIndex||0).getCoord(l["average"+j]);l["averageLine"+j]=[[m,k.getYend()],[m,k.getY()]],l["minLine"+j]=[[l["minX"+j],k.getYend()],[l["minX"+j],k.getY()]],l["maxLine"+j]=[[l["maxX"+j],k.getYend()],[l["maxX"+j],k.getY()]],l.isHorizontal=!1}if(j="xy"==c?1:"","-1"!=c.indexOf("y")){l["counter"+j]>0&&(l["average"+j]=l["sum"+j]/l["counter"+j]);var n=this.component.yAxis.getAxis(d[i].yAxisIndex||0).getCoord(l["average"+j]);l["averageLine"+j]=[[k.getX(),n],[k.getXend(),n]],l["minLine"+j]=[[k.getX(),l["minY"+j]],[k.getXend(),l["minY"+j]]],l["maxLine"+j]=[[k.getX(),l["maxY"+j]],[k.getXend(),l["maxY"+j]]],l.isHorizontal=!0}}},addLabel:function(a,b,c,d,e){var f=[c,b],g=this.deepMerge(f,"itemStyle.normal.label"),h=this.deepMerge(f,"itemStyle.emphasis.label"),i=g.textStyle||{},j=h.textStyle||{};if(g.show){var k=a.style;k.text=this._getLabelText(b,c,d,"normal"),k.textPosition=null==g.position?"horizontal"===e?"right":"top":g.position,k.textColor=i.color,k.textFont=this.getFont(i),k.textAlign=i.align,k.textBaseline=i.baseline}if(h.show){var l=a.highlightStyle;l.text=this._getLabelText(b,c,d,"emphasis"),l.textPosition=g.show?a.style.textPosition:null==h.position?"horizontal"===e?"right":"top":h.position,l.textColor=j.color,l.textFont=this.getFont(j),l.textAlign=j.align,l.textBaseline=j.baseline}return a},_getLabelText:function(a,b,c,d){var e=this.deepQuery([b,a],"itemStyle."+d+".label.formatter");e||"emphasis"!==d||(e=this.deepQuery([b,a],"itemStyle.normal.label.formatter"));var f=this.getDataFromOption(b,"-");return e?"function"==typeof e?e.call(this.myChart,{seriesName:a.name,series:a,name:c,value:f,data:b,status:d}):"string"==typeof e?e=e.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}").replace("{a0}",a.name).replace("{b0}",c).replace("{c0}",this.numAddCommas(f)):void 0:f instanceof Array?null!=f[2]?this.numAddCommas(f[2]):f[0]+" , "+f[1]:this.numAddCommas(f)},buildMark:function(a){var b=this.series[a];this.selectedMap[b.name]&&(b.markLine&&this._buildMarkLine(a),b.markPoint&&this._buildMarkPoint(a))},_buildMarkPoint:function(a){for(var b,c,d=(this.markAttachStyle||{})[a],e=this.series[a],f=q.clone(e.markPoint),g=0,h=f.data.length;h>g;g++)b=f.data[g],c=this.getMarkCoord(a,b),b.x=null!=b.x?b.x:c[0],b.y=null!=b.y?b.y:c[1],!b.type||"max"!==b.type&&"min"!==b.type||(b.value=c[3],b.name=b.name||b.type,b.symbolSize=b.symbolSize||r.getTextWidth(c[3],this.getFont())/2+5);for(var i=this._markPoint(a,f),g=0,h=i.length;h>g;g++){var k=i[g];k.zlevel=e.zlevel,k.z=e.z+1;for(var l in d)k[l]=q.clone(d[l]);this.shapeList.push(k)}if(this.type===j.CHART_TYPE_FORCE||this.type===j.CHART_TYPE_CHORD)for(var g=0,h=i.length;h>g;g++)this.zr.addShape(i[g])},_buildMarkLine:function(a){for(var b,c=(this.markAttachStyle||{})[a],d=this.series[a],e=q.clone(d.markLine),f=0,g=e.data.length;g>f;f++){var h=e.data[f];!h.type||"max"!==h.type&&"min"!==h.type&&"average"!==h.type?b=[this.getMarkCoord(a,h[0]),this.getMarkCoord(a,h[1])]:(b=this.getMarkCoord(a,h),e.data[f]=[q.clone(h),{}],e.data[f][0].name=h.name||h.type,e.data[f][0].value="average"!==h.type?b[3]:+b[3].toFixed(null!=e.precision?e.precision:this.deepQuery([this.ecTheme,j],"markLine.precision")),b=b[2],h=[{},{}]),null!=b&&null!=b[0]&&null!=b[1]&&(e.data[f][0].x=null!=h[0].x?h[0].x:b[0][0],e.data[f][0].y=null!=h[0].y?h[0].y:b[0][1],e.data[f][1].x=null!=h[1].x?h[1].x:b[1][0],e.data[f][1].y=null!=h[1].y?h[1].y:b[1][1])}var k=this._markLine(a,e),l=e.large;if(l){var m=new i({style:{shapeList:k}}),n=k[0];if(n){q.merge(m.style,n.style),q.merge(m.highlightStyle={},n.highlightStyle),m.style.brushType="stroke",m.zlevel=d.zlevel,m.z=d.z+1,m.hoverable=!1;for(var o in c)m[o]=q.clone(c[o])}this.shapeList.push(m),this.zr.addShape(m),m._mark="largeLine";var p=e.effect;p.show&&(m.effect=p)}else{for(var f=0,g=k.length;g>f;f++){var r=k[f];r.zlevel=d.zlevel,r.z=d.z+1;for(var o in c)r[o]=q.clone(c[o]);this.shapeList.push(r)}if(this.type===j.CHART_TYPE_FORCE||this.type===j.CHART_TYPE_CHORD)for(var f=0,g=k.length;g>f;f++)this.zr.addShape(k[f])}},_markPoint:function(a,b){var c=this.series[a],d=this.component;q.merge(q.merge(b,q.clone(this.ecTheme.markPoint||{})),q.clone(j.markPoint)),b.name=c.name;var e,f,g,h,i,l,m,n=[],o=b.data,p=d.dataRange,r=d.legend,s=this.zr.getWidth(),t=this.zr.getHeight();if(b.large)e=this.getLargeMarkPointShape(a,b),e._mark="largePoint",e&&n.push(e);else for(var u=0,v=o.length;v>u;u++)null!=o[u].x&&null!=o[u].y&&(g=null!=o[u].value?o[u].value:"",r&&(f=r.getColor(c.name)),p&&(f=isNaN(g)?f:p.getColor(g),h=[o[u],b],i=this.deepQuery(h,"itemStyle.normal.color")||f,l=this.deepQuery(h,"itemStyle.emphasis.color")||i,null==i&&null==l)||(f=null==f?this.zr.getColor(a):f,o[u].tooltip=o[u].tooltip||b.tooltip||{trigger:"item"},o[u].name=null!=o[u].name?o[u].name:"",o[u].value=g,e=this.getSymbolShape(b,a,o[u],u,o[u].name,this.parsePercent(o[u].x,s),this.parsePercent(o[u].y,t),"pin",f,"rgba(0,0,0,0)","horizontal"),e._mark="point",m=this.deepMerge([o[u],b],"effect"),m.show&&(e.effect=m),c.type===j.CHART_TYPE_MAP&&(e._geo=this.getMarkGeo(o[u])),k.pack(e,c,a,o[u],u,o[u].name,g),n.push(e)));return n},_markLine:function(){function a(a,b){a[b]=a[b]instanceof Array?a[b].length>1?a[b]:[a[b][0],a[b][0]]:[a[b],a[b]]}return function(c,d){var e=this.series[c],f=this.component,g=f.dataRange,h=f.legend;q.merge(q.merge(d,q.clone(this.ecTheme.markLine||{})),q.clone(j.markLine));var i=h?h.getColor(e.name):this.zr.getColor(c);a(d,"symbol"),a(d,"symbolSize"),a(d,"symbolRotate");for(var l=d.data,m=[],n=this.zr.getWidth(),o=this.zr.getHeight(),r=0;r<l.length;r++){var s=l[r];if(b(s[0])&&b(s[1])){var t=this.deepMerge(s),u=[t,d],v=i,w=null!=t.value?t.value:"";if(g){v=isNaN(w)?v:g.getColor(w);var x=this.deepQuery(u,"itemStyle.normal.color")||v,y=this.deepQuery(u,"itemStyle.emphasis.color")||x;if(null==x&&null==y)continue}s[0].tooltip=t.tooltip||d.tooltip||{trigger:"item"},s[0].name=s[0].name||"",s[1].name=s[1].name||"",s[0].value=w,m.push({points:[[this.parsePercent(s[0].x,n),this.parsePercent(s[0].y,o)],[this.parsePercent(s[1].x,n),this.parsePercent(s[1].y,o)]],rawData:s,color:v})}}var z=this.query(d,"bundling.enable");if(z){var A=new p;A.maxTurningAngle=this.query(d,"bundling.maxTurningAngle")/180*Math.PI,m=A.run(m)}d.name=e.name;for(var B=[],r=0,C=m.length;C>r;r++){var D=m[r],E=D.rawEdge||D,s=E.rawData,w=null!=s.value?s.value:"",F=this.getMarkLineShape(d,c,s,r,D.points,z,E.color);F._mark="line";var G=this.deepMerge([s[0],s[1],d],"effect");G.show&&(F.effect=G,F.effect.large=d.large),e.type===j.CHART_TYPE_MAP&&(F._geo=[this.getMarkGeo(s[0]),this.getMarkGeo(s[1])]),k.pack(F,e,c,s[0],r,s[0].name+(""!==s[1].name?" > "+s[1].name:""),w),B.push(F)}return B}}(),getMarkCoord:function(){return[0,0]},getSymbolShape:function(a,b,c,f,g,h,i,j,l,m,n){var o=[c,a],p=this.getDataFromOption(c,"-");j=this.deepQuery(o,"symbol")||j;var q=this.deepQuery(o,"symbolSize");q="function"==typeof q?q(p):q,"number"==typeof q&&(q=[q,q]);var r=this.deepQuery(o,"symbolRotate"),s=this.deepMerge(o,"itemStyle.normal"),t=this.deepMerge(o,"itemStyle.emphasis"),u=null!=s.borderWidth?s.borderWidth:s.lineStyle&&s.lineStyle.width;null==u&&(u=j.match("empty")?2:0);var v=null!=t.borderWidth?t.borderWidth:t.lineStyle&&t.lineStyle.width;null==v&&(v=u+2);var w=this.getItemStyleColor(s.color,b,f,c),x=this.getItemStyleColor(t.color,b,f,c),y=q[0],z=q[1],A=new e({style:{iconType:j.replace("empty","").toLowerCase(),x:h-y,y:i-z,width:2*y,height:2*z,brushType:"both",color:j.match("empty")?m:w||l,strokeColor:s.borderColor||w||l,lineWidth:u},highlightStyle:{color:j.match("empty")?m:x||w||l,strokeColor:t.borderColor||s.borderColor||x||w||l,lineWidth:v},clickable:this.deepQuery(o,"clickable")});return j.match("image")&&(A.style.image=j.replace(new RegExp("^image:\\/\\/"),""),A=new d({style:A.style,highlightStyle:A.highlightStyle,clickable:this.deepQuery(o,"clickable")})),null!=r&&(A.rotation=[r*Math.PI/180,h,i]),j.match("star")&&(A.style.iconType="star",A.style.n=j.replace("empty","").replace("star","")-0||5),"none"===j&&(A.invisible=!0,A.hoverable=!1),A=this.addLabel(A,a,c,g,n),j.match("empty")&&(null==A.style.textColor&&(A.style.textColor=A.style.strokeColor),null==A.highlightStyle.textColor&&(A.highlightStyle.textColor=A.highlightStyle.strokeColor)),k.pack(A,a,b,c,f,g),A._x=h,A._y=i,A._dataIndex=f,A._seriesIndex=b,A},getMarkLineShape:function(a,b,c,d,e,g,i){var j=null!=c[0].value?c[0].value:"-",k=null!=c[1].value?c[1].value:"-",l=[c[0].symbol||a.symbol[0],c[1].symbol||a.symbol[1]],m=[c[0].symbolSize||a.symbolSize[0],c[1].symbolSize||a.symbolSize[1]];m[0]="function"==typeof m[0]?m[0](j):m[0],m[1]="function"==typeof m[1]?m[1](k):m[1];var n=[this.query(c[0],"symbolRotate")||a.symbolRotate[0],this.query(c[1],"symbolRotate")||a.symbolRotate[1]],o=[c[0],c[1],a],p=this.deepMerge(o,"itemStyle.normal");p.color=this.getItemStyleColor(p.color,b,d,c);var q=this.deepMerge(o,"itemStyle.emphasis");q.color=this.getItemStyleColor(q.color,b,d,c);var r=p.lineStyle,s=q.lineStyle,t=r.width;null==t&&(t=p.borderWidth);var u=s.width;null==u&&(u=null!=q.borderWidth?q.borderWidth:t+2);var v=this.deepQuery(o,"smoothness");this.deepQuery(o,"smooth")||(v=0);var w=g?h:f,x=new w({style:{symbol:l,symbolSize:m,symbolRotate:n,brushType:"both",lineType:r.type,shadowColor:r.shadowColor||r.color||p.borderColor||p.color||i,shadowBlur:r.shadowBlur,shadowOffsetX:r.shadowOffsetX,shadowOffsetY:r.shadowOffsetY,color:p.color||i,strokeColor:r.color||p.borderColor||p.color||i,lineWidth:t,symbolBorderColor:p.borderColor||p.color||i,symbolBorder:p.borderWidth},highlightStyle:{shadowColor:s.shadowColor,shadowBlur:s.shadowBlur,shadowOffsetX:s.shadowOffsetX,shadowOffsetY:s.shadowOffsetY,color:q.color||p.color||i,strokeColor:s.color||r.color||q.borderColor||p.borderColor||q.color||p.color||i,lineWidth:u,symbolBorderColor:q.borderColor||p.borderColor||q.color||p.color||i,symbolBorder:null==q.borderWidth?p.borderWidth+2:q.borderWidth},clickable:this.deepQuery(o,"clickable")}),y=x.style;return g?(y.pointList=e,y.smooth=v):(y.xStart=e[0][0],y.yStart=e[0][1],y.xEnd=e[1][0],y.yEnd=e[1][1],y.curveness=v,x.updatePoints(x.style)),x=this.addLabel(x,a,c[0],c[0].name+" : "+c[1].name)},getLargeMarkPointShape:function(a,b){var c,d,e,f,h,i,j=this.series[a],k=this.component,l=b.data,m=k.dataRange,n=k.legend,o=[l[0],b];if(n&&(d=n.getColor(j.name)),!m||(e=null!=l[0].value?l[0].value:"",d=isNaN(e)?d:m.getColor(e),f=this.deepQuery(o,"itemStyle.normal.color")||d,h=this.deepQuery(o,"itemStyle.emphasis.color")||f,null!=f||null!=h)){d=this.deepMerge(o,"itemStyle.normal").color||d;var p=this.deepQuery(o,"symbol")||"circle";p=p.replace("empty","").replace(/\d/g,""),i=this.deepMerge([l[0],b],"effect");var q=window.devicePixelRatio||1;return c=new g({style:{pointList:l,color:d,strokeColor:d,shadowColor:i.shadowColor||d,shadowBlur:(null!=i.shadowBlur?i.shadowBlur:8)*q,size:this.deepQuery(o,"symbolSize"),iconType:p,brushType:"fill",lineWidth:1},draggable:!1,hoverable:!1}),i.show&&(c.effect=i),c}},backupShapeList:function(){this.shapeList&&this.shapeList.length>0?(this.lastShapeList=this.shapeList,this.shapeList=[]):this.lastShapeList=[]},addShapeList:function(){var a,b,c=this.option.animationThreshold/(this.canvasSupported?2:4),d=this.lastShapeList,e=this.shapeList,f=d.length>0,g=f?this.query(this.option,"animationDurationUpdate"):this.query(this.option,"animationDuration"),h=this.query(this.option,"animationEasing"),i={},k={};if(this.option.animation&&!this.option.renderAsImage&&e.length<c&&!this.motionlessOnce){for(var l=0,m=d.length;m>l;l++)b=this._getAnimationKey(d[l]),b.match("undefined")?this.zr.delShape(d[l].id):(b+=d[l].type,i[b]?this.zr.delShape(d[l].id):i[b]=d[l]);for(var l=0,m=e.length;m>l;l++)b=this._getAnimationKey(e[l]),b.match("undefined")?this.zr.addShape(e[l]):(b+=e[l].type,k[b]=e[l]);for(b in i)k[b]||this.zr.delShape(i[b].id);for(b in k)i[b]?(this.zr.delShape(i[b].id),this._animateMod(i[b],k[b],g,h,0,f)):(a=this.type!=j.CHART_TYPE_LINE&&this.type!=j.CHART_TYPE_RADAR||0===b.indexOf("icon")?0:g/2,this._animateMod(!1,k[b],g,h,a,f));this.zr.refresh(),this.animationEffect()}else{this.motionlessOnce=!1,this.zr.delShape(d);for(var l=0,m=e.length;m>l;l++)this.zr.addShape(e[l])}},_getAnimationKey:function(a){return this.type!=j.CHART_TYPE_MAP&&this.type!=j.CHART_TYPE_TREEMAP&&this.type!=j.CHART_TYPE_VENN&&this.type!=j.CHART_TYPE_TREE?k.get(a,"seriesIndex")+"_"+k.get(a,"dataIndex")+(a._mark?a._mark:"")+(this.type===j.CHART_TYPE_RADAR?k.get(a,"special"):""):k.get(a,"seriesIndex")+"_"+k.get(a,"dataIndex")+(a._mark?a._mark:"undefined")},_animateMod:function(a,b,c,d,e,f){switch(b.type){case"polyline":case"half-smooth-polygon":l.pointList(this.zr,a,b,c,d);break;case"rectangle":l.rectangle(this.zr,a,b,c,d);break;case"image":case"icon":l.icon(this.zr,a,b,c,d,e);break;case"candle":f?this.zr.addShape(b):l.candle(this.zr,a,b,c,d);break;case"ring":case"sector":case"circle":f?"sector"===b.type?l.sector(this.zr,a,b,c,d):this.zr.addShape(b):l.ring(this.zr,a,b,c+(k.get(b,"dataIndex")||0)%20*100,d);break;case"text":l.text(this.zr,a,b,c,d);break;case"polygon":f?l.pointList(this.zr,a,b,c,d):l.polygon(this.zr,a,b,c,d);break;case"ribbon":l.ribbon(this.zr,a,b,c,d);break;case"gauge-pointer":l.gaugePointer(this.zr,a,b,c,d);break;case"mark-line":l.markline(this.zr,a,b,c,d);break;case"bezier-curve":case"line":l.line(this.zr,a,b,c,d);break;default:this.zr.addShape(b)}},animationMark:function(a,b,c){for(var c=c||this.shapeList,d=0,e=c.length;e>d;d++)c[d]._mark&&this._animateMod(!1,c[d],a,b,0,!0);this.animationEffect(c)},animationEffect:function(a){if(!a&&this.clearEffectShape(),a=a||this.shapeList,null!=a){var b=j.EFFECT_ZLEVEL;this.canvasSupported&&this.zr.modLayer(b,{motionBlur:!0,lastFrameAlpha:this.option.effectBlendAlpha||j.effectBlendAlpha});for(var c,d=0,e=a.length;e>d;d++)c=a[d],c._mark&&c.effect&&c.effect.show&&m[c._mark]&&(m[c._mark](this.zr,this.effectList,c,b),this.effectList[this.effectList.length-1]._mark=c._mark)}},clearEffectShape:function(a){var b=this.effectList;if(this.zr&&b&&b.length>0){a&&this.zr.modLayer(j.EFFECT_ZLEVEL,{motionBlur:!1}),this.zr.delShape(b);for(var c=0;c<b.length;c++)b[c].effectAnimator&&b[c].effectAnimator.stop()}this.effectList=[]},addMark:function(a,b,c){var d=this.series[a];if(this.selectedMap[d.name]){var e=this.query(this.option,"animationDurationUpdate"),f=this.query(this.option,"animationEasing"),g=d[c].data,h=this.shapeList.length;if(d[c].data=b.data,this["_build"+c.replace("m","M")](a),this.option.animation&&!this.option.renderAsImage)this.animationMark(e,f,this.shapeList.slice(h));else{for(var i=h,j=this.shapeList.length;j>i;i++)this.zr.addShape(this.shapeList[i]);this.zr.refreshNextFrame()}d[c].data=g}},delMark:function(a,b,c){c=c.replace("mark","").replace("large","").toLowerCase();var d=this.series[a];if(this.selectedMap[d.name]){for(var e=!1,f=[this.shapeList,this.effectList],g=2;g--;)for(var h=0,i=f[g].length;i>h;h++)if(f[g][h]._mark==c&&k.get(f[g][h],"seriesIndex")==a&&k.get(f[g][h],"name")==b){this.zr.delShape(f[g][h].id),f[g].splice(h,1),e=!0;break}e&&this.zr.refreshNextFrame()}}},q.inherits(c,o),c}),c("echarts/util/shape/Icon",["require","zrender/tool/util","zrender/shape/Star","zrender/shape/Heart","zrender/shape/Droplet","zrender/shape/Image","zrender/shape/Base"],function(a){function b(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d+b.height),a.lineTo(c+5*e,d+14*f),a.lineTo(c+b.width,d+3*f),a.lineTo(c+13*e,d),a.lineTo(c+2*e,d+11*f),a.lineTo(c,d+b.height),a.moveTo(c+6*e,d+10*f),a.lineTo(c+14*e,d+2*f),a.moveTo(c+10*e,d+13*f),a.lineTo(c+b.width,d+13*f),a.moveTo(c+13*e,d+10*f),a.lineTo(c+13*e,d+b.height)}function c(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d+b.height),a.lineTo(c+5*e,d+14*f),a.lineTo(c+b.width,d+3*f),a.lineTo(c+13*e,d),a.lineTo(c+2*e,d+11*f),a.lineTo(c,d+b.height),a.moveTo(c+6*e,d+10*f),a.lineTo(c+14*e,d+2*f),a.moveTo(c+10*e,d+13*f),a.lineTo(c+b.width,d+13*f)}function d(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c+4*e,d+15*f),a.lineTo(c+9*e,d+13*f),a.lineTo(c+14*e,d+8*f),a.lineTo(c+11*e,d+5*f),a.lineTo(c+6*e,d+10*f),a.lineTo(c+4*e,d+15*f),a.moveTo(c+5*e,d),a.lineTo(c+11*e,d),a.moveTo(c+5*e,d+f),a.lineTo(c+11*e,d+f),a.moveTo(c,d+2*f),a.lineTo(c+b.width,d+2*f),a.moveTo(c,d+5*f),a.lineTo(c+3*e,d+b.height),a.lineTo(c+13*e,d+b.height),a.lineTo(c+b.width,d+5*f)}function e(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d+3*f),a.lineTo(c+6*e,d+3*f),a.moveTo(c+3*e,d),a.lineTo(c+3*e,d+6*f),a.moveTo(c+3*e,d+8*f),a.lineTo(c+3*e,d+b.height),a.lineTo(c+b.width,d+b.height),a.lineTo(c+b.width,d+3*f),a.lineTo(c+8*e,d+3*f)}function f(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c+6*e,d),a.lineTo(c+2*e,d+3*f),a.lineTo(c+6*e,d+6*f),a.moveTo(c+2*e,d+3*f),a.lineTo(c+14*e,d+3*f),a.lineTo(c+14*e,d+11*f),a.moveTo(c+2*e,d+5*f),a.lineTo(c+2*e,d+13*f),a.lineTo(c+14*e,d+13*f),a.moveTo(c+10*e,d+10*f),a.lineTo(c+14*e,d+13*f),a.lineTo(c+10*e,d+b.height)}function g(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16,g=b.width/2;a.lineWidth=1.5,a.arc(c+g,d+g,g-e,0,2*Math.PI/3),a.moveTo(c+3*e,d+b.height),a.lineTo(c+0*e,d+12*f),a.lineTo(c+5*e,d+11*f),a.moveTo(c,d+8*f),a.arc(c+g,d+g,g-e,Math.PI,5*Math.PI/3),a.moveTo(c+13*e,d),a.lineTo(c+b.width,d+4*f),a.lineTo(c+11*e,d+5*f)}function h(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d),a.lineTo(c,d+b.height),a.lineTo(c+b.width,d+b.height),a.moveTo(c+2*e,d+14*f),a.lineTo(c+7*e,d+6*f),a.lineTo(c+11*e,d+11*f),a.lineTo(c+15*e,d+2*f)}function i(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d),a.lineTo(c,d+b.height),a.lineTo(c+b.width,d+b.height),a.moveTo(c+3*e,d+14*f),a.lineTo(c+3*e,d+6*f),a.lineTo(c+4*e,d+6*f),a.lineTo(c+4*e,d+14*f),a.moveTo(c+7*e,d+14*f),a.lineTo(c+7*e,d+2*f),a.lineTo(c+8*e,d+2*f),a.lineTo(c+8*e,d+14*f),a.moveTo(c+11*e,d+14*f),a.lineTo(c+11*e,d+9*f),a.lineTo(c+12*e,d+9*f),a.lineTo(c+12*e,d+14*f)}function j(a,b){var c=b.x,d=b.y,e=b.width-2,f=b.height-2,g=Math.min(e,f)/2;d+=2,a.moveTo(c+g+3,d+g-3),a.arc(c+g+3,d+g-3,g-1,0,-Math.PI/2,!0),a.lineTo(c+g+3,d+g-3),a.moveTo(c+g,d),a.lineTo(c+g,d+g),a.arc(c+g,d+g,g,-Math.PI/2,2*Math.PI,!0),a.lineTo(c+g,d+g),a.lineWidth=1.5}function k(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;d-=f,a.moveTo(c+1*e,d+2*f),a.lineTo(c+15*e,d+2*f),a.lineTo(c+14*e,d+3*f),a.lineTo(c+2*e,d+3*f),a.moveTo(c+3*e,d+6*f),a.lineTo(c+13*e,d+6*f),a.lineTo(c+12*e,d+7*f),a.lineTo(c+4*e,d+7*f),a.moveTo(c+5*e,d+10*f),a.lineTo(c+11*e,d+10*f),a.lineTo(c+10*e,d+11*f),a.lineTo(c+6*e,d+11*f),a.moveTo(c+7*e,d+14*f),a.lineTo(c+9*e,d+14*f),a.lineTo(c+8*e,d+15*f),a.lineTo(c+7*e,d+15*f)}function l(a,b){var c=b.x,d=b.y,e=b.width,f=b.height,g=e/16,h=f/16,i=2*Math.min(g,h);a.moveTo(c+g+i,d+h+i),a.arc(c+g,d+h,i,Math.PI/4,3*Math.PI),a.lineTo(c+7*g-i,d+6*h-i),a.arc(c+7*g,d+6*h,i,Math.PI/4*5,4*Math.PI),a.arc(c+7*g,d+6*h,i/2,Math.PI/4*5,4*Math.PI),a.moveTo(c+7*g-i/2,d+6*h+i),a.lineTo(c+g+i,d+14*h-i),a.arc(c+g,d+14*h,i,-Math.PI/4,2*Math.PI),a.moveTo(c+7*g+i/2,d+6*h),a.lineTo(c+14*g-i,d+10*h-i/2),a.moveTo(c+16*g,d+10*h),a.arc(c+14*g,d+10*h,i,0,3*Math.PI),a.lineWidth=1.5}function m(a,b){var c=b.x,d=b.y,e=b.width,f=b.height,g=Math.min(e,f)/2;a.moveTo(c+e,d+f/2),a.arc(c+g,d+g,g,0,2*Math.PI),a.arc(c+g,d,g,Math.PI/4,Math.PI/5*4),a.arc(c,d+g,g,-Math.PI/3,Math.PI/3),a.arc(c+e,d+f,g,Math.PI,Math.PI/2*3),a.lineWidth=1.5}function n(a,b){for(var c=b.x,d=b.y,e=b.width,f=b.height,g=Math.round(f/3),h=Math.round((g-2)/2),i=3;i--;)a.rect(c,d+g*i+h,e,2)}function o(a,b){for(var c=b.x,d=b.y,e=b.width,f=b.height,g=Math.round(e/3),h=Math.round((g-2)/2),i=3;i--;)a.rect(c+g*i+h,d,2,f)}function p(a,b){var c=b.x,d=b.y,e=b.width/16;a.moveTo(c+e,d),a.lineTo(c+e,d+b.height),a.lineTo(c+15*e,d+b.height),a.lineTo(c+15*e,d),a.lineTo(c+e,d),
a.moveTo(c+3*e,d+3*e),a.lineTo(c+13*e,d+3*e),a.moveTo(c+3*e,d+6*e),a.lineTo(c+13*e,d+6*e),a.moveTo(c+3*e,d+9*e),a.lineTo(c+13*e,d+9*e),a.moveTo(c+3*e,d+12*e),a.lineTo(c+9*e,d+12*e)}function q(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d),a.lineTo(c,d+b.height),a.lineTo(c+b.width,d+b.height),a.lineTo(c+b.width,d),a.lineTo(c,d),a.moveTo(c+4*e,d),a.lineTo(c+4*e,d+8*f),a.lineTo(c+12*e,d+8*f),a.lineTo(c+12*e,d),a.moveTo(c+6*e,d+11*f),a.lineTo(c+6*e,d+13*f),a.lineTo(c+10*e,d+13*f),a.lineTo(c+10*e,d+11*f),a.lineTo(c+6*e,d+11*f)}function r(a,b){var c=b.x,d=b.y,e=b.width,f=b.height;a.moveTo(c,d+f/2),a.lineTo(c+e,d+f/2),a.moveTo(c+e/2,d),a.lineTo(c+e/2,d+f)}function s(a,b){var c=b.width/2,d=b.height/2,e=Math.min(c,d);a.moveTo(b.x+c+e,b.y+d),a.arc(b.x+c,b.y+d,e,0,2*Math.PI),a.closePath()}function t(a,b){a.rect(b.x,b.y,b.width,b.height),a.closePath()}function u(a,b){var c=b.width/2,d=b.height/2,e=b.x+c,f=b.y+d,g=Math.min(c,d);a.moveTo(e,f-g),a.lineTo(e+g,f+g),a.lineTo(e-g,f+g),a.lineTo(e,f-g),a.closePath()}function v(a,b){var c=b.width/2,d=b.height/2,e=b.x+c,f=b.y+d,g=Math.min(c,d);a.moveTo(e,f-g),a.lineTo(e+g,f),a.lineTo(e,f+g),a.lineTo(e-g,f),a.lineTo(e,f-g),a.closePath()}function w(a,b){var c=b.x,d=b.y,e=b.width/16;a.moveTo(c+8*e,d),a.lineTo(c+e,d+b.height),a.lineTo(c+8*e,d+b.height/4*3),a.lineTo(c+15*e,d+b.height),a.lineTo(c+8*e,d),a.closePath()}function x(b,c){var d=a("zrender/shape/Star"),e=c.width/2,f=c.height/2;d.prototype.buildPath(b,{x:c.x+e,y:c.y+f,r:Math.min(e,f),n:c.n||5})}function y(b,c){var d=a("zrender/shape/Heart");d.prototype.buildPath(b,{x:c.x+c.width/2,y:c.y+.2*c.height,a:c.width/2,b:.8*c.height})}function z(b,c){var d=a("zrender/shape/Droplet");d.prototype.buildPath(b,{x:c.x+.5*c.width,y:c.y+.5*c.height,a:.5*c.width,b:.8*c.height})}function A(a,b){var c=b.x,d=b.y-b.height/2*1.5,e=b.width/2,f=b.height/2,g=Math.min(e,f);a.arc(c+e,d+f,g,Math.PI/5*4,Math.PI/5),a.lineTo(c+e,d+f+1.5*g),a.closePath()}function B(b,c,d){var e=a("zrender/shape/Image");this._imageShape=this._imageShape||new e({style:{}});for(var f in c)this._imageShape.style[f]=c[f];this._imageShape.brush(b,!1,d)}function C(a){E.call(this,a)}var D=a("zrender/tool/util"),E=a("zrender/shape/Base");return C.prototype={type:"icon",iconLibrary:{mark:b,markUndo:c,markClear:d,dataZoom:e,dataZoomReset:f,restore:g,lineChart:h,barChart:i,pieChart:j,funnelChart:k,forceChart:l,chordChart:m,stackChart:n,tiledChart:o,dataView:p,saveAsImage:q,cross:r,circle:s,rectangle:t,triangle:u,diamond:v,arrow:w,star:x,heart:y,droplet:z,pin:A,image:B},brush:function(b,c,d){var e=c?this.highlightStyle:this.style;e=e||{};var f=e.iconType||this.style.iconType;if("image"===f){var g=a("zrender/shape/Image");g.prototype.brush.call(this,b,c,d)}else{var e=this.beforeBrush(b,c);switch(b.beginPath(),this.buildPath(b,e,d),e.brushType){case"both":b.fill();case"stroke":e.lineWidth>0&&b.stroke();break;default:b.fill()}this.drawText(b,e,this.style),this.afterBrush(b)}},buildPath:function(a,b,c){this.iconLibrary[b.iconType]?this.iconLibrary[b.iconType].call(this,a,b,c):(a.moveTo(b.x,b.y),a.lineTo(b.x+b.width,b.y),a.lineTo(b.x+b.width,b.y+b.height),a.lineTo(b.x,b.y+b.height),a.lineTo(b.x,b.y),a.closePath())},getRect:function(a){return a.__rect?a.__rect:(a.__rect={x:Math.round(a.x),y:Math.round(a.y-("pin"==a.iconType?a.height/2*1.5:0)),width:a.width,height:a.height*("pin"===a.iconType?1.25:1)},a.__rect)},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);a=c[0],b=c[1];var d=this.style.__rect;d||(d=this.style.__rect=this.getRect(this.style));var e=d.height<8||d.width<8?4:0;return a>=d.x-e&&a<=d.x+d.width+e&&b>=d.y-e&&b<=d.y+d.height+e}},D.inherits(C,E),C}),c("zrender/shape/Polyline",["require","./Base","./util/smoothSpline","./util/smoothBezier","./util/dashedLineTo","./Polygon","../tool/util"],function(a){var b=a("./Base"),c=a("./util/smoothSpline"),d=a("./util/smoothBezier"),e=a("./util/dashedLineTo"),f=function(a){this.brushTypeOnly="stroke",this.textPosition="end",b.call(this,a)};return f.prototype={type:"polyline",buildPath:function(a,b){var d=b.pointList;if(!(d.length<2)){var f=Math.min(b.pointList.length,Math.round(b.pointListLength||b.pointList.length));if(b.smooth&&"spline"!==b.smooth){b.controlPointList||this.updateControlPoints(b);var g=b.controlPointList;a.moveTo(d[0][0],d[0][1]);for(var h,i,j,k=0;f-1>k;k++)h=g[2*k],i=g[2*k+1],j=d[k+1],a.bezierCurveTo(h[0],h[1],i[0],i[1],j[0],j[1])}else if("spline"===b.smooth&&(d=c(d),f=d.length),b.lineType&&"solid"!=b.lineType){if("dashed"==b.lineType||"dotted"==b.lineType){var l=(b.lineWidth||1)*("dashed"==b.lineType?5:1);a.moveTo(d[0][0],d[0][1]);for(var k=1;f>k;k++)e(a,d[k-1][0],d[k-1][1],d[k][0],d[k][1],l)}}else{a.moveTo(d[0][0],d[0][1]);for(var k=1;f>k;k++)a.lineTo(d[k][0],d[k][1])}}},updateControlPoints:function(a){a.controlPointList=d(a.pointList,a.smooth,!1,a.smoothConstraint)},getRect:function(b){return a("./Polygon").prototype.getRect(b)}},a("../tool/util").inherits(f,b),f}),c("echarts/chart/gauge",["require","./base","../util/shape/GaugePointer","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","zrender/shape/Circle","zrender/shape/Sector","../config","../util/ecData","../util/accMath","zrender/tool/util","../chart"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("../util/shape/GaugePointer"),e=a("zrender/shape/Text"),f=a("zrender/shape/Line"),g=a("zrender/shape/Rectangle"),h=a("zrender/shape/Circle"),i=a("zrender/shape/Sector"),j=a("../config");j.gauge={zlevel:0,z:2,center:["50%","50%"],clickable:!0,legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#228b22"],[.8,"#48b"],[1,"#ff4500"]],width:30}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,textStyle:{color:"auto"}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},pointer:{show:!0,length:"80%",width:8,color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],textStyle:{color:"#333",fontSize:15}},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:40,offsetCenter:[0,"40%"],textStyle:{color:"auto",fontSize:30}}};var k=a("../util/ecData"),l=a("../util/accMath"),m=a("zrender/tool/util");return b.prototype={type:j.CHART_TYPE_GAUGE,_buildShape:function(){var a=this.series;this._paramsMap={},this.selectedMap={};for(var b=0,c=a.length;c>b;b++)a[b].type===j.CHART_TYPE_GAUGE&&(this.selectedMap[a[b].name]=!0,a[b]=this.reformOption(a[b]),this.legendHoverLink=a[b].legendHoverLink||this.legendHoverLink,this._buildSingleGauge(b),this.buildMark(b));this.addShapeList()},_buildSingleGauge:function(a){var b=this.series[a];this._paramsMap[a]={center:this.parseCenter(this.zr,b.center),radius:this.parseRadius(this.zr,b.radius),startAngle:b.startAngle.toFixed(2)-0,endAngle:b.endAngle.toFixed(2)-0},this._paramsMap[a].totalAngle=this._paramsMap[a].startAngle-this._paramsMap[a].endAngle,this._colorMap(a),this._buildAxisLine(a),this._buildSplitLine(a),this._buildAxisTick(a),this._buildAxisLabel(a),this._buildPointer(a),this._buildTitle(a),this._buildDetail(a)},_buildAxisLine:function(a){var b=this.series[a];if(b.axisLine.show)for(var c,d,e=b.min,f=b.max-e,g=this._paramsMap[a],h=g.center,i=g.startAngle,j=g.totalAngle,l=g.colorArray,m=b.axisLine.lineStyle,n=this.parsePercent(m.width,g.radius[1]),o=g.radius[1],p=o-n,q=i,r=0,s=l.length;s>r;r++)d=i-j*(l[r][0]-e)/f,c=this._getSector(h,p,o,d,q,l[r][1],m,b.zlevel,b.z),q=d,c._animationAdd="r",k.set(c,"seriesIndex",a),k.set(c,"dataIndex",r),this.shapeList.push(c)},_buildSplitLine:function(a){var b=this.series[a];if(b.splitLine.show)for(var c,d,e,g=this._paramsMap[a],h=b.splitNumber,i=b.min,j=b.max-i,k=b.splitLine,l=this.parsePercent(k.length,g.radius[1]),m=k.lineStyle,n=m.color,o=g.center,p=g.startAngle*Math.PI/180,q=g.totalAngle*Math.PI/180,r=g.radius[1],s=r-l,t=0;h>=t;t++)c=p-q/h*t,d=Math.sin(c),e=Math.cos(c),this.shapeList.push(new f({zlevel:b.zlevel,z:b.z+1,hoverable:!1,style:{xStart:o[0]+e*r,yStart:o[1]-d*r,xEnd:o[0]+e*s,yEnd:o[1]-d*s,strokeColor:"auto"===n?this._getColor(a,i+j/h*t):n,lineType:m.type,lineWidth:m.width,shadowColor:m.shadowColor,shadowBlur:m.shadowBlur,shadowOffsetX:m.shadowOffsetX,shadowOffsetY:m.shadowOffsetY}}))},_buildAxisTick:function(a){var b=this.series[a];if(b.axisTick.show)for(var c,d,e,g=this._paramsMap[a],h=b.splitNumber,i=b.min,j=b.max-i,k=b.axisTick,l=k.splitNumber,m=this.parsePercent(k.length,g.radius[1]),n=k.lineStyle,o=n.color,p=g.center,q=g.startAngle*Math.PI/180,r=g.totalAngle*Math.PI/180,s=g.radius[1],t=s-m,u=0,v=h*l;v>=u;u++)u%l!==0&&(c=q-r/v*u,d=Math.sin(c),e=Math.cos(c),this.shapeList.push(new f({zlevel:b.zlevel,z:b.z+1,hoverable:!1,style:{xStart:p[0]+e*s,yStart:p[1]-d*s,xEnd:p[0]+e*t,yEnd:p[1]-d*t,strokeColor:"auto"===o?this._getColor(a,i+j/v*u):o,lineType:n.type,lineWidth:n.width,shadowColor:n.shadowColor,shadowBlur:n.shadowBlur,shadowOffsetX:n.shadowOffsetX,shadowOffsetY:n.shadowOffsetY}})))},_buildAxisLabel:function(a){var b=this.series[a];if(b.axisLabel.show)for(var c,d,f,g,h=b.splitNumber,i=b.min,j=b.max-i,k=b.axisLabel.textStyle,m=this.getFont(k),n=k.color,o=this._paramsMap[a],p=o.center,q=o.startAngle,r=o.totalAngle,s=o.radius[1]-this.parsePercent(b.splitLine.length,o.radius[1])-5,t=0;h>=t;t++)g=l.accAdd(i,l.accMul(l.accDiv(j,h),t)),c=q-r/h*t,d=Math.sin(c*Math.PI/180),f=Math.cos(c*Math.PI/180),c=(c+360)%360,this.shapeList.push(new e({zlevel:b.zlevel,z:b.z+1,hoverable:!1,style:{x:p[0]+f*s,y:p[1]-d*s,color:"auto"===n?this._getColor(a,g):n,text:this._getLabelText(b.axisLabel.formatter,g),textAlign:c>=110&&250>=c?"left":70>=c||c>=290?"right":"center",textBaseline:c>=10&&170>=c?"top":c>=190&&350>=c?"bottom":"middle",textFont:m,shadowColor:k.shadowColor,shadowBlur:k.shadowBlur,shadowOffsetX:k.shadowOffsetX,shadowOffsetY:k.shadowOffsetY}}))},_buildPointer:function(a){var b=this.series[a];if(b.pointer.show){var c=b.max-b.min,e=b.pointer,f=this._paramsMap[a],g=this.parsePercent(e.length,f.radius[1]),i=this.parsePercent(e.width,f.radius[1]),j=f.center,l=this._getValue(a);l=l<b.max?l:b.max;var m=(f.startAngle-f.totalAngle/c*(l-b.min))*Math.PI/180,n="auto"===e.color?this._getColor(a,l):e.color,o=new d({zlevel:b.zlevel,z:b.z+1,clickable:this.query(b,"clickable"),style:{x:j[0],y:j[1],r:g,startAngle:f.startAngle*Math.PI/180,angle:m,color:n,width:i,shadowColor:e.shadowColor,shadowBlur:e.shadowBlur,shadowOffsetX:e.shadowOffsetX,shadowOffsetY:e.shadowOffsetY},highlightStyle:{brushType:"fill",width:i>2?2:i/2,color:"#fff"}});k.pack(o,this.series[a],a,this.series[a].data[0],0,this.series[a].data[0].name,l),this.shapeList.push(o),this.shapeList.push(new h({zlevel:b.zlevel,z:b.z+2,hoverable:!1,style:{x:j[0],y:j[1],r:e.width/2.5,color:"#fff"}}))}},_buildTitle:function(a){var b=this.series[a];if(b.title.show){var c=b.data[0],d=null!=c.name?c.name:"";if(""!==d){var f=b.title,g=f.offsetCenter,h=f.textStyle,i=h.color,j=this._paramsMap[a],k=j.center[0]+this.parsePercent(g[0],j.radius[1]),l=j.center[1]+this.parsePercent(g[1],j.radius[1]);this.shapeList.push(new e({zlevel:b.zlevel,z:b.z+(Math.abs(k-j.center[0])+Math.abs(l-j.center[1])<2*h.fontSize?2:1),hoverable:!1,style:{x:k,y:l,color:"auto"===i?this._getColor(a):i,text:d,textAlign:"center",textFont:this.getFont(h),shadowColor:h.shadowColor,shadowBlur:h.shadowBlur,shadowOffsetX:h.shadowOffsetX,shadowOffsetY:h.shadowOffsetY}}))}}},_buildDetail:function(a){var b=this.series[a];if(b.detail.show){var c=b.detail,d=c.offsetCenter,e=c.backgroundColor,f=c.textStyle,h=f.color,i=this._paramsMap[a],j=this._getValue(a),k=i.center[0]-c.width/2+this.parsePercent(d[0],i.radius[1]),l=i.center[1]+this.parsePercent(d[1],i.radius[1]);this.shapeList.push(new g({zlevel:b.zlevel,z:b.z+(Math.abs(k+c.width/2-i.center[0])+Math.abs(l+c.height/2-i.center[1])<f.fontSize?2:1),hoverable:!1,style:{x:k,y:l,width:c.width,height:c.height,brushType:"both",color:"auto"===e?this._getColor(a,j):e,lineWidth:c.borderWidth,strokeColor:c.borderColor,shadowColor:c.shadowColor,shadowBlur:c.shadowBlur,shadowOffsetX:c.shadowOffsetX,shadowOffsetY:c.shadowOffsetY,text:this._getLabelText(c.formatter,j),textFont:this.getFont(f),textPosition:"inside",textColor:"auto"===h?this._getColor(a,j):h}}))}},_getValue:function(a){return this.getDataFromOption(this.series[a].data[0])},_colorMap:function(a){var b=this.series[a],c=b.min,d=b.max-c,e=b.axisLine.lineStyle.color;e instanceof Array||(e=[[1,e]]);for(var f=[],g=0,h=e.length;h>g;g++)f.push([e[g][0]*d+c,e[g][1]]);this._paramsMap[a].colorArray=f},_getColor:function(a,b){null==b&&(b=this._getValue(a));for(var c=this._paramsMap[a].colorArray,d=0,e=c.length;e>d;d++)if(c[d][0]>=b)return c[d][1];return c[c.length-1][1]},_getSector:function(a,b,c,d,e,f,g,h,j){return new i({zlevel:h,z:j,hoverable:!1,style:{x:a[0],y:a[1],r0:b,r:c,startAngle:d,endAngle:e,brushType:"fill",color:f,shadowColor:g.shadowColor,shadowBlur:g.shadowBlur,shadowOffsetX:g.shadowOffsetX,shadowOffsetY:g.shadowOffsetY}})},_getLabelText:function(a,b){if(a){if("function"==typeof a)return a.call(this.myChart,b);if("string"==typeof a)return a.replace("{value}",b)}return b},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()}},m.inherits(b,c),a("../chart").define("gauge",b),b}),c("echarts/component/grid",["require","./base","zrender/shape/Rectangle","../config","zrender/tool/util","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Rectangle"),e=a("../config");e.grid={zlevel:0,z:0,x:80,y:60,x2:80,y2:60,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"};var f=a("zrender/tool/util");return b.prototype={type:e.COMPONENT_TYPE_GRID,getX:function(){return this._x},getY:function(){return this._y},getWidth:function(){return this._width},getHeight:function(){return this._height},getXend:function(){return this._x+this._width},getYend:function(){return this._y+this._height},getArea:function(){return{x:this._x,y:this._y,width:this._width,height:this._height}},getBbox:function(){return[[this._x,this._y],[this.getXend(),this.getYend()]]},refixAxisShape:function(a){for(var b,c,d,f=a.xAxis._axisList.concat(a.yAxis?a.yAxis._axisList:[]),g=f.length;g--;)d=f[g],d.type==e.COMPONENT_TYPE_AXIS_VALUE&&d._min<0&&d._max>=0&&(d.isHorizontal()?b=d.getCoord(0):c=d.getCoord(0));if("undefined"!=typeof b||"undefined"!=typeof c)for(g=f.length;g--;)f[g].refixAxisShape(b,c)},refresh:function(a){if(a||this._zrWidth!=this.zr.getWidth()||this._zrHeight!=this.zr.getHeight()){this.clear(),this.option=a||this.option,this.option.grid=this.reformOption(this.option.grid);var b=this.option.grid;this._zrWidth=this.zr.getWidth(),this._zrHeight=this.zr.getHeight(),this._x=this.parsePercent(b.x,this._zrWidth),this._y=this.parsePercent(b.y,this._zrHeight);var c=this.parsePercent(b.x2,this._zrWidth),e=this.parsePercent(b.y2,this._zrHeight);this._width="undefined"==typeof b.width?this._zrWidth-this._x-c:this.parsePercent(b.width,this._zrWidth),this._width=this._width<=0?10:this._width,this._height="undefined"==typeof b.height?this._zrHeight-this._y-e:this.parsePercent(b.height,this._zrHeight),this._height=this._height<=0?10:this._height,this._x=this.subPixelOptimize(this._x,b.borderWidth),this._y=this.subPixelOptimize(this._y,b.borderWidth),this.shapeList.push(new d({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._x,y:this._y,width:this._width,height:this._height,brushType:b.borderWidth>0?"both":"fill",color:b.backgroundColor,strokeColor:b.borderColor,lineWidth:b.borderWidth}})),this.zr.addShape(this.shapeList[0])}}},f.inherits(b,c),a("../component").define("grid",b),b}),c("echarts/util/shape/HalfSmoothPolygon",["require","zrender/shape/Base","zrender/shape/util/smoothBezier","zrender/tool/util","zrender/shape/Polygon"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/shape/util/smoothBezier"),e=a("zrender/tool/util");return b.prototype={type:"half-smooth-polygon",buildPath:function(b,c){var e=c.pointList;if(!(e.length<2))if(c.smooth){var f=d(e.slice(0,-2),c.smooth,!1,c.smoothConstraint);b.moveTo(e[0][0],e[0][1]);for(var g,h,i,j=e.length,k=0;j-3>k;k++)g=f[2*k],h=f[2*k+1],i=e[k+1],b.bezierCurveTo(g[0],g[1],h[0],h[1],i[0],i[1]);b.lineTo(e[j-2][0],e[j-2][1]),b.lineTo(e[j-1][0],e[j-1][1]),b.lineTo(e[0][0],e[0][1])}else a("zrender/shape/Polygon").prototype.buildPath(b,c)}},e.inherits(b,c),b}),c("echarts/component/axis",["require","./base","zrender/shape/Line","../config","../util/ecData","zrender/tool/util","zrender/tool/color","./categoryAxis","./valueAxis","../component"],function(a){function b(a,b,d,e,f,g){c.call(this,a,b,d,e,f),this.axisType=g,this._axisList=[],this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Line"),e=a("../config"),f=a("../util/ecData"),g=a("zrender/tool/util"),h=a("zrender/tool/color");return b.prototype={type:e.COMPONENT_TYPE_AXIS,axisBase:{_buildAxisLine:function(){var a=this.option.axisLine.lineStyle.width,b=a/2,c={_axisShape:"axisLine",zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1},e=this.grid;switch(this.option.position){case"left":c.style={xStart:e.getX()-b,yStart:e.getYend(),xEnd:e.getX()-b,yEnd:e.getY(),lineCap:"round"};break;case"right":c.style={xStart:e.getXend()+b,yStart:e.getYend(),xEnd:e.getXend()+b,yEnd:e.getY(),lineCap:"round"};break;case"bottom":c.style={xStart:e.getX(),yStart:e.getYend()+b,xEnd:e.getXend(),yEnd:e.getYend()+b,lineCap:"round"};break;case"top":c.style={xStart:e.getX(),yStart:e.getY()-b,xEnd:e.getXend(),yEnd:e.getY()-b,lineCap:"round"}}var f=c.style;""!==this.option.name&&(f.text=this.option.name,f.textPosition=this.option.nameLocation,f.textFont=this.getFont(this.option.nameTextStyle),this.option.nameTextStyle.align&&(f.textAlign=this.option.nameTextStyle.align),this.option.nameTextStyle.baseline&&(f.textBaseline=this.option.nameTextStyle.baseline),this.option.nameTextStyle.color&&(f.textColor=this.option.nameTextStyle.color)),f.strokeColor=this.option.axisLine.lineStyle.color,f.lineWidth=a,this.isHorizontal()?f.yStart=f.yEnd=this.subPixelOptimize(f.yEnd,a):f.xStart=f.xEnd=this.subPixelOptimize(f.xEnd,a),f.lineType=this.option.axisLine.lineStyle.type,c=new d(c),this.shapeList.push(c)},_axisLabelClickable:function(a,b){return a?(f.pack(b,void 0,-1,void 0,-1,b.style.text),b.hoverable=!0,b.clickable=!0,b.highlightStyle={color:h.lift(b.style.color,1),brushType:"fill"},b):b},refixAxisShape:function(a,b){if(this.option.axisLine.onZero){var c;if(this.isHorizontal()&&null!=b)for(var d=0,e=this.shapeList.length;e>d;d++)"axisLine"===this.shapeList[d]._axisShape?(this.shapeList[d].style.yStart=this.shapeList[d].style.yEnd=this.subPixelOptimize(b,this.shapeList[d].stylelineWidth),this.zr.modShape(this.shapeList[d].id)):"axisTick"===this.shapeList[d]._axisShape&&(c=this.shapeList[d].style.yEnd-this.shapeList[d].style.yStart,this.shapeList[d].style.yStart=b-c,this.shapeList[d].style.yEnd=b,this.zr.modShape(this.shapeList[d].id));if(!this.isHorizontal()&&null!=a)for(var d=0,e=this.shapeList.length;e>d;d++)"axisLine"===this.shapeList[d]._axisShape?(this.shapeList[d].style.xStart=this.shapeList[d].style.xEnd=this.subPixelOptimize(a,this.shapeList[d].stylelineWidth),this.zr.modShape(this.shapeList[d].id)):"axisTick"===this.shapeList[d]._axisShape&&(c=this.shapeList[d].style.xEnd-this.shapeList[d].style.xStart,this.shapeList[d].style.xStart=a,this.shapeList[d].style.xEnd=a+c,this.zr.modShape(this.shapeList[d].id))}},getPosition:function(){return this.option.position},isHorizontal:function(){return"bottom"===this.option.position||"top"===this.option.position}},reformOption:function(a){if(!a||a instanceof Array&&0===a.length?a=[{type:e.COMPONENT_TYPE_AXIS_VALUE}]:a instanceof Array||(a=[a]),a.length>2&&(a=[a[0],a[1]]),"xAxis"===this.axisType){(!a[0].position||"bottom"!=a[0].position&&"top"!=a[0].position)&&(a[0].position="bottom"),a.length>1&&(a[1].position="bottom"===a[0].position?"top":"bottom");for(var b=0,c=a.length;c>b;b++)a[b].type=a[b].type||"category",a[b].xAxisIndex=b,a[b].yAxisIndex=-1}else{(!a[0].position||"left"!=a[0].position&&"right"!=a[0].position)&&(a[0].position="left"),a.length>1&&(a[1].position="left"===a[0].position?"right":"left");for(var b=0,c=a.length;c>b;b++)a[b].type=a[b].type||"value",a[b].xAxisIndex=-1,a[b].yAxisIndex=b}return a},refresh:function(b){var c;b&&(this.option=b,"xAxis"===this.axisType?(this.option.xAxis=this.reformOption(b.xAxis),c=this.option.xAxis):(this.option.yAxis=this.reformOption(b.yAxis),c=this.option.yAxis),this.series=b.series);for(var d=a("./categoryAxis"),e=a("./valueAxis"),f=Math.max(c&&c.length||0,this._axisList.length),g=0;f>g;g++)!this._axisList[g]||!b||c[g]&&this._axisList[g].type==c[g].type||(this._axisList[g].dispose&&this._axisList[g].dispose(),this._axisList[g]=!1),this._axisList[g]?this._axisList[g].refresh&&this._axisList[g].refresh(c?c[g]:!1,this.series):c&&c[g]&&(this._axisList[g]="category"===c[g].type?new d(this.ecTheme,this.messageCenter,this.zr,c[g],this.myChart,this.axisBase):new e(this.ecTheme,this.messageCenter,this.zr,c[g],this.myChart,this.axisBase,this.series))},getAxis:function(a){return this._axisList[a]},getAxisCount:function(){return this._axisList.length},clear:function(){for(var a=0,b=this._axisList.length;b>a;a++)this._axisList[a].dispose&&this._axisList[a].dispose();this._axisList=[]}},g.inherits(b,c),a("../component").define("axis",b),b}),c("echarts/config",[],function(){var a={CHART_TYPE_LINE:"line",CHART_TYPE_BAR:"bar",CHART_TYPE_SCATTER:"scatter",CHART_TYPE_PIE:"pie",CHART_TYPE_RADAR:"radar",CHART_TYPE_VENN:"venn",CHART_TYPE_TREEMAP:"treemap",CHART_TYPE_TREE:"tree",CHART_TYPE_MAP:"map",CHART_TYPE_K:"k",CHART_TYPE_ISLAND:"island",CHART_TYPE_FORCE:"force",CHART_TYPE_CHORD:"chord",CHART_TYPE_GAUGE:"gauge",CHART_TYPE_FUNNEL:"funnel",CHART_TYPE_EVENTRIVER:"eventRiver",CHART_TYPE_WORDCLOUD:"wordCloud",CHART_TYPE_HEATMAP:"heatmap",COMPONENT_TYPE_TITLE:"title",COMPONENT_TYPE_LEGEND:"legend",COMPONENT_TYPE_DATARANGE:"dataRange",COMPONENT_TYPE_DATAVIEW:"dataView",COMPONENT_TYPE_DATAZOOM:"dataZoom",COMPONENT_TYPE_TOOLBOX:"toolbox",COMPONENT_TYPE_TOOLTIP:"tooltip",COMPONENT_TYPE_GRID:"grid",COMPONENT_TYPE_AXIS:"axis",COMPONENT_TYPE_POLAR:"polar",COMPONENT_TYPE_X_AXIS:"xAxis",COMPONENT_TYPE_Y_AXIS:"yAxis",COMPONENT_TYPE_AXIS_CATEGORY:"categoryAxis",COMPONENT_TYPE_AXIS_VALUE:"valueAxis",COMPONENT_TYPE_TIMELINE:"timeline",COMPONENT_TYPE_ROAMCONTROLLER:"roamController",backgroundColor:"rgba(0,0,0,0)",color:["#ff7f50","#87cefa","#da70d6","#32cd32","#6495ed","#ff69b4","#ba55d3","#cd5c5c","#ffa500","#40e0d0","#1e90ff","#ff6347","#7b68ee","#00fa9a","#ffd700","#6699FF","#ff6666","#3cb371","#b8860b","#30e0e0"],markPoint:{clickable:!0,symbol:"pin",symbolSize:10,large:!1,effect:{show:!1,loop:!0,period:15,type:"scale",scaleSize:2,bounceDistance:10},itemStyle:{normal:{borderWidth:2,label:{show:!0,position:"inside"}},emphasis:{label:{show:!0}}}},markLine:{clickable:!0,symbol:["circle","arrow"],symbolSize:[2,4],smoothness:.2,precision:2,effect:{show:!1,loop:!0,period:15,scaleSize:2},bundling:{enable:!1,maxTurningAngle:45},itemStyle:{normal:{borderWidth:1.5,label:{show:!0,position:"end"},lineStyle:{type:"dashed"}},emphasis:{label:{show:!1},lineStyle:{}}}},textStyle:{decoration:"none",fontFamily:"Arial, Verdana, sans-serif",fontFamily2:"微软雅黑",fontSize:12,fontStyle:"normal",fontWeight:"normal"},EVENT:{REFRESH:"refresh",RESTORE:"restore",RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",HOVER:"hover",MOUSEOUT:"mouseout",DATA_CHANGED:"dataChanged",DATA_ZOOM:"dataZoom",DATA_RANGE:"dataRange",DATA_RANGE_SELECTED:"dataRangeSelected",DATA_RANGE_HOVERLINK:"dataRangeHoverLink",LEGEND_SELECTED:"legendSelected",LEGEND_HOVERLINK:"legendHoverLink",MAP_SELECTED:"mapSelected",PIE_SELECTED:"pieSelected",MAGIC_TYPE_CHANGED:"magicTypeChanged",DATA_VIEW_CHANGED:"dataViewChanged",TIMELINE_CHANGED:"timelineChanged",MAP_ROAM:"mapRoam",FORCE_LAYOUT_END:"forceLayoutEnd",TOOLTIP_HOVER:"tooltipHover",TOOLTIP_IN_GRID:"tooltipInGrid",TOOLTIP_OUT_GRID:"tooltipOutGrid",ROAMCONTROLLER:"roamController"},DRAG_ENABLE_TIME:120,EFFECT_ZLEVEL:10,effectBlendAlpha:.95,symbolList:["circle","rectangle","triangle","diamond","emptyCircle","emptyRectangle","emptyTriangle","emptyDiamond"],loadingEffect:"spin",loadingText:"数据读取中...",noDataEffect:"bubble",noDataText:"暂无数据",calculable:!1,calculableColor:"rgba(255,165,0,0.6)",calculableHolderColor:"#ccc",nameConnector:" & ",valueConnector:": ",animation:!0,addDataAnimation:!0,animationThreshold:2e3,animationDuration:2e3,animationDurationUpdate:500,animationEasing:"ExponentialOut"};return a}),c("echarts/util/ecData",[],function(){function a(a,b,c,d,e,f,g,h){var i;return"undefined"!=typeof d&&(i=null==d.value?d:d.value),a._echartsData={_series:b,_seriesIndex:c,_data:d,_dataIndex:e,_name:f,_value:i,_special:g,_special2:h},a._echartsData}function b(a,b){var c=a._echartsData;if(!b)return c;switch(b){case"series":case"seriesIndex":case"data":case"dataIndex":case"name":case"value":case"special":case"special2":return c&&c["_"+b]}return null}function c(a,b,c){switch(a._echartsData=a._echartsData||{},b){case"series":case"seriesIndex":case"data":case"dataIndex":case"name":case"value":case"special":case"special2":a._echartsData["_"+b]=c}}function d(a,b){b._echartsData={_series:a._echartsData._series,_seriesIndex:a._echartsData._seriesIndex,_data:a._echartsData._data,_dataIndex:a._echartsData._dataIndex,_name:a._echartsData._name,_value:a._echartsData._value,_special:a._echartsData._special,_special2:a._echartsData._special2}}return{pack:a,set:c,get:b,clone:d}}),c("echarts/chart",[],function(){var a={},b={};return a.define=function(c,d){return b[c]=d,a},a.get=function(a){return b[a]},a}),c("zrender/tool/util",["require","../dep/excanvas"],function(a){function b(a){return a&&1===a.nodeType&&"string"==typeof a.nodeName}function c(a){if("object"==typeof a&&null!==a){var d=a;if(a instanceof Array){d=[];for(var e=0,f=a.length;f>e;e++)d[e]=c(a[e])}else if(!r[s.call(a)]&&!b(a)){d={};for(var g in a)a.hasOwnProperty(g)&&(d[g]=c(a[g]))}return d}return a}function d(a,c,d,f){if(c.hasOwnProperty(d)){var g=a[d];"object"!=typeof g||r[s.call(g)]||b(g)?!f&&d in a||(a[d]=c[d]):e(a[d],c[d],f)}}function e(a,b,c){for(var e in b)d(a,b,e,c);return a}function f(){if(!m)if(a("../dep/excanvas"),window.G_vmlCanvasManager){var b=document.createElement("div");b.style.position="absolute",b.style.top="-1000px",document.body.appendChild(b),m=G_vmlCanvasManager.initElement(b).getContext("2d")}else m=document.createElement("canvas").getContext("2d");return m}function g(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function h(a,b){function c(){}var d=a.prototype;c.prototype=b.prototype,a.prototype=new c;for(var e in d)a.prototype[e]=d[e];a.constructor=a}function i(a,b,c){if(a&&b)if(a.forEach&&a.forEach===o)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a);else for(var f in a)a.hasOwnProperty(f)&&b.call(c,a[f],f,a)}function j(a,b,c){if(a&&b){if(a.map&&a.map===p)return a.map(b,c);for(var d=[],e=0,f=a.length;f>e;e++)d.push(b.call(c,a[e],e,a));return d}}function k(a,b,c){if(a&&b){if(a.filter&&a.filter===q)return a.filter(b,c);for(var d=[],e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a)&&d.push(a[e]);return d}}function l(a,b){return function(){a.apply(b,arguments)}}var m,n=Array.prototype,o=n.forEach,p=n.map,q=n.filter,r={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},s=Object.prototype.toString;return{inherits:h,clone:c,merge:e,getContext:f,indexOf:g,each:i,map:j,filter:k,bind:l}}),c("zrender/tool/color",["require","../tool/util"],function(a){function b(a){Q=a}function c(){Q=R}function d(a,b){return a=0|a,b=b||Q,b[a%b.length]}function e(a){S=a}function f(){T=S}function g(){return S}function h(a,b,c,d,e,f,g){O||(O=P.getContext());for(var h=O.createRadialGradient(a,b,c,d,e,f),i=0,j=g.length;j>i;i++)h.addColorStop(g[i][0],g[i][1]);return h.__nonRecursion=!0,h}function i(a,b,c,d,e){O||(O=P.getContext());for(var f=O.createLinearGradient(a,b,c,d),g=0,h=e.length;h>g;g++)f.addColorStop(e[g][0],e[g][1]);return f.__nonRecursion=!0,f}function j(a,b,c){a=o(a),b=o(b),a=E(a),b=E(b);for(var d=[],e=(b[0]-a[0])/c,f=(b[1]-a[1])/c,g=(b[2]-a[2])/c,h=(b[3]-a[3])/c,i=0,j=a[0],k=a[1],m=a[2],n=a[3];c>i;i++)d[i]=l([H(Math.floor(j),[0,255]),H(Math.floor(k),[0,255]),H(Math.floor(m),[0,255]),n.toFixed(4)-0],"rgba"),j+=e,k+=f,m+=g,n+=h;return j=b[0],k=b[1],m=b[2],n=b[3],d[i]=l([j,k,m,n],"rgba"),d}function k(a,b){var c=[],d=a.length;if(void 0===b&&(b=20),1===d)c=j(a[0],a[0],b);else if(d>1)for(var e=0,f=d-1;f>e;e++){var g=j(a[e],a[e+1],b);f-1>e&&g.pop(),c=c.concat(g)}return c}function l(a,b){if(b=b||"rgb",a&&(3===a.length||4===a.length)){if(a=G(a,function(a){return a>1?Math.ceil(a):a}),b.indexOf("hex")>-1)return"#"+((1<<24)+(a[0]<<16)+(a[1]<<8)+ +a[2]).toString(16).slice(1);if(b.indexOf("hs")>-1){var c=G(a.slice(1,3),function(a){return a+"%"});a[1]=c[0],a[2]=c[1]}return b.indexOf("a")>-1?(3===a.length&&a.push(1),a[3]=H(a[3],[0,1]),b+"("+a.slice(0,4).join(",")+")"):b+"("+a.slice(0,3).join(",")+")"}}function m(a){a=y(a),a.indexOf("rgba")<0&&(a=o(a));var b=[],c=0;return a.replace(/[\d.]+/g,function(a){a=3>c?0|a:+a,b[c++]=a}),b}function n(a,b){if(!I(a))return a;var c=E(a),d=c[3];return"undefined"==typeof d&&(d=1),a.indexOf("hsb")>-1?c=J(c):a.indexOf("hsl")>-1&&(c=K(c)),b.indexOf("hsb")>-1||b.indexOf("hsv")>-1?c=M(c):b.indexOf("hsl")>-1&&(c=N(c)),c[3]=d,l(c,b)}function o(a){return n(a,"rgba")}function p(a){return n(a,"rgb")}function q(a){return n(a,"hex")}function r(a){return n(a,"hsva")}function s(a){return n(a,"hsv")}function t(a){return n(a,"hsba")}function u(a){return n(a,"hsb")}function v(a){return n(a,"hsla")}function w(a){return n(a,"hsl")}function x(a){for(var b in V)if(q(V[b])===q(a))return b;return null}function y(a){return String(a).replace(/\s+/g,"")}function z(a){if(V[a]&&(a=V[a]),a=y(a),a=a.replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(a)){a=parseInt(a.slice(1),16);var b=(3840&a)<<8,c=(240&a)<<4,d=15&a;a="#"+((1<<24)+(b<<4)+b+(c<<4)+c+(d<<4)+d).toString(16).slice(1)}return a}function A(a,b){if(!I(a))return a;var c=b>0?1:-1;"undefined"==typeof b&&(b=0),b=Math.abs(b)>1?1:Math.abs(b),a=p(a);for(var d=E(a),e=0;3>e;e++)d[e]=1===c?d[e]*(1-b)|0:(255-d[e])*b+d[e]|0;return"rgb("+d.join(",")+")"}function B(a){if(!I(a))return a;var b=E(o(a));return b=G(b,function(a){return 255-a}),l(b,"rgb")}function C(a,b,c){if(!I(a)||!I(b))return a;"undefined"==typeof c&&(c=.5),c=1-H(c,[0,1]);for(var d=2*c-1,e=E(o(a)),f=E(o(b)),g=e[3]-f[3],h=((d*g===-1?d:(d+g)/(1+d*g))+1)/2,i=1-h,j=[],k=0;3>k;k++)j[k]=e[k]*h+f[k]*i;var m=e[3]*c+f[3]*(1-c);return m=Math.max(0,Math.min(1,m)),1===e[3]&&1===f[3]?l(j,"rgb"):(j[3]=m,l(j,"rgba"))}function D(){return"#"+(Math.random().toString(16)+"0000").slice(2,8)}function E(a){a=z(a);var b=a.match(U);if(null===b)throw new Error("The color format error");var c,d,e,f=[];if(b[2])c=b[2].replace("#","").split(""),e=[c[0]+c[1],c[2]+c[3],c[4]+c[5]],f=G(e,function(a){return H(parseInt(a,16),[0,255])});else if(b[4]){var g=b[4].split(",");d=g[3],e=g.slice(0,3),f=G(e,function(a){return a=Math.floor(a.indexOf("%")>0?2.55*parseInt(a,0):a),H(a,[0,255])}),"undefined"!=typeof d&&f.push(H(parseFloat(d),[0,1]))}else if(b[5]||b[6]){var h=(b[5]||b[6]).split(","),i=parseInt(h[0],0)/360,j=h[1],k=h[2];d=h[3],f=G([j,k],function(a){return H(parseFloat(a)/100,[0,1])}),f.unshift(i),"undefined"!=typeof d&&f.push(H(parseFloat(d),[0,1]))}return f}function F(a,b){if(!I(a))return a;null===b&&(b=1);var c=E(o(a));return c[3]=H(Number(b).toFixed(4),[0,1]),l(c,"rgba")}function G(a,b){if("function"!=typeof b)throw new TypeError;for(var c=a?a.length:0,d=0;c>d;d++)a[d]=b(a[d]);return a}function H(a,b){return a<=b[0]?a=b[0]:a>=b[1]&&(a=b[1]),a}function I(a){return a instanceof Array||"string"==typeof a}function J(a){var b,c,d,e=a[0],f=a[1],g=a[2];
if(0===f)b=255*g,c=255*g,d=255*g;else{var h=6*e;6===h&&(h=0);var i=0|h,j=g*(1-f),k=g*(1-f*(h-i)),l=g*(1-f*(1-(h-i))),m=0,n=0,o=0;0===i?(m=g,n=l,o=j):1===i?(m=k,n=g,o=j):2===i?(m=j,n=g,o=l):3===i?(m=j,n=k,o=g):4===i?(m=l,n=j,o=g):(m=g,n=j,o=k),b=255*m,c=255*n,d=255*o}return[b,c,d]}function K(a){var b,c,d,e=a[0],f=a[1],g=a[2];if(0===f)b=255*g,c=255*g,d=255*g;else{var h;h=.5>g?g*(1+f):g+f-f*g;var i=2*g-h;b=255*L(i,h,e+1/3),c=255*L(i,h,e),d=255*L(i,h,e-1/3)}return[b,c,d]}function L(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}function M(a){var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=Math.min(d,e,f),h=Math.max(d,e,f),i=h-g,j=h;if(0===i)b=0,c=0;else{c=i/h;var k=((h-d)/6+i/2)/i,l=((h-e)/6+i/2)/i,m=((h-f)/6+i/2)/i;d===h?b=m-l:e===h?b=1/3+k-m:f===h&&(b=2/3+l-k),0>b&&(b+=1),b>1&&(b-=1)}return b=360*b,c=100*c,j=100*j,[b,c,j]}function N(a){var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=Math.min(d,e,f),h=Math.max(d,e,f),i=h-g,j=(h+g)/2;if(0===i)b=0,c=0;else{c=.5>j?i/(h+g):i/(2-h-g);var k=((h-d)/6+i/2)/i,l=((h-e)/6+i/2)/i,m=((h-f)/6+i/2)/i;d===h?b=m-l:e===h?b=1/3+k-m:f===h&&(b=2/3+l-k),0>b&&(b+=1),b>1&&(b-=1)}return b=360*b,c=100*c,j=100*j,[b,c,j]}var O,P=a("../tool/util"),Q=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],R=Q,S="rgba(255,255,0,0.5)",T=S,U=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,V={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"};return{customPalette:b,resetPalette:c,getColor:d,getHighlightColor:g,customHighlight:e,resetHighlight:f,getRadialGradient:h,getLinearGradient:i,getGradientColors:k,getStepColors:j,reverse:B,mix:C,lift:A,trim:y,random:D,toRGB:p,toRGBA:o,toHex:q,toHSL:w,toHSLA:v,toHSB:u,toHSBA:t,toHSV:s,toHSVA:r,toName:x,toColor:l,toArray:m,alpha:F,getData:E}}),c("echarts/component/dataZoom",["require","./base","zrender/shape/Rectangle","zrender/shape/Polygon","../util/shape/Icon","../config","../util/date","zrender/tool/util","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f);var g=this;g._ondrift=function(a,b){return g.__ondrift(this,a,b)},g._ondragend=function(){return g.__ondragend()},this._fillerSize=30,this._isSilence=!1,this._zoom={},this.option.dataZoom=this.reformOption(this.option.dataZoom),this.zoomOption=this.option.dataZoom,this._handleSize=this.zoomOption.handleSize,this.myChart.canvasSupported||(this.zoomOption.realtime=!1),this._location=this._getLocation(),this._zoom=this._getZoom(),this._backupData(),this.option.dataZoom.show&&this._buildShape(),this._syncData()}var c=a("./base"),d=a("zrender/shape/Rectangle"),e=a("zrender/shape/Polygon"),f=a("../util/shape/Icon"),g=a("../config");g.dataZoom={zlevel:0,z:4,show:!1,orient:"horizontal",backgroundColor:"rgba(0,0,0,0)",dataBackgroundColor:"#eee",fillerColor:"rgba(144,197,237,0.2)",handleColor:"rgba(70,130,180,0.8)",handleSize:8,showDetail:!0,realtime:!0};var h=a("../util/date"),i=a("zrender/tool/util");return b.prototype={type:g.COMPONENT_TYPE_DATAZOOM,_buildShape:function(){this._buildBackground(),this._buildFiller(),this._buildHandle(),this._buildFrame();for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a]);this._syncFrameShape()},_getLocation:function(){var a,b,c,d,e=this.component.grid;return"horizontal"==this.zoomOption.orient?(c=this.zoomOption.width||e.getWidth(),d=this.zoomOption.height||this._fillerSize,a=null!=this.zoomOption.x?this.zoomOption.x:e.getX(),b=null!=this.zoomOption.y?this.zoomOption.y:this.zr.getHeight()-d-2):(c=this.zoomOption.width||this._fillerSize,d=this.zoomOption.height||e.getHeight(),a=null!=this.zoomOption.x?this.zoomOption.x:2,b=null!=this.zoomOption.y?this.zoomOption.y:e.getY()),{x:a,y:b,width:c,height:d}},_getZoom:function(){var a=this.option.series,b=this.option.xAxis;!b||b instanceof Array||(b=[b],this.option.xAxis=b);var c=this.option.yAxis;!c||c instanceof Array||(c=[c],this.option.yAxis=c);var d,e,f=[],h=this.zoomOption.xAxisIndex;if(b&&null==h){d=[];for(var i=0,j=b.length;j>i;i++)("category"==b[i].type||null==b[i].type)&&d.push(i)}else d=h instanceof Array?h:null!=h?[h]:[];if(h=this.zoomOption.yAxisIndex,c&&null==h){e=[];for(var i=0,j=c.length;j>i;i++)"category"==c[i].type&&e.push(i)}else e=h instanceof Array?h:null!=h?[h]:[];for(var k,i=0,j=a.length;j>i;i++)if(k=a[i],k.type==g.CHART_TYPE_LINE||k.type==g.CHART_TYPE_BAR||k.type==g.CHART_TYPE_SCATTER||k.type==g.CHART_TYPE_K){for(var l=0,m=d.length;m>l;l++)if(d[l]==(k.xAxisIndex||0)){f.push(i);break}for(var l=0,m=e.length;m>l;l++)if(e[l]==(k.yAxisIndex||0)){f.push(i);break}null==this.zoomOption.xAxisIndex&&null==this.zoomOption.yAxisIndex&&k.data&&this.getDataFromOption(k.data[0])instanceof Array&&(k.type==g.CHART_TYPE_SCATTER||k.type==g.CHART_TYPE_LINE||k.type==g.CHART_TYPE_BAR)&&f.push(i)}var n=null!=this._zoom.start?this._zoom.start:null!=this.zoomOption.start?this.zoomOption.start:0,o=null!=this._zoom.end?this._zoom.end:null!=this.zoomOption.end?this.zoomOption.end:100;n>o&&(n+=o,o=n-o,n-=o);var p=Math.round((o-n)/100*("horizontal"==this.zoomOption.orient?this._location.width:this._location.height));return{start:n,end:o,start2:0,end2:100,size:p,xAxisIndex:d,yAxisIndex:e,seriesIndex:f,scatterMap:this._zoom.scatterMap||{}}},_backupData:function(){this._originalData={xAxis:{},yAxis:{},series:{}};for(var a=this.option.xAxis,b=this._zoom.xAxisIndex,c=0,d=b.length;d>c;c++)this._originalData.xAxis[b[c]]=a[b[c]].data;for(var e=this.option.yAxis,f=this._zoom.yAxisIndex,c=0,d=f.length;d>c;c++)this._originalData.yAxis[f[c]]=e[f[c]].data;for(var h,i=this.option.series,j=this._zoom.seriesIndex,c=0,d=j.length;d>c;c++)h=i[j[c]],this._originalData.series[j[c]]=h.data,h.data&&this.getDataFromOption(h.data[0])instanceof Array&&(h.type==g.CHART_TYPE_SCATTER||h.type==g.CHART_TYPE_LINE||h.type==g.CHART_TYPE_BAR)&&(this._backupScale(),this._calculScatterMap(j[c]))},_calculScatterMap:function(b){this._zoom.scatterMap=this._zoom.scatterMap||{},this._zoom.scatterMap[b]=this._zoom.scatterMap[b]||{};var c=a("../component"),d=c.get("axis"),e=i.clone(this.option.xAxis);"category"==e[0].type&&(e[0].type="value"),e[1]&&"category"==e[1].type&&(e[1].type="value");var f=new d(this.ecTheme,null,!1,{xAxis:e,series:this.option.series},this,"xAxis"),g=this.option.series[b].xAxisIndex||0;this._zoom.scatterMap[b].x=f.getAxis(g).getExtremum(),f.dispose(),e=i.clone(this.option.yAxis),"category"==e[0].type&&(e[0].type="value"),e[1]&&"category"==e[1].type&&(e[1].type="value"),f=new d(this.ecTheme,null,!1,{yAxis:e,series:this.option.series},this,"yAxis"),g=this.option.series[b].yAxisIndex||0,this._zoom.scatterMap[b].y=f.getAxis(g).getExtremum(),f.dispose()},_buildBackground:function(){var a=this._location.width,b=this._location.height;this.shapeList.push(new d({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._location.x,y:this._location.y,width:a,height:b,color:this.zoomOption.backgroundColor}}));for(var c=0,f=this._originalData.xAxis,h=this._zoom.xAxisIndex,i=0,j=h.length;j>i;i++)c=Math.max(c,f[h[i]].length);for(var k=this._originalData.yAxis,l=this._zoom.yAxisIndex,i=0,j=l.length;j>i;i++)c=Math.max(c,k[l[i]].length);for(var m,n=this._zoom.seriesIndex[0],o=this._originalData.series[n],p=Number.MIN_VALUE,q=Number.MAX_VALUE,i=0,j=o.length;j>i;i++)m=this.getDataFromOption(o[i],0),this.option.series[n].type==g.CHART_TYPE_K&&(m=m[1]),isNaN(m)&&(m=0),p=Math.max(p,m),q=Math.min(q,m);var r=p-q,s=[],t=a/(c-(c>1?1:0)),u=b/(c-(c>1?1:0)),v=1;"horizontal"==this.zoomOption.orient&&1>t?v=Math.floor(3*c/a):"vertical"==this.zoomOption.orient&&1>u&&(v=Math.floor(3*c/b));for(var i=0,j=c;j>i;i+=v)m=this.getDataFromOption(o[i],0),this.option.series[n].type==g.CHART_TYPE_K&&(m=m[1]),isNaN(m)&&(m=0),s.push("horizontal"==this.zoomOption.orient?[this._location.x+t*i,this._location.y+b-1-Math.round((m-q)/r*(b-10))]:[this._location.x+1+Math.round((m-q)/r*(a-10)),this._location.y+u*(j-i-1)]);"horizontal"==this.zoomOption.orient?(s.push([this._location.x+a,this._location.y+b]),s.push([this._location.x,this._location.y+b])):(s.push([this._location.x,this._location.y]),s.push([this._location.x,this._location.y+b])),this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:s,color:this.zoomOption.dataBackgroundColor},hoverable:!1}))},_buildFiller:function(){this._fillerShae={zlevel:this.getZlevelBase(),z:this.getZBase(),draggable:!0,ondrift:this._ondrift,ondragend:this._ondragend,_type:"filler"},this._fillerShae.style="horizontal"==this.zoomOption.orient?{x:this._location.x+Math.round(this._zoom.start/100*this._location.width)+this._handleSize,y:this._location.y,width:this._zoom.size-2*this._handleSize,height:this._location.height,color:this.zoomOption.fillerColor,text:":::",textPosition:"inside"}:{x:this._location.x,y:this._location.y+Math.round(this._zoom.start/100*this._location.height)+this._handleSize,width:this._location.width,height:this._zoom.size-2*this._handleSize,color:this.zoomOption.fillerColor,text:"::",textPosition:"inside"},this._fillerShae.highlightStyle={brushType:"fill",color:"rgba(0,0,0,0)"},this._fillerShae=new d(this._fillerShae),this.shapeList.push(this._fillerShae)},_buildHandle:function(){var a=this.zoomOption.showDetail?this._getDetail():{start:"",end:""};this._startShape={zlevel:this.getZlevelBase(),z:this.getZBase(),draggable:!0,style:{iconType:"rectangle",x:this._location.x,y:this._location.y,width:this._handleSize,height:this._handleSize,color:this.zoomOption.handleColor,text:"=",textPosition:"inside"},highlightStyle:{text:a.start,brushType:"fill",textPosition:"left"},ondrift:this._ondrift,ondragend:this._ondragend},"horizontal"==this.zoomOption.orient?(this._startShape.style.height=this._location.height,this._endShape=i.clone(this._startShape),this._startShape.style.x=this._fillerShae.style.x-this._handleSize,this._endShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._endShape.highlightStyle.text=a.end,this._endShape.highlightStyle.textPosition="right"):(this._startShape.style.width=this._location.width,this._endShape=i.clone(this._startShape),this._startShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._startShape.highlightStyle.textPosition="bottom",this._endShape.style.y=this._fillerShae.style.y-this._handleSize,this._endShape.highlightStyle.text=a.end,this._endShape.highlightStyle.textPosition="top"),this._startShape=new f(this._startShape),this._endShape=new f(this._endShape),this.shapeList.push(this._startShape),this.shapeList.push(this._endShape)},_buildFrame:function(){var a=this.subPixelOptimize(this._location.x,1),b=this.subPixelOptimize(this._location.y,1);this._startFrameShape={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:a,y:b,width:this._location.width-(a>this._location.x?1:0),height:this._location.height-(b>this._location.y?1:0),lineWidth:1,brushType:"stroke",strokeColor:this.zoomOption.handleColor}},this._endFrameShape=i.clone(this._startFrameShape),this._startFrameShape=new d(this._startFrameShape),this._endFrameShape=new d(this._endFrameShape),this.shapeList.push(this._startFrameShape),this.shapeList.push(this._endFrameShape)},_syncHandleShape:function(){"horizontal"==this.zoomOption.orient?(this._startShape.style.x=this._fillerShae.style.x-this._handleSize,this._endShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._zoom.start=(this._startShape.style.x-this._location.x)/this._location.width*100,this._zoom.end=(this._endShape.style.x+this._handleSize-this._location.x)/this._location.width*100):(this._startShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._endShape.style.y=this._fillerShae.style.y-this._handleSize,this._zoom.start=(this._location.y+this._location.height-this._startShape.style.y)/this._location.height*100,this._zoom.end=(this._location.y+this._location.height-this._endShape.style.y-this._handleSize)/this._location.height*100),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this._syncFrameShape(),this.zr.refreshNextFrame()},_syncFillerShape:function(){var a,b;"horizontal"==this.zoomOption.orient?(a=this._startShape.style.x,b=this._endShape.style.x,this._fillerShae.style.x=Math.min(a,b)+this._handleSize,this._fillerShae.style.width=Math.abs(a-b)-this._handleSize,this._zoom.start=(Math.min(a,b)-this._location.x)/this._location.width*100,this._zoom.end=(Math.max(a,b)+this._handleSize-this._location.x)/this._location.width*100):(a=this._startShape.style.y,b=this._endShape.style.y,this._fillerShae.style.y=Math.min(a,b)+this._handleSize,this._fillerShae.style.height=Math.abs(a-b)-this._handleSize,this._zoom.start=(this._location.y+this._location.height-Math.max(a,b))/this._location.height*100,this._zoom.end=(this._location.y+this._location.height-Math.min(a,b)-this._handleSize)/this._location.height*100),this.zr.modShape(this._fillerShae.id),this._syncFrameShape(),this.zr.refreshNextFrame()},_syncFrameShape:function(){"horizontal"==this.zoomOption.orient?(this._startFrameShape.style.width=this._fillerShae.style.x-this._location.x,this._endFrameShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._endFrameShape.style.width=this._location.x+this._location.width-this._endFrameShape.style.x):(this._startFrameShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._startFrameShape.style.height=this._location.y+this._location.height-this._startFrameShape.style.y,this._endFrameShape.style.height=this._fillerShae.style.y-this._location.y),this.zr.modShape(this._startFrameShape.id),this.zr.modShape(this._endFrameShape.id)},_syncShape:function(){this.zoomOption.show&&("horizontal"==this.zoomOption.orient?(this._startShape.style.x=this._location.x+this._zoom.start/100*this._location.width,this._endShape.style.x=this._location.x+this._zoom.end/100*this._location.width-this._handleSize,this._fillerShae.style.x=this._startShape.style.x+this._handleSize,this._fillerShae.style.width=this._endShape.style.x-this._startShape.style.x-this._handleSize):(this._startShape.style.y=this._location.y+this._location.height-this._zoom.start/100*this._location.height,this._endShape.style.y=this._location.y+this._location.height-this._zoom.end/100*this._location.height-this._handleSize,this._fillerShae.style.y=this._endShape.style.y+this._handleSize,this._fillerShae.style.height=this._startShape.style.y-this._endShape.style.y-this._handleSize),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.modShape(this._fillerShae.id),this._syncFrameShape(),this.zr.refresh())},_syncData:function(a){var b,c,d,e,f;for(var h in this._originalData){b=this._originalData[h];for(var i in b)f=b[i],null!=f&&(e=f.length,c=Math.floor(this._zoom.start/100*e),d=Math.ceil(this._zoom.end/100*e),this.getDataFromOption(f[0])instanceof Array&&this.option[h][i].type!=g.CHART_TYPE_K?(this._setScale(),this.option[h][i].data=this._synScatterData(i,f)):this.option[h][i].data=f.slice(c,d))}this._isSilence||!this.zoomOption.realtime&&!a||this.messageCenter.dispatch(g.EVENT.DATA_ZOOM,null,{zoom:this._zoom},this.myChart)},_synScatterData:function(a,b){if(0===this._zoom.start&&100==this._zoom.end&&0===this._zoom.start2&&100==this._zoom.end2)return b;var c,d,e,f,g,h=[],i=this._zoom.scatterMap[a];"horizontal"==this.zoomOption.orient?(c=i.x.max-i.x.min,d=this._zoom.start/100*c+i.x.min,e=this._zoom.end/100*c+i.x.min,c=i.y.max-i.y.min,f=this._zoom.start2/100*c+i.y.min,g=this._zoom.end2/100*c+i.y.min):(c=i.x.max-i.x.min,d=this._zoom.start2/100*c+i.x.min,e=this._zoom.end2/100*c+i.x.min,c=i.y.max-i.y.min,f=this._zoom.start/100*c+i.y.min,g=this._zoom.end/100*c+i.y.min);var j;(j=i.x.dataMappingMethods)&&(d=j.coord2Value(d),e=j.coord2Value(e)),(j=i.y.dataMappingMethods)&&(f=j.coord2Value(f),g=j.coord2Value(g));for(var k,l=0,m=b.length;m>l;l++)k=b[l].value||b[l],k[0]>=d&&k[0]<=e&&k[1]>=f&&k[1]<=g&&h.push(b[l]);return h},_setScale:function(){var a=0!==this._zoom.start||100!==this._zoom.end||0!==this._zoom.start2||100!==this._zoom.end2,b={xAxis:this.option.xAxis,yAxis:this.option.yAxis};for(var c in b)for(var d=0,e=b[c].length;e>d;d++)b[c][d].scale=a||b[c][d]._scale},_backupScale:function(){var a={xAxis:this.option.xAxis,yAxis:this.option.yAxis};for(var b in a)for(var c=0,d=a[b].length;d>c;c++)a[b][c]._scale=a[b][c].scale},_getDetail:function(){for(var a=["xAxis","yAxis"],b=0,c=a.length;c>b;b++){var d=this._originalData[a[b]];for(var e in d){var f=d[e];if(null!=f){var g=f.length,i=Math.floor(this._zoom.start/100*g),j=Math.ceil(this._zoom.end/100*g);return j-=j>0?1:0,{start:this.getDataFromOption(f[i]),end:this.getDataFromOption(f[j])}}}}a="horizontal"==this.zoomOption.orient?"xAxis":"yAxis";var k=this._zoom.seriesIndex[0],l=this.option.series[k][a+"Index"]||0,m=this.option[a][l].type,n=this._zoom.scatterMap[k][a.charAt(0)].min,o=this._zoom.scatterMap[k][a.charAt(0)].max,p=o-n;if("value"==m)return{start:n+p*this._zoom.start/100,end:n+p*this._zoom.end/100};if("time"==m){o=n+p*this._zoom.end/100,n+=p*this._zoom.start/100;var q=h.getAutoFormatter(n,o).formatter;return{start:h.format(q,n),end:h.format(q,o)}}return{start:"",end:""}},__ondrift:function(a,b,c){this.zoomOption.zoomLock&&(a=this._fillerShae);var d="filler"==a._type?this._handleSize:0;if("horizontal"==this.zoomOption.orient?a.style.x+b-d<=this._location.x?a.style.x=this._location.x+d:a.style.x+b+a.style.width+d>=this._location.x+this._location.width?a.style.x=this._location.x+this._location.width-a.style.width-d:a.style.x+=b:a.style.y+c-d<=this._location.y?a.style.y=this._location.y+d:a.style.y+c+a.style.height+d>=this._location.y+this._location.height?a.style.y=this._location.y+this._location.height-a.style.height-d:a.style.y+=c,"filler"==a._type?this._syncHandleShape():this._syncFillerShape(),this.zoomOption.realtime&&this._syncData(),this.zoomOption.showDetail){var e=this._getDetail();this._startShape.style.text=this._startShape.highlightStyle.text=e.start,this._endShape.style.text=this._endShape.highlightStyle.text=e.end,this._startShape.style.textPosition=this._startShape.highlightStyle.textPosition,this._endShape.style.textPosition=this._endShape.highlightStyle.textPosition}return!0},__ondragend:function(){this.zoomOption.showDetail&&(this._startShape.style.text=this._endShape.style.text="=",this._startShape.style.textPosition=this._endShape.style.textPosition="inside",this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.refreshNextFrame()),this.isDragend=!0},ondragend:function(a,b){this.isDragend&&a.target&&(!this.zoomOption.realtime&&this._syncData(),b.dragOut=!0,b.dragIn=!0,this._isSilence||this.zoomOption.realtime||this.messageCenter.dispatch(g.EVENT.DATA_ZOOM,null,{zoom:this._zoom},this.myChart),b.needRefresh=!1,this.isDragend=!1)},ondataZoom:function(a,b){b.needRefresh=!0},absoluteZoom:function(a){this._zoom.start=a.start,this._zoom.end=a.end,this._zoom.start2=a.start2,this._zoom.end2=a.end2,this._syncShape(),this._syncData(!0)},rectZoom:function(a){if(!a)return this._zoom.start=this._zoom.start2=0,this._zoom.end=this._zoom.end2=100,this._syncShape(),this._syncData(!0),this._zoom;var b=this.component.grid.getArea(),c={x:a.x,y:a.y,width:a.width,height:a.height};if(c.width<0&&(c.x+=c.width,c.width=-c.width),c.height<0&&(c.y+=c.height,c.height=-c.height),c.x>b.x+b.width||c.y>b.y+b.height)return!1;c.x<b.x&&(c.x=b.x),c.x+c.width>b.x+b.width&&(c.width=b.x+b.width-c.x),c.y+c.height>b.y+b.height&&(c.height=b.y+b.height-c.y);var d,e=(c.x-b.x)/b.width,f=1-(c.x+c.width-b.x)/b.width,g=1-(c.y+c.height-b.y)/b.height,h=(c.y-b.y)/b.height;return"horizontal"==this.zoomOption.orient?(d=this._zoom.end-this._zoom.start,this._zoom.start+=d*e,this._zoom.end-=d*f,d=this._zoom.end2-this._zoom.start2,this._zoom.start2+=d*g,this._zoom.end2-=d*h):(d=this._zoom.end-this._zoom.start,this._zoom.start+=d*g,this._zoom.end-=d*h,d=this._zoom.end2-this._zoom.start2,this._zoom.start2+=d*e,this._zoom.end2-=d*f),this._syncShape(),this._syncData(!0),this._zoom},syncBackupData:function(a){for(var b,c,d=this._originalData.series,e=a.series,f=0,g=e.length;g>f;f++){c=e[f].data||e[f].eventList,b=d[f]?Math.floor(this._zoom.start/100*d[f].length):0;for(var h=0,i=c.length;i>h;h++)d[f]&&(d[f][h+b]=c[h])}},syncOption:function(a){this.silence(!0),this.option=a,this.option.dataZoom=this.reformOption(this.option.dataZoom),this.zoomOption=this.option.dataZoom,this.myChart.canvasSupported||(this.zoomOption.realtime=!1),this.clear(),this._location=this._getLocation(),this._zoom=this._getZoom(),this._backupData(),this.option.dataZoom&&this.option.dataZoom.show&&this._buildShape(),this._syncData(),this.silence(!1)},silence:function(a){this._isSilence=a},getRealDataIndex:function(a,b){if(!this._originalData||0===this._zoom.start&&100==this._zoom.end)return b;var c=this._originalData.series;return c[a]?Math.floor(this._zoom.start/100*c[a].length)+b:-1},resize:function(){this.clear(),this._location=this._getLocation(),this._zoom=this._getZoom(),this.option.dataZoom.show&&this._buildShape()}},i.inherits(b,c),a("../component").define("dataZoom",b),b}),c("zrender/shape/Text",["require","../tool/area","./Base","../tool/util"],function(a){var b=a("../tool/area"),c=a("./Base"),d=function(a){c.call(this,a)};return d.prototype={type:"text",brush:function(a,c){var d=this.style;if(c&&(d=this.getHighlightStyle(d,this.highlightStyle||{})),"undefined"!=typeof d.text&&d.text!==!1){a.save(),this.doClip(a),this.setContext(a,d),this.setTransform(a),d.textFont&&(a.font=d.textFont),a.textAlign=d.textAlign||"start",a.textBaseline=d.textBaseline||"middle";var e,f=(d.text+"").split("\n"),g=b.getTextHeight("国",d.textFont),h=this.getRect(d),i=d.x;e="top"==d.textBaseline?h.y:"bottom"==d.textBaseline?h.y+g:h.y+g/2;for(var j=0,k=f.length;k>j;j++){if(d.maxWidth)switch(d.brushType){case"fill":a.fillText(f[j],i,e,d.maxWidth);break;case"stroke":a.strokeText(f[j],i,e,d.maxWidth);break;case"both":a.fillText(f[j],i,e,d.maxWidth),a.strokeText(f[j],i,e,d.maxWidth);break;default:a.fillText(f[j],i,e,d.maxWidth)}else switch(d.brushType){case"fill":a.fillText(f[j],i,e);break;case"stroke":a.strokeText(f[j],i,e);break;case"both":a.fillText(f[j],i,e),a.strokeText(f[j],i,e);break;default:a.fillText(f[j],i,e)}e+=g}a.restore()}},getRect:function(a){if(a.__rect)return a.__rect;var c=b.getTextWidth(a.text,a.textFont),d=b.getTextHeight(a.text,a.textFont),e=a.x;"end"==a.textAlign||"right"==a.textAlign?e-=c:"center"==a.textAlign&&(e-=c/2);var f;return f="top"==a.textBaseline?a.y:"bottom"==a.textBaseline?a.y-d:a.y-d/2,a.__rect={x:e,y:f,width:c,height:d},a.__rect}},a("../tool/util").inherits(d,c),d}),c("zrender/shape/Ring",["require","./Base","../tool/util"],function(a){var b=a("./Base"),c=function(a){b.call(this,a)};return c.prototype={type:"ring",buildPath:function(a,b){a.arc(b.x,b.y,b.r,0,2*Math.PI,!1),a.moveTo(b.x+b.r0,b.y),a.arc(b.x,b.y,b.r0,0,2*Math.PI,!0)},getRect:function(a){if(a.__rect)return a.__rect;var b;return b="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0,a.__rect={x:Math.round(a.x-a.r-b/2),y:Math.round(a.y-a.r-b/2),width:2*a.r+b,height:2*a.r+b},a.__rect}},a("../tool/util").inherits(c,b),c}),c("zrender/shape/Circle",["require","./Base","../tool/util"],function(a){"use strict";var b=a("./Base"),c=function(a){b.call(this,a)};return c.prototype={type:"circle",buildPath:function(a,b){a.moveTo(b.x+b.r,b.y),a.arc(b.x,b.y,b.r,0,2*Math.PI,!0)},getRect:function(a){if(a.__rect)return a.__rect;var b;return b="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0,a.__rect={x:Math.round(a.x-a.r-b/2),y:Math.round(a.y-a.r-b/2),width:2*a.r+b,height:2*a.r+b},a.__rect}},a("../tool/util").inherits(c,b),c}),c("zrender/tool/math",[],function(){function a(a,b){return Math.sin(b?a*e:a)}function b(a,b){return Math.cos(b?a*e:a)}function c(a){return a*e}function d(a){return a/e}var e=Math.PI/180;return{sin:a,cos:b,degreeToRadian:c,radianToDegree:d}}),c("zrender/shape/Sector",["require","../tool/math","../tool/computeBoundingBox","../tool/vector","./Base","../tool/util"],function(a){var b=a("../tool/math"),c=a("../tool/computeBoundingBox"),d=a("../tool/vector"),e=a("./Base"),f=d.create(),g=d.create(),h=d.create(),i=d.create(),j=function(a){e.call(this,a)};return j.prototype={type:"sector",buildPath:function(a,c){var d=c.x,e=c.y,f=c.r0||0,g=c.r,h=c.startAngle,i=c.endAngle,j=c.clockWise||!1;h=b.degreeToRadian(h),i=b.degreeToRadian(i),j||(h=-h,i=-i);var k=b.cos(h),l=b.sin(h);a.moveTo(k*f+d,l*f+e),a.lineTo(k*g+d,l*g+e),a.arc(d,e,g,h,i,!j),a.lineTo(b.cos(i)*f+d,b.sin(i)*f+e),0!==f&&a.arc(d,e,f,i,h,j),a.closePath()},getRect:function(a){if(a.__rect)return a.__rect;var e=a.x,j=a.y,k=a.r0||0,l=a.r,m=b.degreeToRadian(a.startAngle),n=b.degreeToRadian(a.endAngle),o=a.clockWise;return o||(m=-m,n=-n),k>1?c.arc(e,j,k,m,n,!o,f,h):(f[0]=h[0]=e,f[1]=h[1]=j),c.arc(e,j,l,m,n,!o,g,i),d.min(f,f,g),d.max(h,h,i),a.__rect={x:f[0],y:f[1],width:h[0]-f[0],height:h[1]-f[1]},a.__rect}},a("../tool/util").inherits(j,e),j}),c("zrender/tool/event",["require","../mixin/Eventful"],function(a){"use strict";function b(a){return"undefined"!=typeof a.zrenderX&&a.zrenderX||"undefined"!=typeof a.offsetX&&a.offsetX||"undefined"!=typeof a.layerX&&a.layerX||"undefined"!=typeof a.clientX&&a.clientX}function c(a){return"undefined"!=typeof a.zrenderY&&a.zrenderY||"undefined"!=typeof a.offsetY&&a.offsetY||"undefined"!=typeof a.layerY&&a.layerY||"undefined"!=typeof a.clientY&&a.clientY}function d(a){return"undefined"!=typeof a.zrenderDelta&&a.zrenderDelta||"undefined"!=typeof a.wheelDelta&&a.wheelDelta||"undefined"!=typeof a.detail&&-a.detail}var e=a("../mixin/Eventful"),f="function"==typeof window.addEventListener?function(a){a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0}:function(a){a.returnValue=!1,a.cancelBubble=!0};return{getX:b,getY:c,getDelta:d,stop:f,Dispatcher:e}}),c("zrender/tool/env",[],function(){function a(a){var b=this.os={},c=this.browser={},d=a.match(/Web[kK]it[\/]{0,1}([\d.]+)/),e=a.match(/(Android);?[\s\/]+([\d.]+)?/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=a.match(/(iPod)(.*OS\s([\d_]+))?/),h=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),i=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),j=i&&a.match(/TouchPad/),k=a.match(/Kindle\/([\d.]+)/),l=a.match(/Silk\/([\d._]+)/),m=a.match(/(BlackBerry).*Version\/([\d.]+)/),n=a.match(/(BB10).*Version\/([\d.]+)/),o=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),p=a.match(/PlayBook/),q=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),r=a.match(/Firefox\/([\d.]+)/),s=a.match(/MSIE ([\d.]+)/),t=d&&a.match(/Mobile\//)&&!q,u=a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!q,s=a.match(/MSIE\s([\d.]+)/);return(c.webkit=!!d)&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),h&&!g&&(b.ios=b.iphone=!0,b.version=h[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),g&&(b.ios=b.ipod=!0,b.version=g[3]?g[3].replace(/_/g,"."):null),i&&(b.webos=!0,b.version=i[2]),j&&(b.touchpad=!0),m&&(b.blackberry=!0,b.version=m[2]),n&&(b.bb10=!0,b.version=n[2]),o&&(b.rimtabletos=!0,b.version=o[2]),p&&(c.playbook=!0),k&&(b.kindle=!0,b.version=k[1]),l&&(c.silk=!0,c.version=l[1]),!l&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0),q&&(c.chrome=!0,c.version=q[1]),r&&(c.firefox=!0,c.version=r[1]),s&&(c.ie=!0,c.version=s[1]),t&&(a.match(/Safari/)||b.ios)&&(c.safari=!0),u&&(c.webview=!0),s&&(c.ie=!0,c.version=s[1]),b.tablet=!!(f||p||e&&!a.match(/Mobile/)||r&&a.match(/Tablet/)||s&&!a.match(/Phone/)&&a.match(/Touch/)),b.phone=!(b.tablet||b.ipod||!(e||h||i||m||n||q&&a.match(/Android/)||q&&a.match(/CriOS\/([\d.]+)/)||r&&a.match(/Mobile/)||s&&a.match(/Touch/))),{browser:c,os:b,canvasSupported:document.createElement("canvas").getContext?!0:!1}}return a(navigator.userAgent)}),c("zrender/zrender",["require","./dep/excanvas","./tool/util","./tool/log","./tool/guid","./Handler","./Painter","./Storage","./animation/Animation","./tool/env"],function(a){function b(a){return function(){a._needsRefreshNextFrame&&a.refresh()}}a("./dep/excanvas");var c=a("./tool/util"),d=a("./tool/log"),e=a("./tool/guid"),f=a("./Handler"),g=a("./Painter"),h=a("./Storage"),i=a("./animation/Animation"),j={},k={};k.version="2.1.1",k.init=function(a){var b=new l(e(),a);return j[b.id]=b,b},k.dispose=function(a){if(a)a.dispose();else{for(var b in j)j[b].dispose();j={}}return k},k.getInstance=function(a){return j[a]},k.delInstance=function(a){return delete j[a],k};var l=function(c,d){this.id=c,this.env=a("./tool/env"),this.storage=new h,this.painter=new g(d,this.storage),this.handler=new f(d,this.storage,this.painter),this.animation=new i({stage:{update:b(this)}}),this.animation.start();var e=this;this.painter.refreshNextFrame=function(){e.refreshNextFrame()},this._needsRefreshNextFrame=!1;var e=this,j=this.storage,k=j.delFromMap;
j.delFromMap=function(a){var b=j.get(a);e.stopAnimation(b),k.call(j,a)}};return l.prototype.getId=function(){return this.id},l.prototype.addShape=function(a){return this.addElement(a),this},l.prototype.addGroup=function(a){return this.addElement(a),this},l.prototype.delShape=function(a){return this.delElement(a),this},l.prototype.delGroup=function(a){return this.delElement(a),this},l.prototype.modShape=function(a,b){return this.modElement(a,b),this},l.prototype.modGroup=function(a,b){return this.modElement(a,b),this},l.prototype.addElement=function(a){return this.storage.addRoot(a),this._needsRefreshNextFrame=!0,this},l.prototype.delElement=function(a){return this.storage.delRoot(a),this._needsRefreshNextFrame=!0,this},l.prototype.modElement=function(a,b){return this.storage.mod(a,b),this._needsRefreshNextFrame=!0,this},l.prototype.modLayer=function(a,b){return this.painter.modLayer(a,b),this._needsRefreshNextFrame=!0,this},l.prototype.addHoverShape=function(a){return this.storage.addHover(a),this},l.prototype.render=function(a){return this.painter.render(a),this._needsRefreshNextFrame=!1,this},l.prototype.refresh=function(a){return this.painter.refresh(a),this._needsRefreshNextFrame=!1,this},l.prototype.refreshNextFrame=function(){return this._needsRefreshNextFrame=!0,this},l.prototype.refreshHover=function(a){return this.painter.refreshHover(a),this},l.prototype.refreshShapes=function(a,b){return this.painter.refreshShapes(a,b),this},l.prototype.resize=function(){return this.painter.resize(),this},l.prototype.animate=function(a,b,e){var f=this;if("string"==typeof a&&(a=this.storage.get(a)),a){var g;if(b){for(var h=b.split("."),i=a,j=0,k=h.length;k>j;j++)i&&(i=i[h[j]]);i&&(g=i)}else g=a;if(!g)return void d('Property "'+b+'" is not existed in element '+a.id);null==a.__animators&&(a.__animators=[]);var l=a.__animators,m=this.animation.animate(g,{loop:e}).during(function(){f.modShape(a)}).done(function(){var b=c.indexOf(a.__animators,m);b>=0&&l.splice(b,1)});return l.push(m),m}d("Element not existed")},l.prototype.stopAnimation=function(a){if(a.__animators){for(var b=a.__animators,c=b.length,d=0;c>d;d++)b[d].stop();b.length=0}return this},l.prototype.clearAnimation=function(){return this.animation.clear(),this},l.prototype.showLoading=function(a){return this.painter.showLoading(a),this},l.prototype.hideLoading=function(){return this.painter.hideLoading(),this},l.prototype.getWidth=function(){return this.painter.getWidth()},l.prototype.getHeight=function(){return this.painter.getHeight()},l.prototype.toDataURL=function(a,b,c){return this.painter.toDataURL(a,b,c)},l.prototype.shapeToImage=function(a,b,c){var d=e();return this.painter.shapeToImage(d,a,b,c)},l.prototype.on=function(a,b,c){return this.handler.on(a,b,c),this},l.prototype.un=function(a,b){return this.handler.un(a,b),this},l.prototype.trigger=function(a,b){return this.handler.trigger(a,b),this},l.prototype.clear=function(){return this.storage.delRoot(),this.painter.clear(),this},l.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,k.delInstance(this.id)},k}),c("echarts/chart/island",["require","./base","zrender/shape/Circle","../config","../util/ecData","zrender/tool/util","zrender/tool/event","zrender/tool/color","../util/accMath","../chart"],function(a){function b(a,b,d,e,g){c.call(this,a,b,d,e,g),this._nameConnector,this._valueConnector,this._zrHeight=this.zr.getHeight(),this._zrWidth=this.zr.getWidth();var i=this;i.shapeHandler.onmousewheel=function(a){var b=a.target,c=a.event,d=h.getDelta(c);d=d>0?-1:1,b.style.r-=d,b.style.r=b.style.r<5?5:b.style.r;var e=f.get(b,"value"),g=e*i.option.island.calculateStep;e=g>1?Math.round(e-g*d):+(e-g*d).toFixed(2);var j=f.get(b,"name");b.style.text=j+":"+e,f.set(b,"value",e),f.set(b,"name",j),i.zr.modShape(b.id),i.zr.refreshNextFrame(),h.stop(c)}}var c=a("./base"),d=a("zrender/shape/Circle"),e=a("../config");e.island={zlevel:0,z:5,r:15,calculateStep:.1};var f=a("../util/ecData"),g=a("zrender/tool/util"),h=a("zrender/tool/event");return b.prototype={type:e.CHART_TYPE_ISLAND,_combine:function(b,c){var d=a("zrender/tool/color"),e=a("../util/accMath"),g=e.accAdd(f.get(b,"value"),f.get(c,"value")),h=f.get(b,"name")+this._nameConnector+f.get(c,"name");b.style.text=h+this._valueConnector+g,f.set(b,"value",g),f.set(b,"name",h),b.style.r=this.option.island.r,b.style.color=d.mix(b.style.color,c.style.color)},refresh:function(a){a&&(a.island=this.reformOption(a.island),this.option=a,this._nameConnector=this.option.nameConnector,this._valueConnector=this.option.valueConnector)},getOption:function(){return this.option},resize:function(){var a=this.zr.getWidth(),b=this.zr.getHeight(),c=a/(this._zrWidth||a),d=b/(this._zrHeight||b);if(1!==c||1!==d){this._zrWidth=a,this._zrHeight=b;for(var e=0,f=this.shapeList.length;f>e;e++)this.zr.modShape(this.shapeList[e].id,{style:{x:Math.round(this.shapeList[e].style.x*c),y:Math.round(this.shapeList[e].style.y*d)}})}},add:function(a){var b=f.get(a,"name"),c=f.get(a,"value"),e=null!=f.get(a,"series")?f.get(a,"series").name:"",g=this.getFont(this.option.island.textStyle),h=this.option.island,i={zlevel:h.zlevel,z:h.z,style:{x:a.style.x,y:a.style.y,r:this.option.island.r,color:a.style.color||a.style.strokeColor,text:b+this._valueConnector+c,textFont:g},draggable:!0,hoverable:!0,onmousewheel:this.shapeHandler.onmousewheel,_type:"island"};"#fff"===i.style.color&&(i.style.color=a.style.strokeColor),this.setCalculable(i),i.dragEnableTime=0,f.pack(i,{name:e},-1,c,-1,b),i=new d(i),this.shapeList.push(i),this.zr.addShape(i)},del:function(a){this.zr.delShape(a.id);for(var b=[],c=0,d=this.shapeList.length;d>c;c++)this.shapeList[c].id!=a.id&&b.push(this.shapeList[c]);this.shapeList=b},ondrop:function(a,b){if(this.isDrop&&a.target){var c=a.target,d=a.dragged;this._combine(c,d),this.zr.modShape(c.id),b.dragIn=!0,this.isDrop=!1}},ondragend:function(a,b){var c=a.target;this.isDragend?b.dragIn&&(this.del(c),b.needRefresh=!0):b.dragIn||(c.style.x=h.getX(a.event),c.style.y=h.getY(a.event),this.add(c),b.needRefresh=!0),this.isDragend=!1}},g.inherits(b,c),a("../chart").define("island",b),b}),c("zrender/config",[],function(){var a={EVENT:{RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},elementClassName:"zr-element",catchBrushException:!1,debugMode:0,devicePixelRatio:Math.max(window.devicePixelRatio||1,1)};return a}),c("echarts/component/toolbox",["require","./base","zrender/shape/Line","zrender/shape/Image","zrender/shape/Rectangle","../util/shape/Icon","../config","zrender/tool/util","zrender/config","zrender/tool/event","./dataView","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.dom=f.dom,this._magicType={},this._magicMap={},this._isSilence=!1,this._iconList,this._iconShapeMap={},this._featureTitle={},this._featureIcon={},this._featureColor={},this._featureOption={},this._enableColor="red",this._disableColor="#ccc",this._markShapeList=[];var g=this;g._onMark=function(a){g.__onMark(a)},g._onMarkUndo=function(a){g.__onMarkUndo(a)},g._onMarkClear=function(a){g.__onMarkClear(a)},g._onDataZoom=function(a){g.__onDataZoom(a)},g._onDataZoomReset=function(a){g.__onDataZoomReset(a)},g._onDataView=function(a){g.__onDataView(a)},g._onRestore=function(a){g.__onRestore(a)},g._onSaveAsImage=function(a){g.__onSaveAsImage(a)},g._onMagicType=function(a){g.__onMagicType(a)},g._onCustomHandler=function(a){g.__onCustomHandler(a)},g._onmousemove=function(a){return g.__onmousemove(a)},g._onmousedown=function(a){return g.__onmousedown(a)},g._onmouseup=function(a){return g.__onmouseup(a)},g._onclick=function(a){return g.__onclick(a)}}var c=a("./base"),d=a("zrender/shape/Line"),e=a("zrender/shape/Image"),f=a("zrender/shape/Rectangle"),g=a("../util/shape/Icon"),h=a("../config");h.toolbox={zlevel:0,z:6,show:!1,orient:"horizontal",x:"right",y:"top",color:["#1e90ff","#22bb22","#4b0082","#d2691e"],disableColor:"#ddd",effectiveColor:"red",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemSize:16,showTitle:!0,feature:{mark:{show:!1,title:{mark:"辅助线开关",markUndo:"删除辅助线",markClear:"清空辅助线"},lineStyle:{width:1,color:"#1e90ff",type:"dashed"}},dataZoom:{show:!1,title:{dataZoom:"区域缩放",dataZoomReset:"区域缩放后退"}},dataView:{show:!1,title:"数据视图",readOnly:!1,lang:["数据视图","关闭","刷新"]},magicType:{show:!1,title:{line:"折线图切换",bar:"柱形图切换",stack:"堆积",tiled:"平铺",force:"力导向布局图切换",chord:"和弦图切换",pie:"饼图切换",funnel:"漏斗图切换"},type:[]},restore:{show:!1,title:"还原"},saveAsImage:{show:!1,title:"保存为图片",type:"png",lang:["点击保存"]}}};var i=a("zrender/tool/util"),j=a("zrender/config"),k=a("zrender/tool/event"),l="stack",m="tiled";return b.prototype={type:h.COMPONENT_TYPE_TOOLBOX,_buildShape:function(){this._iconList=[];var a=this.option.toolbox;this._enableColor=a.effectiveColor,this._disableColor=a.disableColor;var b=a.feature,c=[];for(var d in b)if(b[d].show)switch(d){case"mark":c.push({key:d,name:"mark"}),c.push({key:d,name:"markUndo"}),c.push({key:d,name:"markClear"});break;case"magicType":for(var e=0,f=b[d].type.length;f>e;e++)b[d].title[b[d].type[e]+"Chart"]=b[d].title[b[d].type[e]],b[d].option&&(b[d].option[b[d].type[e]+"Chart"]=b[d].option[b[d].type[e]]),c.push({key:d,name:b[d].type[e]+"Chart"});break;case"dataZoom":c.push({key:d,name:"dataZoom"}),c.push({key:d,name:"dataZoomReset"});break;case"saveAsImage":this.canvasSupported&&c.push({key:d,name:"saveAsImage"});break;default:c.push({key:d,name:d})}if(c.length>0){for(var g,d,e=0,f=c.length;f>e;e++)g=c[e].name,d=c[e].key,this._iconList.push(g),this._featureTitle[g]=b[d].title[g]||b[d].title,b[d].icon&&(this._featureIcon[g]=b[d].icon[g]||b[d].icon),b[d].color&&(this._featureColor[g]=b[d].color[g]||b[d].color),b[d].option&&(this._featureOption[g]=b[d].option[g]||b[d].option);this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._buildItem();for(var e=0,f=this.shapeList.length;f>e;e++)this.zr.addShape(this.shapeList[e]);this._iconShapeMap.mark&&(this._iconDisable(this._iconShapeMap.markUndo),this._iconDisable(this._iconShapeMap.markClear)),this._iconShapeMap.dataZoomReset&&0===this._zoomQueue.length&&this._iconDisable(this._iconShapeMap.dataZoomReset)}},_buildItem:function(){var b,c,d,f,h=this.option.toolbox,i=this._iconList.length,j=this._itemGroupLocation.x,k=this._itemGroupLocation.y,l=h.itemSize,m=h.itemGap,n=h.color instanceof Array?h.color:[h.color],o=this.getFont(h.textStyle);"horizontal"===h.orient?(c=this._itemGroupLocation.y/this.zr.getHeight()<.5?"bottom":"top",d=this._itemGroupLocation.x/this.zr.getWidth()<.5?"left":"right",f=this._itemGroupLocation.y/this.zr.getHeight()<.5?"top":"bottom"):c=this._itemGroupLocation.x/this.zr.getWidth()<.5?"right":"left",this._iconShapeMap={};for(var p=this,q=0;i>q;q++){switch(b={type:"icon",zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:j,y:k,width:l,height:l,iconType:this._iconList[q],lineWidth:1,strokeColor:this._featureColor[this._iconList[q]]||n[q%n.length],brushType:"stroke"},highlightStyle:{lineWidth:1,text:h.showTitle?this._featureTitle[this._iconList[q]]:void 0,textFont:o,textPosition:c,strokeColor:this._featureColor[this._iconList[q]]||n[q%n.length]},hoverable:!0,clickable:!0},this._featureIcon[this._iconList[q]]&&(b.style.image=this._featureIcon[this._iconList[q]].replace(new RegExp("^image:\\/\\/"),""),b.style.opacity=.8,b.highlightStyle.opacity=1,b.type="image"),"horizontal"===h.orient&&(0===q&&"left"===d&&(b.highlightStyle.textPosition="specific",b.highlightStyle.textAlign=d,b.highlightStyle.textBaseline=f,b.highlightStyle.textX=j,b.highlightStyle.textY="top"===f?k+l+10:k-10),q===i-1&&"right"===d&&(b.highlightStyle.textPosition="specific",b.highlightStyle.textAlign=d,b.highlightStyle.textBaseline=f,b.highlightStyle.textX=j+l,b.highlightStyle.textY="top"===f?k+l+10:k-10)),this._iconList[q]){case"mark":b.onclick=p._onMark;break;case"markUndo":b.onclick=p._onMarkUndo;break;case"markClear":b.onclick=p._onMarkClear;break;case"dataZoom":b.onclick=p._onDataZoom;break;case"dataZoomReset":b.onclick=p._onDataZoomReset;break;case"dataView":if(!this._dataView){var r=a("./dataView");this._dataView=new r(this.ecTheme,this.messageCenter,this.zr,this.option,this.myChart)}b.onclick=p._onDataView;break;case"restore":b.onclick=p._onRestore;break;case"saveAsImage":b.onclick=p._onSaveAsImage;break;default:this._iconList[q].match("Chart")?(b._name=this._iconList[q].replace("Chart",""),b.onclick=p._onMagicType):b.onclick=p._onCustomHandler}"icon"===b.type?b=new g(b):"image"===b.type&&(b=new e(b)),this.shapeList.push(b),this._iconShapeMap[this._iconList[q]]=b,"horizontal"===h.orient?j+=l+m:k+=l+m}},_buildBackground:function(){var a=this.option.toolbox,b=this.reformCssArray(this.option.toolbox.padding);this.shapeList.push(new f({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-b[3],y:this._itemGroupLocation.y-b[0],width:this._itemGroupLocation.width+b[3]+b[1],height:this._itemGroupLocation.height+b[0]+b[2],brushType:0===a.borderWidth?"fill":"both",color:a.backgroundColor,strokeColor:a.borderColor,lineWidth:a.borderWidth}}))},_getItemGroupLocation:function(){var a=this.option.toolbox,b=this.reformCssArray(this.option.toolbox.padding),c=this._iconList.length,d=a.itemGap,e=a.itemSize,f=0,g=0;"horizontal"===a.orient?(f=(e+d)*c-d,g=e):(g=(e+d)*c-d,f=e);var h,i=this.zr.getWidth();switch(a.x){case"center":h=Math.floor((i-f)/2);break;case"left":h=b[3]+a.borderWidth;break;case"right":h=i-f-b[1]-a.borderWidth;break;default:h=a.x-0,h=isNaN(h)?0:h}var j,k=this.zr.getHeight();switch(a.y){case"top":j=b[0]+a.borderWidth;break;case"bottom":j=k-g-b[2]-a.borderWidth;break;case"center":j=Math.floor((k-g)/2);break;default:j=a.y-0,j=isNaN(j)?0:j}return{x:h,y:j,width:f,height:g}},__onmousemove:function(a){this._marking&&(this._markShape.style.xEnd=k.getX(a.event),this._markShape.style.yEnd=k.getY(a.event),this.zr.addHoverShape(this._markShape)),this._zooming&&(this._zoomShape.style.width=k.getX(a.event)-this._zoomShape.style.x,this._zoomShape.style.height=k.getY(a.event)-this._zoomShape.style.y,this.zr.addHoverShape(this._zoomShape),this.dom.style.cursor="crosshair",k.stop(a.event)),this._zoomStart&&"pointer"!=this.dom.style.cursor&&"move"!=this.dom.style.cursor&&(this.dom.style.cursor="crosshair")},__onmousedown:function(a){if(!a.target){this._zooming=!0;var b=k.getX(a.event),c=k.getY(a.event),d=this.option.dataZoom||{};return this._zoomShape=new f({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:b,y:c,width:1,height:1,brushType:"both"},highlightStyle:{lineWidth:2,color:d.fillerColor||h.dataZoom.fillerColor,strokeColor:d.handleColor||h.dataZoom.handleColor,brushType:"both"}}),this.zr.addHoverShape(this._zoomShape),!0}},__onmouseup:function(){if(!this._zoomShape||Math.abs(this._zoomShape.style.width)<10||Math.abs(this._zoomShape.style.height)<10)return this._zooming=!1,!0;if(this._zooming&&this.component.dataZoom){this._zooming=!1;var a=this.component.dataZoom.rectZoom(this._zoomShape.style);a&&(this._zoomQueue.push({start:a.start,end:a.end,start2:a.start2,end2:a.end2}),this._iconEnable(this._iconShapeMap.dataZoomReset),this.zr.refreshNextFrame())}return!0},__onclick:function(a){if(!a.target)if(this._marking)this._marking=!1,this._markShapeList.push(this._markShape),this._iconEnable(this._iconShapeMap.markUndo),this._iconEnable(this._iconShapeMap.markClear),this.zr.addShape(this._markShape),this.zr.refreshNextFrame();else if(this._markStart){this._marking=!0;var b=k.getX(a.event),c=k.getY(a.event);this._markShape=new d({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{xStart:b,yStart:c,xEnd:b,yEnd:c,lineWidth:this.query(this.option,"toolbox.feature.mark.lineStyle.width"),strokeColor:this.query(this.option,"toolbox.feature.mark.lineStyle.color"),lineType:this.query(this.option,"toolbox.feature.mark.lineStyle.type")}}),this.zr.addHoverShape(this._markShape)}},__onMark:function(a){var b=a.target;if(this._marking||this._markStart)this._resetMark(),this.zr.refreshNextFrame();else{this._resetZoom(),this.zr.modShape(b.id,{style:{strokeColor:this._enableColor}}),this.zr.refreshNextFrame(),this._markStart=!0;var c=this;setTimeout(function(){c.zr&&c.zr.on(j.EVENT.CLICK,c._onclick)&&c.zr.on(j.EVENT.MOUSEMOVE,c._onmousemove)},10)}return!0},__onMarkUndo:function(){if(this._marking)this._marking=!1;else{var a=this._markShapeList.length;if(a>=1){var b=this._markShapeList[a-1];this.zr.delShape(b.id),this.zr.refreshNextFrame(),this._markShapeList.pop(),1===a&&(this._iconDisable(this._iconShapeMap.markUndo),this._iconDisable(this._iconShapeMap.markClear))}}return!0},__onMarkClear:function(){this._marking&&(this._marking=!1);var a=this._markShapeList.length;if(a>0){for(;a--;)this.zr.delShape(this._markShapeList.pop().id);this._iconDisable(this._iconShapeMap.markUndo),this._iconDisable(this._iconShapeMap.markClear),this.zr.refreshNextFrame()}return!0},__onDataZoom:function(a){var b=a.target;if(this._zooming||this._zoomStart)this._resetZoom(),this.zr.refreshNextFrame(),this.dom.style.cursor="default";else{this._resetMark(),this.zr.modShape(b.id,{style:{strokeColor:this._enableColor}}),this.zr.refreshNextFrame(),this._zoomStart=!0;var c=this;setTimeout(function(){c.zr&&c.zr.on(j.EVENT.MOUSEDOWN,c._onmousedown)&&c.zr.on(j.EVENT.MOUSEUP,c._onmouseup)&&c.zr.on(j.EVENT.MOUSEMOVE,c._onmousemove)},10),this.dom.style.cursor="crosshair"}return!0},__onDataZoomReset:function(){return this._zooming&&(this._zooming=!1),this._zoomQueue.pop(),this._zoomQueue.length>0?this.component.dataZoom.absoluteZoom(this._zoomQueue[this._zoomQueue.length-1]):(this.component.dataZoom.rectZoom(),this._iconDisable(this._iconShapeMap.dataZoomReset),this.zr.refreshNextFrame()),!0},_resetMark:function(){this._marking=!1,this._markStart&&(this._markStart=!1,this._iconShapeMap.mark&&this.zr.modShape(this._iconShapeMap.mark.id,{style:{strokeColor:this._iconShapeMap.mark.highlightStyle.strokeColor}}),this.zr.un(j.EVENT.CLICK,this._onclick),this.zr.un(j.EVENT.MOUSEMOVE,this._onmousemove))},_resetZoom:function(){this._zooming=!1,this._zoomStart&&(this._zoomStart=!1,this._iconShapeMap.dataZoom&&this.zr.modShape(this._iconShapeMap.dataZoom.id,{style:{strokeColor:this._iconShapeMap.dataZoom.highlightStyle.strokeColor}}),this.zr.un(j.EVENT.MOUSEDOWN,this._onmousedown),this.zr.un(j.EVENT.MOUSEUP,this._onmouseup),this.zr.un(j.EVENT.MOUSEMOVE,this._onmousemove))},_iconDisable:function(a){"image"!=a.type?this.zr.modShape(a.id,{hoverable:!1,clickable:!1,style:{strokeColor:this._disableColor}}):this.zr.modShape(a.id,{hoverable:!1,clickable:!1,style:{opacity:.3}})},_iconEnable:function(a){"image"!=a.type?this.zr.modShape(a.id,{hoverable:!0,clickable:!0,style:{strokeColor:a.highlightStyle.strokeColor}}):this.zr.modShape(a.id,{hoverable:!0,clickable:!0,style:{opacity:.8}})},__onDataView:function(){return this._dataView.show(this.option),!0},__onRestore:function(){return this._resetMark(),this._resetZoom(),this.messageCenter.dispatch(h.EVENT.RESTORE,null,null,this.myChart),!0},__onSaveAsImage:function(){var a=this.option.toolbox.feature.saveAsImage,b=a.type||"png";"png"!=b&&"jpeg"!=b&&(b="png");var c;c=this.myChart.isConnected()?this.myChart.getConnectedDataURL(b):this.zr.toDataURL("image/"+b,this.option.backgroundColor&&"rgba(0,0,0,0)"===this.option.backgroundColor.replace(" ","")?"#fff":this.option.backgroundColor);var d=document.createElement("div");d.id="__echarts_download_wrap__",d.style.cssText="position:fixed;z-index:99999;display:block;top:0;left:0;background-color:rgba(33,33,33,0.5);text-align:center;width:100%;height:100%;line-height:"+document.documentElement.clientHeight+"px;";var e=document.createElement("a");e.href=c,e.setAttribute("download",(a.name?a.name:this.option.title&&(this.option.title.text||this.option.title.subtext)?this.option.title.text||this.option.title.subtext:"ECharts")+"."+b),e.innerHTML='<img style="vertical-align:middle" src="'+c+'" title="'+(window.ActiveXObject||"ActiveXObject"in window?"右键->图片另存为":a.lang?a.lang[0]:"点击保存")+'"/>',d.appendChild(e),document.body.appendChild(d),e=null,d=null,setTimeout(function(){var a=document.getElementById("__echarts_download_wrap__");a&&(a.onclick=function(){var a=document.getElementById("__echarts_download_wrap__");a.onclick=null,a.innerHTML="",document.body.removeChild(a),a=null},a=null)},500)},__onMagicType:function(a){this._resetMark();var b=a.target._name;return this._magicType[b]||(this._magicType[b]=!0,b===h.CHART_TYPE_LINE?this._magicType[h.CHART_TYPE_BAR]=!1:b===h.CHART_TYPE_BAR&&(this._magicType[h.CHART_TYPE_LINE]=!1),b===h.CHART_TYPE_PIE?this._magicType[h.CHART_TYPE_FUNNEL]=!1:b===h.CHART_TYPE_FUNNEL&&(this._magicType[h.CHART_TYPE_PIE]=!1),b===h.CHART_TYPE_FORCE?this._magicType[h.CHART_TYPE_CHORD]=!1:b===h.CHART_TYPE_CHORD&&(this._magicType[h.CHART_TYPE_FORCE]=!1),b===l?this._magicType[m]=!1:b===m&&(this._magicType[l]=!1),this.messageCenter.dispatch(h.EVENT.MAGIC_TYPE_CHANGED,a.event,{magicType:this._magicType},this.myChart)),!0},setMagicType:function(a){this._resetMark(),this._magicType=a,!this._isSilence&&this.messageCenter.dispatch(h.EVENT.MAGIC_TYPE_CHANGED,null,{magicType:this._magicType},this.myChart)},__onCustomHandler:function(a){var b=a.target.style.iconType,c=this.option.toolbox.feature[b].onclick;"function"==typeof c&&c.call(this,this.option)},reset:function(a,b){if(b&&this.clear(),this.query(a,"toolbox.show")&&this.query(a,"toolbox.feature.magicType.show")){var c=a.toolbox.feature.magicType.type,d=c.length;for(this._magicMap={};d--;)this._magicMap[c[d]]=!0;d=a.series.length;for(var e,f;d--;)e=a.series[d].type,this._magicMap[e]&&(f=a.xAxis instanceof Array?a.xAxis[a.series[d].xAxisIndex||0]:a.xAxis,f&&"category"===(f.type||"category")&&(f.__boundaryGap=null!=f.boundaryGap?f.boundaryGap:!0),f=a.yAxis instanceof Array?a.yAxis[a.series[d].yAxisIndex||0]:a.yAxis,f&&"category"===f.type&&(f.__boundaryGap=null!=f.boundaryGap?f.boundaryGap:!0),a.series[d].__type=e,a.series[d].__itemStyle=i.clone(a.series[d].itemStyle||{})),(this._magicMap[l]||this._magicMap[m])&&(a.series[d].__stack=a.series[d].stack)}this._magicType=b?{}:this._magicType||{};for(var g in this._magicType)if(this._magicType[g]){this.option=a,this.getMagicOption();break}var h=a.dataZoom;if(h&&h.show){var j=null!=h.start&&h.start>=0&&h.start<=100?h.start:0,k=null!=h.end&&h.end>=0&&h.end<=100?h.end:100;j>k&&(j+=k,k=j-k,j-=k),this._zoomQueue=[{start:j,end:k,start2:0,end2:100}]}else this._zoomQueue=[]},getMagicOption:function(){var a,b;if(this._magicType[h.CHART_TYPE_LINE]||this._magicType[h.CHART_TYPE_BAR]){for(var c=this._magicType[h.CHART_TYPE_LINE]?!1:!0,d=0,e=this.option.series.length;e>d;d++)b=this.option.series[d].type,(b==h.CHART_TYPE_LINE||b==h.CHART_TYPE_BAR)&&(a=this.option.xAxis instanceof Array?this.option.xAxis[this.option.series[d].xAxisIndex||0]:this.option.xAxis,a&&"category"===(a.type||"category")&&(a.boundaryGap=c?!0:a.__boundaryGap),a=this.option.yAxis instanceof Array?this.option.yAxis[this.option.series[d].yAxisIndex||0]:this.option.yAxis,a&&"category"===a.type&&(a.boundaryGap=c?!0:a.__boundaryGap));this._defaultMagic(h.CHART_TYPE_LINE,h.CHART_TYPE_BAR)}if(this._defaultMagic(h.CHART_TYPE_CHORD,h.CHART_TYPE_FORCE),this._defaultMagic(h.CHART_TYPE_PIE,h.CHART_TYPE_FUNNEL),this._magicType[l]||this._magicType[m])for(var d=0,e=this.option.series.length;e>d;d++)this._magicType[l]?(this.option.series[d].stack="_ECHARTS_STACK_KENER_2014_",b=l):this._magicType[m]&&(this.option.series[d].stack=null,b=m),this._featureOption[b+"Chart"]&&i.merge(this.option.series[d],this._featureOption[b+"Chart"]||{},!0);return this.option},_defaultMagic:function(a,b){if(this._magicType[a]||this._magicType[b])for(var c=0,d=this.option.series.length;d>c;c++){var e=this.option.series[c].type;(e==a||e==b)&&(this.option.series[c].type=this._magicType[a]?a:b,this.option.series[c].itemStyle=i.clone(this.option.series[c].__itemStyle),e=this.option.series[c].type,this._featureOption[e+"Chart"]&&i.merge(this.option.series[c],this._featureOption[e+"Chart"]||{},!0))}},silence:function(a){this._isSilence=a},resize:function(){this._resetMark(),this.clear(),this.option&&this.option.toolbox&&this.option.toolbox.show&&this._buildShape(),this._dataView&&this._dataView.resize()},hideDataView:function(){this._dataView&&this._dataView.hide()},clear:function(a){this.zr&&(this.zr.delShape(this.shapeList),this.shapeList=[],a||(this.zr.delShape(this._markShapeList),this._markShapeList=[]))},onbeforDispose:function(){this._dataView&&(this._dataView.dispose(),this._dataView=null),this._markShapeList=null},refresh:function(a){a&&(this._resetMark(),this._resetZoom(),a.toolbox=this.reformOption(a.toolbox),this.option=a,this.clear(!0),a.toolbox.show&&this._buildShape(),this.hideDataView())}},i.inherits(b,c),a("../component").define("toolbox",b),b}),c("echarts/component",[],function(){var a={},b={};return a.define=function(c,d){return b[c]=d,a},a.get=function(a){return b[a]},a}),c("echarts/component/title",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","../config","zrender/tool/util","zrender/tool/area","zrender/tool/color","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Rectangle"),f=a("../config");f.title={zlevel:0,z:6,show:!0,text:"",subtext:"",x:"left",y:"top",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:5,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}};var g=a("zrender/tool/util"),h=a("zrender/tool/area"),i=a("zrender/tool/color");return b.prototype={type:f.COMPONENT_TYPE_TITLE,_buildShape:function(){if(this.titleOption.show){this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._buildItem();for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a])}},_buildItem:function(){var a=this.titleOption.text,b=this.titleOption.link,c=this.titleOption.target,e=this.titleOption.subtext,f=this.titleOption.sublink,g=this.titleOption.subtarget,h=this.getFont(this.titleOption.textStyle),j=this.getFont(this.titleOption.subtextStyle),k=this._itemGroupLocation.x,l=this._itemGroupLocation.y,m=this._itemGroupLocation.width,n=this._itemGroupLocation.height,o={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{y:l,color:this.titleOption.textStyle.color,text:a,textFont:h,textBaseline:"top"},highlightStyle:{color:i.lift(this.titleOption.textStyle.color,1),brushType:"fill"},hoverable:!1};b&&(o.hoverable=!0,o.clickable=!0,o.onclick=function(){c&&"self"==c?window.location=b:window.open(b)});var p={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{y:l+n,color:this.titleOption.subtextStyle.color,text:e,textFont:j,textBaseline:"bottom"},highlightStyle:{color:i.lift(this.titleOption.subtextStyle.color,1),brushType:"fill"},hoverable:!1};switch(f&&(p.hoverable=!0,p.clickable=!0,p.onclick=function(){g&&"self"==g?window.location=f:window.open(f)}),this.titleOption.x){case"center":o.style.x=p.style.x=k+m/2,o.style.textAlign=p.style.textAlign="center";break;case"left":o.style.x=p.style.x=k,o.style.textAlign=p.style.textAlign="left";break;case"right":o.style.x=p.style.x=k+m,o.style.textAlign=p.style.textAlign="right";break;default:k=this.titleOption.x-0,k=isNaN(k)?0:k,o.style.x=p.style.x=k}this.titleOption.textAlign&&(o.style.textAlign=p.style.textAlign=this.titleOption.textAlign),this.shapeList.push(new d(o)),""!==e&&this.shapeList.push(new d(p))},_buildBackground:function(){var a=this.reformCssArray(this.titleOption.padding);this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-a[3],y:this._itemGroupLocation.y-a[0],width:this._itemGroupLocation.width+a[3]+a[1],height:this._itemGroupLocation.height+a[0]+a[2],brushType:0===this.titleOption.borderWidth?"fill":"both",color:this.titleOption.backgroundColor,strokeColor:this.titleOption.borderColor,lineWidth:this.titleOption.borderWidth}}))},_getItemGroupLocation:function(){var a,b=this.reformCssArray(this.titleOption.padding),c=this.titleOption.text,d=this.titleOption.subtext,e=this.getFont(this.titleOption.textStyle),f=this.getFont(this.titleOption.subtextStyle),g=Math.max(h.getTextWidth(c,e),h.getTextWidth(d,f)),i=h.getTextHeight(c,e)+(""===d?0:this.titleOption.itemGap+h.getTextHeight(d,f)),j=this.zr.getWidth();switch(this.titleOption.x){case"center":a=Math.floor((j-g)/2);break;case"left":a=b[3]+this.titleOption.borderWidth;break;case"right":a=j-g-b[1]-this.titleOption.borderWidth;break;default:a=this.titleOption.x-0,a=isNaN(a)?0:a}var k,l=this.zr.getHeight();switch(this.titleOption.y){case"top":k=b[0]+this.titleOption.borderWidth;break;case"bottom":k=l-i-b[2]-this.titleOption.borderWidth;break;case"center":k=Math.floor((l-i)/2);break;default:k=this.titleOption.y-0,k=isNaN(k)?0:k}return{x:a,y:k,width:g,height:i}},refresh:function(a){a&&(this.option=a,this.option.title=this.reformOption(this.option.title),this.titleOption=this.option.title,this.titleOption.textStyle=this.getTextStyle(this.titleOption.textStyle),this.titleOption.subtextStyle=this.getTextStyle(this.titleOption.subtextStyle)),this.clear(),this._buildShape()}},g.inherits(b,c),a("../component").define("title",b),b}),c("echarts/component/tooltip",["require","./base","../util/shape/Cross","zrender/shape/Line","zrender/shape/Rectangle","../config","../util/ecData","zrender/config","zrender/tool/event","zrender/tool/area","zrender/tool/color","zrender/tool/util","zrender/shape/Base","../component"],function(a){function b(a,b,f,g,h){c.call(this,a,b,f,g,h),this.dom=h.dom;var i=this;i._onmousemove=function(a){return i.__onmousemove(a)},i._onglobalout=function(a){return i.__onglobalout(a)},this.zr.on(j.EVENT.MOUSEMOVE,i._onmousemove),this.zr.on(j.EVENT.GLOBALOUT,i._onglobalout),i._hide=function(a){return i.__hide(a)},i._tryShow=function(a){return i.__tryShow(a)},i._refixed=function(a){return i.__refixed(a)},i._setContent=function(a,b){return i.__setContent(a,b)},this._tDom=this._tDom||document.createElement("div"),this._tDom.onselectstart=function(){return!1},this._tDom.onmouseover=function(){i._mousein=!0},this._tDom.onmouseout=function(){i._mousein=!1},this._tDom.className="echarts-tooltip",this._tDom.style.position="absolute",this.hasAppend=!1,this._axisLineShape&&this.zr.delShape(this._axisLineShape.id),this._axisLineShape=new e({zlevel:this.getZlevelBase(),z:this.getZBase(),invisible:!0,hoverable:!1}),this.shapeList.push(this._axisLineShape),this.zr.addShape(this._axisLineShape),this._axisShadowShape&&this.zr.delShape(this._axisShadowShape.id),this._axisShadowShape=new e({zlevel:this.getZlevelBase(),z:1,invisible:!0,hoverable:!1}),this.shapeList.push(this._axisShadowShape),this.zr.addShape(this._axisShadowShape),this._axisCrossShape&&this.zr.delShape(this._axisCrossShape.id),this._axisCrossShape=new d({zlevel:this.getZlevelBase(),z:this.getZBase(),invisible:!0,hoverable:!1}),this.shapeList.push(this._axisCrossShape),this.zr.addShape(this._axisCrossShape),this.showing=!1,this.refresh(g)}var c=a("./base"),d=a("../util/shape/Cross"),e=a("zrender/shape/Line"),f=a("zrender/shape/Rectangle"),g=new f({}),h=a("../config");h.tooltip={zlevel:1,z:8,show:!0,showContent:!0,trigger:"item",islandFormatter:"{a} <br/>{b} : {c}",showDelay:20,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(0,0,0,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,axisPointer:{type:"line",lineStyle:{color:"#48b",width:2,type:"solid"},crossStyle:{color:"#1e90ff",width:1,type:"dashed"},shadowStyle:{color:"rgba(150,150,150,0.3)",width:"auto",type:"default"}},textStyle:{color:"#fff"}};var i=a("../util/ecData"),j=a("zrender/config"),k=a("zrender/tool/event"),l=a("zrender/tool/area"),m=a("zrender/tool/color"),n=a("zrender/tool/util"),o=a("zrender/shape/Base");
return b.prototype={type:h.COMPONENT_TYPE_TOOLTIP,_gCssText:"position:absolute;display:block;border-style:solid;white-space:nowrap;",_style:function(a){if(!a)return"";var b=[];if(a.transitionDuration){var c="left "+a.transitionDuration+"s,top "+a.transitionDuration+"s";b.push("transition:"+c),b.push("-moz-transition:"+c),b.push("-webkit-transition:"+c),b.push("-o-transition:"+c)}a.backgroundColor&&(b.push("background-Color:"+m.toHex(a.backgroundColor)),b.push("filter:alpha(opacity=70)"),b.push("background-Color:"+a.backgroundColor)),null!=a.borderWidth&&b.push("border-width:"+a.borderWidth+"px"),null!=a.borderColor&&b.push("border-color:"+a.borderColor),null!=a.borderRadius&&(b.push("border-radius:"+a.borderRadius+"px"),b.push("-moz-border-radius:"+a.borderRadius+"px"),b.push("-webkit-border-radius:"+a.borderRadius+"px"),b.push("-o-border-radius:"+a.borderRadius+"px"));var d=a.textStyle;d&&(d.color&&b.push("color:"+d.color),d.decoration&&b.push("text-decoration:"+d.decoration),d.align&&b.push("text-align:"+d.align),d.fontFamily&&b.push("font-family:"+d.fontFamily),d.fontSize&&b.push("font-size:"+d.fontSize+"px"),d.fontSize&&b.push("line-height:"+Math.round(3*d.fontSize/2)+"px"),d.fontStyle&&b.push("font-style:"+d.fontStyle),d.fontWeight&&b.push("font-weight:"+d.fontWeight));var e=a.padding;return null!=e&&(e=this.reformCssArray(e),b.push("padding:"+e[0]+"px "+e[1]+"px "+e[2]+"px "+e[3]+"px")),b=b.join(";")+";"},__hide:function(){this._lastDataIndex=-1,this._lastSeriesIndex=-1,this._lastItemTriggerId=-1,this._tDom&&(this._tDom.style.display="none");var a=!1;this._axisLineShape.invisible||(this._axisLineShape.invisible=!0,this.zr.modShape(this._axisLineShape.id),a=!0),this._axisShadowShape.invisible||(this._axisShadowShape.invisible=!0,this.zr.modShape(this._axisShadowShape.id),a=!0),this._axisCrossShape.invisible||(this._axisCrossShape.invisible=!0,this.zr.modShape(this._axisCrossShape.id),a=!0),this._lastTipShape&&this._lastTipShape.tipShape.length>0&&(this.zr.delShape(this._lastTipShape.tipShape),this._lastTipShape=!1,this.shapeList.length=2),a&&this.zr.refreshNextFrame(),this.showing=!1},_show:function(a,b,c,d){var e=this._tDom.offsetHeight,f=this._tDom.offsetWidth;a&&("function"==typeof a&&(a=a([b,c])),a instanceof Array&&(b=a[0],c=a[1])),b+f>this._zrWidth&&(b-=f+40),c+e>this._zrHeight&&(c-=e-20),20>c&&(c=0),this._tDom.style.cssText=this._gCssText+this._defaultCssText+(d?d:"")+"left:"+b+"px;top:"+c+"px;",(10>e||10>f)&&setTimeout(this._refixed,20),this.showing=!0},__refixed:function(){if(this._tDom){var a="",b=this._tDom.offsetHeight,c=this._tDom.offsetWidth;this._tDom.offsetLeft+c>this._zrWidth&&(a+="left:"+(this._zrWidth-c-20)+"px;"),this._tDom.offsetTop+b>this._zrHeight&&(a+="top:"+(this._zrHeight-b-10)+"px;"),""!==a&&(this._tDom.style.cssText+=a)}},__tryShow:function(){var a,b;if(this._curTarget){if("island"===this._curTarget._type&&this.option.tooltip.show)return void this._showItemTrigger();var c=i.get(this._curTarget,"series"),d=i.get(this._curTarget,"data");a=this.deepQuery([d,c,this.option],"tooltip.show"),null!=c&&null!=d&&a?(b=this.deepQuery([d,c,this.option],"tooltip.trigger"),"axis"===b?this._showAxisTrigger(c.xAxisIndex,c.yAxisIndex,i.get(this._curTarget,"dataIndex")):this._showItemTrigger()):(clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this._hidingTicket=setTimeout(this._hide,this._hideDelay))}else this._findPolarTrigger()||this._findAxisTrigger()},_findAxisTrigger:function(){if(!this.component.xAxis||!this.component.yAxis)return void(this._hidingTicket=setTimeout(this._hide,this._hideDelay));for(var a,b,c=this.option.series,d=0,e=c.length;e>d;d++)if("axis"===this.deepQuery([c[d],this.option],"tooltip.trigger"))return a=c[d].xAxisIndex||0,b=c[d].yAxisIndex||0,this.component.xAxis.getAxis(a)&&this.component.xAxis.getAxis(a).type===h.COMPONENT_TYPE_AXIS_CATEGORY?void this._showAxisTrigger(a,b,this._getNearestDataIndex("x",this.component.xAxis.getAxis(a))):this.component.yAxis.getAxis(b)&&this.component.yAxis.getAxis(b).type===h.COMPONENT_TYPE_AXIS_CATEGORY?void this._showAxisTrigger(a,b,this._getNearestDataIndex("y",this.component.yAxis.getAxis(b))):void this._showAxisTrigger(a,b,-1);"cross"===this.option.tooltip.axisPointer.type&&this._showAxisTrigger(-1,-1,-1)},_findPolarTrigger:function(){if(!this.component.polar)return!1;var a,b=k.getX(this._event),c=k.getY(this._event),d=this.component.polar.getNearestIndex([b,c]);return d?(a=d.valueIndex,d=d.polarIndex):d=-1,-1!=d?this._showPolarTrigger(d,a):!1},_getNearestDataIndex:function(a,b){var c=-1,d=k.getX(this._event),e=k.getY(this._event);if("x"===a){for(var f,g,h=this.component.grid.getXend(),i=b.getCoordByIndex(c);h>i&&(g=i,d>=i);)f=i,i=b.getCoordByIndex(++c);return 0>=c?c=0:g-d>=d-f?c-=1:null==b.getNameByIndex(c)&&(c-=1),c}for(var j,l,m=this.component.grid.getY(),i=b.getCoordByIndex(c);i>m&&(j=i,i>=e);)l=i,i=b.getCoordByIndex(++c);return 0>=c?c=0:e-j>=l-e?c-=1:null==b.getNameByIndex(c)&&(c-=1),c},_showAxisTrigger:function(a,b,c){if(!this._event.connectTrigger&&this.messageCenter.dispatch(h.EVENT.TOOLTIP_IN_GRID,this._event,null,this.myChart),null==this.component.xAxis||null==this.component.yAxis||null==a||null==b)return clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),void(this._hidingTicket=setTimeout(this._hide,this._hideDelay));var d,e,f,g,i=this.option.series,j=[],l=[],m="";if("axis"===this.option.tooltip.trigger){if(!this.option.tooltip.show)return;e=this.option.tooltip.formatter,f=this.option.tooltip.position}var n,o,p=-1!=a&&this.component.xAxis.getAxis(a).type===h.COMPONENT_TYPE_AXIS_CATEGORY?"xAxis":-1!=b&&this.component.yAxis.getAxis(b).type===h.COMPONENT_TYPE_AXIS_CATEGORY?"yAxis":!1;if(p){var q="xAxis"==p?a:b;d=this.component[p].getAxis(q);for(var r=0,s=i.length;s>r;r++)this._isSelected(i[r].name)&&i[r][p+"Index"]===q&&"axis"===this.deepQuery([i[r],this.option],"tooltip.trigger")&&(g=this.query(i[r],"tooltip.showContent")||g,e=this.query(i[r],"tooltip.formatter")||e,f=this.query(i[r],"tooltip.position")||f,m+=this._style(this.query(i[r],"tooltip")),null!=i[r].stack&&"xAxis"==p?(j.unshift(i[r]),l.unshift(r)):(j.push(i[r]),l.push(r)));this.messageCenter.dispatch(h.EVENT.TOOLTIP_HOVER,this._event,{seriesIndex:l,dataIndex:c},this.myChart);var t;"xAxis"==p?(n=this.subPixelOptimize(d.getCoordByIndex(c),this._axisLineWidth),o=k.getY(this._event),t=[n,this.component.grid.getY(),n,this.component.grid.getYend()]):(n=k.getX(this._event),o=this.subPixelOptimize(d.getCoordByIndex(c),this._axisLineWidth),t=[this.component.grid.getX(),o,this.component.grid.getXend(),o]),this._styleAxisPointer(j,t[0],t[1],t[2],t[3],d.getGap(),n,o)}else n=k.getX(this._event),o=k.getY(this._event),this._styleAxisPointer(i,this.component.grid.getX(),o,this.component.grid.getXend(),o,0,n,o),c>=0?this._showItemTrigger(!0):(clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this._tDom.style.display="none");if(j.length>0){if(this._lastItemTriggerId=-1,this._lastDataIndex!=c||this._lastSeriesIndex!=l[0]){this._lastDataIndex=c,this._lastSeriesIndex=l[0];var u,v;if("function"==typeof e){for(var w=[],r=0,s=j.length;s>r;r++)u=j[r].data[c],v=this.getDataFromOption(u,"-"),w.push({seriesIndex:l[r],seriesName:j[r].name||"",series:j[r],dataIndex:c,data:u,name:d.getNameByIndex(c),value:v,0:j[r].name||"",1:d.getNameByIndex(c),2:v,3:u});this._curTicket="axis:"+c,this._tDom.innerHTML=e.call(this.myChart,w,this._curTicket,this._setContent)}else if("string"==typeof e){this._curTicket=NaN,e=e.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}");for(var r=0,s=j.length;s>r;r++)e=e.replace("{a"+r+"}",this._encodeHTML(j[r].name||"")),e=e.replace("{b"+r+"}",this._encodeHTML(d.getNameByIndex(c))),u=j[r].data[c],u=this.getDataFromOption(u,"-"),e=e.replace("{c"+r+"}",u instanceof Array?u:this.numAddCommas(u));this._tDom.innerHTML=e}else{this._curTicket=NaN,e=this._encodeHTML(d.getNameByIndex(c));for(var r=0,s=j.length;s>r;r++)e+="<br/>"+this._encodeHTML(j[r].name||"")+" : ",u=j[r].data[c],u=this.getDataFromOption(u,"-"),e+=u instanceof Array?u:this.numAddCommas(u);this._tDom.innerHTML=e}}if(g===!1||!this.option.tooltip.showContent)return;this.hasAppend||(this._tDom.style.left=this._zrWidth/2+"px",this._tDom.style.top=this._zrHeight/2+"px",this.dom.firstChild.appendChild(this._tDom),this.hasAppend=!0),this._show(f,n+10,o+10,m)}},_showPolarTrigger:function(a,b){if(null==this.component.polar||null==a||null==b||0>b)return!1;var c,d,e,f=this.option.series,g=[],h=[],i="";if("axis"===this.option.tooltip.trigger){if(!this.option.tooltip.show)return!1;c=this.option.tooltip.formatter,d=this.option.tooltip.position}for(var j=this.option.polar[a].indicator[b].text,l=0,m=f.length;m>l;l++)this._isSelected(f[l].name)&&f[l].polarIndex===a&&"axis"===this.deepQuery([f[l],this.option],"tooltip.trigger")&&(e=this.query(f[l],"tooltip.showContent")||e,c=this.query(f[l],"tooltip.formatter")||c,d=this.query(f[l],"tooltip.position")||d,i+=this._style(this.query(f[l],"tooltip")),g.push(f[l]),h.push(l));if(g.length>0){for(var n,o,p,q=[],l=0,m=g.length;m>l;l++){n=g[l].data;for(var r=0,s=n.length;s>r;r++)o=n[r],this._isSelected(o.name)&&(o=null!=o?o:{name:"",value:{dataIndex:"-"}},p=this.getDataFromOption(o.value[b]),q.push({seriesIndex:h[l],seriesName:g[l].name||"",series:g[l],dataIndex:b,data:o,name:o.name,indicator:j,value:p,0:g[l].name||"",1:o.name,2:p,3:j}))}if(q.length<=0)return;if(this._lastItemTriggerId=-1,this._lastDataIndex!=b||this._lastSeriesIndex!=h[0])if(this._lastDataIndex=b,this._lastSeriesIndex=h[0],"function"==typeof c)this._curTicket="axis:"+b,this._tDom.innerHTML=c.call(this.myChart,q,this._curTicket,this._setContent);else if("string"==typeof c){c=c.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}").replace("{d}","{d0}");for(var l=0,m=q.length;m>l;l++)c=c.replace("{a"+l+"}",this._encodeHTML(q[l].seriesName)),c=c.replace("{b"+l+"}",this._encodeHTML(q[l].name)),c=c.replace("{c"+l+"}",this.numAddCommas(q[l].value)),c=c.replace("{d"+l+"}",this._encodeHTML(q[l].indicator));this._tDom.innerHTML=c}else{c=this._encodeHTML(q[0].name)+"<br/>"+this._encodeHTML(q[0].indicator)+" : "+this.numAddCommas(q[0].value);for(var l=1,m=q.length;m>l;l++)c+="<br/>"+this._encodeHTML(q[l].name)+"<br/>",c+=this._encodeHTML(q[l].indicator)+" : "+this.numAddCommas(q[l].value);this._tDom.innerHTML=c}if(e===!1||!this.option.tooltip.showContent)return;return this.hasAppend||(this._tDom.style.left=this._zrWidth/2+"px",this._tDom.style.top=this._zrHeight/2+"px",this.dom.firstChild.appendChild(this._tDom),this.hasAppend=!0),this._show(d,k.getX(this._event),k.getY(this._event),i),!0}},_showItemTrigger:function(a){if(this._curTarget){var b,c,d,e=i.get(this._curTarget,"series"),f=i.get(this._curTarget,"seriesIndex"),g=i.get(this._curTarget,"data"),j=i.get(this._curTarget,"dataIndex"),l=i.get(this._curTarget,"name"),m=i.get(this._curTarget,"value"),n=i.get(this._curTarget,"special"),o=i.get(this._curTarget,"special2"),p=[g,e,this.option],q="";if("island"!=this._curTarget._type){var r=a?"axis":"item";this.option.tooltip.trigger===r&&(b=this.option.tooltip.formatter,c=this.option.tooltip.position),this.query(e,"tooltip.trigger")===r&&(d=this.query(e,"tooltip.showContent")||d,b=this.query(e,"tooltip.formatter")||b,c=this.query(e,"tooltip.position")||c,q+=this._style(this.query(e,"tooltip"))),d=this.query(g,"tooltip.showContent")||d,b=this.query(g,"tooltip.formatter")||b,c=this.query(g,"tooltip.position")||c,q+=this._style(this.query(g,"tooltip"))}else this._lastItemTriggerId=NaN,d=this.deepQuery(p,"tooltip.showContent"),b=this.deepQuery(p,"tooltip.islandFormatter"),c=this.deepQuery(p,"tooltip.islandPosition");this._lastDataIndex=-1,this._lastSeriesIndex=-1,this._lastItemTriggerId!==this._curTarget.id&&(this._lastItemTriggerId=this._curTarget.id,"function"==typeof b?(this._curTicket=(e.name||"")+":"+j,this._tDom.innerHTML=b.call(this.myChart,{seriesIndex:f,seriesName:e.name||"",series:e,dataIndex:j,data:g,name:l,value:m,percent:n,indicator:n,value2:o,indicator2:o,0:e.name||"",1:l,2:m,3:n,4:o,5:g,6:f,7:j},this._curTicket,this._setContent)):"string"==typeof b?(this._curTicket=NaN,b=b.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}"),b=b.replace("{a0}",this._encodeHTML(e.name||"")).replace("{b0}",this._encodeHTML(l)).replace("{c0}",m instanceof Array?m:this.numAddCommas(m)),b=b.replace("{d}","{d0}").replace("{d0}",n||""),b=b.replace("{e}","{e0}").replace("{e0}",i.get(this._curTarget,"special2")||""),this._tDom.innerHTML=b):(this._curTicket=NaN,this._tDom.innerHTML=e.type===h.CHART_TYPE_RADAR&&n?this._itemFormatter.radar.call(this,e,l,m,n):e.type===h.CHART_TYPE_EVENTRIVER?this._itemFormatter.eventRiver.call(this,e,l,m,g):""+(null!=e.name?this._encodeHTML(e.name)+"<br/>":"")+(""===l?"":this._encodeHTML(l)+" : ")+(m instanceof Array?m:this.numAddCommas(m))));var s=k.getX(this._event),t=k.getY(this._event);this.deepQuery(p,"tooltip.axisPointer.show")&&this.component.grid?this._styleAxisPointer([e],this.component.grid.getX(),t,this.component.grid.getXend(),t,0,s,t):this._hide(),d!==!1&&this.option.tooltip.showContent&&(this.hasAppend||(this._tDom.style.left=this._zrWidth/2+"px",this._tDom.style.top=this._zrHeight/2+"px",this.dom.firstChild.appendChild(this._tDom),this.hasAppend=!0),this._show(c,s+20,t-20,q))}},_itemFormatter:{radar:function(a,b,c,d){var e="";e+=this._encodeHTML(""===b?a.name||"":b),e+=""===e?"":"<br />";for(var f=0;f<d.length;f++)e+=this._encodeHTML(d[f].text)+" : "+this.numAddCommas(c[f])+"<br />";return e},chord:function(a,b,c,d,e){if(null==e)return this._encodeHTML(b)+" ("+this.numAddCommas(c)+")";var f=this._encodeHTML(b),g=this._encodeHTML(d);return""+(null!=a.name?this._encodeHTML(a.name)+"<br/>":"")+f+" -> "+g+" ("+this.numAddCommas(c)+")<br />"+g+" -> "+f+" ("+this.numAddCommas(e)+")"},eventRiver:function(a,b,c,d){var e="";e+=this._encodeHTML(""===a.name?"":a.name+" : "),e+=this._encodeHTML(b),e+=""===e?"":"<br />",d=d.evolution;for(var f=0,g=d.length;g>f;f++)e+='<div style="padding-top:5px;">',d[f].detail&&(d[f].detail.img&&(e+='<img src="'+d[f].detail.img+'" style="float:left;width:40px;height:40px;">'),e+='<div style="margin-left:45px;">'+d[f].time+"<br/>",e+='<a href="'+d[f].detail.link+'" target="_blank">',e+=d[f].detail.text+"</a></div>",e+="</div>");return e}},_styleAxisPointer:function(a,b,c,d,e,f,g,h){if(a.length>0){var i,j,k=this.option.tooltip.axisPointer,l=k.type,m={line:{},cross:{},shadow:{}};for(var n in m)m[n].color=k[n+"Style"].color,m[n].width=k[n+"Style"].width,m[n].type=k[n+"Style"].type;for(var o=0,p=a.length;p>o;o++)i=a[o],j=this.query(i,"tooltip.axisPointer.type"),l=j||l,j&&(m[j].color=this.query(i,"tooltip.axisPointer."+j+"Style.color")||m[j].color,m[j].width=this.query(i,"tooltip.axisPointer."+j+"Style.width")||m[j].width,m[j].type=this.query(i,"tooltip.axisPointer."+j+"Style.type")||m[j].type);if("line"===l){var q=m.line.width,r=b==d;this._axisLineShape.style={xStart:r?this.subPixelOptimize(b,q):b,yStart:r?c:this.subPixelOptimize(c,q),xEnd:r?this.subPixelOptimize(d,q):d,yEnd:r?e:this.subPixelOptimize(e,q),strokeColor:m.line.color,lineWidth:q,lineType:m.line.type},this._axisLineShape.invisible=!1,this.zr.modShape(this._axisLineShape.id)}else if("cross"===l){var s=m.cross.width;this._axisCrossShape.style={brushType:"stroke",rect:this.component.grid.getArea(),x:this.subPixelOptimize(g,s),y:this.subPixelOptimize(h,s),text:("( "+this.component.xAxis.getAxis(0).getValueFromCoord(g)+" , "+this.component.yAxis.getAxis(0).getValueFromCoord(h)+" )").replace("  , "," ").replace(" ,  "," "),textPosition:"specific",strokeColor:m.cross.color,lineWidth:s,lineType:m.cross.type},this.component.grid.getXend()-g>100?(this._axisCrossShape.style.textAlign="left",this._axisCrossShape.style.textX=g+10):(this._axisCrossShape.style.textAlign="right",this._axisCrossShape.style.textX=g-10),h-this.component.grid.getY()>50?(this._axisCrossShape.style.textBaseline="bottom",this._axisCrossShape.style.textY=h-10):(this._axisCrossShape.style.textBaseline="top",this._axisCrossShape.style.textY=h+10),this._axisCrossShape.invisible=!1,this.zr.modShape(this._axisCrossShape.id)}else"shadow"===l&&((null==m.shadow.width||"auto"===m.shadow.width||isNaN(m.shadow.width))&&(m.shadow.width=f),b===d?Math.abs(this.component.grid.getX()-b)<2?(m.shadow.width/=2,b=d+=m.shadow.width/2):Math.abs(this.component.grid.getXend()-b)<2&&(m.shadow.width/=2,b=d-=m.shadow.width/2):c===e&&(Math.abs(this.component.grid.getY()-c)<2?(m.shadow.width/=2,c=e+=m.shadow.width/2):Math.abs(this.component.grid.getYend()-c)<2&&(m.shadow.width/=2,c=e-=m.shadow.width/2)),this._axisShadowShape.style={xStart:b,yStart:c,xEnd:d,yEnd:e,strokeColor:m.shadow.color,lineWidth:m.shadow.width},this._axisShadowShape.invisible=!1,this.zr.modShape(this._axisShadowShape.id));this.zr.refreshNextFrame()}},__onmousemove:function(a){if(clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),!this._mousein||!this._enterable){var b=a.target,c=k.getX(a.event),d=k.getY(a.event);if(b){this._curTarget=b,this._event=a.event,this._event.zrenderX=c,this._event.zrenderY=d;var e;if(this._needAxisTrigger&&this.component.polar&&-1!=(e=this.component.polar.isInside([c,d])))for(var f=this.option.series,i=0,j=f.length;j>i;i++)if(f[i].polarIndex===e&&"axis"===this.deepQuery([f[i],this.option],"tooltip.trigger")){this._curTarget=null;break}this._showingTicket=setTimeout(this._tryShow,this._showDelay)}else this._curTarget=!1,this._event=a.event,this._event.zrenderX=c,this._event.zrenderY=d,this._needAxisTrigger&&this.component.grid&&l.isInside(g,this.component.grid.getArea(),c,d)?this._showingTicket=setTimeout(this._tryShow,this._showDelay):this._needAxisTrigger&&this.component.polar&&-1!=this.component.polar.isInside([c,d])?this._showingTicket=setTimeout(this._tryShow,this._showDelay):(!this._event.connectTrigger&&this.messageCenter.dispatch(h.EVENT.TOOLTIP_OUT_GRID,this._event,null,this.myChart),this._hidingTicket=setTimeout(this._hide,this._hideDelay))}},__onglobalout:function(){clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this._hidingTicket=setTimeout(this._hide,this._hideDelay)},__setContent:function(a,b){this._tDom&&(a===this._curTicket&&(this._tDom.innerHTML=b),setTimeout(this._refixed,20))},ontooltipHover:function(a,b){if(!this._lastTipShape||this._lastTipShape&&this._lastTipShape.dataIndex!=a.dataIndex){this._lastTipShape&&this._lastTipShape.tipShape.length>0&&(this.zr.delShape(this._lastTipShape.tipShape),this.shapeList.length=2);for(var c=0,d=b.length;d>c;c++)b[c].zlevel=this.getZlevelBase(),b[c].z=this.getZBase(),b[c].style=o.prototype.getHighlightStyle(b[c].style,b[c].highlightStyle),b[c].draggable=!1,b[c].hoverable=!1,b[c].clickable=!1,b[c].ondragend=null,b[c].ondragover=null,b[c].ondrop=null,this.shapeList.push(b[c]),this.zr.addShape(b[c]);this._lastTipShape={dataIndex:a.dataIndex,tipShape:b}}},ondragend:function(){this._hide()},onlegendSelected:function(a){this._selectedMap=a.selected},_setSelectedMap:function(){this._selectedMap=this.component.legend?n.clone(this.component.legend.getSelectedMap()):{}},_isSelected:function(a){return null!=this._selectedMap[a]?this._selectedMap[a]:!0},showTip:function(a){if(a){var b,c=this.option.series;if(null!=a.seriesIndex)b=a.seriesIndex;else for(var d=a.seriesName,e=0,f=c.length;f>e;e++)if(c[e].name===d){b=e;break}var g=c[b];if(null!=g){var k=this.myChart.chart[g.type],l="axis"===this.deepQuery([g,this.option],"tooltip.trigger");if(k)if(l){var m=a.dataIndex;switch(k.type){case h.CHART_TYPE_LINE:case h.CHART_TYPE_BAR:case h.CHART_TYPE_K:case h.CHART_TYPE_RADAR:if(null==this.component.polar||g.data[0].value.length<=m)return;var n=g.polarIndex||0,o=this.component.polar.getVector(n,m,"max");this._event={zrenderX:o[0],zrenderY:o[1]},this._showPolarTrigger(n,m)}}else{var p,q,r=k.shapeList;switch(k.type){case h.CHART_TYPE_LINE:case h.CHART_TYPE_BAR:case h.CHART_TYPE_K:case h.CHART_TYPE_TREEMAP:case h.CHART_TYPE_SCATTER:for(var m=a.dataIndex,e=0,f=r.length;f>e;e++)if(null==r[e]._mark&&i.get(r[e],"seriesIndex")==b&&i.get(r[e],"dataIndex")==m){this._curTarget=r[e],p=r[e].style.x,q=k.type!=h.CHART_TYPE_K?r[e].style.y:r[e].style.y[0];break}break;case h.CHART_TYPE_RADAR:for(var m=a.dataIndex,e=0,f=r.length;f>e;e++)if("polygon"===r[e].type&&i.get(r[e],"seriesIndex")==b&&i.get(r[e],"dataIndex")==m){this._curTarget=r[e];var o=this.component.polar.getCenter(g.polarIndex||0);p=o[0],q=o[1];break}break;case h.CHART_TYPE_PIE:for(var s=a.name,e=0,f=r.length;f>e;e++)if("sector"===r[e].type&&i.get(r[e],"seriesIndex")==b&&i.get(r[e],"name")==s){this._curTarget=r[e];var t=this._curTarget.style,u=(t.startAngle+t.endAngle)/2*Math.PI/180;p=this._curTarget.style.x+Math.cos(u)*t.r/1.5,q=this._curTarget.style.y-Math.sin(u)*t.r/1.5;break}break;case h.CHART_TYPE_MAP:for(var s=a.name,v=g.mapType,e=0,f=r.length;f>e;e++)if("text"===r[e].type&&r[e]._mapType===v&&r[e].style._name===s){this._curTarget=r[e],p=this._curTarget.style.x+this._curTarget.position[0],q=this._curTarget.style.y+this._curTarget.position[1];break}break;case h.CHART_TYPE_CHORD:for(var s=a.name,e=0,f=r.length;f>e;e++)if("sector"===r[e].type&&i.get(r[e],"name")==s){this._curTarget=r[e];var t=this._curTarget.style,u=(t.startAngle+t.endAngle)/2*Math.PI/180;return p=this._curTarget.style.x+Math.cos(u)*(t.r-2),q=this._curTarget.style.y-Math.sin(u)*(t.r-2),void this.zr.trigger(j.EVENT.MOUSEMOVE,{zrenderX:p,zrenderY:q})}break;case h.CHART_TYPE_FORCE:for(var s=a.name,e=0,f=r.length;f>e;e++)if("circle"===r[e].type&&i.get(r[e],"name")==s){this._curTarget=r[e],p=this._curTarget.position[0],q=this._curTarget.position[1];break}}null!=p&&null!=q&&(this._event={zrenderX:p,zrenderY:q},this.zr.addHoverShape(this._curTarget),this.zr.refreshHover(),this._showItemTrigger())}}}},hideTip:function(){this._hide()},refresh:function(a){if(this._zrHeight=this.zr.getHeight(),this._zrWidth=this.zr.getWidth(),this._lastTipShape&&this._lastTipShape.tipShape.length>0&&this.zr.delShape(this._lastTipShape.tipShape),this._lastTipShape=!1,this.shapeList.length=2,this._lastDataIndex=-1,this._lastSeriesIndex=-1,this._lastItemTriggerId=-1,a){this.option=a,this.option.tooltip=this.reformOption(this.option.tooltip),this.option.tooltip.textStyle=n.merge(this.option.tooltip.textStyle,this.ecTheme.textStyle),this._needAxisTrigger=!1,"axis"===this.option.tooltip.trigger&&(this._needAxisTrigger=!0);for(var b=this.option.series,c=0,d=b.length;d>c;c++)if("axis"===this.query(b[c],"tooltip.trigger")){this._needAxisTrigger=!0;break}this._showDelay=this.option.tooltip.showDelay,this._hideDelay=this.option.tooltip.hideDelay,this._defaultCssText=this._style(this.option.tooltip),this._setSelectedMap(),this._axisLineWidth=this.option.tooltip.axisPointer.lineStyle.width,this._enterable=this.option.tooltip.enterable,!this._enterable&&this._tDom.className.indexOf(j.elementClassName)<0&&(this._tDom.className+=" "+j.elementClassName)}if(this.showing){var e=this;setTimeout(function(){e.zr.trigger(j.EVENT.MOUSEMOVE,e.zr.handler._event)},50)}},onbeforDispose:function(){this._lastTipShape&&this._lastTipShape.tipShape.length>0&&this.zr.delShape(this._lastTipShape.tipShape),clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this.zr.un(j.EVENT.MOUSEMOVE,this._onmousemove),this.zr.un(j.EVENT.GLOBALOUT,this._onglobalout),this.hasAppend&&this.dom.firstChild&&this.dom.firstChild.removeChild(this._tDom),this._tDom=null},_encodeHTML:function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},n.inherits(b,c),a("../component").define("tooltip",b),b}),c("echarts/component/legend",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","zrender/shape/Sector","../util/shape/Icon","../util/shape/Candle","../config","zrender/tool/util","zrender/tool/area","../component"],function(a){function b(a,b,d,e,f){if(this.query(e,"legend.data")){c.call(this,a,b,d,e,f);var g=this;g._legendSelected=function(a){g.__legendSelected(a)},g._dispatchHoverLink=function(a){return g.__dispatchHoverLink(a)},this._colorIndex=0,this._colorMap={},this._selectedMap={},this._hasDataMap={},this.refresh(e)}}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Rectangle"),f=a("zrender/shape/Sector"),g=a("../util/shape/Icon"),h=a("../util/shape/Candle"),i=a("../config");i.legend={zlevel:0,z:4,show:!0,orient:"horizontal",x:"center",y:"top",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:20,itemHeight:14,textStyle:{color:"#333"},selectedMode:!0};var j=a("zrender/tool/util"),k=a("zrender/tool/area");b.prototype={type:i.COMPONENT_TYPE_LEGEND,_buildShape:function(){if(this.legendOption.show){this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._buildItem();for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a])}},_buildItem:function(){var a,b,c,e,f,h,i,l,m=this.legendOption.data,n=m.length,o=this.legendOption.textStyle,p=this.zr.getWidth(),q=this.zr.getHeight(),r=this._itemGroupLocation.x,s=this._itemGroupLocation.y,t=this.legendOption.itemWidth,u=this.legendOption.itemHeight,v=this.legendOption.itemGap;"vertical"===this.legendOption.orient&&"right"===this.legendOption.x&&(r=this._itemGroupLocation.x+this._itemGroupLocation.width-t);for(var w=0;n>w;w++)f=j.merge(m[w].textStyle||{},o),h=this.getFont(f),a=this._getName(m[w]),i=this._getFormatterName(a),""!==a?(b=m[w].icon||this._getSomethingByName(a).type,l=this.getColor(a),"horizontal"===this.legendOption.orient?200>p-r&&t+5+k.getTextWidth(i,h)+(w===n-1||""===m[w+1]?0:v)>=p-r&&(r=this._itemGroupLocation.x,s+=u+v):200>q-s&&u+(w===n-1||""===m[w+1]?0:v)>=q-s&&("right"===this.legendOption.x?r-=this._itemGroupLocation.maxWidth+v:r+=this._itemGroupLocation.maxWidth+v,s=this._itemGroupLocation.y),c=this._getItemShapeByType(r,s,t,u,this._selectedMap[a]&&this._hasDataMap[a]?l:"#ccc",b,l),c._name=a,c=new g(c),e={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:r+t+5,y:s+u/2,color:this._selectedMap[a]?"auto"===f.color?l:f.color:"#ccc",text:i,textFont:h,textBaseline:"middle"},highlightStyle:{color:l,brushType:"fill"},hoverable:!!this.legendOption.selectedMode,clickable:!!this.legendOption.selectedMode},"vertical"===this.legendOption.orient&&"right"===this.legendOption.x&&(e.style.x-=t+10,e.style.textAlign="right"),e._name=a,e=new d(e),this.legendOption.selectedMode&&(c.onclick=e.onclick=this._legendSelected,c.onmouseover=e.onmouseover=this._dispatchHoverLink,c.hoverConnect=e.id,e.hoverConnect=c.id),this.shapeList.push(c),this.shapeList.push(e),"horizontal"===this.legendOption.orient?r+=t+5+k.getTextWidth(i,h)+v:s+=u+v):"horizontal"===this.legendOption.orient?(r=this._itemGroupLocation.x,s+=u+v):("right"===this.legendOption.x?r-=this._itemGroupLocation.maxWidth+v:r+=this._itemGroupLocation.maxWidth+v,s=this._itemGroupLocation.y);"horizontal"===this.legendOption.orient&&"center"===this.legendOption.x&&s!=this._itemGroupLocation.y&&this._mLineOptimize()},_getName:function(a){return"undefined"!=typeof a.name?a.name:a},_getFormatterName:function(a){var b,c=this.legendOption.formatter;return b="function"==typeof c?c.call(this.myChart,a):"string"==typeof c?c.replace("{name}",a):a},_getFormatterNameFromData:function(a){var b=this._getName(a);return this._getFormatterName(b)},_mLineOptimize:function(){for(var a=[],b=this._itemGroupLocation.x,c=2,d=this.shapeList.length;d>c;c++)this.shapeList[c].style.x===b?a.push((this._itemGroupLocation.width-(this.shapeList[c-1].style.x+k.getTextWidth(this.shapeList[c-1].style.text,this.shapeList[c-1].style.textFont)-b))/2):c===d-1&&a.push((this._itemGroupLocation.width-(this.shapeList[c].style.x+k.getTextWidth(this.shapeList[c].style.text,this.shapeList[c].style.textFont)-b))/2);for(var e=-1,c=1,d=this.shapeList.length;d>c;c++)this.shapeList[c].style.x===b&&e++,0!==a[e]&&(this.shapeList[c].style.x+=a[e])},_buildBackground:function(){var a=this.reformCssArray(this.legendOption.padding);this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-a[3],y:this._itemGroupLocation.y-a[0],width:this._itemGroupLocation.width+a[3]+a[1],height:this._itemGroupLocation.height+a[0]+a[2],brushType:0===this.legendOption.borderWidth?"fill":"both",color:this.legendOption.backgroundColor,strokeColor:this.legendOption.borderColor,lineWidth:this.legendOption.borderWidth}}))},_getItemGroupLocation:function(){var a=this.legendOption.data,b=a.length,c=this.legendOption.itemGap,d=this.legendOption.itemWidth+5,e=this.legendOption.itemHeight,f=this.legendOption.textStyle,g=this.getFont(f),h=0,i=0,l=this.reformCssArray(this.legendOption.padding),m=this.zr.getWidth()-l[1]-l[3],n=this.zr.getHeight()-l[0]-l[2],o=0,p=0;if("horizontal"===this.legendOption.orient){i=e;for(var q=0;b>q;q++)if(""!==this._getName(a[q])){var r=k.getTextWidth(this._getFormatterNameFromData(a[q]),a[q].textStyle?this.getFont(j.merge(a[q].textStyle||{},f)):g);o+d+r+c>m?(o-=c,h=Math.max(h,o),i+=e+c,o=0):(o+=d+r+c,h=Math.max(h,o-c))}else o-=c,h=Math.max(h,o),i+=e+c,o=0}else{for(var q=0;b>q;q++)p=Math.max(p,k.getTextWidth(this._getFormatterNameFromData(a[q]),a[q].textStyle?this.getFont(j.merge(a[q].textStyle||{},f)):g));p+=d,h=p;for(var q=0;b>q;q++)""!==this._getName(a[q])?o+e+c>n?(h+=p+c,o-=c,i=Math.max(i,o),o=0):(o+=e+c,i=Math.max(i,o-c)):(h+=p+c,o-=c,i=Math.max(i,o),o=0)}m=this.zr.getWidth(),n=this.zr.getHeight();var s;switch(this.legendOption.x){case"center":s=Math.floor((m-h)/2);break;case"left":s=l[3]+this.legendOption.borderWidth;break;case"right":s=m-h-l[1]-l[3]-2*this.legendOption.borderWidth;break;default:s=this.parsePercent(this.legendOption.x,m)}var t;switch(this.legendOption.y){case"top":t=l[0]+this.legendOption.borderWidth;break;case"bottom":t=n-i-l[0]-l[2]-2*this.legendOption.borderWidth;break;case"center":t=Math.floor((n-i)/2);break;default:t=this.parsePercent(this.legendOption.y,n)}return{x:s,y:t,width:h,height:i,maxWidth:p}},_getSomethingByName:function(a){for(var b,c=this.option.series,d=0,e=c.length;e>d;d++){if(c[d].name===a)return{type:c[d].type,series:c[d],seriesIndex:d,data:null,dataIndex:-1};if(c[d].type===i.CHART_TYPE_PIE||c[d].type===i.CHART_TYPE_RADAR||c[d].type===i.CHART_TYPE_CHORD||c[d].type===i.CHART_TYPE_FORCE||c[d].type===i.CHART_TYPE_FUNNEL||c[d].type===i.CHART_TYPE_TREEMAP){b=c[d].categories||c[d].data||c[d].nodes;for(var f=0,g=b.length;g>f;f++)if(b[f].name===a)return{type:c[d].type,series:c[d],seriesIndex:d,data:b[f],dataIndex:f}}}return{type:"bar",series:null,seriesIndex:-1,data:null,dataIndex:-1}},_getItemShapeByType:function(a,b,c,d,e,f,g){var h,j="#ccc"===e?g:e,k={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{iconType:"legendicon"+f,x:a,y:b,width:c,height:d,color:e,strokeColor:e,lineWidth:2},highlightStyle:{color:j,strokeColor:j,lineWidth:1},hoverable:this.legendOption.selectedMode,clickable:this.legendOption.selectedMode};if(f.match("image")){var h=f.replace(new RegExp("^image:\\/\\/"),"");f="image"}switch(f){case"line":k.style.brushType="stroke",k.highlightStyle.lineWidth=3;break;case"radar":case"venn":case"tree":case"treemap":case"scatter":k.highlightStyle.lineWidth=3;break;case"k":k.style.brushType="both",k.highlightStyle.lineWidth=3,k.highlightStyle.color=k.style.color=this.deepQuery([this.ecTheme,i],"k.itemStyle.normal.color")||"#fff",k.style.strokeColor="#ccc"!=e?this.deepQuery([this.ecTheme,i],"k.itemStyle.normal.lineStyle.color")||"#ff3200":e;break;case"image":k.style.iconType="image",k.style.image=h,"#ccc"===e&&(k.style.opacity=.5)}return k},__legendSelected:function(a){var b=a.target._name;if("single"===this.legendOption.selectedMode)for(var c in this._selectedMap)this._selectedMap[c]=!1;this._selectedMap[b]=!this._selectedMap[b],this.messageCenter.dispatch(i.EVENT.LEGEND_SELECTED,a.event,{selected:this._selectedMap,target:b},this.myChart)},__dispatchHoverLink:function(a){this.messageCenter.dispatch(i.EVENT.LEGEND_HOVERLINK,a.event,{target:a.target._name
},this.myChart)},refresh:function(a){if(a){this.option=a||this.option,this.option.legend=this.reformOption(this.option.legend),this.legendOption=this.option.legend;var b,c,d,e,f=this.legendOption.data||[];if(this.legendOption.selected)for(var g in this.legendOption.selected)this._selectedMap[g]="undefined"!=typeof this._selectedMap[g]?this._selectedMap[g]:this.legendOption.selected[g];for(var h=0,j=f.length;j>h;h++)b=this._getName(f[h]),""!==b&&(c=this._getSomethingByName(b),c.series?(this._hasDataMap[b]=!0,e=!c.data||c.type!==i.CHART_TYPE_PIE&&c.type!==i.CHART_TYPE_FORCE&&c.type!==i.CHART_TYPE_FUNNEL?[c.series]:[c.data,c.series],d=this.getItemStyleColor(this.deepQuery(e,"itemStyle.normal.color"),c.seriesIndex,c.dataIndex,c.data),d&&c.type!=i.CHART_TYPE_K&&this.setColor(b,d),this._selectedMap[b]=null!=this._selectedMap[b]?this._selectedMap[b]:!0):this._hasDataMap[b]=!1)}this.clear(),this._buildShape()},getRelatedAmount:function(a){for(var b,c=0,d=this.option.series,e=0,f=d.length;f>e;e++)if(d[e].name===a&&c++,d[e].type===i.CHART_TYPE_PIE||d[e].type===i.CHART_TYPE_RADAR||d[e].type===i.CHART_TYPE_CHORD||d[e].type===i.CHART_TYPE_FORCE||d[e].type===i.CHART_TYPE_FUNNEL){b=d[e].type!=i.CHART_TYPE_FORCE?d[e].data:d[e].categories;for(var g=0,h=b.length;h>g;g++)b[g].name===a&&"-"!=b[g].value&&c++}return c},setColor:function(a,b){this._colorMap[a]=b},getColor:function(a){return this._colorMap[a]||(this._colorMap[a]=this.zr.getColor(this._colorIndex++)),this._colorMap[a]},hasColor:function(a){return this._colorMap[a]?this._colorMap[a]:!1},add:function(a,b){for(var c=this.legendOption.data,d=0,e=c.length;e>d;d++)if(this._getName(c[d])===a)return;this.legendOption.data.push(a),this.setColor(a,b),this._selectedMap[a]=!0,this._hasDataMap[a]=!0},del:function(a){for(var b=this.legendOption.data,c=0,d=b.length;d>c;c++)if(this._getName(b[c])===a)return this.legendOption.data.splice(c,1)},getItemShape:function(a){if(null!=a)for(var b,c=0,d=this.shapeList.length;d>c;c++)if(b=this.shapeList[c],b._name===a&&"text"!=b.type)return b},setItemShape:function(a,b){for(var c,d=0,e=this.shapeList.length;e>d;d++)c=this.shapeList[d],c._name===a&&"text"!=c.type&&(this._selectedMap[a]||(b.style.color="#ccc",b.style.strokeColor="#ccc"),this.zr.modShape(c.id,b))},isSelected:function(a){return"undefined"!=typeof this._selectedMap[a]?this._selectedMap[a]:!0},getSelectedMap:function(){return this._selectedMap},setSelected:function(a,b){if("single"===this.legendOption.selectedMode)for(var c in this._selectedMap)this._selectedMap[c]=!1;this._selectedMap[a]=b,this.messageCenter.dispatch(i.EVENT.LEGEND_SELECTED,null,{selected:this._selectedMap,target:a},this.myChart)},onlegendSelected:function(a,b){var c=a.selected;for(var d in c)this._selectedMap[d]!=c[d]&&(b.needRefresh=!0),this._selectedMap[d]=c[d]}};var l={line:function(a,b){var c=b.height/2;a.moveTo(b.x,b.y+c),a.lineTo(b.x+b.width,b.y+c)},pie:function(a,b){var c=b.x,d=b.y,e=b.width,g=b.height;f.prototype.buildPath(a,{x:c+e/2,y:d+g+2,r:g,r0:6,startAngle:45,endAngle:135})},eventRiver:function(a,b){var c=b.x,d=b.y,e=b.width,f=b.height;a.moveTo(c,d+f),a.bezierCurveTo(c+e,d+f,c,d+4,c+e,d+4),a.lineTo(c+e,d),a.bezierCurveTo(c,d,c+e,d+f-4,c,d+f-4),a.lineTo(c,d+f)},k:function(a,b){var c=b.x,d=b.y,e=b.width,f=b.height;h.prototype.buildPath(a,{x:c+e/2,y:[d+1,d+1,d+f-6,d+f],width:e-6})},bar:function(a,b){var c=b.x,d=b.y+1,e=b.width,f=b.height-2,g=3;a.moveTo(c+g,d),a.lineTo(c+e-g,d),a.quadraticCurveTo(c+e,d,c+e,d+g),a.lineTo(c+e,d+f-g),a.quadraticCurveTo(c+e,d+f,c+e-g,d+f),a.lineTo(c+g,d+f),a.quadraticCurveTo(c,d+f,c,d+f-g),a.lineTo(c,d+g),a.quadraticCurveTo(c,d,c+g,d)},force:function(a,b){g.prototype.iconLibrary.circle(a,b)},radar:function(a,b){var c=6,d=b.x+b.width/2,e=b.y+b.height/2,f=b.height/2,g=2*Math.PI/c,h=-Math.PI/2,i=d+f*Math.cos(h),j=e+f*Math.sin(h);a.moveTo(i,j),h+=g;for(var k=0,l=c-1;l>k;k++)a.lineTo(d+f*Math.cos(h),e+f*Math.sin(h)),h+=g;a.lineTo(i,j)}};l.chord=l.pie,l.map=l.bar;for(var m in l)g.prototype.iconLibrary["legendicon"+m]=l[m];return j.inherits(b,c),a("../component").define("legend",b),b}),c("echarts/component/timeline",["require","./base","zrender/shape/Rectangle","../util/shape/Icon","../util/shape/Chain","../config","zrender/tool/util","zrender/tool/area","zrender/tool/event","../component"],function(a){function b(a,b,c,e,f){d.call(this,a,b,c,e,f);var g=this;if(g._onclick=function(a){return g.__onclick(a)},g._ondrift=function(a,b){return g.__ondrift(this,a,b)},g._ondragend=function(){return g.__ondragend()},g._setCurrentOption=function(){var a=g.timelineOption;g.currentIndex%=a.data.length;var b=g.options[g.currentIndex]||{};g.myChart._setOption(b,a.notMerge,!0),g.messageCenter.dispatch(h.EVENT.TIMELINE_CHANGED,null,{currentIndex:g.currentIndex,data:null!=a.data[g.currentIndex].name?a.data[g.currentIndex].name:a.data[g.currentIndex]},g.myChart)},g._onFrame=function(){g._setCurrentOption(),g._syncHandleShape(),g.timelineOption.autoPlay&&(g.playTicket=setTimeout(function(){return g.currentIndex+=1,!g.timelineOption.loop&&g.currentIndex>=g.timelineOption.data.length?(g.currentIndex=g.timelineOption.data.length-1,void g.stop()):void g._onFrame()},g.timelineOption.playInterval))},this.setTheme(!1),this.options=this.option.options,this.currentIndex=this.timelineOption.currentIndex%this.timelineOption.data.length,this.timelineOption.notMerge||0===this.currentIndex||(this.options[this.currentIndex]=i.merge(this.options[this.currentIndex],this.options[0])),this.timelineOption.show&&(this._buildShape(),this._syncHandleShape()),this._setCurrentOption(),this.timelineOption.autoPlay){var g=this;this.playTicket=setTimeout(function(){g.play()},null!=this.ecTheme.animationDuration?this.ecTheme.animationDuration:h.animationDuration)}}function c(a,b){var c=2,d=b.x+c,e=b.y+c+2,g=b.width-c,h=b.height-c,i=b.symbol;if("last"===i)a.moveTo(d+g-2,e+h/3),a.lineTo(d+g-2,e),a.lineTo(d+2,e+h/2),a.lineTo(d+g-2,e+h),a.lineTo(d+g-2,e+h/3*2),a.moveTo(d,e),a.lineTo(d,e);else if("next"===i)a.moveTo(d+2,e+h/3),a.lineTo(d+2,e),a.lineTo(d+g-2,e+h/2),a.lineTo(d+2,e+h),a.lineTo(d+2,e+h/3*2),a.moveTo(d,e),a.lineTo(d,e);else if("play"===i)if("stop"===b.status)a.moveTo(d+2,e),a.lineTo(d+g-2,e+h/2),a.lineTo(d+2,e+h),a.lineTo(d+2,e);else{var j="both"===b.brushType?2:3;a.rect(d+2,e,j,h),a.rect(d+g-j-2,e,j,h)}else if(i.match("image")){var k="";k=i.replace(new RegExp("^image:\\/\\/"),""),(i=f.prototype.iconLibrary.image)(a,{x:d,y:e,width:g,height:h,image:k})}}var d=a("./base"),e=a("zrender/shape/Rectangle"),f=a("../util/shape/Icon"),g=a("../util/shape/Chain"),h=a("../config");h.timeline={zlevel:0,z:4,show:!0,type:"time",notMerge:!1,realtime:!0,x:80,x2:80,y2:0,height:50,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,controlPosition:"left",autoPlay:!1,loop:!0,playInterval:2e3,lineStyle:{width:1,color:"#666",type:"dashed"},label:{show:!0,interval:"auto",rotate:0,textStyle:{color:"#333"}},checkpointStyle:{symbol:"auto",symbolSize:"auto",color:"auto",borderColor:"auto",borderWidth:"auto",label:{show:!1,textStyle:{color:"auto"}}},controlStyle:{itemSize:15,itemGap:5,normal:{color:"#333"},emphasis:{color:"#1e90ff"}},symbol:"emptyDiamond",symbolSize:4,currentIndex:0};var i=a("zrender/tool/util"),j=a("zrender/tool/area"),k=a("zrender/tool/event");return b.prototype={type:h.COMPONENT_TYPE_TIMELINE,_buildShape:function(){if(this._location=this._getLocation(),this._buildBackground(),this._buildControl(),this._chainPoint=this._getChainPoint(),this.timelineOption.label.show)for(var a=this._getInterval(),b=0,c=this._chainPoint.length;c>b;b+=a)this._chainPoint[b].showLabel=!0;this._buildChain(),this._buildHandle();for(var b=0,d=this.shapeList.length;d>b;b++)this.zr.addShape(this.shapeList[b])},_getLocation:function(){var a,b=this.timelineOption,c=this.reformCssArray(this.timelineOption.padding),d=this.zr.getWidth(),e=this.parsePercent(b.x,d),f=this.parsePercent(b.x2,d);null==b.width?(a=d-e-f,f=d-f):(a=this.parsePercent(b.width,d),f=e+a);var g,h,i=this.zr.getHeight(),j=this.parsePercent(b.height,i);return null!=b.y?(g=this.parsePercent(b.y,i),h=g+j):(h=i-this.parsePercent(b.y2,i),g=h-j),{x:e+c[3],y:g+c[0],x2:f-c[1],y2:h-c[2],width:a-c[1]-c[3],height:j-c[0]-c[2]}},_getReformedLabel:function(a){var b=this.timelineOption,c=null!=b.data[a].name?b.data[a].name:b.data[a],d=b.data[a].formatter||b.label.formatter;return d&&("function"==typeof d?c=d.call(this.myChart,c):"string"==typeof d&&(c=d.replace("{value}",c))),c},_getInterval:function(){var a=this._chainPoint,b=this.timelineOption,c=b.label.interval;if("auto"===c){var d=b.label.textStyle.fontSize,e=b.data,f=b.data.length;if(f>3){var g,h,i=!1;for(c=0;!i&&f>c;){c++,i=!0;for(var k=c;f>k;k+=c){if(g=a[k].x-a[k-c].x,0!==b.label.rotate)h=d;else if(e[k].textStyle)h=j.getTextWidth(a[k].name,a[k].textFont);else{var l=a[k].name+"",m=(l.match(/\w/g)||"").length,n=l.length-m;h=m*d*2/3+n*d}if(h>g){i=!1;break}}}}else c=1}else c=c-0+1;return c},_getChainPoint:function(){function a(a){return null!=j[a].name?j[a].name:j[a]+""}var b,c=this.timelineOption,d=c.symbol.toLowerCase(),e=c.symbolSize,f=c.label.rotate,g=c.label.textStyle,h=this.getFont(g),j=c.data,k=this._location.x,l=this._location.y+this._location.height/4*3,m=this._location.x2-this._location.x,n=j.length,o=[];if(n>1){var p=m/n;if(p=p>50?50:20>p?5:p,m-=2*p,"number"===c.type)for(var q=0;n>q;q++)o.push(k+p+m/(n-1)*q);else{o[0]=new Date(a(0).replace(/-/g,"/")),o[n-1]=new Date(a(n-1).replace(/-/g,"/"))-o[0];for(var q=1;n>q;q++)o[q]=k+p+m*(new Date(a(q).replace(/-/g,"/"))-o[0])/o[n-1];o[0]=k+p}}else o.push(k+m/2);for(var r,s,t,u,v,w=[],q=0;n>q;q++)k=o[q],r=j[q].symbol&&j[q].symbol.toLowerCase()||d,r.match("empty")?(r=r.replace("empty",""),t=!0):t=!1,r.match("star")&&(s=r.replace("star","")-0||5,r="star"),b=j[q].textStyle?i.merge(j[q].textStyle||{},g):g,u=b.align||"center",f?(u=f>0?"right":"left",v=[f*Math.PI/180,k,l-5]):v=!1,w.push({x:k,n:s,isEmpty:t,symbol:r,symbolSize:j[q].symbolSize||e,color:j[q].color,borderColor:j[q].borderColor,borderWidth:j[q].borderWidth,name:this._getReformedLabel(q),textColor:b.color,textAlign:u,textBaseline:b.baseline||"middle",textX:k,textY:l-(f?5:0),textFont:j[q].textStyle?this.getFont(b):h,rotation:v,showLabel:!1});return w},_buildBackground:function(){var a=this.timelineOption,b=this.reformCssArray(this.timelineOption.padding),c=this._location.width,d=this._location.height;(0!==a.borderWidth||"rgba(0,0,0,0)"!=a.backgroundColor.replace(/\s/g,""))&&this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._location.x-b[3],y:this._location.y-b[0],width:c+b[1]+b[3],height:d+b[0]+b[2],brushType:0===a.borderWidth?"fill":"both",color:a.backgroundColor,strokeColor:a.borderColor,lineWidth:a.borderWidth}}))},_buildControl:function(){var a=this,b=this.timelineOption,c=b.lineStyle,d=b.controlStyle;if("none"!==b.controlPosition){var e,g=d.itemSize,h=d.itemGap;"left"===b.controlPosition?(e=this._location.x,this._location.x+=3*(g+h)):(e=this._location.x2-(3*(g+h)-h),this._location.x2-=3*(g+h));var j=this._location.y,k={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{iconType:"timelineControl",symbol:"last",x:e,y:j,width:g,height:g,brushType:"stroke",color:d.normal.color,strokeColor:d.normal.color,lineWidth:c.width},highlightStyle:{color:d.emphasis.color,strokeColor:d.emphasis.color,lineWidth:c.width+1},clickable:!0};this._ctrLastShape=new f(k),this._ctrLastShape.onclick=function(){a.last()},this.shapeList.push(this._ctrLastShape),e+=g+h,this._ctrPlayShape=new f(i.clone(k)),this._ctrPlayShape.style.brushType="fill",this._ctrPlayShape.style.symbol="play",this._ctrPlayShape.style.status=this.timelineOption.autoPlay?"playing":"stop",this._ctrPlayShape.style.x=e,this._ctrPlayShape.onclick=function(){"stop"===a._ctrPlayShape.style.status?a.play():a.stop()},this.shapeList.push(this._ctrPlayShape),e+=g+h,this._ctrNextShape=new f(i.clone(k)),this._ctrNextShape.style.symbol="next",this._ctrNextShape.style.x=e,this._ctrNextShape.onclick=function(){a.next()},this.shapeList.push(this._ctrNextShape)}},_buildChain:function(){var a=this.timelineOption,b=a.lineStyle;this._timelineShae={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:this._location.x,y:this.subPixelOptimize(this._location.y,b.width),width:this._location.x2-this._location.x,height:this._location.height,chainPoint:this._chainPoint,brushType:"both",strokeColor:b.color,lineWidth:b.width,lineType:b.type},hoverable:!1,clickable:!0,onclick:this._onclick},this._timelineShae=new g(this._timelineShae),this.shapeList.push(this._timelineShae)},_buildHandle:function(){var a=this._chainPoint[this.currentIndex],b=a.symbolSize+1;b=5>b?5:b,this._handleShape={zlevel:this.getZlevelBase(),z:this.getZBase()+1,hoverable:!1,draggable:!0,style:{iconType:"diamond",n:a.n,x:a.x-b,y:this._location.y+this._location.height/4-b,width:2*b,height:2*b,brushType:"both",textPosition:"specific",textX:a.x,textY:this._location.y-this._location.height/4,textAlign:"center",textBaseline:"middle"},highlightStyle:{},ondrift:this._ondrift,ondragend:this._ondragend},this._handleShape=new f(this._handleShape),this.shapeList.push(this._handleShape)},_syncHandleShape:function(){if(this.timelineOption.show){var a=this.timelineOption,b=a.checkpointStyle,c=this._chainPoint[this.currentIndex];this._handleShape.style.text=b.label.show?c.name:"",this._handleShape.style.textFont=c.textFont,this._handleShape.style.n=c.n,"auto"===b.symbol?this._handleShape.style.iconType="none"!=c.symbol?c.symbol:"diamond":(this._handleShape.style.iconType=b.symbol,b.symbol.match("star")&&(this._handleShape.style.n=b.symbol.replace("star","")-0||5,this._handleShape.style.iconType="star"));var d;"auto"===b.symbolSize?(d=c.symbolSize+2,d=5>d?5:d):d=b.symbolSize-0,this._handleShape.style.color="auto"===b.color?c.color?c.color:a.controlStyle.emphasis.color:b.color,this._handleShape.style.textColor="auto"===b.label.textStyle.color?this._handleShape.style.color:b.label.textStyle.color,this._handleShape.highlightStyle.strokeColor=this._handleShape.style.strokeColor="auto"===b.borderColor?c.borderColor?c.borderColor:"#fff":b.borderColor,this._handleShape.style.lineWidth="auto"===b.borderWidth?c.borderWidth?c.borderWidth:0:b.borderWidth-0,this._handleShape.highlightStyle.lineWidth=this._handleShape.style.lineWidth+1,this.zr.animate(this._handleShape.id,"style").when(500,{x:c.x-d,textX:c.x,y:this._location.y+this._location.height/4-d,width:2*d,height:2*d}).start("ExponentialOut")}},_findChainIndex:function(a){var b=this._chainPoint,c=b.length;if(a<=b[0].x)return 0;if(a>=b[c-1].x)return c-1;for(var d=0;c-1>d;d++)if(a>=b[d].x&&a<=b[d+1].x)return Math.abs(a-b[d].x)<Math.abs(a-b[d+1].x)?d:d+1},__onclick:function(a){var b=k.getX(a.event),c=this._findChainIndex(b);return c===this.currentIndex?!0:(this.currentIndex=c,this.timelineOption.autoPlay&&this.stop(),clearTimeout(this.playTicket),void this._onFrame())},__ondrift:function(a,b){this.timelineOption.autoPlay&&this.stop();var c,d=this._chainPoint,e=d.length;a.style.x+b<=d[0].x-d[0].symbolSize?(a.style.x=d[0].x-d[0].symbolSize,c=0):a.style.x+b>=d[e-1].x-d[e-1].symbolSize?(a.style.x=d[e-1].x-d[e-1].symbolSize,c=e-1):(a.style.x+=b,c=this._findChainIndex(a.style.x));var f=d[c],g=f.symbolSize+2;if(a.style.iconType=f.symbol,a.style.n=f.n,a.style.textX=a.style.x+g/2,a.style.y=this._location.y+this._location.height/4-g,a.style.width=2*g,a.style.height=2*g,a.style.text=f.name,c===this.currentIndex)return!0;if(this.currentIndex=c,this.timelineOption.realtime){clearTimeout(this.playTicket);var h=this;this.playTicket=setTimeout(function(){h._setCurrentOption()},200)}return!0},__ondragend:function(){this.isDragend=!0},ondragend:function(a,b){this.isDragend&&a.target&&(!this.timelineOption.realtime&&this._setCurrentOption(),b.dragOut=!0,b.dragIn=!0,b.needRefresh=!1,this.isDragend=!1,this._syncHandleShape())},last:function(){return this.timelineOption.autoPlay&&this.stop(),this.currentIndex-=1,this.currentIndex<0&&(this.currentIndex=this.timelineOption.data.length-1),this._onFrame(),this.currentIndex},next:function(){return this.timelineOption.autoPlay&&this.stop(),this.currentIndex+=1,this.currentIndex>=this.timelineOption.data.length&&(this.currentIndex=0),this._onFrame(),this.currentIndex},play:function(a,b){return this._ctrPlayShape&&"playing"!=this._ctrPlayShape.style.status&&(this._ctrPlayShape.style.status="playing",this.zr.modShape(this._ctrPlayShape.id),this.zr.refreshNextFrame()),this.timelineOption.autoPlay=null!=b?b:!0,this.timelineOption.autoPlay||clearTimeout(this.playTicket),this.currentIndex=null!=a?a:this.currentIndex+1,this.currentIndex>=this.timelineOption.data.length&&(this.currentIndex=0),this._onFrame(),this.currentIndex},stop:function(){return this._ctrPlayShape&&"stop"!=this._ctrPlayShape.style.status&&(this._ctrPlayShape.style.status="stop",this.zr.modShape(this._ctrPlayShape.id),this.zr.refreshNextFrame()),this.timelineOption.autoPlay=!1,clearTimeout(this.playTicket),this.currentIndex},resize:function(){this.timelineOption.show&&(this.clear(),this._buildShape(),this._syncHandleShape())},setTheme:function(a){this.timelineOption=this.reformOption(i.clone(this.option.timeline)),this.timelineOption.label.textStyle=this.getTextStyle(this.timelineOption.label.textStyle),this.timelineOption.checkpointStyle.label.textStyle=this.getTextStyle(this.timelineOption.checkpointStyle.label.textStyle),this.myChart.canvasSupported||(this.timelineOption.realtime=!1),this.timelineOption.show&&a&&(this.clear(),this._buildShape(),this._syncHandleShape())},onbeforDispose:function(){clearTimeout(this.playTicket)}},f.prototype.iconLibrary.timelineControl=c,i.inherits(b,d),a("../component").define("timeline",b),b}),c("zrender/loadingEffect/Bar",["require","./Base","../tool/util","../tool/color","../shape/Rectangle"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/color"),f=a("../shape/Rectangle");return d.inherits(b,c),b.prototype._start=function(a,b){var c=d.merge(this.options,{textStyle:{color:"#888"},backgroundColor:"rgba(250, 250, 250, 0.8)",effectOption:{x:0,y:this.canvasHeight/2-30,width:this.canvasWidth,height:5,brushType:"fill",timeInterval:100}}),g=this.createTextShape(c.textStyle),h=this.createBackgroundShape(c.backgroundColor),i=c.effectOption,j=new f({highlightStyle:d.clone(i)});return j.highlightStyle.color=i.color||e.getLinearGradient(i.x,i.y,i.x+i.width,i.y+i.height,[[0,"#ff6400"],[.5,"#ffe100"],[1,"#b1ff00"]]),null!=c.progress?(a(h),j.highlightStyle.width=this.adjust(c.progress,[0,1])*c.effectOption.width,a(j),a(g),void b()):(j.highlightStyle.width=0,setInterval(function(){a(h),j.highlightStyle.width<i.width?j.highlightStyle.width+=8:j.highlightStyle.width=0,a(j),a(g),b()},i.timeInterval))},b}),c("zrender/loadingEffect/Bubble",["require","./Base","../tool/util","../tool/color","../shape/Circle"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/color"),f=a("../shape/Circle");return d.inherits(b,c),b.prototype._start=function(a,b){for(var c=d.merge(this.options,{textStyle:{color:"#888"},backgroundColor:"rgba(250, 250, 250, 0.8)",effect:{n:50,lineWidth:2,brushType:"stroke",color:"random",timeInterval:100}}),g=this.createTextShape(c.textStyle),h=this.createBackgroundShape(c.backgroundColor),i=c.effect,j=i.n,k=i.brushType,l=i.lineWidth,m=[],n=this.canvasWidth,o=this.canvasHeight,p=0;j>p;p++){var q="random"==i.color?e.alpha(e.random(),.3):i.color;m[p]=new f({highlightStyle:{x:Math.ceil(Math.random()*n),y:Math.ceil(Math.random()*o),r:Math.ceil(40*Math.random()),brushType:k,color:q,strokeColor:q,lineWidth:l},animationY:Math.ceil(20*Math.random())})}return setInterval(function(){a(h);for(var c=0;j>c;c++){var d=m[c].highlightStyle;d.y-m[c].animationY+d.r<=0&&(m[c].highlightStyle.y=o+d.r,m[c].highlightStyle.x=Math.ceil(Math.random()*n)),m[c].highlightStyle.y-=m[c].animationY,a(m[c])}a(g),b()},i.timeInterval)},b}),c("zrender/loadingEffect/DynamicLine",["require","./Base","../tool/util","../tool/color","../shape/Line"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/color"),f=a("../shape/Line");return d.inherits(b,c),b.prototype._start=function(a,b){for(var c=d.merge(this.options,{textStyle:{color:"#fff"},backgroundColor:"rgba(0, 0, 0, 0.8)",effectOption:{n:30,lineWidth:1,color:"random",timeInterval:100}}),g=this.createTextShape(c.textStyle),h=this.createBackgroundShape(c.backgroundColor),i=c.effectOption,j=i.n,k=i.lineWidth,l=[],m=this.canvasWidth,n=this.canvasHeight,o=0;j>o;o++){var p=-Math.ceil(1e3*Math.random()),q=Math.ceil(400*Math.random()),r=Math.ceil(Math.random()*n),s="random"==i.color?e.random():i.color;l[o]=new f({highlightStyle:{xStart:p,yStart:r,xEnd:p+q,yEnd:r,strokeColor:s,lineWidth:k},animationX:Math.ceil(100*Math.random()),len:q})}return setInterval(function(){a(h);for(var c=0;j>c;c++){var d=l[c].highlightStyle;d.xStart>=m&&(l[c].len=Math.ceil(400*Math.random()),d.xStart=-400,d.xEnd=-400+l[c].len,d.yStart=Math.ceil(Math.random()*n),d.yEnd=d.yStart),d.xStart+=l[c].animationX,d.xEnd+=l[c].animationX,a(l[c])}a(g),b()},i.timeInterval)},b}),c("zrender/loadingEffect/Ring",["require","./Base","../tool/util","../tool/color","../shape/Ring","../shape/Sector"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/color"),f=a("../shape/Ring"),g=a("../shape/Sector");return d.inherits(b,c),b.prototype._start=function(a,b){var c=d.merge(this.options,{textStyle:{color:"#07a"},backgroundColor:"rgba(250, 250, 250, 0.8)",effect:{x:this.canvasWidth/2,y:this.canvasHeight/2,r0:60,r:100,color:"#bbdcff",brushType:"fill",textPosition:"inside",textFont:"normal 30px verdana",textColor:"rgba(30, 144, 255, 0.6)",timeInterval:100}}),h=c.effect,i=c.textStyle;null==i.x&&(i.x=h.x),null==i.y&&(i.y=h.y+(h.r0+h.r)/2-5);for(var j=this.createTextShape(c.textStyle),k=this.createBackgroundShape(c.backgroundColor),l=h.x,m=h.y,n=h.r0+6,o=h.r-6,p=h.color,q=e.lift(p,.1),r=new f({highlightStyle:d.clone(h)}),s=[],t=e.getGradientColors(["#ff6400","#ffe100","#97ff00"],25),u=15,v=240,w=0;16>w;w++)s.push(new g({highlightStyle:{x:l,y:m,r0:n,r:o,startAngle:v-u,endAngle:v,brushType:"fill",color:q},_color:e.getLinearGradient(l+n*Math.cos(v,!0),m-n*Math.sin(v,!0),l+n*Math.cos(v-u,!0),m-n*Math.sin(v-u,!0),[[0,t[2*w]],[1,t[2*w+1]]])})),v-=u;v=360;for(var w=0;4>w;w++)s.push(new g({highlightStyle:{x:l,y:m,r0:n,r:o,startAngle:v-u,endAngle:v,brushType:"fill",color:q},_color:e.getLinearGradient(l+n*Math.cos(v,!0),m-n*Math.sin(v,!0),l+n*Math.cos(v-u,!0),m-n*Math.sin(v-u,!0),[[0,t[2*w+32]],[1,t[2*w+33]]])})),v-=u;var x=0;if(null!=c.progress){a(k),x=100*this.adjust(c.progress,[0,1]).toFixed(2)/5,r.highlightStyle.text=5*x+"%",a(r);for(var w=0;20>w;w++)s[w].highlightStyle.color=x>w?s[w]._color:q,a(s[w]);return a(j),void b()}return setInterval(function(){a(k),x+=x>=20?-20:1,a(r);for(var c=0;20>c;c++)s[c].highlightStyle.color=x>c?s[c]._color:q,a(s[c]);a(j),b()},h.timeInterval)},b}),c("zrender/loadingEffect/Spin",["require","./Base","../tool/util","../tool/color","../tool/area","../shape/Sector"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/color"),f=a("../tool/area"),g=a("../shape/Sector");return d.inherits(b,c),b.prototype._start=function(a,b){var c=d.merge(this.options,{textStyle:{color:"#fff",textAlign:"start"},backgroundColor:"rgba(0, 0, 0, 0.8)"}),h=this.createTextShape(c.textStyle),i=10,j=f.getTextWidth(h.highlightStyle.text,h.highlightStyle.textFont),k=f.getTextHeight(h.highlightStyle.text,h.highlightStyle.textFont),l=d.merge(this.options.effect||{},{r0:9,r:15,n:18,color:"#fff",timeInterval:100}),m=this.getLocation(this.options.textStyle,j+i+2*l.r,Math.max(2*l.r,k));l.x=m.x+l.r,l.y=h.highlightStyle.y=m.y+m.height/2,h.highlightStyle.x=l.x+l.r+i;for(var n=this.createBackgroundShape(c.backgroundColor),o=l.n,p=l.x,q=l.y,r=l.r0,s=l.r,t=l.color,u=[],v=Math.round(180/o),w=0;o>w;w++)u[w]=new g({highlightStyle:{x:p,y:q,r0:r,r:s,startAngle:v*w*2,endAngle:v*w*2+v,color:e.alpha(t,(w+1)/o),brushType:"fill"}});var x=[0,p,q];return setInterval(function(){a(n),x[0]-=.3;for(var c=0;o>c;c++)u[c].rotation=x,a(u[c]);a(h),b()},l.timeInterval)},b}),c("zrender/shape/Image",["require","./Base","../tool/util"],function(a){var b=a("./Base"),c=function(a){b.call(this,a)};return c.prototype={type:"image",brush:function(a,b,c){var d=this.style||{};b&&(d=this.getHighlightStyle(d,this.highlightStyle||{}));var e=d.image,f=this;if(this._imageCache||(this._imageCache={}),"string"==typeof e){var g=e;this._imageCache[g]?e=this._imageCache[g]:(e=new Image,e.onload=function(){e.onload=null,f.modSelf(),c()},e.src=g,this._imageCache[g]=e)}if(e){if("IMG"==e.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=e.readyState)return}else if(!e.complete)return;var h=d.width||e.width,i=d.height||e.height,j=d.x,k=d.y;if(!e.width||!e.height)return;if(a.save(),this.doClip(a),this.setContext(a,d),this.setTransform(a),d.sWidth&&d.sHeight){var l=d.sx||0,m=d.sy||0;a.drawImage(e,l,m,d.sWidth,d.sHeight,j,k,h,i)}else if(d.sx&&d.sy){var l=d.sx,m=d.sy,n=h-l,o=i-m;a.drawImage(e,l,m,n,o,j,k,h,i)}else a.drawImage(e,j,k,h,i);d.width||(d.width=h),d.height||(d.height=i),this.style.width||(this.style.width=h),this.style.height||(this.style.height=i),this.drawText(a,d,this.style),a.restore()}},getRect:function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}},clearCache:function(){this._imageCache={}}},a("../tool/util").inherits(c,b),c}),c("zrender/loadingEffect/Whirling",["require","./Base","../tool/util","../tool/area","../shape/Ring","../shape/Droplet","../shape/Circle"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/area"),f=a("../shape/Ring"),g=a("../shape/Droplet"),h=a("../shape/Circle");return d.inherits(b,c),b.prototype._start=function(a,b){var c=d.merge(this.options,{textStyle:{color:"#888",textAlign:"start"},backgroundColor:"rgba(250, 250, 250, 0.8)"}),i=this.createTextShape(c.textStyle),j=10,k=e.getTextWidth(i.highlightStyle.text,i.highlightStyle.textFont),l=e.getTextHeight(i.highlightStyle.text,i.highlightStyle.textFont),m=d.merge(this.options.effect||{},{r:18,colorIn:"#fff",colorOut:"#555",colorWhirl:"#6cf",timeInterval:50}),n=this.getLocation(this.options.textStyle,k+j+2*m.r,Math.max(2*m.r,l));m.x=n.x+m.r,m.y=i.highlightStyle.y=n.y+n.height/2,i.highlightStyle.x=m.x+m.r+j;var o=this.createBackgroundShape(c.backgroundColor),p=new g({highlightStyle:{a:Math.round(m.r/2),b:Math.round(m.r-m.r/6),brushType:"fill",color:m.colorWhirl}}),q=new h({highlightStyle:{r:Math.round(m.r/6),brushType:"fill",color:m.colorIn}}),r=new f({highlightStyle:{r0:Math.round(m.r-m.r/3),r:m.r,brushType:"fill",color:m.colorOut}}),s=[0,m.x,m.y];return p.highlightStyle.x=q.highlightStyle.x=r.highlightStyle.x=s[1],p.highlightStyle.y=q.highlightStyle.y=r.highlightStyle.y=s[2],setInterval(function(){a(o),a(r),s[0]-=.3,p.rotation=s,a(p),a(q),a(i),b()},m.timeInterval)},b}),c("echarts/theme/macarons",[],function(){var a={color:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],title:{textStyle:{fontWeight:"normal",color:"#008acd"}},dataRange:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},toolbox:{color:["#1e90ff","#1e90ff","#1e90ff","#1e90ff"],effectiveColor:"#ff4500"},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee"},categoryAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},polar:{axisLine:{lineStyle:{color:"#ddd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(200,200,200,0.2)"]}},splitLine:{lineStyle:{color:"#ddd"}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{normal:{color:"#008acd"},emphasis:{color:"#008acd"}},symbol:"emptyCircle",symbolSize:3},bar:{itemStyle:{normal:{barBorderRadius:5},emphasis:{barBorderRadius:5}}},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},k:{itemStyle:{normal:{color:"#d87a80",color0:"#2ec7c9",lineStyle:{color:"#d87a80",color0:"#2ec7c9"}}}},scatter:{symbol:"circle",symbolSize:4},radar:{symbol:"emptyCircle",symbolSize:3},map:{itemStyle:{normal:{areaStyle:{color:"#ddd"},label:{textStyle:{color:"#d87a80"}}},emphasis:{areaStyle:{color:"#fe994e"}}}},force:{itemStyle:{normal:{linkStyle:{color:"#1e90ff"}}}},chord:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}},emphasis:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}}}},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}},textStyle:{fontFamily:"微软雅黑, Arial, Verdana, sans-serif"}};return a}),c("echarts/theme/infographic",[],function(){var a={color:["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"],title:{textStyle:{fontWeight:"normal",color:"#27727B"}},dataRange:{x:"right",y:"center",itemWidth:5,itemHeight:25,color:["#C1232B","#FCCE10"]},toolbox:{color:["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD"],effectiveColor:"#ff4500"},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}}},dataZoom:{dataBackgroundColor:"rgba(181,195,52,0.3)",fillerColor:"rgba(181,195,52,0.2)",handleColor:"#27727B"},grid:{borderWidth:0},categoryAxis:{axisLine:{lineStyle:{color:"#27727B"}},splitLine:{show:!1}},valueAxis:{axisLine:{show:!1},splitArea:{show:!1},splitLine:{lineStyle:{color:["#ccc"],type:"dashed"}}},polar:{axisLine:{lineStyle:{color:"#ddd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(200,200,200,0.2)"]}},splitLine:{lineStyle:{color:"#ddd"}}},timeline:{lineStyle:{color:"#27727B"},controlStyle:{normal:{color:"#27727B"},emphasis:{color:"#27727B"}},symbol:"emptyCircle",symbolSize:3},line:{itemStyle:{normal:{borderWidth:2,borderColor:"#fff",lineStyle:{width:3}},emphasis:{borderWidth:0}},symbol:"circle",symbolSize:3.5},k:{itemStyle:{normal:{color:"#C1232B",color0:"#B5C334",lineStyle:{width:1,color:"#C1232B",color0:"#B5C334"}}}},scatter:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(200,200,200,0.5)"},emphasis:{borderWidth:0}},symbol:"star4",symbolSize:4},radar:{symbol:"emptyCircle",symbolSize:3},map:{itemStyle:{normal:{areaStyle:{color:"#ddd"},label:{textStyle:{color:"#C1232B"}}},emphasis:{areaStyle:{color:"#fe994e"},label:{textStyle:{color:"rgb(100,0,0)"}}}}},force:{itemStyle:{normal:{linkStyle:{color:"#27727B"}}}},chord:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}},emphasis:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}}}},gauge:{center:["50%","80%"],radius:"100%",startAngle:180,endAngle:0,axisLine:{show:!0,lineStyle:{color:[[.2,"#B5C334"],[.8,"#27727B"],[1,"#C1232B"]],width:"40%"}},axisTick:{splitNumber:2,length:5,lineStyle:{color:"#fff"}},axisLabel:{textStyle:{color:"#fff",fontWeight:"bolder"}},splitLine:{length:"5%",lineStyle:{color:"#fff"}},pointer:{width:"40%",length:"80%",color:"#fff"},title:{offsetCenter:[0,-20],textStyle:{color:"auto",fontSize:20
}},detail:{offsetCenter:[0,0],textStyle:{color:"auto",fontSize:40}}},textStyle:{fontFamily:"微软雅黑, Arial, Verdana, sans-serif"}};return a}),c("zrender/shape/Rectangle",["require","./Base","../tool/util"],function(a){var b=a("./Base"),c=function(a){b.call(this,a)};return c.prototype={type:"rectangle",_buildRadiusPath:function(a,b){var c,d,e,f,g=b.x,h=b.y,i=b.width,j=b.height,k=b.radius;"number"==typeof k?c=d=e=f=k:k instanceof Array?1===k.length?c=d=e=f=k[0]:2===k.length?(c=e=k[0],d=f=k[1]):3===k.length?(c=k[0],d=f=k[1],e=k[2]):(c=k[0],d=k[1],e=k[2],f=k[3]):c=d=e=f=0;var l;c+d>i&&(l=c+d,c*=i/l,d*=i/l),e+f>i&&(l=e+f,e*=i/l,f*=i/l),d+e>j&&(l=d+e,d*=j/l,e*=j/l),c+f>j&&(l=c+f,c*=j/l,f*=j/l),a.moveTo(g+c,h),a.lineTo(g+i-d,h),0!==d&&a.quadraticCurveTo(g+i,h,g+i,h+d),a.lineTo(g+i,h+j-e),0!==e&&a.quadraticCurveTo(g+i,h+j,g+i-e,h+j),a.lineTo(g+f,h+j),0!==f&&a.quadraticCurveTo(g,h+j,g,h+j-f),a.lineTo(g,h+c),0!==c&&a.quadraticCurveTo(g,h,g+c,h)},buildPath:function(a,b){b.radius?this._buildRadiusPath(a,b):(a.moveTo(b.x,b.y),a.lineTo(b.x+b.width,b.y),a.lineTo(b.x+b.width,b.y+b.height),a.lineTo(b.x,b.y+b.height),a.lineTo(b.x,b.y)),a.closePath()},getRect:function(a){if(a.__rect)return a.__rect;var b;return b="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0,a.__rect={x:Math.round(a.x-b/2),y:Math.round(a.y-b/2),width:a.width+b,height:a.height+b},a.__rect}},a("../tool/util").inherits(c,b),c}),c("echarts/util/accMath",[],function(){function a(a,b){var c=a.toString(),d=b.toString(),e=0;try{e=d.split(".")[1].length}catch(f){}try{e-=c.split(".")[1].length}catch(f){}return(c.replace(".","")-0)/(d.replace(".","")-0)*Math.pow(10,e)}function b(a,b){var c=a.toString(),d=b.toString(),e=0;try{e+=c.split(".")[1].length}catch(f){}try{e+=d.split(".")[1].length}catch(f){}return(c.replace(".","")-0)*(d.replace(".","")-0)/Math.pow(10,e)}function c(a,b){var c=0,d=0;try{c=a.toString().split(".")[1].length}catch(e){}try{d=b.toString().split(".")[1].length}catch(e){}var f=Math.pow(10,Math.max(c,d));return(Math.round(a*f)+Math.round(b*f))/f}function d(a,b){return c(a,-b)}return{accDiv:a,accMul:b,accAdd:c,accSub:d}}),c("echarts/util/shape/Symbol",["require","zrender/shape/Base","zrender/shape/Polygon","zrender/tool/util","./normalIsCover"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/shape/Polygon"),e=new d({}),f=a("zrender/tool/util");return b.prototype={type:"symbol",buildPath:function(a,b){var c=b.pointList,d=c.length;if(0!==d)for(var e,f,g,h,i,j=1e4,k=Math.ceil(d/j),l=c[0]instanceof Array,m=b.size?b.size:2,n=m,o=m/2,p=2*Math.PI,q=0;k>q;q++){a.beginPath(),e=q*j,f=e+j,f=f>d?d:f;for(var r=e;f>r;r++)if(b.random&&(g=b["randomMap"+r%20]/100,n=m*g*g,o=n/2),l?(h=c[r][0],i=c[r][1]):(h=c[r].x,i=c[r].y),3>n)a.rect(h-o,i-o,n,n);else switch(b.iconType){case"circle":a.moveTo(h,i),a.arc(h,i,o,0,p,!0);break;case"diamond":a.moveTo(h,i-o),a.lineTo(h+o/3,i-o/3),a.lineTo(h+o,i),a.lineTo(h+o/3,i+o/3),a.lineTo(h,i+o),a.lineTo(h-o/3,i+o/3),a.lineTo(h-o,i),a.lineTo(h-o/3,i-o/3),a.lineTo(h,i-o);break;default:a.rect(h-o,i-o,n,n)}if(a.closePath(),k-1>q)switch(b.brushType){case"both":a.fill(),b.lineWidth>0&&a.stroke();break;case"stroke":b.lineWidth>0&&a.stroke();break;default:a.fill()}}},getRect:function(a){return a.__rect||e.getRect(a)},isCover:a("./normalIsCover")},f.inherits(b,c),b}),c("zrender/shape/Line",["require","./Base","./util/dashedLineTo","../tool/util"],function(a){var b=a("./Base"),c=a("./util/dashedLineTo"),d=function(a){this.brushTypeOnly="stroke",this.textPosition="end",b.call(this,a)};return d.prototype={type:"line",buildPath:function(a,b){if(b.lineType&&"solid"!=b.lineType){if("dashed"==b.lineType||"dotted"==b.lineType){var d=(b.lineWidth||1)*("dashed"==b.lineType?5:1);c(a,b.xStart,b.yStart,b.xEnd,b.yEnd,d)}}else a.moveTo(b.xStart,b.yStart),a.lineTo(b.xEnd,b.yEnd)},getRect:function(a){if(a.__rect)return a.__rect;var b=a.lineWidth||1;return a.__rect={x:Math.min(a.xStart,a.xEnd)-b,y:Math.min(a.yStart,a.yEnd)-b,width:Math.abs(a.xStart-a.xEnd)+b,height:Math.abs(a.yStart-a.yEnd)+b},a.__rect}},a("../tool/util").inherits(d,b),d}),c("echarts/util/number",[],function(){function a(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}function b(b,c){return"string"==typeof b?a(b).match(/%$/)?parseFloat(b)/100*c:parseFloat(b):b}function c(a,c){return[b(c[0],a.getWidth()),b(c[1],a.getHeight())]}function d(a,c){c instanceof Array||(c=[0,c]);var d=Math.min(a.getWidth(),a.getHeight())/2;return[b(c[0],d),b(c[1],d)]}function e(a){return isNaN(a)?"-":(a=(a+"").split("."),a[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(a.length>1?"."+a[1]:""))}function f(a){for(var b=1,c=0;Math.round(a*b)/b!==a;)b*=10,c++;return c}return{parsePercent:b,parseCenter:c,parseRadius:d,addCommas:e,getPrecision:f}}),c("zrender/shape/Polygon",["require","./Base","./util/smoothSpline","./util/smoothBezier","./util/dashedLineTo","../tool/util"],function(a){var b=a("./Base"),c=a("./util/smoothSpline"),d=a("./util/smoothBezier"),e=a("./util/dashedLineTo"),f=function(a){b.call(this,a)};return f.prototype={type:"polygon",buildPath:function(a,b){var f=b.pointList;if(!(f.length<2)){if(b.smooth&&"spline"!==b.smooth){var g=d(f,b.smooth,!0,b.smoothConstraint);a.moveTo(f[0][0],f[0][1]);for(var h,i,j,k=f.length,l=0;k>l;l++)h=g[2*l],i=g[2*l+1],j=f[(l+1)%k],a.bezierCurveTo(h[0],h[1],i[0],i[1],j[0],j[1])}else if("spline"===b.smooth&&(f=c(f,!0)),b.lineType&&"solid"!=b.lineType){if("dashed"==b.lineType||"dotted"==b.lineType){var m=b._dashLength||(b.lineWidth||1)*("dashed"==b.lineType?5:1);b._dashLength=m,a.moveTo(f[0][0],f[0][1]);for(var l=1,n=f.length;n>l;l++)e(a,f[l-1][0],f[l-1][1],f[l][0],f[l][1],m);e(a,f[f.length-1][0],f[f.length-1][1],f[0][0],f[0][1],m)}}else{a.moveTo(f[0][0],f[0][1]);for(var l=1,n=f.length;n>l;l++)a.lineTo(f[l][0],f[l][1]);a.lineTo(f[0][0],f[0][1])}a.closePath()}},getRect:function(a){if(a.__rect)return a.__rect;for(var b=Number.MAX_VALUE,c=Number.MIN_VALUE,d=Number.MAX_VALUE,e=Number.MIN_VALUE,f=a.pointList,g=0,h=f.length;h>g;g++)f[g][0]<b&&(b=f[g][0]),f[g][0]>c&&(c=f[g][0]),f[g][1]<d&&(d=f[g][1]),f[g][1]>e&&(e=f[g][1]);var i;return i="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0,a.__rect={x:Math.round(b-i/2),y:Math.round(d-i/2),width:c-b+i,height:e-d+i},a.__rect}},a("../tool/util").inherits(f,b),f}),c("echarts/util/shape/Ribbon",["require","zrender/shape/Base","zrender/shape/util/PathProxy","zrender/tool/util","zrender/tool/area"],function(a){function b(a){c.call(this,a),this._pathProxy=new d}var c=a("zrender/shape/Base"),d=a("zrender/shape/util/PathProxy"),e=a("zrender/tool/util"),f=a("zrender/tool/area");return b.prototype={type:"ribbon",buildPath:function(a,b){var c=b.clockWise||!1,d=this._pathProxy;d.begin(a);var e=b.x,f=b.y,g=b.r,h=b.source0/180*Math.PI,i=b.source1/180*Math.PI,j=b.target0/180*Math.PI,k=b.target1/180*Math.PI,l=e+Math.cos(h)*g,m=f+Math.sin(h)*g,n=e+Math.cos(i)*g,o=f+Math.sin(i)*g,p=e+Math.cos(j)*g,q=f+Math.sin(j)*g,r=e+Math.cos(k)*g,s=f+Math.sin(k)*g;d.moveTo(l,m),d.arc(e,f,b.r,h,i,!c),d.bezierCurveTo(.7*(e-n)+n,.7*(f-o)+o,.7*(e-p)+p,.7*(f-q)+q,p,q),(b.source0!==b.target0||b.source1!==b.target1)&&(d.arc(e,f,b.r,j,k,!c),d.bezierCurveTo(.7*(e-r)+r,.7*(f-s)+s,.7*(e-l)+l,.7*(f-m)+m,l,m))},getRect:function(a){return a.__rect?a.__rect:(this._pathProxy.isEmpty()||this.buildPath(null,a),this._pathProxy.fastBoundingRect())},isCover:function(a,b){var c=this.getRect(this.style);return a>=c.x&&a<=c.x+c.width&&b>=c.y&&b<=c.y+c.height?f.isInsidePath(this._pathProxy.pathCommands,0,"fill",a,b):void 0}},e.inherits(b,c),b}),c("echarts/component/dataRange",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","../util/shape/HandlePolygon","../config","zrender/tool/util","zrender/tool/event","zrender/tool/area","zrender/tool/color","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f);var h=this;h._ondrift=function(a,b){return h.__ondrift(this,a,b)},h._ondragend=function(){return h.__ondragend()},h._dataRangeSelected=function(a){return h.__dataRangeSelected(a)},h._dispatchHoverLink=function(a){return h.__dispatchHoverLink(a)},h._onhoverlink=function(a){return h.__onhoverlink(a)},this._selectedMap={},this._range={},this.refresh(e),b.bind(g.EVENT.HOVER,this._onhoverlink)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Rectangle"),f=a("../util/shape/HandlePolygon"),g=a("../config");g.dataRange={zlevel:0,z:4,show:!0,orient:"vertical",x:"left",y:"bottom",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:20,itemHeight:14,precision:0,splitNumber:5,splitList:null,calculable:!1,selectedMode:!0,hoverLink:!0,realtime:!0,color:["#006edd","#e0ffff"],textStyle:{color:"#333"}};var h=a("zrender/tool/util"),i=a("zrender/tool/event"),j=a("zrender/tool/area"),k=a("zrender/tool/color");return b.prototype={type:g.COMPONENT_TYPE_DATARANGE,_textGap:10,_buildShape:function(){if(this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._isContinuity()?this._buildGradient():this._buildItem(),this.dataRangeOption.show)for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a]);this._syncShapeFromRange()},_buildItem:function(){var a,b,c,f,g=this._valueTextList,h=g.length,i=this.getFont(this.dataRangeOption.textStyle),k=this._itemGroupLocation.x,l=this._itemGroupLocation.y,m=this.dataRangeOption.itemWidth,n=this.dataRangeOption.itemHeight,o=this.dataRangeOption.itemGap,p=j.getTextHeight("国",i);"vertical"==this.dataRangeOption.orient&&"right"==this.dataRangeOption.x&&(k=this._itemGroupLocation.x+this._itemGroupLocation.width-m);var q=!0;this.dataRangeOption.text&&(q=!1,this.dataRangeOption.text[0]&&(c=this._getTextShape(k,l,this.dataRangeOption.text[0]),"horizontal"==this.dataRangeOption.orient?k+=j.getTextWidth(this.dataRangeOption.text[0],i)+this._textGap:(l+=p+this._textGap,c.style.y+=p/2+this._textGap,c.style.textBaseline="bottom"),this.shapeList.push(new d(c))));for(var r=0;h>r;r++)a=g[r],f=this.getColorByIndex(r),b=this._getItemShape(k,l,m,n,this._selectedMap[r]?f:"#ccc"),b._idx=r,b.onmousemove=this._dispatchHoverLink,this.dataRangeOption.selectedMode&&(b.clickable=!0,b.onclick=this._dataRangeSelected),this.shapeList.push(new e(b)),q&&(c={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:k+m+5,y:l,color:this._selectedMap[r]?this.dataRangeOption.textStyle.color:"#ccc",text:g[r],textFont:i,textBaseline:"top"},highlightStyle:{brushType:"fill"}},"vertical"==this.dataRangeOption.orient&&"right"==this.dataRangeOption.x&&(c.style.x-=m+10,c.style.textAlign="right"),c._idx=r,c.onmousemove=this._dispatchHoverLink,this.dataRangeOption.selectedMode&&(c.clickable=!0,c.onclick=this._dataRangeSelected),this.shapeList.push(new d(c))),"horizontal"==this.dataRangeOption.orient?k+=m+(q?5:0)+(q?j.getTextWidth(a,i):0)+o:l+=n+o;!q&&this.dataRangeOption.text[1]&&("horizontal"==this.dataRangeOption.orient?k=k-o+this._textGap:l=l-o+this._textGap,c=this._getTextShape(k,l,this.dataRangeOption.text[1]),"horizontal"!=this.dataRangeOption.orient&&(c.style.y-=5,c.style.textBaseline="top"),this.shapeList.push(new d(c)))},_buildGradient:function(){var b,c,f=this.getFont(this.dataRangeOption.textStyle),g=this._itemGroupLocation.x,h=this._itemGroupLocation.y,i=this.dataRangeOption.itemWidth,k=this.dataRangeOption.itemHeight,l=j.getTextHeight("国",f),m=10,n=!0;this.dataRangeOption.text&&(n=!1,this.dataRangeOption.text[0]&&(c=this._getTextShape(g,h,this.dataRangeOption.text[0]),"horizontal"==this.dataRangeOption.orient?g+=j.getTextWidth(this.dataRangeOption.text[0],f)+this._textGap:(h+=l+this._textGap,c.style.y+=l/2+this._textGap,c.style.textBaseline="bottom"),this.shapeList.push(new d(c))));for(var o=a("zrender/tool/color"),p=1/(this.dataRangeOption.color.length-1),q=[],r=0,s=this.dataRangeOption.color.length;s>r;r++)q.push([r*p,this.dataRangeOption.color[r]]);"horizontal"==this.dataRangeOption.orient?(b={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:g,y:h,width:i*m,height:k,color:o.getLinearGradient(g,h,g+i*m,h,q)},hoverable:!1},g+=i*m+this._textGap):(b={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:g,y:h,width:i,height:k*m,color:o.getLinearGradient(g,h,g,h+k*m,q)},hoverable:!1},h+=k*m+this._textGap),this.shapeList.push(new e(b)),this._calculableLocation=b.style,this.dataRangeOption.calculable&&(this._buildFiller(),this._bulidMask(),this._bulidHandle()),this._buildIndicator(),!n&&this.dataRangeOption.text[1]&&(c=this._getTextShape(g,h,this.dataRangeOption.text[1]),this.shapeList.push(new d(c)))},_buildIndicator:function(){var a,b,c=this._calculableLocation.x,d=this._calculableLocation.y,e=this._calculableLocation.width,g=this._calculableLocation.height,h=5;"horizontal"==this.dataRangeOption.orient?"bottom"!=this.dataRangeOption.y?(a=[[c,d+g],[c-h,d+g+h],[c+h,d+g+h]],b="bottom"):(a=[[c,d],[c-h,d-h],[c+h,d-h]],b="top"):"right"!=this.dataRangeOption.x?(a=[[c+e,d],[c+e+h,d-h],[c+e+h,d+h]],b="right"):(a=[[c,d],[c-h,d-h],[c-h,d+h]],b="left"),this._indicatorShape={style:{pointList:a,color:"#fff",__rect:{x:Math.min(a[0][0],a[1][0]),y:Math.min(a[0][1],a[1][1]),width:h*("horizontal"==this.dataRangeOption.orient?2:1),height:h*("horizontal"==this.dataRangeOption.orient?1:2)}},highlightStyle:{brushType:"fill",textPosition:b,textColor:this.dataRangeOption.textStyle.color},hoverable:!1},this._indicatorShape=new f(this._indicatorShape)},_buildFiller:function(){this._fillerShape={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:this._calculableLocation.x,y:this._calculableLocation.y,width:this._calculableLocation.width,height:this._calculableLocation.height,color:"rgba(255,255,255,0)"},highlightStyle:{strokeColor:"rgba(255,255,255,0.5)",lineWidth:1},draggable:!0,ondrift:this._ondrift,ondragend:this._ondragend,onmousemove:this._dispatchHoverLink,_type:"filler"},this._fillerShape=new e(this._fillerShape),this.shapeList.push(this._fillerShape)},_bulidHandle:function(){var a,b,c,d,e,g,h,i,k=this._calculableLocation.x,l=this._calculableLocation.y,m=this._calculableLocation.width,n=this._calculableLocation.height,o=this.getFont(this.dataRangeOption.textStyle),p=j.getTextHeight("国",o),q=Math.max(j.getTextWidth(this._textFormat(this.dataRangeOption.max),o),j.getTextWidth(this._textFormat(this.dataRangeOption.min),o))+2;"horizontal"==this.dataRangeOption.orient?"bottom"!=this.dataRangeOption.y?(a=[[k,l],[k,l+n+p],[k-p,l+n+p],[k-1,l+n],[k-1,l]],b=k-q/2-p,c=l+n+p/2+2,d={x:k-q-p,y:l+n,width:q+p,height:p},e=[[k+m,l],[k+m,l+n+p],[k+m+p,l+n+p],[k+m+1,l+n],[k+m+1,l]],g=k+m+q/2+p,h=c,i={x:k+m,y:l+n,width:q+p,height:p}):(a=[[k,l+n],[k,l-p],[k-p,l-p],[k-1,l],[k-1,l+n]],b=k-q/2-p,c=l-p/2-2,d={x:k-q-p,y:l-p,width:q+p,height:p},e=[[k+m,l+n],[k+m,l-p],[k+m+p,l-p],[k+m+1,l],[k+m+1,l+n]],g=k+m+q/2+p,h=c,i={x:k+m,y:l-p,width:q+p,height:p}):(q+=p,"right"!=this.dataRangeOption.x?(a=[[k,l],[k+m+p,l],[k+m+p,l-p],[k+m,l-1],[k,l-1]],b=k+m+q/2+p/2,c=l-p/2,d={x:k+m,y:l-p,width:q+p,height:p},e=[[k,l+n],[k+m+p,l+n],[k+m+p,l+p+n],[k+m,l+1+n],[k,l+n+1]],g=b,h=l+n+p/2,i={x:k+m,y:l+n,width:q+p,height:p}):(a=[[k+m,l],[k-p,l],[k-p,l-p],[k,l-1],[k+m,l-1]],b=k-q/2-p/2,c=l-p/2,d={x:k-q-p,y:l-p,width:q+p,height:p},e=[[k+m,l+n],[k-p,l+n],[k-p,l+p+n],[k,l+1+n],[k+m,l+n+1]],g=b,h=l+n+p/2,i={x:k-q-p,y:l+n,width:q+p,height:p})),this._startShape={style:{pointList:a,text:this._textFormat(this.dataRangeOption.max),textX:b,textY:c,textFont:o,color:this.getColor(this.dataRangeOption.max),rect:d,x:a[0][0],y:a[0][1],_x:a[0][0],_y:a[0][1]}},this._startShape.highlightStyle={strokeColor:this._startShape.style.color,lineWidth:1},this._endShape={style:{pointList:e,text:this._textFormat(this.dataRangeOption.min),textX:g,textY:h,textFont:o,color:this.getColor(this.dataRangeOption.min),rect:i,x:e[0][0],y:e[0][1],_x:e[0][0],_y:e[0][1]}},this._endShape.highlightStyle={strokeColor:this._endShape.style.color,lineWidth:1},this._startShape.zlevel=this._endShape.zlevel=this.getZlevelBase(),this._startShape.z=this._endShape.z=this.getZBase()+1,this._startShape.draggable=this._endShape.draggable=!0,this._startShape.ondrift=this._endShape.ondrift=this._ondrift,this._startShape.ondragend=this._endShape.ondragend=this._ondragend,this._startShape.style.textColor=this._endShape.style.textColor=this.dataRangeOption.textStyle.color,this._startShape.style.textAlign=this._endShape.style.textAlign="center",this._startShape.style.textPosition=this._endShape.style.textPosition="specific",this._startShape.style.textBaseline=this._endShape.style.textBaseline="middle",this._startShape.style.width=this._endShape.style.width=0,this._startShape.style.height=this._endShape.style.height=0,this._startShape.style.textPosition=this._endShape.style.textPosition="specific",this._startShape=new f(this._startShape),this._endShape=new f(this._endShape),this.shapeList.push(this._startShape),this.shapeList.push(this._endShape)},_bulidMask:function(){var a=this._calculableLocation.x,b=this._calculableLocation.y,c=this._calculableLocation.width,d=this._calculableLocation.height;this._startMask={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:a,y:b,width:"horizontal"==this.dataRangeOption.orient?0:c,height:"horizontal"==this.dataRangeOption.orient?d:0,color:"#ccc"},hoverable:!1},this._endMask={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:"horizontal"==this.dataRangeOption.orient?a+c:a,y:"horizontal"==this.dataRangeOption.orient?b:b+d,width:"horizontal"==this.dataRangeOption.orient?0:c,height:"horizontal"==this.dataRangeOption.orient?d:0,color:"#ccc"},hoverable:!1},this._startMask=new e(this._startMask),this._endMask=new e(this._endMask),this.shapeList.push(this._startMask),this.shapeList.push(this._endMask)},_buildBackground:function(){var a=this.reformCssArray(this.dataRangeOption.padding);this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-a[3],y:this._itemGroupLocation.y-a[0],width:this._itemGroupLocation.width+a[3]+a[1],height:this._itemGroupLocation.height+a[0]+a[2],brushType:0===this.dataRangeOption.borderWidth?"fill":"both",color:this.dataRangeOption.backgroundColor,strokeColor:this.dataRangeOption.borderColor,lineWidth:this.dataRangeOption.borderWidth}}))},_getItemGroupLocation:function(){var a=this._valueTextList,b=a.length,c=this.dataRangeOption.itemGap,d=this.dataRangeOption.itemWidth,e=this.dataRangeOption.itemHeight,f=0,g=0,h=this.getFont(this.dataRangeOption.textStyle),i=j.getTextHeight("国",h),k=10;if("horizontal"==this.dataRangeOption.orient){if(this.dataRangeOption.text||this._isContinuity())f=(this._isContinuity()?d*k+c:b*(d+c))+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[0]?j.getTextWidth(this.dataRangeOption.text[0],h)+this._textGap:0)+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[1]?j.getTextWidth(this.dataRangeOption.text[1],h)+this._textGap:0);else{d+=5;for(var l=0;b>l;l++)f+=d+j.getTextWidth(a[l],h)+c}f-=c,g=Math.max(i,e)}else{var m;if(this.dataRangeOption.text||this._isContinuity())g=(this._isContinuity()?e*k+c:b*(e+c))+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[0]?this._textGap+i:0)+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[1]?this._textGap+i:0),m=Math.max(j.getTextWidth(this.dataRangeOption.text&&this.dataRangeOption.text[0]||"",h),j.getTextWidth(this.dataRangeOption.text&&this.dataRangeOption.text[1]||"",h)),f=Math.max(d,m);else{g=(e+c)*b,d+=5,m=0;for(var l=0;b>l;l++)m=Math.max(m,j.getTextWidth(a[l],h));f=d+m}g-=c}var n,o=this.reformCssArray(this.dataRangeOption.padding),p=this.zr.getWidth();switch(this.dataRangeOption.x){case"center":n=Math.floor((p-f)/2);break;case"left":n=o[3]+this.dataRangeOption.borderWidth;break;case"right":n=p-f-o[1]-this.dataRangeOption.borderWidth;break;default:n=this.parsePercent(this.dataRangeOption.x,p),n=isNaN(n)?0:n}var q,r=this.zr.getHeight();switch(this.dataRangeOption.y){case"top":q=o[0]+this.dataRangeOption.borderWidth;break;case"bottom":q=r-g-o[2]-this.dataRangeOption.borderWidth;break;case"center":q=Math.floor((r-g)/2);break;default:q=this.parsePercent(this.dataRangeOption.y,r),q=isNaN(q)?0:q}if(this.dataRangeOption.calculable){var s=Math.max(j.getTextWidth(this.dataRangeOption.max,h),j.getTextWidth(this.dataRangeOption.min,h))+i;"horizontal"==this.dataRangeOption.orient?(s>n&&(n=s),n+f+s>p&&(n-=s)):(i>q&&(q=i),q+g+i>r&&(q-=i))}return{x:n,y:q,width:f,height:g}},_getTextShape:function(a,b,c){return{zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:"horizontal"==this.dataRangeOption.orient?a:this._itemGroupLocation.x+this._itemGroupLocation.width/2,y:"horizontal"==this.dataRangeOption.orient?this._itemGroupLocation.y+this._itemGroupLocation.height/2:b,color:this.dataRangeOption.textStyle.color,text:c,textFont:this.getFont(this.dataRangeOption.textStyle),textBaseline:"horizontal"==this.dataRangeOption.orient?"middle":"top",textAlign:"horizontal"==this.dataRangeOption.orient?"left":"center"},hoverable:!1}},_getItemShape:function(a,b,c,d,e){return{zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:a,y:b+1,width:c,height:d-2,color:e},highlightStyle:{strokeColor:e,lineWidth:1}}},__ondrift:function(a,b,c){var d=this._calculableLocation.x,e=this._calculableLocation.y,f=this._calculableLocation.width,g=this._calculableLocation.height;return"horizontal"==this.dataRangeOption.orient?a.style.x+b<=d?a.style.x=d:a.style.x+b+a.style.width>=d+f?a.style.x=d+f-a.style.width:a.style.x+=b:a.style.y+c<=e?a.style.y=e:a.style.y+c+a.style.height>=e+g?a.style.y=e+g-a.style.height:a.style.y+=c,"filler"==a._type?this._syncHandleShape():this._syncFillerShape(a),this.dataRangeOption.realtime&&this._dispatchDataRange(),!0},__ondragend:function(){this.isDragend=!0},ondragend:function(a,b){this.isDragend&&a.target&&(b.dragOut=!0,b.dragIn=!0,this.dataRangeOption.realtime||this._dispatchDataRange(),b.needRefresh=!1,this.isDragend=!1)},_syncShapeFromRange:function(){var a=this.dataRangeOption.range||{},b=a.start,c=a.end;if(b>c&&(b=[c,c=b][0]),this._range.end=null!=b?b:null!=this._range.end?this._range.end:0,this._range.start=null!=c?c:null!=this._range.start?this._range.start:100,100!=this._range.start||0!==this._range.end){if("horizontal"==this.dataRangeOption.orient){var d=this._fillerShape.style.width;this._fillerShape.style.x+=d*(100-this._range.start)/100,this._fillerShape.style.width=d*(this._range.start-this._range.end)/100}else{var e=this._fillerShape.style.height;this._fillerShape.style.y+=e*(100-this._range.start)/100,this._fillerShape.style.height=e*(this._range.start-this._range.end)/100}this.zr.modShape(this._fillerShape.id),this._syncHandleShape()}},_syncHandleShape:function(){var a=this._calculableLocation.x,b=this._calculableLocation.y,c=this._calculableLocation.width,d=this._calculableLocation.height;"horizontal"==this.dataRangeOption.orient?(this._startShape.style.x=this._fillerShape.style.x,this._startMask.style.width=this._startShape.style.x-a,this._endShape.style.x=this._fillerShape.style.x+this._fillerShape.style.width,this._endMask.style.x=this._endShape.style.x,this._endMask.style.width=a+c-this._endShape.style.x,this._range.start=Math.ceil(100-(this._startShape.style.x-a)/c*100),this._range.end=Math.floor(100-(this._endShape.style.x-a)/c*100)):(this._startShape.style.y=this._fillerShape.style.y,this._startMask.style.height=this._startShape.style.y-b,this._endShape.style.y=this._fillerShape.style.y+this._fillerShape.style.height,this._endMask.style.y=this._endShape.style.y,this._endMask.style.height=b+d-this._endShape.style.y,this._range.start=Math.ceil(100-(this._startShape.style.y-b)/d*100),this._range.end=Math.floor(100-(this._endShape.style.y-b)/d*100)),this._syncShape()},_syncFillerShape:function(a){var b,c,d=this._calculableLocation.x,e=this._calculableLocation.y,f=this._calculableLocation.width,g=this._calculableLocation.height;"horizontal"==this.dataRangeOption.orient?(b=this._startShape.style.x,c=this._endShape.style.x,a.id==this._startShape.id&&b>=c?(c=b,this._endShape.style.x=b):a.id==this._endShape.id&&b>=c&&(b=c,this._startShape.style.x=b),this._fillerShape.style.x=b,this._fillerShape.style.width=c-b,this._startMask.style.width=b-d,this._endMask.style.x=c,this._endMask.style.width=d+f-c,this._range.start=Math.ceil(100-(b-d)/f*100),this._range.end=Math.floor(100-(c-d)/f*100)):(b=this._startShape.style.y,c=this._endShape.style.y,a.id==this._startShape.id&&b>=c?(c=b,this._endShape.style.y=b):a.id==this._endShape.id&&b>=c&&(b=c,this._startShape.style.y=b),this._fillerShape.style.y=b,this._fillerShape.style.height=c-b,this._startMask.style.height=b-e,this._endMask.style.y=c,this._endMask.style.height=e+g-c,this._range.start=Math.ceil(100-(b-e)/g*100),this._range.end=Math.floor(100-(c-e)/g*100)),this._syncShape()},_syncShape:function(){this._startShape.position=[this._startShape.style.x-this._startShape.style._x,this._startShape.style.y-this._startShape.style._y],this._startShape.style.text=this._textFormat(this._gap*this._range.start+this.dataRangeOption.min),this._startShape.style.color=this._startShape.highlightStyle.strokeColor=this.getColor(this._gap*this._range.start+this.dataRangeOption.min),this._endShape.position=[this._endShape.style.x-this._endShape.style._x,this._endShape.style.y-this._endShape.style._y],this._endShape.style.text=this._textFormat(this._gap*this._range.end+this.dataRangeOption.min),this._endShape.style.color=this._endShape.highlightStyle.strokeColor=this.getColor(this._gap*this._range.end+this.dataRangeOption.min),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.modShape(this._startMask.id),this.zr.modShape(this._endMask.id),this.zr.modShape(this._fillerShape.id),this.zr.refreshNextFrame()},_dispatchDataRange:function(){this.messageCenter.dispatch(g.EVENT.DATA_RANGE,null,{range:{start:this._range.end,end:this._range.start}},this.myChart)},__dataRangeSelected:function(a){if("single"===this.dataRangeOption.selectedMode)for(var b in this._selectedMap)this._selectedMap[b]=!1;var c=a.target._idx;this._selectedMap[c]=!this._selectedMap[c];var d,e;this._useCustomizedSplit()?(d=this._splitList[c].max,e=this._splitList[c].min):(d=(this._colorList.length-c)*this._gap+this.dataRangeOption.min,e=d-this._gap),this.messageCenter.dispatch(g.EVENT.DATA_RANGE_SELECTED,a.event,{selected:this._selectedMap,target:c,valueMax:d,valueMin:e},this.myChart),this.messageCenter.dispatch(g.EVENT.REFRESH,null,null,this.myChart)},__dispatchHoverLink:function(a){var b,c;if(this.dataRangeOption.calculable){var d,e=this.dataRangeOption.max-this.dataRangeOption.min;d="horizontal"==this.dataRangeOption.orient?(1-(i.getX(a.event)-this._calculableLocation.x)/this._calculableLocation.width)*e:(1-(i.getY(a.event)-this._calculableLocation.y)/this._calculableLocation.height)*e,b=d-.05*e,c=d+.05*e}else if(this._useCustomizedSplit()){var f=a.target._idx;c=this._splitList[f].max,b=this._splitList[f].min}else{var f=a.target._idx;c=(this._colorList.length-f)*this._gap+this.dataRangeOption.min,b=c-this._gap}this.messageCenter.dispatch(g.EVENT.DATA_RANGE_HOVERLINK,a.event,{valueMin:b,valueMax:c},this.myChart)},__onhoverlink:function(a){if(this.dataRangeOption.show&&this.dataRangeOption.hoverLink&&this._indicatorShape&&a&&null!=a.seriesIndex&&null!=a.dataIndex){var b=a.value;if(""===b||isNaN(b))return;b<this.dataRangeOption.min?b=this.dataRangeOption.min:b>this.dataRangeOption.max&&(b=this.dataRangeOption.max),this._indicatorShape.position="horizontal"==this.dataRangeOption.orient?[(this.dataRangeOption.max-b)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._calculableLocation.width,0]:[0,(this.dataRangeOption.max-b)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._calculableLocation.height],this._indicatorShape.style.text=this._textFormat(a.value),this._indicatorShape.style.color=this.getColor(b),this.zr.addHoverShape(this._indicatorShape)}},_textFormat:function(a,b){var c=this.dataRangeOption;if(a!==-Number.MAX_VALUE&&(a=(+a).toFixed(c.precision)),null!=b&&b!==Number.MAX_VALUE&&(b=(+b).toFixed(c.precision)),c.formatter){if("string"==typeof c.formatter)return c.formatter.replace("{value}",a===-Number.MAX_VALUE?"min":a).replace("{value2}",b===Number.MAX_VALUE?"max":b);if("function"==typeof c.formatter)return c.formatter.call(this.myChart,a,b)}return null==b?a:a===-Number.MAX_VALUE?"< "+b:b===Number.MAX_VALUE?"> "+a:a+" - "+b},_isContinuity:function(){var a=this.dataRangeOption;return!(a.splitList?a.splitList.length>0:a.splitNumber>0)||a.calculable},_useCustomizedSplit:function(){var a=this.dataRangeOption;return a.splitList&&a.splitList.length>0},_buildColorList:function(a){if(this._colorList=k.getGradientColors(this.dataRangeOption.color,Math.max((a-this.dataRangeOption.color.length)/(this.dataRangeOption.color.length-1),0)+1),this._colorList.length>a){for(var b=this._colorList.length,c=[this._colorList[0]],d=b/(a-1),e=1;a-1>e;e++)c.push(this._colorList[Math.floor(e*d)]);c.push(this._colorList[b-1]),this._colorList=c}if(this._useCustomizedSplit())for(var f=this._splitList,e=0,b=f.length;b>e;e++)f[e].color&&(this._colorList[e]=f[e].color)},_buildGap:function(a){if(!this._useCustomizedSplit()){var b=this.dataRangeOption.precision;for(this._gap=(this.dataRangeOption.max-this.dataRangeOption.min)/a;this._gap.toFixed(b)-0!=this._gap&&5>b;)b++;this.dataRangeOption.precision=b,this._gap=((this.dataRangeOption.max-this.dataRangeOption.min)/a).toFixed(b)-0}},_buildDataList:function(a){for(var b=this._valueTextList=[],c=this.dataRangeOption,d=this._useCustomizedSplit(),e=0;a>e;e++){this._selectedMap[e]=!0;var f="";if(d){var g=this._splitList[a-1-e];f=null!=g.label?g.label:null!=g.single?this._textFormat(g.single):this._textFormat(g.min,g.max)}else f=this._textFormat(e*this._gap+c.min,(e+1)*this._gap+c.min);b.unshift(f)}},_buildSplitList:function(){if(this._useCustomizedSplit())for(var a=this.dataRangeOption.splitList,b=this._splitList=[],c=0,d=a.length;d>c;c++){var e=a[c];if(!e||null==e.start&&null==e.end)throw new Error("Empty item exists in splitList!");var f={label:e.label,color:e.color};f.min=e.start,f.max=e.end,f.min>f.max&&(f.min=[f.max,f.max=f.min][0]),f.min===f.max&&(f.single=f.max),null==f.min&&(f.min=-Number.MAX_VALUE),null==f.max&&(f.max=Number.MAX_VALUE),b.push(f)}},refresh:function(a){if(a){this.option=a,this.option.dataRange=this.reformOption(this.option.dataRange);var b=this.dataRangeOption=this.option.dataRange;if(!this._useCustomizedSplit()&&(null==b.min||null==b.max))throw new Error("option.dataRange.min or option.dataRange.max has not been defined.");this.myChart.canvasSupported||(b.realtime=!1);var c=this._isContinuity()?100:this._useCustomizedSplit()?b.splitList.length:b.splitNumber;this._buildSplitList(),this._buildColorList(c),this._buildGap(c),this._buildDataList(c)}this.clear(),this._buildShape()},getColor:function(a){if(isNaN(a))return null;var b;if(this._useCustomizedSplit()){for(var c=this._splitList,d=0,e=c.length;e>d;d++)if(c[d].min<=a&&c[d].max>=a){b=d;break}}else{if(this.dataRangeOption.min==this.dataRangeOption.max)return this._colorList[0];if(a<this.dataRangeOption.min?a=this.dataRangeOption.min:a>this.dataRangeOption.max&&(a=this.dataRangeOption.max),this.dataRangeOption.calculable&&(a-(this._gap*this._range.start+this.dataRangeOption.min)>5e-5||a-(this._gap*this._range.end+this.dataRangeOption.min)<-5e-5))return null;b=this._colorList.length-Math.ceil((a-this.dataRangeOption.min)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._colorList.length),b==this._colorList.length&&b--}return this._selectedMap[b]?this._colorList[b]:null},getColorByIndex:function(a){return a>=this._colorList.length?a=this._colorList.length-1:0>a&&(a=0),this._colorList[a]},onbeforDispose:function(){this.messageCenter.unbind(g.EVENT.HOVER,this._onhoverlink)}},h.inherits(b,c),a("../component").define("dataRange",b),b}),c("zrender/shape/BezierCurve",["require","./Base","../tool/util"],function(a){"use strict";var b=a("./Base"),c=function(a){this.brushTypeOnly="stroke",this.textPosition="end",b.call(this,a)};return c.prototype={
type:"bezier-curve",buildPath:function(a,b){a.moveTo(b.xStart,b.yStart),"undefined"!=typeof b.cpX2&&"undefined"!=typeof b.cpY2?a.bezierCurveTo(b.cpX1,b.cpY1,b.cpX2,b.cpY2,b.xEnd,b.yEnd):a.quadraticCurveTo(b.cpX1,b.cpY1,b.xEnd,b.yEnd)},getRect:function(a){if(a.__rect)return a.__rect;var b=Math.min(a.xStart,a.xEnd,a.cpX1),c=Math.min(a.yStart,a.yEnd,a.cpY1),d=Math.max(a.xStart,a.xEnd,a.cpX1),e=Math.max(a.yStart,a.yEnd,a.cpY1),f=a.cpX2,g=a.cpY2;"undefined"!=typeof f&&"undefined"!=typeof g&&(b=Math.min(b,f),c=Math.min(c,g),d=Math.max(d,f),e=Math.max(e,g));var h=a.lineWidth||1;return a.__rect={x:b-h,y:c-h,width:d-b+h,height:e-c+h},a.__rect}},a("../tool/util").inherits(c,b),c}),c("zrender/tool/vector",[],function(){var a="undefined"==typeof Float32Array?Array:Float32Array,b={create:function(b,c){var d=new a(2);return d[0]=b||0,d[1]=c||0,d},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a},clone:function(b){var c=new a(2);return c[0]=b[0],c[1]=b[1],c},set:function(a,b,c){return a[0]=b,a[1]=c,a},add:function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},scaleAndAdd:function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},sub:function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},len:function(a){return Math.sqrt(this.lenSquare(a))},lenSquare:function(a){return a[0]*a[0]+a[1]*a[1]},mul:function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},div:function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},scale:function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},normalize:function(a,c){var d=b.len(c);return 0===d?(a[0]=0,a[1]=0):(a[0]=c[0]/d,a[1]=c[1]/d),a},distance:function(a,b){return Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1]))},distanceSquare:function(a,b){return(a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1])},negate:function(a,b){return a[0]=-b[0],a[1]=-b[1],a},lerp:function(a,b,c,d){return a[0]=b[0]+d*(c[0]-b[0]),a[1]=b[1]+d*(c[1]-b[1]),a},applyTransform:function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},min:function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},max:function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a}};return b.length=b.len,b.lengthSquare=b.lenSquare,b.dist=b.distance,b.distSquare=b.distanceSquare,b}),c("zrender/tool/area",["require","./util","./curve"],function(a){"use strict";function b(a){return a%=G,0>a&&(a+=G),a}function c(a,b,c,f){if(!b||!a)return!1;var g=a.type;y=y||z.getContext();var h=d(a,b,c,f);if("undefined"!=typeof h)return h;if(a.buildPath&&y.isPointInPath)return e(a,y,b,c,f);switch(g){case"ellipse":return!0;case"trochoid":var i="out"==b.location?b.r1+b.r2+b.d:b.r1-b.r2+b.d;return n(b,c,f,i);case"rose":return n(b,c,f,b.maxr);default:return!1}}function d(a,b,c,d){var e=a.type;switch(e){case"bezier-curve":return"undefined"==typeof b.cpX2?i(b.xStart,b.yStart,b.cpX1,b.cpY1,b.xEnd,b.yEnd,b.lineWidth,c,d):h(b.xStart,b.yStart,b.cpX1,b.cpY1,b.cpX2,b.cpY2,b.xEnd,b.yEnd,b.lineWidth,c,d);case"line":return g(b.xStart,b.yStart,b.xEnd,b.yEnd,b.lineWidth,c,d);case"polyline":return k(b.pointList,b.lineWidth,c,d);case"ring":return l(b.x,b.y,b.r0,b.r,c,d);case"circle":return n(b.x,b.y,b.r,c,d);case"sector":var f=b.startAngle*Math.PI/180,j=b.endAngle*Math.PI/180;return b.clockWise||(f=-f,j=-j),o(b.x,b.y,b.r0,b.r,f,j,!b.clockWise,c,d);case"path":return b.pathArray&&v(b.pathArray,Math.max(b.lineWidth,5),b.brushType,c,d);case"polygon":case"star":case"isogon":return p(b.pointList,c,d);case"text":var q=b.__rect||a.getRect(b);return m(q.x,q.y,q.width,q.height,c,d);case"rectangle":case"image":return m(b.x,b.y,b.width,b.height,c,d)}}function e(a,b,c,d,e){return b.beginPath(),a.buildPath(b,c),b.closePath(),b.isPointInPath(d,e)}function f(a,b,d,e){return!c(a,b,d,e)}function g(a,b,c,d,e,f,g){if(0===e)return!1;var h=Math.max(e,5),i=0,j=a;if(g>b+h&&g>d+h||b-h>g&&d-h>g||f>a+h&&f>c+h||a-h>f&&c-h>f)return!1;if(a===c)return Math.abs(f-a)<=h/2;i=(b-d)/(a-c),j=(a*d-c*b)/(a-c);var k=i*f-g+j,l=k*k/(i*i+1);return h/2*h/2>=l}function h(a,b,c,d,e,f,g,h,i,j,k){if(0===i)return!1;var l=Math.max(i,5);if(k>b+l&&k>d+l&&k>f+l&&k>h+l||b-l>k&&d-l>k&&f-l>k&&h-l>k||j>a+l&&j>c+l&&j>e+l&&j>g+l||a-l>j&&c-l>j&&e-l>j&&g-l>j)return!1;var m=A.cubicProjectPoint(a,b,c,d,e,f,g,h,j,k,null);return l/2>=m}function i(a,b,c,d,e,f,g,h,i){if(0===g)return!1;var j=Math.max(g,5);if(i>b+j&&i>d+j&&i>f+j||b-j>i&&d-j>i&&f-j>i||h>a+j&&h>c+j&&h>e+j||a-j>h&&c-j>h&&e-j>h)return!1;var k=A.quadraticProjectPoint(a,b,c,d,e,f,h,i,null);return j/2>=k}function j(a,c,d,e,f,g,h,i,j){if(0===h)return!1;var k=Math.max(h,5);i-=a,j-=c;var l=Math.sqrt(i*i+j*j);if(l-k>d||d>l+k)return!1;if(Math.abs(e-f)>=G)return!0;if(g){var m=e;e=b(f),f=b(m)}else e=b(e),f=b(f);e>f&&(f+=G);var n=Math.atan2(j,i);return 0>n&&(n+=G),n>=e&&f>=n||n+G>=e&&f>=n+G}function k(a,b,c,d){for(var b=Math.max(b,10),e=0,f=a.length-1;f>e;e++){var h=a[e][0],i=a[e][1],j=a[e+1][0],k=a[e+1][1];if(g(h,i,j,k,b,c,d))return!0}return!1}function l(a,b,c,d,e,f){var g=(e-a)*(e-a)+(f-b)*(f-b);return d*d>g&&g>c*c}function m(a,b,c,d,e,f){return e>=a&&a+c>=e&&f>=b&&b+d>=f}function n(a,b,c,d,e){return c*c>(d-a)*(d-a)+(e-b)*(e-b)}function o(a,b,c,d,e,f,g,h,i){return j(a,b,(c+d)/2,e,f,g,d-c,h,i)}function p(a,b,c){for(var d=a.length,e=0,f=0,g=d-1;d>f;f++){var h=a[g][0],i=a[g][1],j=a[f][0],k=a[f][1];e+=q(h,i,j,k,b,c),g=f}return 0!==e}function q(a,b,c,d,e,f){if(f>b&&f>d||b>f&&d>f)return 0;if(d==b)return 0;var g=b>d?1:-1,h=(f-b)/(d-b),i=h*(c-a)+a;return i>e?g:0}function r(){var a=I[0];I[0]=I[1],I[1]=a}function s(a,b,c,d,e,f,g,h,i,j){if(j>b&&j>d&&j>f&&j>h||b>j&&d>j&&f>j&&h>j)return 0;var k=A.cubicRootAt(b,d,f,h,j,H);if(0===k)return 0;for(var l,m,n=0,o=-1,p=0;k>p;p++){var q=H[p],s=A.cubicAt(a,c,e,g,q);i>s||(0>o&&(o=A.cubicExtrema(b,d,f,h,I),I[1]<I[0]&&o>1&&r(),l=A.cubicAt(b,d,f,h,I[0]),o>1&&(m=A.cubicAt(b,d,f,h,I[1]))),n+=2==o?q<I[0]?b>l?1:-1:q<I[1]?l>m?1:-1:m>h?1:-1:q<I[0]?b>l?1:-1:l>h?1:-1)}return n}function t(a,b,c,d,e,f,g,h){if(h>b&&h>d&&h>f||b>h&&d>h&&f>h)return 0;var i=A.quadraticRootAt(b,d,f,h,H);if(0===i)return 0;var j=A.quadraticExtremum(b,d,f);if(j>=0&&1>=j){for(var k=0,l=A.quadraticAt(b,d,f,j),m=0;i>m;m++){var n=A.quadraticAt(a,c,e,H[m]);g>n||(k+=H[m]<j?b>l?1:-1:l>f?1:-1)}return k}var n=A.quadraticAt(a,c,e,H[0]);return g>n?0:b>f?1:-1}function u(a,c,d,e,f,g,h,i){if(i-=c,i>d||-d>i)return 0;var j=Math.sqrt(d*d-i*i);if(H[0]=-j,H[1]=j,Math.abs(e-f)>=G){e=0,f=G;var k=g?1:-1;return h>=H[0]+a&&h<=H[1]+a?k:0}if(g){var j=e;e=b(f),f=b(j)}else e=b(e),f=b(f);e>f&&(f+=G);for(var l=0,m=0;2>m;m++){var n=H[m];if(n+a>h){var o=Math.atan2(i,n),k=g?1:-1;0>o&&(o=G+o),(o>=e&&f>=o||o+G>=e&&f>=o+G)&&(o>Math.PI/2&&o<1.5*Math.PI&&(k=-k),l+=k)}}return l}function v(a,b,c,d,e){var f=0,k=0,l=0,m=0,n=0,o=!0,p=!0;c=c||"fill";for(var r="stroke"===c||"both"===c,v="fill"===c||"both"===c,w=0;w<a.length;w++){var x=a[w],y=x.points;if(o||"M"===x.command){if(w>0&&(v&&(f+=q(k,l,m,n,d,e)),0!==f))return!0;m=y[y.length-2],n=y[y.length-1],o=!1,p&&"A"!==x.command&&(p=!1,k=m,l=n)}switch(x.command){case"M":k=y[0],l=y[1];break;case"L":if(r&&g(k,l,y[0],y[1],b,d,e))return!0;v&&(f+=q(k,l,y[0],y[1],d,e)),k=y[0],l=y[1];break;case"C":if(r&&h(k,l,y[0],y[1],y[2],y[3],y[4],y[5],b,d,e))return!0;v&&(f+=s(k,l,y[0],y[1],y[2],y[3],y[4],y[5],d,e)),k=y[4],l=y[5];break;case"Q":if(r&&i(k,l,y[0],y[1],y[2],y[3],b,d,e))return!0;v&&(f+=t(k,l,y[0],y[1],y[2],y[3],d,e)),k=y[2],l=y[3];break;case"A":var z=y[0],A=y[1],B=y[2],C=y[3],D=y[4],E=y[5],F=Math.cos(D)*B+z,G=Math.sin(D)*C+A;p?(p=!1,m=F,n=G):f+=q(k,l,F,G);var H=(d-z)*C/B+z;if(r&&j(z,A,C,D,D+E,1-y[7],b,H,e))return!0;v&&(f+=u(z,A,C,D,D+E,1-y[7],H,e)),k=Math.cos(D+E)*B+z,l=Math.sin(D+E)*C+A;break;case"z":if(r&&g(k,l,m,n,b,d,e))return!0;o=!0}}return v&&(f+=q(k,l,m,n,d,e)),0!==f}function w(a,b){var c=a+":"+b;if(B[c])return B[c];y=y||z.getContext(),y.save(),b&&(y.font=b),a=(a+"").split("\n");for(var d=0,e=0,f=a.length;f>e;e++)d=Math.max(y.measureText(a[e]).width,d);return y.restore(),B[c]=d,++D>F&&(D=0,B={}),d}function x(a,b){var c=a+":"+b;if(C[c])return C[c];y=y||z.getContext(),y.save(),b&&(y.font=b),a=(a+"").split("\n");var d=(y.measureText("国").width+2)*a.length;return y.restore(),C[c]=d,++E>F&&(E=0,C={}),d}var y,z=a("./util"),A=a("./curve"),B={},C={},D=0,E=0,F=5e3,G=2*Math.PI,H=[-1,-1,-1],I=[-1,-1];return{isInside:c,isOutside:f,getTextWidth:w,getTextHeight:x,isInsidePath:v,isInsidePolygon:p,isInsideSector:o,isInsideCircle:n,isInsideLine:g,isInsideRect:m,isInsidePolyline:k,isInsideCubicStroke:h,isInsideQuadraticStroke:i}}),c("echarts/component/polar",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Polygon","zrender/shape/Circle","zrender/shape/Ring","../config","zrender/tool/util","../util/coordinates","../util/accMath","../util/smartSteps","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Line"),f=a("zrender/shape/Polygon"),g=a("zrender/shape/Circle"),h=a("zrender/shape/Ring"),i=a("../config");i.polar={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,boundaryGap:[0,0],splitNumber:5,name:{show:!0,textStyle:{color:"#333"}},axisLine:{show:!0,lineStyle:{color:"#ccc",width:1,type:"solid"}},axisLabel:{show:!1,textStyle:{color:"#333"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},splitLine:{show:!0,lineStyle:{width:1,color:"#ccc"}},type:"polygon"};var j=a("zrender/tool/util"),k=a("../util/coordinates");return b.prototype={type:i.COMPONENT_TYPE_POLAR,_buildShape:function(){for(var a=0;a<this.polar.length;a++)this._index=a,this.reformOption(this.polar[a]),this._queryTarget=[this.polar[a],this.option],this._createVector(a),this._buildSpiderWeb(a),this._buildText(a),this._adjustIndicatorValue(a),this._addAxisLabel(a);for(var a=0;a<this.shapeList.length;a++)this.zr.addShape(this.shapeList[a])},_createVector:function(a){for(var b,c=this.polar[a],d=this.deepQuery(this._queryTarget,"indicator"),e=d.length,f=c.startAngle,g=2*Math.PI/e,h=this._getRadius(),i=c.__ecIndicator=[],j=0;e>j;j++)b=k.polar2cartesian(h,f*Math.PI/180+g*j),i.push({vector:[b[1],-b[0]]})},_getRadius:function(){var a=this.polar[this._index];return this.parsePercent(a.radius,Math.min(this.zr.getWidth(),this.zr.getHeight())/2)},_buildSpiderWeb:function(a){var b=this.polar[a],c=b.__ecIndicator,d=b.splitArea,e=b.splitLine,f=this.getCenter(a),g=b.splitNumber,h=e.lineStyle.color,i=e.lineStyle.width,j=e.show,k=this.deepQuery(this._queryTarget,"axisLine");this._addArea(c,g,f,d,h,i,j),k.show&&this._addLine(c,f,k)},_addAxisLabel:function(b){for(var c,e,f,g,e,h,i,k,l,m,n=a("../util/accMath"),o=this.polar[b],p=this.deepQuery(this._queryTarget,"indicator"),q=o.__ecIndicator,r=this.deepQuery(this._queryTarget,"splitNumber"),s=this.getCenter(b),t=0;t<p.length;t++)if(c=this.deepQuery([p[t],o,this.option],"axisLabel"),c.show){var u=this.deepQuery([c,o,this.option],"textStyle"),v=this.deepQuery([c,o],"formatter");if(f={},f.textFont=this.getFont(u),f.color=u.color,f=j.merge(f,c),f.lineWidth=f.width,e=q[t].vector,h=q[t].value,k=t/p.length*2*Math.PI,l=c.offset||10,m=c.interval||0,!h)return;for(var w=1;r>=w;w+=m+1)g=j.merge({},f),i=n.accAdd(h.min,n.accMul(h.step,w)),i="function"==typeof v?v(i):"string"==typeof v?v.replace("{a}","{a0}").replace("{a0}",i):this.numAddCommas(i),g.text=i,g.x=w*e[0]/r+Math.cos(k)*l+s[0],g.y=w*e[1]/r+Math.sin(k)*l+s[1],this.shapeList.push(new d({zlevel:this.getZlevelBase(),z:this.getZBase(),style:g,draggable:!1,hoverable:!1}))}},_buildText:function(a){for(var b,c,e,f,g,h,i,j=this.polar[a],k=j.__ecIndicator,l=this.deepQuery(this._queryTarget,"indicator"),m=this.getCenter(a),n=0,o=0,p=0;p<l.length;p++)f=this.deepQuery([l[p],j,this.option],"name"),f.show&&(i=this.deepQuery([f,j,this.option],"textStyle"),c={},c.textFont=this.getFont(i),c.color=i.color,c.text="function"==typeof f.formatter?f.formatter.call(this.myChart,l[p].text,p):"string"==typeof f.formatter?f.formatter.replace("{value}",l[p].text):l[p].text,k[p].text=c.text,b=k[p].vector,e=Math.round(b[0])>0?"left":Math.round(b[0])<0?"right":"center",null==f.margin?b=this._mapVector(b,m,1.1):(h=f.margin,n=b[0]>0?h:-h,o=b[1]>0?h:-h,n=0===b[0]?0:n,o=0===b[1]?0:o,b=this._mapVector(b,m,1)),c.textAlign=e,c.x=b[0]+n,c.y=b[1]+o,g=f.rotate?[f.rotate/180*Math.PI,b[0],b[1]]:[0,0,0],this.shapeList.push(new d({zlevel:this.getZlevelBase(),z:this.getZBase(),style:c,draggable:!1,hoverable:!1,rotation:g})))},getIndicatorText:function(a,b){return this.polar[a]&&this.polar[a].__ecIndicator[b]&&this.polar[a].__ecIndicator[b].text},getDropBox:function(a){var b,c,a=a||0,d=this.polar[a],e=this.getCenter(a),f=d.__ecIndicator,g=f.length,h=[],i=d.type;if("polygon"==i){for(var j=0;g>j;j++)b=f[j].vector,h.push(this._mapVector(b,e,1.2));c=this._getShape(h,"fill","rgba(0,0,0,0)","",1)}else"circle"==i&&(c=this._getCircle("",1,1.2,e,"fill","rgba(0,0,0,0)"));return c},_addArea:function(a,b,c,d,e,f,g){for(var h,i,j,k,l=this.deepQuery(this._queryTarget,"type"),m=0;b>m;m++)i=(b-m)/b,g&&("polygon"==l?(k=this._getPointList(a,i,c),h=this._getShape(k,"stroke","",e,f)):"circle"==l&&(h=this._getCircle(e,f,i,c,"stroke")),this.shapeList.push(h)),d.show&&(j=(b-m-1)/b,this._addSplitArea(a,d,i,j,c,m))},_getCircle:function(a,b,c,d,e,f){var h=this._getRadius();return new g({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:d[0],y:d[1],r:h*c,brushType:e,strokeColor:a,lineWidth:b,color:f},hoverable:!1,draggable:!1})},_getRing:function(a,b,c,d){var e=this._getRadius();return new h({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:d[0],y:d[1],r:b*e,r0:c*e,color:a,brushType:"fill"},hoverable:!1,draggable:!1})},_getPointList:function(a,b,c){for(var d,e=[],f=a.length,g=0;f>g;g++)d=a[g].vector,e.push(this._mapVector(d,c,b));return e},_getShape:function(a,b,c,d,e){return new f({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:a,brushType:b,color:c,strokeColor:d,lineWidth:e},hoverable:!1,draggable:!1})},_addSplitArea:function(a,b,c,d,e,f){var g,h,i,j,k,l=a.length,m=b.areaStyle.color,n=[],l=a.length,o=this.deepQuery(this._queryTarget,"type");if("string"==typeof m&&(m=[m]),h=m.length,g=m[f%h],"polygon"==o)for(var p=0;l>p;p++)n=[],i=a[p].vector,j=a[(p+1)%l].vector,n.push(this._mapVector(i,e,c)),n.push(this._mapVector(i,e,d)),n.push(this._mapVector(j,e,d)),n.push(this._mapVector(j,e,c)),k=this._getShape(n,"fill",g,"",1),this.shapeList.push(k);else"circle"==o&&(k=this._getRing(g,c,d,e),this.shapeList.push(k))},_mapVector:function(a,b,c){return[a[0]*c+b[0],a[1]*c+b[1]]},getCenter:function(a){var a=a||0;return this.parseCenter(this.zr,this.polar[a].center)},_addLine:function(a,b,c){for(var d,e,f=a.length,g=c.lineStyle,h=g.color,i=g.width,j=g.type,k=0;f>k;k++)e=a[k].vector,d=this._getLine(b[0],b[1],e[0]+b[0],e[1]+b[1],h,i,j),this.shapeList.push(d)},_getLine:function(a,b,c,d,f,g,h){return new e({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{xStart:a,yStart:b,xEnd:c,yEnd:d,strokeColor:f,lineWidth:g,lineType:h},hoverable:!1})},_adjustIndicatorValue:function(b){for(var c,d,e,f=this.polar[b],g=this.deepQuery(this._queryTarget,"indicator"),h=g.length,i=f.__ecIndicator,j=this._getSeriesData(b),k=f.boundaryGap,l=f.splitNumber,m=f.scale,n=a("../util/smartSteps"),o=0;h>o;o++){if("number"==typeof g[o].max)c=g[o].max,d=g[o].min||0,e={max:c,min:d};else{var p=this._findValue(j,o,l,k);d=p.min,c=p.max}!m&&d>=0&&c>=0&&(d=0),!m&&0>=d&&0>=c&&(c=0);var q=n(d,c,l,e);i[o].value={min:q.min,max:q.max,step:q.step}}},_getSeriesData:function(a){for(var b,c,d,e=[],f=this.component.legend,g=0;g<this.series.length;g++)if(b=this.series[g],b.type==i.CHART_TYPE_RADAR){c=b.data||[];for(var h=0;h<c.length;h++)d=this.deepQuery([c[h],b,this.option],"polarIndex")||0,d!=a||f&&!f.isSelected(c[h].name)||e.push(c[h])}return e},_findValue:function(a,b,c,d){function e(a){(a>f||void 0===f)&&(f=a),(g>a||void 0===g)&&(g=a)}var f,g,h;if(a&&0!==a.length){if(1==a.length&&(g=0),1!=a.length)for(var i=0;i<a.length;i++)e(this.getDataFromOption(a[i].value[b]));else{h=a[0];for(var i=0;i<h.value.length;i++)e(this.getDataFromOption(h.value[i]))}var j=Math.abs(f-g);return g-=Math.abs(j*d[0]),f+=Math.abs(j*d[1]),g===f&&(0===f?f=1:f>0?g=f/c:f/=c),{max:f,min:g}}},getVector:function(a,b,c){a=a||0,b=b||0;var d=this.polar[a].__ecIndicator;if(!(b>=d.length)){var e,f=this.polar[a].__ecIndicator[b],g=this.getCenter(a),h=f.vector,i=f.value.max,j=f.value.min;if("undefined"==typeof c)return g;switch(c){case"min":c=j;break;case"max":c=i;break;case"center":c=(i+j)/2}return e=i!=j?(c-j)/(i-j):.5,this._mapVector(h,g,e)}},isInside:function(a){var b=this.getNearestIndex(a);return b?b.polarIndex:-1},getNearestIndex:function(a){for(var b,c,d,e,f,g,h,i,j,l=0;l<this.polar.length;l++){if(b=this.polar[l],c=this.getCenter(l),a[0]==c[0]&&a[1]==c[1])return{polarIndex:l,valueIndex:0};if(d=this._getRadius(),f=b.startAngle,g=b.indicator,h=g.length,i=2*Math.PI/h,e=k.cartesian2polar(a[0]-c[0],c[1]-a[1]),a[0]-c[0]<0&&(e[1]+=Math.PI),e[1]<0&&(e[1]+=2*Math.PI),j=e[1]-f/180*Math.PI+2*Math.PI,Math.abs(Math.cos(j%(i/2)))*d>e[0])return{polarIndex:l,valueIndex:Math.floor((j+i/2)/i)%h}}},getIndicator:function(a){var a=a||0;return this.polar[a].indicator},refresh:function(a){a&&(this.option=a,this.polar=this.option.polar,this.series=this.option.series),this.clear(),this._buildShape()}},j.inherits(b,c),a("../component").define("polar",b),b}),c("echarts/layout/Chord",["require"],function(){var a=function(a){a=a||{},this.sort=a.sort||null,this.sortSub=a.sortSub||null,this.padding=.05,this.startAngle=a.startAngle||0,this.clockWise=null==a.clockWise?!1:a.clockWise,this.center=a.center||[0,0],this.directed=!0};a.prototype.run=function(a){a instanceof Array||(a=[a]);var d=a.length;if(d){for(var e=a[0],f=e.nodes.length,g=[],h=0,i=0;f>i;i++){var j=e.nodes[i],k={size:0,subGroups:[],node:j};g.push(k);for(var l=0,m=0;m<a.length;m++){var n=a[m],o=n.getNodeById(j.id);if(o){k.size+=o.layout.size;for(var p=this.directed?o.outEdges:o.edges,q=0;q<p.length;q++){var r=p[q],s=r.layout.weight;k.subGroups.push({weight:s,edge:r,graph:n}),l+=s}}}h+=k.size;for(var t=k.size/l,q=0;q<k.subGroups.length;q++)k.subGroups[q].weight*=t;"ascending"===this.sortSub?k.subGroups.sort(b):"descending"===this.sort&&(k.subGroups.sort(b),k.subGroups.reverse())}"ascending"===this.sort?g.sort(c):"descending"===this.sort&&(g.sort(c),g.reverse());for(var t=(2*Math.PI-this.padding*f)/h,u=this.startAngle,v=this.clockWise?1:-1,i=0;f>i;i++){var k=g[i];k.node.layout.startAngle=u,k.node.layout.endAngle=u+v*k.size*t,k.node.layout.subGroups=[];for(var q=0;q<k.subGroups.length;q++){var w=k.subGroups[q];w.edge.layout.startAngle=u,u+=v*w.weight*t,w.edge.layout.endAngle=u}u=k.node.layout.endAngle+v*this.padding}}};var b=function(a,b){return a.weight-b.weight},c=function(a,b){return a.size-b.size};return a}),c("echarts/util/ecAnimation",["require","zrender/tool/util","zrender/tool/curve","zrender/shape/Polygon"],function(a){function b(a,b,c,d,e){var f,g=c.style.pointList,h=g.length;if(!b){if(f=[],"vertical"!=c._orient)for(var i=g[0][1],j=0;h>j;j++)f[j]=[g[j][0],i];else for(var k=g[0][0],j=0;h>j;j++)f[j]=[k,g[j][1]];"half-smooth-polygon"==c.type&&(f[h-1]=o.clone(g[h-1]),f[h-2]=o.clone(g[h-2])),b={style:{pointList:f}}}f=b.style.pointList;var l=f.length;c.style.pointList=l==h?f:h>l?f.concat(g.slice(l)):f.slice(0,h),a.addShape(c),c.__animating=!0,a.animate(c.id,"style").when(d,{pointList:g}).during(function(){c.updateControlPoints&&c.updateControlPoints(c.style)}).done(function(){c.__animating=!1}).start(e)}function c(a,b){for(var c=arguments.length,d=2;c>d;d++){var e=arguments[d];a.style[e]=b.style[e]}}function d(a,b,d,e,f){var g=d.style;b||(b={position:d.position,style:{x:g.x,y:"vertical"==d._orient?g.y+g.height:g.y,width:"vertical"==d._orient?g.width:0,height:"vertical"!=d._orient?g.height:0}});var h=g.x,i=g.y,j=g.width,k=g.height,l=[d.position[0],d.position[1]];c(d,b,"x","y","width","height"),d.position=b.position,a.addShape(d),(l[0]!=b.position[0]||l[1]!=b.position[1])&&a.animate(d.id,"").when(e,{position:l}).start(f),d.__animating=!0,a.animate(d.id,"style").when(e,{x:h,y:i,width:j,height:k}).done(function(){d.__animating=!1}).start(f)}function e(a,b,c,d,e){if(!b){var f=c.style.y;b={style:{y:[f[0],f[0],f[0],f[0]]}}}var g=c.style.y;c.style.y=b.style.y,a.addShape(c),c.__animating=!0,a.animate(c.id,"style").when(d,{y:g}).done(function(){c.__animating=!1}).start(e)}function f(a,b,c,d,e){var f=c.style.x,g=c.style.y,h=c.style.r0,i=c.style.r;c.__animating=!0,"r"!=c._animationAdd?(c.style.r0=0,c.style.r=0,c.rotation=[2*Math.PI,f,g],a.addShape(c),a.animate(c.id,"style").when(d,{r0:h,r:i}).done(function(){c.__animating=!1}).start(e),a.animate(c.id,"").when(d,{rotation:[0,f,g]}).start(e)):(c.style.r0=c.style.r,a.addShape(c),a.animate(c.id,"style").when(d,{r0:h}).done(function(){c.__animating=!1}).start(e))}function g(a,b,d,e,f){b||(b="r"!=d._animationAdd?{style:{startAngle:d.style.startAngle,endAngle:d.style.startAngle}}:{style:{r0:d.style.r}});var g=d.style.startAngle,h=d.style.endAngle;c(d,b,"startAngle","endAngle"),a.addShape(d),d.__animating=!0,a.animate(d.id,"style").when(e,{startAngle:g,endAngle:h}).done(function(){d.__animating=!1}).start(f)}function h(a,b,d,e,f){b||(b={style:{x:"left"==d.style.textAlign?d.style.x+100:d.style.x-100,y:d.style.y}});var g=d.style.x,h=d.style.y;c(d,b,"x","y"),a.addShape(d),d.__animating=!0,a.animate(d.id,"style").when(e,{x:g,y:h}).done(function(){d.__animating=!1}).start(f)}function i(b,c,d,e,f){var g=a("zrender/shape/Polygon").prototype.getRect(d.style),h=g.x+g.width/2,i=g.y+g.height/2;d.scale=[.1,.1,h,i],b.addShape(d),d.__animating=!0,b.animate(d.id,"").when(e,{scale:[1,1,h,i]}).done(function(){d.__animating=!1}).start(f)}function j(a,b,d,e,f){b||(b={style:{source0:0,source1:d.style.source1>0?360:-360,target0:0,target1:d.style.target1>0?360:-360}});var g=d.style.source0,h=d.style.source1,i=d.style.target0,j=d.style.target1;b.style&&c(d,b,"source0","source1","target0","target1"),a.addShape(d),d.__animating=!0,a.animate(d.id,"style").when(e,{source0:g,source1:h,target0:i,target1:j}).done(function(){d.__animating=!1}).start(f)}function k(a,b,c,d,e){b||(b={style:{angle:c.style.startAngle}});var f=c.style.angle;c.style.angle=b.style.angle,a.addShape(c),c.__animating=!0,a.animate(c.id,"style").when(d,{angle:f}).done(function(){c.__animating=!1}).start(e)}function l(a,b,c,e,f,g){if(c.style._x=c.style.x,c.style._y=c.style.y,c.style._width=c.style.width,c.style._height=c.style.height,b)d(a,b,c,e,f);else{var h=c._x||0,i=c._y||0;c.scale=[.01,.01,h,i],a.addShape(c),c.__animating=!0,a.animate(c.id,"").delay(g).when(e,{scale:[1,1,h,i]}).done(function(){c.__animating=!1}).start(f||"QuinticOut")}}function m(a,b,d,e,f){b||(b={style:{xStart:d.style.xStart,yStart:d.style.yStart,xEnd:d.style.xStart,yEnd:d.style.yStart}});var g=d.style.xStart,h=d.style.xEnd,i=d.style.yStart,j=d.style.yEnd;c(d,b,"xStart","xEnd","yStart","yEnd"),a.addShape(d),d.__animating=!0,a.animate(d.id,"style").when(e,{xStart:g,xEnd:h,yStart:i,yEnd:j}).done(function(){d.__animating=!1}).start(f)}function n(a,b,c,d,e){e=e||"QuinticOut",c.__animating=!0,a.addShape(c);var f=c.style,g=function(){c.__animating=!1},h=f.xStart,i=f.yStart,j=f.xEnd,k=f.yEnd;if(f.curveness>0){c.updatePoints(f);var l={p:0},m=f.cpX1,n=f.cpY1,o=[],q=[],r=p.quadraticSubdivide;a.animation.animate(l).when(d,{p:1}).during(function(){r(h,m,j,l.p,o),r(i,n,k,l.p,q),f.cpX1=o[1],f.cpY1=q[1],f.xEnd=o[2],f.yEnd=q[2],a.modShape(c)}).done(g).start(e)}else a.animate(c.id,"style").when(0,{xEnd:h,yEnd:i}).when(d,{xEnd:j,yEnd:k}).done(g).start(e)}var o=a("zrender/tool/util"),p=a("zrender/tool/curve");return{pointList:b,rectangle:d,candle:e,ring:f,sector:g,text:h,polygon:i,ribbon:j,gaugePointer:k,icon:l,line:m,markline:n}}),c("zrender/shape/ShapeBundle",["require","./Base","../tool/util"],function(a){var b=a("./Base"),c=function(a){b.call(this,a)};return c.prototype={constructor:c,type:"shape-bundle",brush:function(a,b){var c=this.beforeBrush(a,b);a.beginPath();for(var d=0;d<c.shapeList.length;d++){var e=c.shapeList[d],f=e.style;b&&(f=e.getHighlightStyle(f,e.highlightStyle||{},e.brushTypeOnly)),e.buildPath(a,f)}switch(c.brushType){case"both":a.fill();case"stroke":c.lineWidth>0&&a.stroke();break;default:a.fill()}this.drawText(a,c,this.style),this.afterBrush(a)},getRect:function(a){if(a.__rect)return a.__rect;for(var b=1/0,c=-1/0,d=1/0,e=-1/0,f=0;f<a.shapeList.length;f++)var g=a.shapeList[f],h=g.getRect(g.style),b=Math.min(h.x,b),d=Math.min(h.y,d),c=Math.max(h.x+h.width,c),e=Math.max(h.y+h.height,e);return a.__rect={x:b,y:d,width:c-b,height:e-d},a.__rect},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);if(a=c[0],b=c[1],this.isCoverRect(a,b))for(var d=0;d<this.style.shapeList.length;d++){var e=this.style.shapeList[d];if(e.isCover(a,b))return!0}return!1}},a("../tool/util").inherits(c,b),c}),c("echarts/data/Graph",["require","zrender/tool/util"],function(a){var b=a("zrender/tool/util"),c=function(a){this._directed=a||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}};c.prototype.isDirected=function(){return this._directed},c.prototype.addNode=function(a,b){if(this._nodesMap[a])return this._nodesMap[a];var d=new c.Node(a,b);return this.nodes.push(d),this._nodesMap[a]=d,d},c.prototype.getNodeById=function(a){return this._nodesMap[a]},c.prototype.addEdge=function(a,b,d){if("string"==typeof a&&(a=this._nodesMap[a]),"string"==typeof b&&(b=this._nodesMap[b]),a&&b){var e=a.id+"-"+b.id;if(this._edgesMap[e])return this._edgesMap[e];var f=new c.Edge(a,b,d);return this._directed&&(a.outEdges.push(f),b.inEdges.push(f)),a.edges.push(f),a!==b&&b.edges.push(f),this.edges.push(f),this._edgesMap[e]=f,f}},c.prototype.removeEdge=function(a){var c=a.node1,d=a.node2,e=c.id+"-"+d.id;this._directed&&(c.outEdges.splice(b.indexOf(c.outEdges,a),1),d.inEdges.splice(b.indexOf(d.inEdges,a),1)),c.edges.splice(b.indexOf(c.edges,a),1),c!==d&&d.edges.splice(b.indexOf(d.edges,a),1),delete this._edgesMap[e],this.edges.splice(b.indexOf(this.edges,a),1)},c.prototype.getEdge=function(a,b){return"string"!=typeof a&&(a=a.id),"string"!=typeof b&&(b=b.id),this._directed?this._edgesMap[a+"-"+b]:this._edgesMap[a+"-"+b]||this._edgesMap[b+"-"+a]},c.prototype.removeNode=function(a){if("string"!=typeof a||(a=this._nodesMap[a])){delete this._nodesMap[a.id],this.nodes.splice(b.indexOf(this.nodes,a),1);for(var c=0;c<this.edges.length;){var d=this.edges[c];d.node1===a||d.node2===a?this.removeEdge(d):c++}}},c.prototype.filterNode=function(a,b){for(var c=this.nodes.length,d=0;c>d;)a.call(b,this.nodes[d],d)?d++:(this.removeNode(this.nodes[d]),c--)},c.prototype.filterEdge=function(a,b){for(var c=this.edges.length,d=0;c>d;)a.call(b,this.edges[d],d)?d++:(this.removeEdge(this.edges[d]),c--)},c.prototype.eachNode=function(a,b){for(var c=this.nodes.length,d=0;c>d;d++)this.nodes[d]&&a.call(b,this.nodes[d],d)},c.prototype.eachEdge=function(a,b){for(var c=this.edges.length,d=0;c>d;d++)this.edges[d]&&a.call(b,this.edges[d],d)},c.prototype.clear=function(){this.nodes.length=0,this.edges.length=0,this._nodesMap={},this._edgesMap={}},c.prototype.breadthFirstTraverse=function(a,b,c,d){if("string"==typeof b&&(b=this._nodesMap[b]),b){var e="edges";"out"===c?e="outEdges":"in"===c&&(e="inEdges");for(var f=0;f<this.nodes.length;f++)this.nodes[f].__visited=!1;if(!a.call(d,b,null))for(var g=[b];g.length;)for(var h=g.shift(),i=h[e],f=0;f<i.length;f++){var j=i[f],k=j.node1===h?j.node2:j.node1;if(!k.__visited){if(a.call(k,k,h))return;g.push(k),k.__visited=!0}}}},c.prototype.clone=function(){for(var a=new c(this._directed),b=0;b<this.nodes.length;b++)a.addNode(this.nodes[b].id,this.nodes[b].data);for(var b=0;b<this.edges.length;b++){var d=this.edges[b];a.addEdge(d.node1.id,d.node2.id,d.data)}return a};var d=function(a,b){this.id=a,this.data=b||null,this.inEdges=[],this.outEdges=[],this.edges=[]};d.prototype.degree=function(){return this.edges.length},d.prototype.inDegree=function(){return this.inEdges.length},d.prototype.outDegree=function(){return this.outEdges.length};var e=function(a,b,c){this.node1=a,this.node2=b,this.data=c||null};return c.Node=d,c.Edge=e,c.fromMatrix=function(a,b,d){if(b&&b.length&&b[0].length===b.length&&a.length===b.length){for(var e=b.length,f=new c(d),g=0;e>g;g++){var h=f.addNode(a[g].id,a[g]);h.data.value=0,d&&(h.data.outValue=h.data.inValue=0)}for(var g=0;e>g;g++)for(var i=0;e>i;i++){var j=b[g][i];d&&(f.nodes[g].data.outValue+=j,f.nodes[i].data.inValue+=j),f.nodes[g].data.value+=j,f.nodes[i].data.value+=j}for(var g=0;e>g;g++)for(var i=g;e>i;i++){var j=b[g][i];if(0!==j){var k=f.nodes[g],l=f.nodes[i],m=f.addEdge(k,l,{});if(m.data.weight=j,g!==i&&d&&b[i][g]){var n=f.addEdge(l,k,{});n.data.weight=b[i][g]}}}return f}},c}),c("echarts/util/ecEffect",["require","../util/ecData","zrender/shape/Circle","zrender/shape/Image","zrender/tool/curve","../util/shape/Icon","../util/shape/Symbol","zrender/shape/ShapeBundle","zrender/shape/Polyline","zrender/tool/vector","zrender/tool/env"],function(a){function b(a,b,c,d){var e,g=c.effect,i=g.color||c.style.strokeColor||c.style.color,k=g.shadowColor||i,l=g.scaleSize,m=g.bounceDistance,n="undefined"!=typeof g.shadowBlur?g.shadowBlur:l;"image"!==c.type?(e=new j({zlevel:d,style:{brushType:"stroke",iconType:"droplet"!=c.style.iconType?c.style.iconType:"circle",x:n+1,y:n+1,n:c.style.n,width:c.style._width*l,height:c.style._height*l,lineWidth:1,strokeColor:i,shadowColor:k,shadowBlur:n},draggable:!1,hoverable:!1}),"pin"==c.style.iconType&&(e.style.y+=e.style.height/2*1.5),o&&(e.style.image=a.shapeToImage(e,e.style.width+2*n+2,e.style.height+2*n+2).style.image,e=new h({zlevel:e.zlevel,style:e.style,draggable:!1,hoverable:!1}))):e=new h({zlevel:d,style:c.style,draggable:!1,hoverable:!1}),f.clone(c,e),e.position=c.position,b.push(e),a.addShape(e);var p="image"!==c.type?window.devicePixelRatio||1:1,q=(e.style.width/p-c.style._width)/2;e.style.x=c.style._x-q,e.style.y=c.style._y-q,"pin"==c.style.iconType&&(e.style.y-=c.style.height/2*1.5);var r=100*(g.period+10*Math.random());a.modShape(c.id,{invisible:!0});var s=e.style.x+e.style.width/2/p,t=e.style.y+e.style.height/2/p;"scale"===g.type?(a.modShape(e.id,{scale:[.1,.1,s,t]}),a.animate(e.id,"",g.loop).when(r,{scale:[1,1,s,t]}).done(function(){c.effect.show=!1,a.delShape(e.id)}).start()):a.animate(e.id,"style",g.loop).when(r,{y:e.style.y-m}).when(2*r,{y:e.style.y}).done(function(){c.effect.show=!1,a.delShape(e.id)}).start()}function c(a,b,c,d){var e=c.effect,f=e.color||c.style.strokeColor||c.style.color,g=e.scaleSize,h=e.shadowColor||f,i="undefined"!=typeof e.shadowBlur?e.shadowBlur:2*g,j=window.devicePixelRatio||1,l=new k({zlevel:d,position:c.position,scale:c.scale,style:{pointList:c.style.pointList,iconType:c.style.iconType,color:f,strokeColor:f,shadowColor:h,shadowBlur:i*j,random:!0,brushType:"fill",lineWidth:1,size:c.style.size},draggable:!1,hoverable:!1});b.push(l),a.addShape(l),a.modShape(c.id,{invisible:!0});for(var m=Math.round(100*e.period),n={},o={},p=0;20>p;p++)l.style["randomMap"+p]=0,n={},n["randomMap"+p]=100,o={},o["randomMap"+p]=0,l.style["randomMap"+p]=100*Math.random(),a.animate(l.id,"style",!0).when(m,n).when(2*m,o).when(3*m,n).when(4*m,n).delay(Math.random()*m*p).start()}function d(a,b,c,d,e){var h=c.effect,j=c.style,k=h.color||j.strokeColor||j.color,l=h.shadowColor||j.strokeColor||k,p=j.lineWidth*h.scaleSize,q="undefined"!=typeof h.shadowBlur?h.shadowBlur:p,r=new g({zlevel:d,style:{x:q,y:q,r:p,color:k,shadowColor:l,shadowBlur:q},hoverable:!1}),s=0;if(o&&!e){var d=r.zlevel;r=a.shapeToImage(r,2*(p+q),2*(p+q)),r.zlevel=d,r.hoverable=!1,s=q}e||(f.clone(c,r),r.position=c.position,b.push(r),a.addShape(r));var t=function(){e||(c.effect.show=!1,a.delShape(r.id)),r.effectAnimator=null};if(c instanceof m){for(var u=[0],v=0,w=j.pointList,x=j.controlPointList,y=1;y<w.length;y++){if(x){var z=x[2*(y-1)],A=x[2*(y-1)+1];v+=n.dist(w[y-1],z)+n.dist(z,A)+n.dist(A,w[y])}else v+=n.dist(w[y-1],w[y]);u.push(v)}for(var B={p:0},C=a.animation.animate(B,{loop:h.loop}),y=0;y<u.length;y++)C.when(u[y]*h.period,{p:y});C.during(function(){
var b,c,d=Math.floor(B.p);if(d==w.length-1)b=w[d][0],c=w[d][1];else{var f=B.p-d,g=w[d],h=w[d+1];if(x){var j=x[2*d],k=x[2*d+1];b=i.cubicAt(g[0],j[0],k[0],h[0],f),c=i.cubicAt(g[1],j[1],k[1],h[1],f)}else b=(h[0]-g[0])*f+g[0],c=(h[1]-g[1])*f+g[1]}r.style.x=b,r.style.y=c,e||a.modShape(r)}).done(t).start(),C.duration=v*h.period,r.effectAnimator=C}else{var D=j.xStart-s,E=j.yStart-s,F=j.xEnd-s,G=j.yEnd-s;r.style.x=D,r.style.y=E;var H=(F-D)*(F-D)+(G-E)*(G-E),I=Math.round(Math.sqrt(Math.round(H*h.period*h.period)));if(c.style.curveness>0){var J=j.cpX1-s,K=j.cpY1-s;r.effectAnimator=a.animation.animate(r,{loop:h.loop}).when(I,{p:1}).during(function(b,c){r.style.x=i.quadraticAt(D,J,F,c),r.style.y=i.quadraticAt(E,K,G,c),e||a.modShape(r)}).done(t).start()}else r.effectAnimator=a.animation.animate(r.style,{loop:h.loop}).when(I,{x:F,y:G}).during(function(){e||a.modShape(r)}).done(t).start();r.effectAnimator.duration=I}return r}function e(a,b,c,e){var f=new l({style:{shapeList:[]},zlevel:e,hoverable:!1}),g=c.style.shapeList,h=c.effect;f.position=c.position;for(var i=0,j=[],k=0;k<g.length;k++){g[k].effect=h;var m=d(a,null,g[k],e,!0),n=m.effectAnimator;f.style.shapeList.push(m),n.duration>i&&(i=n.duration),0===k&&(f.style.color=m.style.color,f.style.shadowBlur=m.style.shadowBlur,f.style.shadowColor=m.style.shadowColor),j.push(n)}b.push(f),a.addShape(f);var o=function(){for(var a=0;a<j.length;a++)j[a].stop()};if(i){f.__dummy=0;var p=a.animate(f.id,"",h.loop).when(i,{__dummy:1}).during(function(){a.modShape(f)}).done(function(){c.effect.show=!1,a.delShape(f.id)}).start(),q=p.stop;p.stop=function(){o(),q.call(this)}}}var f=a("../util/ecData"),g=a("zrender/shape/Circle"),h=a("zrender/shape/Image"),i=a("zrender/tool/curve"),j=a("../util/shape/Icon"),k=a("../util/shape/Symbol"),l=a("zrender/shape/ShapeBundle"),m=a("zrender/shape/Polyline"),n=a("zrender/tool/vector"),o=a("zrender/tool/env").canvasSupported;return{point:b,largePoint:c,line:d,largeLine:e}}),c("echarts/layout/EdgeBundling",["require","../data/KDTree","zrender/tool/vector"],function(a){function b(a,b){a=a.array,b=b.array;var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f}function c(a){this.points=[a.mp0,a.mp1],this.group=a}function d(a){var b=a.points;b[0][1]<b[1][1]||a instanceof c?(this.array=[b[0][0],b[0][1],b[1][0],b[1][1]],this._startPoint=b[0],this._endPoint=b[1]):(this.array=[b[1][0],b[1][1],b[0][0],b[0][1]],this._startPoint=b[1],this._endPoint=b[0]),this.ink=k(b[0],b[1]),this.edge=a,this.group=null}function e(){this.edgeList=[],this.mp0=i(),this.mp1=i(),this.ink=0}function f(){this.maxNearestEdge=6,this.maxTurningAngle=Math.PI/4,this.maxIteration=20}var g=a("../data/KDTree"),h=a("zrender/tool/vector"),i=h.create,j=h.distSquare,k=h.dist,l=h.copy,m=h.clone;return d.prototype.getStartPoint=function(){return this._startPoint},d.prototype.getEndPoint=function(){return this._endPoint},e.prototype.addEdge=function(a){a.group=this,this.edgeList.push(a)},e.prototype.removeEdge=function(a){a.group=null,this.edgeList.splice(this.edgeList.indexOf(a),1)},f.prototype={constructor:f,run:function(a){function b(a,b){return j(a,b)<1e-10}function d(a,c){for(var d=[],e=0,f=0;f<a.length;f++)e>0&&b(a[f],d[e-1])||(d[e++]=m(a[f]));return c[0]&&!b(d[0],c[0])&&(d=d.reverse()),d}for(var e=this._iterate(a),f=0;f++<this.maxIteration;){for(var g=[],h=0;h<e.groups.length;h++)g.push(new c(e.groups[h]));var i=this._iterate(g);if(i.savedInk<=0)break;e=i}var k=[],l=function(a,b){for(var e,f=0;f<a.length;f++){var g=a[f];if(g.edgeList[0]&&g.edgeList[0].edge instanceof c){for(var h=[],i=0;i<g.edgeList.length;i++)h.push(g.edgeList[i].edge.group);e=b?b.slice():[],e.unshift(g.mp0),e.push(g.mp1),l(h,e)}else for(var i=0;i<g.edgeList.length;i++){var j=g.edgeList[i];e=b?b.slice():[],e.unshift(g.mp0),e.push(g.mp1),e.unshift(j.getStartPoint()),e.push(j.getEndPoint()),k.push({points:d(e,j.edge.points),rawEdge:j.edge})}}};return l(e.groups),k},_iterate:function(a){for(var c=[],f=[],h=0,j=0;j<a.length;j++){var k=new d(a[j]);c.push(k)}for(var m=new g(c,4),n=[],o=i(),p=i(),q=0,r=i(),s=i(),t=0,j=0;j<c.length;j++){var k=c[j];if(!k.group){m.nearestN(k,this.maxNearestEdge,b,n);for(var u=0,v=null,w=null,x=0;x<n.length;x++){var y=n[x],z=0;y.group?y.group!==w&&(w=y.group,q=this._calculateGroupEdgeInk(y.group,k,o,p),z=y.group.ink+k.ink-q):(q=this._calculateEdgeEdgeInk(k,y,o,p),z=y.ink+k.ink-q),z>u&&(u=z,v=y,l(s,p),l(r,o),t=q)}if(v){h+=u;var A;v.group||(A=new e,f.push(A),A.addEdge(v)),A=v.group,l(A.mp0,r),l(A.mp1,s),A.ink=t,v.group.addEdge(k)}else{var A=new e;f.push(A),l(A.mp0,k.getStartPoint()),l(A.mp1,k.getEndPoint()),A.ink=k.ink,A.addEdge(k)}}}return{groups:f,edges:c,savedInk:h}},_calculateEdgeEdgeInk:function(){var a=[],b=[];return function(c,d,e,f){a[0]=c.getStartPoint(),a[1]=d.getStartPoint(),b[0]=c.getEndPoint(),b[1]=d.getEndPoint(),this._calculateMeetPoints(a,b,e,f);var g=k(a[0],e)+k(e,f)+k(f,b[0])+k(a[1],e)+k(f,b[1]);return g}}(),_calculateGroupEdgeInk:function(a,b,c,d){for(var e=[],f=[],g=0;g<a.edgeList.length;g++){var h=a.edgeList[g];e.push(h.getStartPoint()),f.push(h.getEndPoint())}e.push(b.getStartPoint()),f.push(b.getEndPoint()),this._calculateMeetPoints(e,f,c,d);for(var i=k(c,d),g=0;g<e.length;g++)i+=k(e[g],c)+k(f[g],d);return i},_calculateMeetPoints:function(){var a=i(),b=i();return function(c,d,e,f){h.set(a,0,0),h.set(b,0,0);for(var g=c.length,i=0;g>i;i++)h.add(a,a,c[i]);h.scale(a,a,1/g),g=d.length;for(var i=0;g>i;i++)h.add(b,b,d[i]);h.scale(b,b,1/g),this._limitTurningAngle(c,a,b,e),this._limitTurningAngle(d,b,a,f)}}(),_limitTurningAngle:function(){var a=i(),b=i(),c=i(),d=i();return function(e,f,g,i){var l=Math.cos(this.maxTurningAngle),m=Math.tan(this.maxTurningAngle);h.sub(a,f,g),h.normalize(a,a),h.copy(i,f);for(var n=0,o=0;o<e.length;o++){var p=e[o];h.sub(b,p,f);var q=h.len(b);h.scale(b,b,1/q);var r=h.dot(b,a);if(l>r){h.scaleAndAdd(c,f,a,q*r);var s=k(c,p),t=s/m;h.scaleAndAdd(d,c,a,-t);var u=j(d,f);u>n&&(n=u,h.copy(i,d))}}}}()},f}),c("echarts/util/shape/GaugePointer",["require","zrender/shape/Base","zrender/tool/util","./normalIsCover"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/tool/util");return b.prototype={type:"gauge-pointer",buildPath:function(a,b){var c=b.r,d=b.width,e=b.angle,f=b.x-Math.cos(e)*d*(d>=c/3?1:2),g=b.y+Math.sin(e)*d*(d>=c/3?1:2);e=b.angle-Math.PI/2,a.moveTo(f,g),a.lineTo(b.x+Math.cos(e)*d,b.y-Math.sin(e)*d),a.lineTo(b.x+Math.cos(b.angle)*c,b.y-Math.sin(b.angle)*c),a.lineTo(b.x-Math.cos(e)*d,b.y+Math.sin(e)*d),a.lineTo(f,g)},getRect:function(a){if(a.__rect)return a.__rect;var b=2*a.width,c=a.x,d=a.y,e=c+Math.cos(a.angle)*a.r,f=d-Math.sin(a.angle)*a.r;return a.__rect={x:Math.min(c,e)-b,y:Math.min(d,f)-b,width:Math.abs(c-e)+b,height:Math.abs(d-f)+b},a.__rect},isCover:a("./normalIsCover")},d.inherits(b,c),b}),c("echarts/util/shape/MarkLine",["require","zrender/shape/Base","./Icon","zrender/shape/Line","zrender/shape/BezierCurve","zrender/tool/area","zrender/shape/util/dashedLineTo","zrender/tool/util","zrender/tool/curve"],function(a){function b(a){c.call(this,a),this.style.curveness>0&&this.updatePoints(this.style),this.highlightStyle.curveness>0&&this.updatePoints(this.highlightStyle)}var c=a("zrender/shape/Base"),d=a("./Icon"),e=a("zrender/shape/Line"),f=new e({}),g=a("zrender/shape/BezierCurve"),h=new g({}),i=a("zrender/tool/area"),j=a("zrender/shape/util/dashedLineTo"),k=a("zrender/tool/util"),l=a("zrender/tool/curve");return b.prototype={type:"mark-line",brush:function(a,b){var c=this.style;b&&(c=this.getHighlightStyle(c,this.highlightStyle||{})),a.save(),this.setContext(a,c),this.setTransform(a),a.save(),a.beginPath(),this.buildPath(a,c),a.stroke(),a.restore(),this.brushSymbol(a,c,0),this.brushSymbol(a,c,1),this.drawText(a,c,this.style),a.restore()},buildPath:function(a,b){var c=b.lineType||"solid";if(a.moveTo(b.xStart,b.yStart),b.curveness>0){var d=null;switch(c){case"dashed":d=[5,5];break;case"dotted":d=[1,1]}d&&a.setLineDash&&a.setLineDash(d),a.quadraticCurveTo(b.cpX1,b.cpY1,b.xEnd,b.yEnd)}else if("solid"==c)a.lineTo(b.xEnd,b.yEnd);else{var e=(b.lineWidth||1)*("dashed"==b.lineType?5:1);j(a,b.xStart,b.yStart,b.xEnd,b.yEnd,e)}},updatePoints:function(a){var b=a.curveness||0,c=1,d=a.xStart,e=a.yStart,f=a.xEnd,g=a.yEnd,h=(d+f)/2-c*(e-g)*b,i=(e+g)/2-c*(f-d)*b;a.cpX1=h,a.cpY1=i},brushSymbol:function(a,b,c){if("none"!=b.symbol[c]){a.save(),a.beginPath(),a.lineWidth=b.symbolBorder,a.strokeStyle=b.symbolBorderColor;var e=b.symbol[c].replace("empty","").toLowerCase();b.symbol[c].match("empty")&&(a.fillStyle="#fff");var f=b.xStart,g=b.yStart,h=b.xEnd,i=b.yEnd,j=0===c?f:h,k=0===c?g:i,m=b.curveness||0,n=null!=b.symbolRotate[c]?b.symbolRotate[c]-0:0;if(n=n/180*Math.PI,"arrow"==e&&0===n)if(0===m){var o=0===c?-1:1;n=Math.PI/2+Math.atan2(o*(i-g),o*(h-f))}else{var p=b.cpX1,q=b.cpY1,r=l.quadraticDerivativeAt,s=r(f,p,h,c),t=r(g,q,i,c);n=Math.PI/2+Math.atan2(t,s)}a.translate(j,k),0!==n&&a.rotate(n);var u=b.symbolSize[c];d.prototype.buildPath(a,{x:-u,y:-u,width:2*u,height:2*u,iconType:e}),a.closePath(),a.fill(),a.stroke(),a.restore()}},getRect:function(a){return a.curveness>0?h.getRect(a):f.getRect(a),a.__rect},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);return a=c[0],b=c[1],this.isCoverRect(a,b)?this.style.curveness>0?i.isInside(h,this.style,a,b):i.isInside(f,this.style,a,b):!1}},k.inherits(b,c),b}),c("zrender/dep/excanvas",["require"],function(){return document.createElement("canvas").getContext?G_vmlCanvasManager=!1:!function(){function a(){return this.context_||(this.context_=new u(this))}function b(a,b){var c=O.call(arguments,2);return function(){return a.apply(b,c.concat(O.call(arguments)))}}function c(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function d(a,b,c){a.namespaces[b]||a.namespaces.add(b,c,"#default#VML")}function e(a){if(d(a,"g_vml_","urn:schemas-microsoft-com:vml"),d(a,"g_o_","urn:schemas-microsoft-com:office:office"),!a.styleSheets.ex_canvas_){var b=a.createStyleSheet();b.owningElement.id="ex_canvas_",b.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function f(a){var b=a.srcElement;switch(a.propertyName){case"width":b.getContext().clearRect(),b.style.width=b.attributes.width.nodeValue+"px",b.firstChild.style.width=b.clientWidth+"px";break;case"height":b.getContext().clearRect(),b.style.height=b.attributes.height.nodeValue+"px",b.firstChild.style.height=b.clientHeight+"px"}}function g(a){var b=a.srcElement;b.firstChild&&(b.firstChild.style.width=b.clientWidth+"px",b.firstChild.style.height=b.clientHeight+"px")}function h(){return[[1,0,0],[0,1,0],[0,0,1]]}function i(a,b){for(var c=h(),d=0;3>d;d++)for(var e=0;3>e;e++){for(var f=0,g=0;3>g;g++)f+=a[d][g]*b[g][e];c[d][e]=f}return c}function j(a,b){b.fillStyle=a.fillStyle,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.lineWidth=a.lineWidth,b.miterLimit=a.miterLimit,b.shadowBlur=a.shadowBlur,b.shadowColor=a.shadowColor,b.shadowOffsetX=a.shadowOffsetX,b.shadowOffsetY=a.shadowOffsetY,b.strokeStyle=a.strokeStyle,b.globalAlpha=a.globalAlpha,b.font=a.font,b.textAlign=a.textAlign,b.textBaseline=a.textBaseline,b.scaleX_=a.scaleX_,b.scaleY_=a.scaleY_,b.lineScale_=a.lineScale_}function k(a){var b=a.indexOf("(",3),c=a.indexOf(")",b+1),d=a.substring(b+1,c).split(",");return(4!=d.length||"a"!=a.charAt(3))&&(d[3]=1),d}function l(a){return parseFloat(a)/100}function m(a,b,c){return Math.min(c,Math.max(b,a))}function n(a){var b,c,d,e,f,g;if(e=parseFloat(a[0])/360%360,0>e&&e++,f=m(l(a[1]),0,1),g=m(l(a[2]),0,1),0==f)b=c=d=g;else{var h=.5>g?g*(1+f):g+f-g*f,i=2*g-h;b=o(i,h,e+1/3),c=o(i,h,e),d=o(i,h,e-1/3)}return"#"+Q[Math.floor(255*b)]+Q[Math.floor(255*c)]+Q[Math.floor(255*d)]}function o(a,b,c){return 0>c&&c++,c>1&&c--,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}function p(a){if(a in U)return U[a];var b,c=1;if(a=String(a),"#"==a.charAt(0))b=a;else if(/^rgb/.test(a)){for(var d,e=k(a),b="#",f=0;3>f;f++)d=-1!=e[f].indexOf("%")?Math.floor(255*l(e[f])):+e[f],b+=Q[m(d,0,255)];c=+e[3]}else if(/^hsl/.test(a)){var e=k(a);b=n(e),c=e[3]}else b=T[a]||a;return U[a]={color:b,alpha:c}}function q(a){if(W[a])return W[a];var b,c=document.createElement("div"),d=c.style;try{d.font=a,b=d.fontFamily.split(",")[0]}catch(e){}return W[a]={style:d.fontStyle||V.style,variant:d.fontVariant||V.variant,weight:d.fontWeight||V.weight,size:d.fontSize||V.size,family:b||V.family}}function r(a,b){var c={};for(var d in a)c[d]=a[d];var e=parseFloat(b.currentStyle.fontSize),f=parseFloat(a.size);return c.size="number"==typeof a.size?a.size:-1!=a.size.indexOf("px")?f:-1!=a.size.indexOf("em")?e*f:-1!=a.size.indexOf("%")?e/100*f:-1!=a.size.indexOf("pt")?f/.75:e,c}function s(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+"px '"+a.family+"'"}function t(a){return X[a]||"square"}function u(a){this.m_=h(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*M,this.globalAlpha=1,this.font="12px 微软雅黑",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=a;var b="width:"+a.clientWidth+"px;height:"+a.clientHeight+"px;overflow:hidden;position:absolute",c=a.ownerDocument.createElement("div");c.style.cssText=b,a.appendChild(c);var d=c.cloneNode(!1);d.style.backgroundColor="#fff",d.style.filter="alpha(opacity=0)",a.appendChild(d),this.element_=c,this.scaleX_=1,this.scaleY_=1,this.lineScale_=1}function v(a,b,c,d){a.currentPath_.push({type:"bezierCurveTo",cp1x:b.x,cp1y:b.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y}),a.currentX_=d.x,a.currentY_=d.y}function w(a,b){var c=p(a.strokeStyle),d=c.color,e=c.alpha*a.globalAlpha,f=a.lineScale_*a.lineWidth;1>f&&(e*=f),b.push("<g_vml_:stroke",' opacity="',e,'"',' joinstyle="',a.lineJoin,'"',' miterlimit="',a.miterLimit,'"',' endcap="',t(a.lineCap),'"',' weight="',f,'px"',' color="',d,'" />')}function x(a,b,c,d){var e=a.fillStyle,f=a.scaleX_,g=a.scaleY_,h=d.x-c.x,i=d.y-c.y;if(e instanceof B){var j=0,k={x:0,y:0},l=0,m=1;if("gradient"==e.type_){var n=e.x0_/f,o=e.y0_/g,q=e.x1_/f,r=e.y1_/g,s=y(a,n,o),t=y(a,q,r),u=t.x-s.x,v=t.y-s.y;j=180*Math.atan2(u,v)/Math.PI,0>j&&(j+=360),1e-6>j&&(j=0)}else{var s=y(a,e.x0_,e.y0_);k={x:(s.x-c.x)/h,y:(s.y-c.y)/i},h/=f*M,i/=g*M;var w=G.max(h,i);l=2*e.r0_/w,m=2*e.r1_/w-l}var x=e.colors_;x.sort(function(a,b){return a.offset-b.offset});for(var z=x.length,A=x[0].color,D=x[z-1].color,E=x[0].alpha*a.globalAlpha,F=x[z-1].alpha*a.globalAlpha,H=[],I=0;z>I;I++){var J=x[I];H.push(J.offset*m+l+" "+J.color)}b.push('<g_vml_:fill type="',e.type_,'"',' method="none" focus="100%"',' color="',A,'"',' color2="',D,'"',' colors="',H.join(","),'"',' opacity="',F,'"',' g_o_:opacity2="',E,'"',' angle="',j,'"',' focusposition="',k.x,",",k.y,'" />')}else if(e instanceof C){if(h&&i){var K=-c.x,L=-c.y;b.push("<g_vml_:fill",' position="',K/h*f*f,",",L/i*g*g,'"',' type="tile"',' src="',e.src_,'" />')}}else{var N=p(a.fillStyle),O=N.color,P=N.alpha*a.globalAlpha;b.push('<g_vml_:fill color="',O,'" opacity="',P,'" />')}}function y(a,b,c){var d=a.m_;return{x:M*(b*d[0][0]+c*d[1][0]+d[2][0])-N,y:M*(b*d[0][1]+c*d[1][1]+d[2][1])-N}}function z(a){return isFinite(a[0][0])&&isFinite(a[0][1])&&isFinite(a[1][0])&&isFinite(a[1][1])&&isFinite(a[2][0])&&isFinite(a[2][1])}function A(a,b,c){if(z(b)&&(a.m_=b,a.scaleX_=Math.sqrt(b[0][0]*b[0][0]+b[0][1]*b[0][1]),a.scaleY_=Math.sqrt(b[1][0]*b[1][0]+b[1][1]*b[1][1]),c)){var d=b[0][0]*b[1][1]-b[0][1]*b[1][0];a.lineScale_=L(K(d))}}function B(a){this.type_=a,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function C(a,b){switch(E(a),b){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=b;break;default:D("SYNTAX_ERR")}this.src_=a.src,this.width_=a.width,this.height_=a.height}function D(a){throw new F(a)}function E(a){a&&1==a.nodeType&&"IMG"==a.tagName||D("TYPE_MISMATCH_ERR"),"complete"!=a.readyState&&D("INVALID_STATE_ERR")}function F(a){this.code=this[a],this.message=a+": DOM Exception "+this.code}var G=Math,H=G.round,I=G.sin,J=G.cos,K=G.abs,L=G.sqrt,M=10,N=M/2,O=(+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1],Array.prototype.slice);e(document);var P={init:function(a){var c=a||document;c.createElement("canvas"),c.attachEvent("onreadystatechange",b(this.init_,this,c))},init_:function(a){for(var b=a.getElementsByTagName("canvas"),c=0;c<b.length;c++)this.initElement(b[c])},initElement:function(b){if(!b.getContext){b.getContext=a,e(b.ownerDocument),b.innerHTML="",b.attachEvent("onpropertychange",f),b.attachEvent("onresize",g);var c=b.attributes;c.width&&c.width.specified?b.style.width=c.width.nodeValue+"px":b.width=b.clientWidth,c.height&&c.height.specified?b.style.height=c.height.nodeValue+"px":b.height=b.clientHeight}return b}};P.init();for(var Q=[],R=0;16>R;R++)for(var S=0;16>S;S++)Q[16*R+S]=R.toString(16)+S.toString(16);var T={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},U={},V={style:"normal",variant:"normal",weight:"normal",size:12,family:"微软雅黑"},W={},X={butt:"flat",round:"round"},Y=u.prototype;Y.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},Y.beginPath=function(){this.currentPath_=[]},Y.moveTo=function(a,b){var c=y(this,a,b);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},Y.lineTo=function(a,b){var c=y(this,a,b);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},Y.bezierCurveTo=function(a,b,c,d,e,f){var g=y(this,e,f),h=y(this,a,b),i=y(this,c,d);v(this,h,i,g)},Y.quadraticCurveTo=function(a,b,c,d){var e=y(this,a,b),f=y(this,c,d),g={x:this.currentX_+2/3*(e.x-this.currentX_),y:this.currentY_+2/3*(e.y-this.currentY_)},h={x:g.x+(f.x-this.currentX_)/3,y:g.y+(f.y-this.currentY_)/3};v(this,g,h,f)},Y.arc=function(a,b,c,d,e,f){c*=M;var g=f?"at":"wa",h=a+J(d)*c-N,i=b+I(d)*c-N,j=a+J(e)*c-N,k=b+I(e)*c-N;h!=j||f||(h+=.125);var l=y(this,a,b),m=y(this,h,i),n=y(this,j,k);this.currentPath_.push({type:g,x:l.x,y:l.y,radius:c,xStart:m.x,yStart:m.y,xEnd:n.x,yEnd:n.y})},Y.rect=function(a,b,c,d){this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath()},Y.strokeRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.stroke(),this.currentPath_=e},Y.fillRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.fill(),this.currentPath_=e},Y.createLinearGradient=function(a,b,c,d){var e=new B("gradient");return e.x0_=a,e.y0_=b,e.x1_=c,e.y1_=d,e},Y.createRadialGradient=function(a,b,c,d,e,f){var g=new B("gradientradial");return g.x0_=a,g.y0_=b,g.r0_=c,g.x1_=d,g.y1_=e,g.r1_=f,g},Y.drawImage=function(a){var b,c,d,e,f,g,h,i,j=a.runtimeStyle.width,k=a.runtimeStyle.height;a.runtimeStyle.width="auto",a.runtimeStyle.height="auto";var l=a.width,m=a.height;if(a.runtimeStyle.width=j,a.runtimeStyle.height=k,3==arguments.length)b=arguments[1],c=arguments[2],f=g=0,h=d=l,i=e=m;else if(5==arguments.length)b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],f=g=0,h=l,i=m;else{if(9!=arguments.length)throw Error("Invalid number of arguments");f=arguments[1],g=arguments[2],h=arguments[3],i=arguments[4],b=arguments[5],c=arguments[6],d=arguments[7],e=arguments[8]}var n=y(this,b,c),o=[],p=10,q=10,r=t=1;if(o.push(" <g_vml_:group",' coordsize="',M*p,",",M*q,'"',' coordorigin="0,0"',' style="width:',p,"px;height:",q,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var s=[],r=this.scaleX_,t=this.scaleY_;s.push("M11=",this.m_[0][0]/r,",","M12=",this.m_[1][0]/t,",","M21=",this.m_[0][1]/r,",","M22=",this.m_[1][1]/t,",","Dx=",H(n.x/M),",","Dy=",H(n.y/M),"");var u=n,v=y(this,b+d,c),w=y(this,b,c+e),x=y(this,b+d,c+e);u.x=G.max(u.x,v.x,w.x,x.x),u.y=G.max(u.y,v.y,w.y,x.y),o.push("padding:0 ",H(u.x/M),"px ",H(u.y/M),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",s.join(""),", SizingMethod='clip');")}else o.push("top:",H(n.y/M),"px;left:",H(n.x/M),"px;");o.push(' ">'),(f||g)&&o.push('<div style="overflow: hidden; width:',Math.ceil((d+f*d/h)*r),"px;"," height:",Math.ceil((e+g*e/i)*t),"px;"," filter:progid:DxImageTransform.Microsoft.Matrix(Dx=",-f*d/h*r,",Dy=",-g*e/i*t,');">'),o.push('<div style="width:',Math.round(r*l*d/h),"px;"," height:",Math.round(t*m*e/i),"px;"," filter:"),this.globalAlpha<1&&o.push(" progid:DXImageTransform.Microsoft.Alpha(opacity="+100*this.globalAlpha+")"),o.push(" progid:DXImageTransform.Microsoft.AlphaImageLoader(src=",a.src,',sizingMethod=scale)">'),(f||g)&&o.push("</div>"),o.push("</div></div>"),this.element_.insertAdjacentHTML("BeforeEnd",o.join(""))},Y.stroke=function(a){var b=[],c=10,d=10;b.push("<g_vml_:shape",' filled="',!!a,'"',' style="position:absolute;width:',c,"px;height:",d,'px;"',' coordorigin="0,0"',' coordsize="',M*c,",",M*d,'"',' stroked="',!a,'"',' path="');for(var e={x:null,y:null},f={x:null,y:null},g=0;g<this.currentPath_.length;g++){var h,i=this.currentPath_[g];switch(i.type){case"moveTo":h=i,b.push(" m ",H(i.x),",",H(i.y));break;case"lineTo":b.push(" l ",H(i.x),",",H(i.y));break;case"close":b.push(" x "),i=null;break;case"bezierCurveTo":b.push(" c ",H(i.cp1x),",",H(i.cp1y),",",H(i.cp2x),",",H(i.cp2y),",",H(i.x),",",H(i.y));break;case"at":case"wa":b.push(" ",i.type," ",H(i.x-this.scaleX_*i.radius),",",H(i.y-this.scaleY_*i.radius)," ",H(i.x+this.scaleX_*i.radius),",",H(i.y+this.scaleY_*i.radius)," ",H(i.xStart),",",H(i.yStart)," ",H(i.xEnd),",",H(i.yEnd))}i&&((null==e.x||i.x<e.x)&&(e.x=i.x),(null==f.x||i.x>f.x)&&(f.x=i.x),(null==e.y||i.y<e.y)&&(e.y=i.y),(null==f.y||i.y>f.y)&&(f.y=i.y))}b.push(' ">'),a?x(this,b,e,f):w(this,b),b.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",b.join(""))},Y.fill=function(){this.stroke(!0)},Y.closePath=function(){this.currentPath_.push({type:"close"})},Y.save=function(){var a={};j(this,a),this.aStack_.push(a),this.mStack_.push(this.m_),this.m_=i(h(),this.m_)},Y.restore=function(){this.aStack_.length&&(j(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},Y.translate=function(a,b){var c=[[1,0,0],[0,1,0],[a,b,1]];A(this,i(c,this.m_),!1)},Y.rotate=function(a){var b=J(a),c=I(a),d=[[b,c,0],[-c,b,0],[0,0,1]];A(this,i(d,this.m_),!1)},Y.scale=function(a,b){var c=[[a,0,0],[0,b,0],[0,0,1]];A(this,i(c,this.m_),!0)},Y.transform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];A(this,i(g,this.m_),!0)},Y.setTransform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];A(this,g,!0)},Y.drawText_=function(a,b,d,e,f){var g=this.m_,h=1e3,i=0,j=h,k={x:0,y:0},l=[],m=r(q(this.font),this.element_),n=s(m),o=this.element_.currentStyle,p=this.textAlign.toLowerCase();switch(p){case"left":case"center":case"right":break;case"end":p="ltr"==o.direction?"right":"left";break;case"start":p="rtl"==o.direction?"right":"left";break;default:p="left"}switch(this.textBaseline){case"hanging":case"top":k.y=m.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":k.y=-m.size/2.25}switch(p){case"right":i=h,j=.05;break;case"center":i=j=h/2}var t=y(this,b+k.x,d+k.y);l.push('<g_vml_:line from="',-i,' 0" to="',j,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!f,'" stroked="',!!f,'" style="position:absolute;width:1px;height:1px;">'),f?w(this,l):x(this,l,{x:-i,y:0},{x:j,y:m.size});var u=g[0][0].toFixed(3)+","+g[1][0].toFixed(3)+","+g[0][1].toFixed(3)+","+g[1][1].toFixed(3)+",0,0",v=H(t.x/M)+","+H(t.y/M);l.push('<g_vml_:skew on="t" matrix="',u,'" ',' offset="',v,'" origin="',i,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',c(a),'" style="v-text-align:',p,";font:",c(n),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",l.join(""))},Y.fillText=function(a,b,c,d){this.drawText_(a,b,c,d,!1)},Y.strokeText=function(a,b,c,d){this.drawText_(a,b,c,d,!0)},Y.measureText=function(a){if(!this.textMeasureEl_){var b='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",b),this.textMeasureEl_=this.element_.lastChild}var c=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";try{this.textMeasureEl_.style.font=this.font}catch(d){}return this.textMeasureEl_.appendChild(c.createTextNode(a)),{width:this.textMeasureEl_.offsetWidth}},Y.clip=function(){},Y.arcTo=function(){},Y.createPattern=function(a,b){return new C(a,b)},B.prototype.addColorStop=function(a,b){b=p(b),this.colors_.push({offset:a,color:b.color,alpha:b.alpha})};var Z=F.prototype=new Error;Z.INDEX_SIZE_ERR=1,Z.DOMSTRING_SIZE_ERR=2,Z.HIERARCHY_REQUEST_ERR=3,Z.WRONG_DOCUMENT_ERR=4,Z.INVALID_CHARACTER_ERR=5,Z.NO_DATA_ALLOWED_ERR=6,Z.NO_MODIFICATION_ALLOWED_ERR=7,Z.NOT_FOUND_ERR=8,Z.NOT_SUPPORTED_ERR=9,Z.INUSE_ATTRIBUTE_ERR=10,Z.INVALID_STATE_ERR=11,Z.SYNTAX_ERR=12,Z.INVALID_MODIFICATION_ERR=13,Z.NAMESPACE_ERR=14,Z.INVALID_ACCESS_ERR=15,Z.VALIDATION_ERR=16,Z.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=P,CanvasRenderingContext2D=u,CanvasGradient=B,CanvasPattern=C,DOMException=F}(),G_vmlCanvasManager}),c("zrender/shape/Base",["require","../tool/matrix","../tool/guid","../tool/util","../tool/log","../mixin/Transformable","../mixin/Eventful","../tool/area","../tool/color"],function(a){function b(b,d,e,f,g,h,i){g&&(b.font=g),b.textAlign=h,b.textBaseline=i;var j=c(d,e,f,g,h,i);d=(d+"").split("\n");var k=a("../tool/area").getTextHeight("国",g);switch(i){case"top":f=j.y;break;case"bottom":f=j.y+k;break;default:f=j.y+k/2}for(var l=0,m=d.length;m>l;l++)b.fillText(d[l],e,f),f+=k}function c(b,c,d,e,f,g){var h=a("../tool/area"),i=h.getTextWidth(b,e),j=h.getTextHeight("国",e);switch(b=(b+"").split("\n"),f){case"end":case"right":c-=i;break;case"center":c-=i/2}switch(g){case"top":break;case"bottom":d-=j*b.length;break;default:d-=j*b.length/2}return{x:c,y:d,width:i,height:j*b.length}}var d=window.G_vmlCanvasManager,e=a("../tool/matrix"),f=a("../tool/guid"),g=a("../tool/util"),h=a("../tool/log"),i=a("../mixin/Transformable"),j=a("../mixin/Eventful"),k=function(a){a=a||{},this.id=a.id||f();for(var b in a)this[b]=a[b];this.style=this.style||{},this.highlightStyle=this.highlightStyle||null,this.parent=null,this.__dirty=!0,this.__clipShapes=[],i.call(this),j.call(this)};k.prototype.invisible=!1,k.prototype.ignore=!1,k.prototype.zlevel=0,k.prototype.draggable=!1,k.prototype.clickable=!1,k.prototype.hoverable=!0,k.prototype.z=0,k.prototype.brush=function(a,b){var c=this.beforeBrush(a,b);switch(a.beginPath(),this.buildPath(a,c),c.brushType){case"both":a.fill();case"stroke":c.lineWidth>0&&a.stroke();break;default:a.fill()}this.drawText(a,c,this.style),this.afterBrush(a)},k.prototype.beforeBrush=function(a,b){var c=this.style;return this.brushTypeOnly&&(c.brushType=this.brushTypeOnly),b&&(c=this.getHighlightStyle(c,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(c.strokeColor=c.strokeColor||c.color),a.save(),this.doClip(a),this.setContext(a,c),this.setTransform(a),c},k.prototype.afterBrush=function(a){a.restore()};var l=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]];k.prototype.setContext=function(a,b){for(var c=0,d=l.length;d>c;c++){var e=l[c][0],f=b[e],g=l[c][1];"undefined"!=typeof f&&(a[g]=f)}};var m=e.create();return k.prototype.doClip=function(a){if(this.__clipShapes&&!d)for(var b=0;b<this.__clipShapes.length;b++){var c=this.__clipShapes[b];if(c.needTransform){var f=c.transform;e.invert(m,f),a.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(a.beginPath(),c.buildPath(a,c.style),a.clip(),c.needTransform){var f=m;a.transform(f[0],f[1],f[2],f[3],f[4],f[5])}}},k.prototype.getHighlightStyle=function(b,c,d){var e={};for(var f in b)e[f]=b[f];var g=a("../tool/color"),h=g.getHighlightColor();"stroke"!=b.brushType?(e.strokeColor=h,e.lineWidth=(b.lineWidth||1)+this.getHighlightZoom(),e.brushType="both"):"stroke"!=d?(e.strokeColor=h,e.lineWidth=(b.lineWidth||1)+this.getHighlightZoom()):e.strokeColor=c.strokeColor||g.mix(b.strokeColor,g.toRGB(h));for(var f in c)"undefined"!=typeof c[f]&&(e[f]=c[f]);return e},k.prototype.getHighlightZoom=function(){return"text"!=this.type?6:2},k.prototype.drift=function(a,b){this.position[0]+=a,this.position[1]+=b},k.prototype.buildPath=function(){h("buildPath not implemented in "+this.type)},k.prototype.getRect=function(){h("getRect not implemented in "+this.type)},k.prototype.isCover=function(b,c){var d=this.transformCoordToLocal(b,c);return b=d[0],c=d[1],this.isCoverRect(b,c)?a("../tool/area").isInside(this,this.style,b,c):!1},k.prototype.isCoverRect=function(a,b){var c=this.style.__rect;return c||(c=this.style.__rect=this.getRect(this.style)),a>=c.x&&a<=c.x+c.width&&b>=c.y&&b<=c.y+c.height},k.prototype.drawText=function(a,c,d){if("undefined"!=typeof c.text&&c.text!==!1){var e=c.textColor||c.color||c.strokeColor;a.fillStyle=e;var f,g,h,i,j=10,k=c.textPosition||this.textPosition||"top";switch(k){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var l=(d||c).__rect||this.getRect(d||c);
switch(k){case"inside":h=l.x+l.width/2,i=l.y+l.height/2,f="center",g="middle","stroke"!=c.brushType&&e==c.color&&(a.fillStyle="#fff");break;case"left":h=l.x-j,i=l.y+l.height/2,f="end",g="middle";break;case"right":h=l.x+l.width+j,i=l.y+l.height/2,f="start",g="middle";break;case"top":h=l.x+l.width/2,i=l.y-j,f="center",g="bottom";break;case"bottom":h=l.x+l.width/2,i=l.y+l.height+j,f="center",g="top"}}break;case"start":case"end":var m=c.pointList||[[c.xStart||0,c.yStart||0],[c.xEnd||0,c.yEnd||0]],n=m.length;if(2>n)return;var o,p,q,r;switch(k){case"start":o=m[1][0],p=m[0][0],q=m[1][1],r=m[0][1];break;case"end":o=m[n-2][0],p=m[n-1][0],q=m[n-2][1],r=m[n-1][1]}h=p,i=r;var s=Math.atan((q-r)/(p-o))/Math.PI*180;0>p-o?s+=180:0>q-r&&(s+=360),j=5,s>=30&&150>=s?(f="center",g="bottom",i-=j):s>150&&210>s?(f="right",g="middle",h-=j):s>=210&&330>=s?(f="center",g="top",i+=j):(f="left",g="middle",h+=j);break;case"specific":h=c.textX||0,i=c.textY||0,f="start",g="middle"}null!=h&&null!=i&&b(a,c.text,h,i,c.textFont,c.textAlign||f,c.textBaseline||g)}},k.prototype.modSelf=function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)},k.prototype.isSilent=function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)},g.merge(k.prototype,i.prototype,!0),g.merge(k.prototype,j.prototype,!0),k}),c("echarts/component/base",["require","../config","../util/ecData","../util/ecQuery","../util/number","zrender/tool/util","zrender/tool/env"],function(a){function b(a,b,e,f,g){this.ecTheme=a,this.messageCenter=b,this.zr=e,this.option=f,this.series=f.series,this.myChart=g,this.component=g.component,this.shapeList=[],this.effectList=[];var h=this;h._onlegendhoverlink=function(a){if(h.legendHoverLink)for(var b,e=a.target,f=h.shapeList.length-1;f>=0;f--)b=h.type==c.CHART_TYPE_PIE||h.type==c.CHART_TYPE_FUNNEL?d.get(h.shapeList[f],"name"):(d.get(h.shapeList[f],"series")||{}).name,b!=e||h.shapeList[f].invisible||h.shapeList[f].__animating||h.zr.addHoverShape(h.shapeList[f])},b&&b.bind(c.EVENT.LEGEND_HOVERLINK,this._onlegendhoverlink)}var c=a("../config"),d=a("../util/ecData"),e=a("../util/ecQuery"),f=a("../util/number"),g=a("zrender/tool/util");return b.prototype={canvasSupported:a("zrender/tool/env").canvasSupported,_getZ:function(a){if(null!=this[a])return this[a];var b=this.ecTheme[this.type];return b&&null!=b[a]?b[a]:(b=c[this.type],b&&null!=b[a]?b[a]:0)},getZlevelBase:function(){return this._getZ("zlevel")},getZBase:function(){return this._getZ("z")},reformOption:function(a){return a=g.merge(g.merge(a||{},g.clone(this.ecTheme[this.type]||{})),g.clone(c[this.type]||{})),this.z=a.z,this.zlevel=a.zlevel,a},reformCssArray:function(a){if(!(a instanceof Array))return[a,a,a,a];switch(a.length+""){case"4":return a;case"3":return[a[0],a[1],a[2],a[1]];case"2":return[a[0],a[1],a[0],a[1]];case"1":return[a[0],a[0],a[0],a[0]];case"0":return[0,0,0,0]}},getShapeById:function(a){for(var b=0,c=this.shapeList.length;c>b;b++)if(this.shapeList[b].id===a)return this.shapeList[b];return null},getFont:function(a){var b=this.getTextStyle(g.clone(a));return b.fontStyle+" "+b.fontWeight+" "+b.fontSize+"px "+b.fontFamily},getTextStyle:function(a){return g.merge(g.merge(a||{},this.ecTheme.textStyle),c.textStyle)},getItemStyleColor:function(a,b,c,d){return"function"==typeof a?a.call(this.myChart,{seriesIndex:b,series:this.series[b],dataIndex:c,data:d}):a},getDataFromOption:function(a,b){return null!=a?null!=a.value?a.value:a:b},subPixelOptimize:function(a,b){return a=b%2===1?Math.floor(a)+.5:Math.round(a)},resize:function(){this.refresh&&this.refresh(),this.clearEffectShape&&this.clearEffectShape(!0);var a=this;setTimeout(function(){a.animationEffect&&a.animationEffect()},200)},clear:function(){this.clearEffectShape&&this.clearEffectShape(),this.zr&&this.zr.delShape(this.shapeList),this.shapeList=[]},dispose:function(){this.onbeforDispose&&this.onbeforDispose(),this.clear(),this.shapeList=null,this.effectList=null,this.messageCenter&&this.messageCenter.unbind(c.EVENT.LEGEND_HOVERLINK,this._onlegendhoverlink),this.onafterDispose&&this.onafterDispose()},query:e.query,deepQuery:e.deepQuery,deepMerge:e.deepMerge,parsePercent:f.parsePercent,parseCenter:f.parseCenter,parseRadius:f.parseRadius,numAddCommas:f.addCommas,getPrecision:f.getPrecision},b}),c("zrender/tool/log",["require","../config"],function(a){var b=a("../config");return function(){if(0!==b.debugMode)if(1==b.debugMode)for(var a in arguments)throw new Error(arguments[a]);else if(b.debugMode>1)for(var a in arguments);}}),c("zrender/mixin/Transformable",["require","../tool/matrix","../tool/vector"],function(a){"use strict";function b(a){return a>-h&&h>a}function c(a){return a>h||-h>a}var d=a("../tool/matrix"),e=a("../tool/vector"),f=[0,0],g=d.translate,h=5e-5,i=function(){this.position||(this.position=[0,0]),"undefined"==typeof this.rotation&&(this.rotation=[0,0,0]),this.scale||(this.scale=[1,1,0,0]),this.needLocalTransform=!1,this.needTransform=!1};return i.prototype={constructor:i,updateNeedTransform:function(){this.needLocalTransform=c(this.rotation[0])||c(this.position[0])||c(this.position[1])||c(this.scale[0]-1)||c(this.scale[1]-1)},updateTransform:function(){this.updateNeedTransform();var a=this.parent&&this.parent.needTransform;if(this.needTransform=this.needLocalTransform||a,this.needTransform){var b=this.transform||d.create();if(d.identity(b),this.needLocalTransform){var e=this.scale;if(c(e[0])||c(e[1])){f[0]=-e[2]||0,f[1]=-e[3]||0;var h=c(f[0])||c(f[1]);h&&g(b,b,f),d.scale(b,b,e),h&&(f[0]=-f[0],f[1]=-f[1],g(b,b,f))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){f[0]=-this.rotation[1]||0,f[1]=-this.rotation[2]||0;var h=c(f[0])||c(f[1]);h&&g(b,b,f),d.rotate(b,b,this.rotation[0]),h&&(f[0]=-f[0],f[1]=-f[1],g(b,b,f))}}else 0!==this.rotation&&d.rotate(b,b,this.rotation);(c(this.position[0])||c(this.position[1]))&&g(b,b,this.position)}a&&(this.needLocalTransform?d.mul(b,this.parent.transform,b):d.copy(b,this.parent.transform)),this.transform=b,this.invTransform=this.invTransform||d.create(),d.invert(this.invTransform,b)}},setTransform:function(a){if(this.needTransform){var b=this.transform;a.transform(b[0],b[1],b[2],b[3],b[4],b[5])}},lookAt:function(){var a=e.create();return function(c){this.transform||(this.transform=d.create());var f=this.transform;if(e.sub(a,c,this.position),!b(a[0])||!b(a[1])){e.normalize(a,a);var g=this.scale;f[2]=a[0]*g[1],f[3]=a[1]*g[1],f[0]=a[1]*g[0],f[1]=-a[0]*g[0],f[4]=this.position[0],f[5]=this.position[1],this.decomposeTransform()}}}(),decomposeTransform:function(){if(this.transform){var a=this.transform,b=a[0]*a[0]+a[1]*a[1],d=this.position,e=this.scale,f=this.rotation;c(b-1)&&(b=Math.sqrt(b));var g=a[2]*a[2]+a[3]*a[3];c(g-1)&&(g=Math.sqrt(g)),d[0]=a[4],d[1]=a[5],e[0]=b,e[1]=g,e[2]=e[3]=0,f[0]=Math.atan2(-a[1]/g,a[0]/b),f[1]=f[2]=0}},transformCoordToLocal:function(a,b){var c=[a,b];return this.needTransform&&this.invTransform&&e.applyTransform(c,c,this.invTransform),c}},i}),c("zrender/tool/matrix",[],function(){var a="undefined"==typeof Float32Array?Array:Float32Array,b={create:function(){var c=new a(6);return b.identity(c),c},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},mul:function(a,b,c){return a[0]=b[0]*c[0]+b[2]*c[1],a[1]=b[1]*c[0]+b[3]*c[1],a[2]=b[0]*c[2]+b[2]*c[3],a[3]=b[1]*c[2]+b[3]*c[3],a[4]=b[0]*c[4]+b[2]*c[5]+b[4],a[5]=b[1]*c[4]+b[3]*c[5]+b[5],a},translate:function(a,b,c){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4]+c[0],a[5]=b[5]+c[1],a},rotate:function(a,b,c){var d=b[0],e=b[2],f=b[4],g=b[1],h=b[3],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+g*j,a[1]=-d*j+g*k,a[2]=e*k+h*j,a[3]=-e*j+k*h,a[4]=k*f+j*i,a[5]=k*i-j*f,a},scale:function(a,b,c){var d=c[0],e=c[1];return a[0]=b[0]*d,a[1]=b[1]*e,a[2]=b[2]*d,a[3]=b[3]*e,a[4]=b[4]*d,a[5]=b[5]*e,a},invert:function(a,b){var c=b[0],d=b[2],e=b[4],f=b[1],g=b[3],h=b[5],i=c*g-f*d;return i?(i=1/i,a[0]=g*i,a[1]=-f*i,a[2]=-d*i,a[3]=c*i,a[4]=(d*h-g*e)*i,a[5]=(f*e-c*h)*i,a):null}};return b}),c("zrender/tool/guid",[],function(){var a=2311;return function(){return"zrender__"+a++}}),c("zrender/mixin/Eventful",["require"],function(){var a=function(){this._handlers={}};return a.prototype.one=function(a,b,c){var d=this._handlers;return b&&a?(d[a]||(d[a]=[]),d[a].push({h:b,one:!0,ctx:c||this}),this):this},a.prototype.bind=function(a,b,c){var d=this._handlers;return b&&a?(d[a]||(d[a]=[]),d[a].push({h:b,one:!1,ctx:c||this}),this):this},a.prototype.unbind=function(a,b){var c=this._handlers;if(!a)return this._handlers={},this;if(b){if(c[a]){for(var d=[],e=0,f=c[a].length;f>e;e++)c[a][e].h!=b&&d.push(c[a][e]);c[a]=d}c[a]&&0===c[a].length&&delete c[a]}else delete c[a];return this},a.prototype.dispatch=function(a){if(this._handlers[a]){var b=arguments,c=b.length;c>3&&(b=Array.prototype.slice.call(b,1));for(var d=this._handlers[a],e=d.length,f=0;e>f;){switch(c){case 1:d[f].h.call(d[f].ctx);break;case 2:d[f].h.call(d[f].ctx,b[1]);break;case 3:d[f].h.call(d[f].ctx,b[1],b[2]);break;default:d[f].h.apply(d[f].ctx,b)}d[f].one?(d.splice(f,1),e--):f++}}return this},a.prototype.dispatchWithContext=function(a){if(this._handlers[a]){var b=arguments,c=b.length;c>4&&(b=Array.prototype.slice.call(b,1,b.length-1));for(var d=b[b.length-1],e=this._handlers[a],f=e.length,g=0;f>g;){switch(c){case 1:e[g].h.call(d);break;case 2:e[g].h.call(d,b[1]);break;case 3:e[g].h.call(d,b[1],b[2]);break;default:e[g].h.apply(d,b)}e[g].one?(e.splice(g,1),f--):g++}}return this},a}),c("zrender/Painter",["require","./config","./tool/util","./tool/log","./loadingEffect/Base","./Layer","./shape/Image"],function(a){"use strict";function b(){return!1}function c(){}function d(a){return a?a.isBuildin?!0:"function"!=typeof a.resize||"function"!=typeof a.refresh?!1:!0:!1}var e=a("./config"),f=a("./tool/util"),g=a("./tool/log"),h=a("./loadingEffect/Base"),i=a("./Layer"),j=function(a,c){this.root=a,a.style["-webkit-tap-highlight-color"]="transparent",a.style["-webkit-user-select"]="none",a.style["user-select"]="none",a.style["-webkit-touch-callout"]="none",this.storage=c,a.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var d=document.createElement("div");this._domRoot=d,d.style.position="relative",d.style.overflow="hidden",d.style.width=this._width+"px",d.style.height=this._height+"px",a.appendChild(d),this._layers={},this._zlevelList=[],this._layerConfig={},this._loadingEffect=new h({}),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=document.createElement("div"),this._bgDom.style.cssText=["position:absolute;left:0px;top:0px;width:",this._width,"px;height:",this._height+"px;","-webkit-user-select:none;user-select;none;","-webkit-touch-callout:none;"].join(""),this._bgDom.setAttribute("data-zr-dom-id","bg"),this._bgDom.className=e.elementClassName,d.appendChild(this._bgDom),this._bgDom.onselectstart=b;var f=new i("_zrender_hover_",this);this._layers.hover=f,d.appendChild(f.dom),f.initContext(),f.dom.onselectstart=b,f.dom.style["-webkit-user-select"]="none",f.dom.style["user-select"]="none",f.dom.style["-webkit-touch-callout"]="none",this.refreshNextFrame=null};return j.prototype.render=function(a){return this.isLoading()&&this.hideLoading(),this.refresh(a,!0),this},j.prototype.refresh=function(a,b){var c=this.storage.getShapeList(!0);this._paintList(c,b);for(var d=0;d<this._zlevelList.length;d++){var e=this._zlevelList[d],f=this._layers[e];!f.isBuildin&&f.refresh&&f.refresh()}return"function"==typeof a&&a(),this},j.prototype._preProcessLayer=function(a){a.unusedCount++,a.updateTransform()},j.prototype._postProcessLayer=function(a){a.dirty=!1,1==a.unusedCount&&a.clear()},j.prototype._paintList=function(a,b){"undefined"==typeof b&&(b=!1),this._updateLayerStatus(a);var c,d,f;this.eachBuildinLayer(this._preProcessLayer);for(var h=0,i=a.length;i>h;h++){var j=a[h];if(d!==j.zlevel&&(c&&(c.needTransform&&f.restore(),f.flush&&f.flush()),d=j.zlevel,c=this.getLayer(d),c.isBuildin||g("ZLevel "+d+" has been used by unkown layer "+c.id),f=c.ctx,c.unusedCount=0,(c.dirty||b)&&c.clear(),c.needTransform&&(f.save(),c.setTransform(f))),(c.dirty||b)&&!j.invisible&&(!j.onbrush||j.onbrush&&!j.onbrush(f,!1)))if(e.catchBrushException)try{j.brush(f,!1,this.refreshNextFrame)}catch(k){g(k,"brush error of "+j.type,j)}else j.brush(f,!1,this.refreshNextFrame);j.__dirty=!1}c&&(c.needTransform&&f.restore(),f.flush&&f.flush()),this.eachBuildinLayer(this._postProcessLayer)},j.prototype.getLayer=function(a){var b=this._layers[a];return b||(b=new i(a,this),b.isBuildin=!0,this._layerConfig[a]&&f.merge(b,this._layerConfig[a],!0),b.updateTransform(),this.insertLayer(a,b),b.initContext()),b},j.prototype.insertLayer=function(a,b){if(this._layers[a])return void g("ZLevel "+a+" has been used already");if(!d(b))return void g("Layer of zlevel "+a+" is not valid");var c=this._zlevelList.length,e=null,f=-1;if(c>0&&a>this._zlevelList[0]){for(f=0;c-1>f&&!(this._zlevelList[f]<a&&this._zlevelList[f+1]>a);f++);e=this._layers[this._zlevelList[f]]}this._zlevelList.splice(f+1,0,a);var h=e?e.dom:this._bgDom;h.nextSibling?h.parentNode.insertBefore(b.dom,h.nextSibling):h.parentNode.appendChild(b.dom),this._layers[a]=b},j.prototype.eachLayer=function(a,b){for(var c=0;c<this._zlevelList.length;c++){var d=this._zlevelList[c];a.call(b,this._layers[d],d)}},j.prototype.eachBuildinLayer=function(a,b){for(var c=0;c<this._zlevelList.length;c++){var d=this._zlevelList[c],e=this._layers[d];e.isBuildin&&a.call(b,e,d)}},j.prototype.eachOtherLayer=function(a,b){for(var c=0;c<this._zlevelList.length;c++){var d=this._zlevelList[c],e=this._layers[d];e.isBuildin||a.call(b,e,d)}},j.prototype.getLayers=function(){return this._layers},j.prototype._updateLayerStatus=function(a){var b=this._layers,c={};this.eachBuildinLayer(function(a,b){c[b]=a.elCount,a.elCount=0});for(var d=0,e=a.length;e>d;d++){var f=a[d],g=f.zlevel,h=b[g];if(h){if(h.elCount++,h.dirty)continue;h.dirty=f.__dirty}}this.eachBuildinLayer(function(a,b){c[b]!==a.elCount&&(a.dirty=!0)})},j.prototype.refreshShapes=function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e.modSelf()}return this.refresh(b),this},j.prototype.setLoadingEffect=function(a){return this._loadingEffect=a,this},j.prototype.clear=function(){return this.eachBuildinLayer(this._clearLayer),this},j.prototype._clearLayer=function(a){a.clear()},j.prototype.modLayer=function(a,b){if(b){this._layerConfig[a]?f.merge(this._layerConfig[a],b,!0):this._layerConfig[a]=b;var c=this._layers[a];c&&f.merge(c,this._layerConfig[a],!0)}},j.prototype.delLayer=function(a){var b=this._layers[a];b&&(this.modLayer(a,{position:b.position,rotation:b.rotation,scale:b.scale}),b.dom.parentNode.removeChild(b.dom),delete this._layers[a],this._zlevelList.splice(f.indexOf(this._zlevelList,a),1))},j.prototype.refreshHover=function(){this.clearHover();for(var a=this.storage.getHoverShapes(!0),b=0,c=a.length;c>b;b++)this._brushHover(a[b]);var d=this._layers.hover.ctx;return d.flush&&d.flush(),this.storage.delHover(),this},j.prototype.clearHover=function(){var a=this._layers.hover;return a&&a.clear(),this},j.prototype.showLoading=function(a){return this._loadingEffect&&this._loadingEffect.stop(),a&&this.setLoadingEffect(a),this._loadingEffect.start(this),this.loading=!0,this},j.prototype.hideLoading=function(){return this._loadingEffect.stop(),this.clearHover(),this.loading=!1,this},j.prototype.isLoading=function(){return this.loading},j.prototype.resize=function(){var a=this._domRoot;a.style.display="none";var b=this._getWidth(),c=this._getHeight();if(a.style.display="",this._width!=b||c!=this._height){this._width=b,this._height=c,a.style.width=b+"px",a.style.height=c+"px";for(var d in this._layers)this._layers[d].resize(b,c);this.refresh(null,!0)}return this},j.prototype.clearLayer=function(a){var b=this._layers[a];b&&b.clear()},j.prototype.dispose=function(){this.isLoading()&&this.hideLoading(),this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},j.prototype.getDomHover=function(){return this._layers.hover.dom},j.prototype.toDataURL=function(a,b,c){if(window.G_vmlCanvasManager)return null;var d=new i("image",this);this._bgDom.appendChild(d.dom),d.initContext();var f=d.ctx;d.clearColor=b||"#fff",d.clear();var h=this;this.storage.iterShape(function(a){if(!a.invisible&&(!a.onbrush||a.onbrush&&!a.onbrush(f,!1)))if(e.catchBrushException)try{a.brush(f,!1,h.refreshNextFrame)}catch(b){g(b,"brush error of "+a.type,a)}else a.brush(f,!1,h.refreshNextFrame)},{normal:"up",update:!0});var j=d.dom.toDataURL(a,c);return f=null,this._bgDom.removeChild(d.dom),j},j.prototype.getWidth=function(){return this._width},j.prototype.getHeight=function(){return this._height},j.prototype._getWidth=function(){var a=this.root,b=a.currentStyle||document.defaultView.getComputedStyle(a);return((a.clientWidth||parseInt(b.width,10))-parseInt(b.paddingLeft,10)-parseInt(b.paddingRight,10)).toFixed(0)-0},j.prototype._getHeight=function(){var a=this.root,b=a.currentStyle||document.defaultView.getComputedStyle(a);return((a.clientHeight||parseInt(b.height,10))-parseInt(b.paddingTop,10)-parseInt(b.paddingBottom,10)).toFixed(0)-0},j.prototype._brushHover=function(a){var b=this._layers.hover.ctx;if(!a.onbrush||a.onbrush&&!a.onbrush(b,!0)){var c=this.getLayer(a.zlevel);if(c.needTransform&&(b.save(),c.setTransform(b)),e.catchBrushException)try{a.brush(b,!0,this.refreshNextFrame)}catch(d){g(d,"hoverBrush error of "+a.type,a)}else a.brush(b,!0,this.refreshNextFrame);c.needTransform&&b.restore()}},j.prototype._shapeToImage=function(b,c,d,e,f){var g=document.createElement("canvas"),h=g.getContext("2d");g.style.width=d+"px",g.style.height=e+"px",g.setAttribute("width",d*f),g.setAttribute("height",e*f),h.clearRect(0,0,d*f,e*f);var i={position:c.position,rotation:c.rotation,scale:c.scale};c.position=[0,0,0],c.rotation=0,c.scale=[1,1],c&&c.brush(h,!1);var j=a("./shape/Image"),k=new j({id:b,style:{x:0,y:0,image:g}});return null!=i.position&&(k.position=c.position=i.position),null!=i.rotation&&(k.rotation=c.rotation=i.rotation),null!=i.scale&&(k.scale=c.scale=i.scale),k},j.prototype._createShapeToImageProcessor=function(){if(window.G_vmlCanvasManager)return c;var a=this;return function(b,c,d,f){return a._shapeToImage(b,c,d,f,e.devicePixelRatio)}},j}),c("zrender/Storage",["require","./tool/util","./Group"],function(a){"use strict";function b(a,b){return a.zlevel==b.zlevel?a.z==b.z?a.__renderidx-b.__renderidx:a.z-b.z:a.zlevel-b.zlevel}var c=a("./tool/util"),d=a("./Group"),e={hover:!1,normal:"down",update:!1},f=function(){this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0};return f.prototype.iterShape=function(a,b){if(b||(b=e),b.hover)for(var c=0,d=this._hoverElements.length;d>c;c++){var f=this._hoverElements[c];if(f.updateTransform(),a(f))return this}switch(b.update&&this.updateShapeList(),b.normal){case"down":for(var d=this._shapeList.length;d--;)if(a(this._shapeList[d]))return this;break;default:for(var c=0,d=this._shapeList.length;d>c;c++)if(a(this._shapeList[c]))return this}return this},f.prototype.getHoverShapes=function(a){for(var c=[],d=0,e=this._hoverElements.length;e>d;d++){c.push(this._hoverElements[d]);var f=this._hoverElements[d].hoverConnect;if(f){var g;f=f instanceof Array?f:[f];for(var h=0,i=f.length;i>h;h++)g=f[h].id?f[h]:this.get(f[h]),g&&c.push(g)}}if(c.sort(b),a)for(var d=0,e=c.length;e>d;d++)c[d].updateTransform();return c},f.prototype.getShapeList=function(a){return a&&this.updateShapeList(),this._shapeList},f.prototype.updateShapeList=function(){this._shapeListOffset=0;for(var a=0,c=this._roots.length;c>a;a++){var d=this._roots[a];this._updateAndAddShape(d)}this._shapeList.length=this._shapeListOffset;for(var a=0,c=this._shapeList.length;c>a;a++)this._shapeList[a].__renderidx=a;this._shapeList.sort(b)},f.prototype._updateAndAddShape=function(a,b){if(!a.ignore)if(a.updateTransform(),a.clipShape&&(a.clipShape.parent=a,a.clipShape.updateTransform(),b?(b=b.slice(),b.push(a.clipShape)):b=[a.clipShape]),"group"==a.type){for(var c=0;c<a._children.length;c++){var d=a._children[c];d.__dirty=a.__dirty||d.__dirty,this._updateAndAddShape(d,b)}a.__dirty=!1}else a.__clipShapes=b,this._shapeList[this._shapeListOffset++]=a},f.prototype.mod=function(a,b){if("string"==typeof a&&(a=this._elements[a]),a&&(a.modSelf(),b))if(b.parent||b._storage||b.__clipShapes){var d={};for(var e in b)"parent"!==e&&"_storage"!==e&&"__clipShapes"!==e&&b.hasOwnProperty(e)&&(d[e]=b[e]);c.merge(a,d,!0)}else c.merge(a,b,!0);return this},f.prototype.drift=function(a,b,c){var d=this._elements[a];return d&&(d.needTransform=!0,"horizontal"===d.draggable?c=0:"vertical"===d.draggable&&(b=0),(!d.ondrift||d.ondrift&&!d.ondrift(b,c))&&d.drift(b,c)),this},f.prototype.addHover=function(a){return a.updateNeedTransform(),this._hoverElements.push(a),this},f.prototype.delHover=function(){return this._hoverElements=[],this},f.prototype.hasHoverShape=function(){return this._hoverElements.length>0},f.prototype.addRoot=function(a){this._elements[a.id]||(a instanceof d&&a.addChildrenToStorage(this),this.addToMap(a),this._roots.push(a))},f.prototype.delRoot=function(a){if("undefined"==typeof a){for(var b=0;b<this._roots.length;b++){var e=this._roots[b];e instanceof d&&e.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],void(this._shapeListOffset=0)}if(a instanceof Array)for(var b=0,f=a.length;f>b;b++)this.delRoot(a[b]);else{var g;g="string"==typeof a?this._elements[a]:a;var h=c.indexOf(this._roots,g);h>=0&&(this.delFromMap(g.id),this._roots.splice(h,1),g instanceof d&&g.delChildrenFromStorage(this))}},f.prototype.addToMap=function(a){return a instanceof d&&(a._storage=this),a.modSelf(),this._elements[a.id]=a,this},f.prototype.get=function(a){return this._elements[a]},f.prototype.delFromMap=function(a){var b=this._elements[a];return b&&(delete this._elements[a],b instanceof d&&(b._storage=null)),this},f.prototype.dispose=function(){this._elements=this._renderList=this._roots=this._hoverElements=null},f}),c("zrender/tool/curve",["require","./vector"],function(a){function b(a){return a>-q&&q>a}function c(a){return a>q||-q>a}function d(a,b,c,d,e){var f=1-e;return f*f*(f*a+3*e*b)+e*e*(e*d+3*f*c)}function e(a,b,c,d,e){var f=1-e;return 3*(((b-a)*f+2*(c-b)*e)*f+(d-c)*e*e)}function f(a,c,d,e,f,g){var h=e+3*(c-d)-a,i=3*(d-2*c+a),j=3*(c-a),k=a-f,l=i*i-3*h*j,m=i*j-9*h*k,n=j*j-3*i*k,o=0;if(b(l)&&b(m))if(b(i))g[0]=0;else{var p=-j/i;p>=0&&1>=p&&(g[o++]=p)}else{var q=m*m-4*l*n;if(b(q)){var t=m/l,p=-i/h+t,u=-t/2;p>=0&&1>=p&&(g[o++]=p),u>=0&&1>=u&&(g[o++]=u)}else if(q>0){var v=Math.sqrt(q),w=l*i+1.5*h*(-m+v),x=l*i+1.5*h*(-m-v);w=0>w?-Math.pow(-w,s):Math.pow(w,s),x=0>x?-Math.pow(-x,s):Math.pow(x,s);var p=(-i-(w+x))/(3*h);p>=0&&1>=p&&(g[o++]=p)}else{var y=(2*l*i-3*h*m)/(2*Math.sqrt(l*l*l)),z=Math.acos(y)/3,A=Math.sqrt(l),B=Math.cos(z),p=(-i-2*A*B)/(3*h),u=(-i+A*(B+r*Math.sin(z)))/(3*h),C=(-i+A*(B-r*Math.sin(z)))/(3*h);p>=0&&1>=p&&(g[o++]=p),u>=0&&1>=u&&(g[o++]=u),C>=0&&1>=C&&(g[o++]=C)}}return o}function g(a,d,e,f,g){var h=6*e-12*d+6*a,i=9*d+3*f-3*a-9*e,j=3*d-3*a,k=0;if(b(i)){if(c(h)){var l=-j/h;l>=0&&1>=l&&(g[k++]=l)}}else{var m=h*h-4*i*j;if(b(m))g[0]=-h/(2*i);else if(m>0){var n=Math.sqrt(m),l=(-h+n)/(2*i),o=(-h-n)/(2*i);l>=0&&1>=l&&(g[k++]=l),o>=0&&1>=o&&(g[k++]=o)}}return k}function h(a,b,c,d,e,f){var g=(b-a)*e+a,h=(c-b)*e+b,i=(d-c)*e+c,j=(h-g)*e+g,k=(i-h)*e+h,l=(k-j)*e+j;f[0]=a,f[1]=g,f[2]=j,f[3]=l,f[4]=l,f[5]=k,f[6]=i,f[7]=d}function i(a,b,c,e,f,g,h,i,j,k,l){var m,n=.005,o=1/0;t[0]=j,t[1]=k;for(var r=0;1>r;r+=.05){u[0]=d(a,c,f,h,r),u[1]=d(b,e,g,i,r);var s=p.distSquare(t,u);o>s&&(m=r,o=s)}o=1/0;for(var w=0;32>w&&!(q>n);w++){var x=m-n,y=m+n;u[0]=d(a,c,f,h,x),u[1]=d(b,e,g,i,x);var s=p.distSquare(u,t);if(x>=0&&o>s)m=x,o=s;else{v[0]=d(a,c,f,h,y),v[1]=d(b,e,g,i,y);var z=p.distSquare(v,t);1>=y&&o>z?(m=y,o=z):n*=.5}}return l&&(l[0]=d(a,c,f,h,m),l[1]=d(b,e,g,i,m)),Math.sqrt(o)}function j(a,b,c,d){var e=1-d;return e*(e*a+2*d*b)+d*d*c}function k(a,b,c,d){return 2*((1-d)*(b-a)+d*(c-b))}function l(a,d,e,f,g){var h=a-2*d+e,i=2*(d-a),j=a-f,k=0;if(b(h)){if(c(i)){var l=-j/i;l>=0&&1>=l&&(g[k++]=l)}}else{var m=i*i-4*h*j;if(b(m)){var l=-i/(2*h);l>=0&&1>=l&&(g[k++]=l)}else if(m>0){var n=Math.sqrt(m),l=(-i+n)/(2*h),o=(-i-n)/(2*h);l>=0&&1>=l&&(g[k++]=l),o>=0&&1>=o&&(g[k++]=o)}}return k}function m(a,b,c){var d=a+c-2*b;return 0===d?.5:(a-b)/d}function n(a,b,c,d,e){var f=(b-a)*d+a,g=(c-b)*d+b,h=(g-f)*d+f;e[0]=a,e[1]=f,e[2]=h,e[3]=h,e[4]=g,e[5]=c}function o(a,b,c,d,e,f,g,h,i){var k,l=.005,m=1/0;t[0]=g,t[1]=h;for(var n=0;1>n;n+=.05){u[0]=j(a,c,e,n),u[1]=j(b,d,f,n);var o=p.distSquare(t,u);m>o&&(k=n,m=o)}m=1/0;for(var r=0;32>r&&!(q>l);r++){var s=k-l,w=k+l;u[0]=j(a,c,e,s),u[1]=j(b,d,f,s);var o=p.distSquare(u,t);if(s>=0&&m>o)k=s,m=o;else{v[0]=j(a,c,e,w),v[1]=j(b,d,f,w);var x=p.distSquare(v,t);1>=w&&m>x?(k=w,m=x):l*=.5}}return i&&(i[0]=j(a,c,e,k),i[1]=j(b,d,f,k)),Math.sqrt(m)}var p=a("./vector"),q=1e-4,r=Math.sqrt(3),s=1/3,t=p.create(),u=p.create(),v=p.create();return{cubicAt:d,cubicDerivativeAt:e,cubicRootAt:f,cubicExtrema:g,cubicSubdivide:h,cubicProjectPoint:i,quadraticAt:j,quadraticDerivativeAt:k,quadraticRootAt:l,quadraticExtremum:m,quadraticSubdivide:n,quadraticProjectPoint:o}}),c("zrender/animation/Animation",["require","./Clip","../tool/color","../tool/util","../tool/event"],function(a){"use strict";function b(a,b){return a[b]}function c(a,b,c){a[b]=c}function d(a,b,c){return(b-a)*c+a}function e(a,b,c,e,f){var g=a.length;if(1==f)for(var h=0;g>h;h++)e[h]=d(a[h],b[h],c);else for(var i=a[0].length,h=0;g>h;h++)for(var j=0;i>j;j++)e[h][j]=d(a[h][j],b[h][j],c)}function f(a){switch(typeof a){case"undefined":case"string":return!1}return"undefined"!=typeof a.length}function g(a,b,c,d,e,f,g,i,j){var k=a.length;if(1==j)for(var l=0;k>l;l++)i[l]=h(a[l],b[l],c[l],d[l],e,f,g);else for(var m=a[0].length,l=0;k>l;l++)for(var n=0;m>n;n++)i[l][n]=h(a[l][n],b[l][n],c[l][n],d[l][n],e,f,g)}function h(a,b,c,d,e,f,g){var h=.5*(c-a),i=.5*(d-b);return(2*(b-c)+h+i)*g+(-3*(b-c)-2*h-i)*f+h*e+b}function i(a){if(f(a)){var b=a.length;if(f(a[0])){for(var c=[],d=0;b>d;d++)c.push(p.call(a[d]));return c}return p.call(a)}return a}function j(a){return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.floor(a[2]),"rgba("+a.join(",")+")"}var k=a("./Clip"),l=a("../tool/color"),m=a("../tool/util"),n=a("../tool/event").Dispatcher,o=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(a){setTimeout(a,16)},p=Array.prototype.slice,q=function(a){a=a||{},this.stage=a.stage||{},this.onframe=a.onframe||function(){},this._clips=[],this._running=!1,this._time=0,n.call(this)};q.prototype={add:function(a){this._clips.push(a)},remove:function(a){if(a.__inStep)a.__needsRemove=!0;else{var b=m.indexOf(this._clips,a);b>=0&&this._clips.splice(b,1)}},_update:function(){for(var a=(new Date).getTime(),b=a-this._time,c=this._clips,d=c.length,e=[],f=[],g=0;d>g;g++){var h=c[g];h.__inStep=!0;var i=h.step(a);h.__inStep=!1,i&&(e.push(i),f.push(h))}for(var g=0;d>g;)c[g].__needsRemove?(c[g]=c[d-1],c.pop(),d--):g++;d=e.length;for(var g=0;d>g;g++)f[g].fire(e[g]);this._time=a,this.onframe(b),this.dispatch("frame",b),this.stage.update&&this.stage.update()},start:function(){function a(){b._running&&(o(a),b._update())}var b=this;this._running=!0,this._time=(new Date).getTime(),o(a)},stop:function(){this._running=!1},clear:function(){this._clips=[]},animate:function(a,b){b=b||{};var c=new r(a,b.loop,b.getter,b.setter);return c.animation=this,c},constructor:q},m.merge(q.prototype,n.prototype,!0);var r=function(a,d,e,f){this._tracks={},this._target=a,this._loop=d||!1,this._getter=e||b,this._setter=f||c,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};return r.prototype={when:function(a,b){for(var c in b)this._tracks[c]||(this._tracks[c]=[],0!==a&&this._tracks[c].push({time:0,value:i(this._getter(this._target,c))})),this._tracks[c].push({time:parseInt(a,10),value:b[c]});return this},during:function(a){return this._onframeList.push(a),this},start:function(a){var b=this,c=this._setter,i=this._getter,m="spline"===a,n=function(){if(b._clipCount--,0===b._clipCount){b._tracks={};for(var a=b._doneList.length,c=0;a>c;c++)b._doneList[c].call(b)}},o=function(o,p){var q=o.length;if(q){var r=o[0].value,s=f(r),t=!1,u=s&&f(r[0])?2:1;o.sort(function(a,b){return a.time-b.time});var v;if(q){v=o[q-1].time;for(var w=[],x=[],y=0;q>y;y++){w.push(o[y].time/v);var z=o[y].value;"string"==typeof z&&(z=l.toArray(z),0===z.length&&(z[0]=z[1]=z[2]=0,z[3]=1),t=!0),x.push(z)}var A,y,B,C,D,E,F,G=0,H=0;if(t)var I=[0,0,0,0];var J=function(a,f){if(H>f){for(A=Math.min(G+1,q-1),y=A;y>=0&&!(w[y]<=f);y--);y=Math.min(y,q-2)}else{for(y=G;q>y&&!(w[y]>f);y++);y=Math.min(y-1,q-2)}G=y,H=f;var k=w[y+1]-w[y];if(0!==k){if(B=(f-w[y])/k,m)if(D=x[y],C=x[0===y?y:y-1],E=x[y>q-2?q-1:y+1],F=x[y>q-3?q-1:y+2],s)g(C,D,E,F,B,B*B,B*B*B,i(a,p),u);else{var l;t?(l=g(C,D,E,F,B,B*B,B*B*B,I,1),l=j(I)):l=h(C,D,E,F,B,B*B,B*B*B),c(a,p,l)}else if(s)e(x[y],x[y+1],B,i(a,p),u);else{var l;t?(e(x[y],x[y+1],B,I,1),l=j(I)):l=d(x[y],x[y+1],B),c(a,p,l)}for(y=0;y<b._onframeList.length;y++)b._onframeList[y](a,f)}},K=new k({target:b._target,life:v,loop:b._loop,delay:b._delay,onframe:J,ondestroy:n});a&&"spline"!==a&&(K.easing=a),b._clipList.push(K),b._clipCount++,b.animation.add(K)}}};for(var p in this._tracks)o(this._tracks[p],p);return this},stop:function(){for(var a=0;a<this._clipList.length;a++){var b=this._clipList[a];this.animation.remove(b)}this._clipList=[]},delay:function(a){return this._delay=a,this},done:function(a){return a&&this._doneList.push(a),this}},q}),c("zrender/Handler",["require","./config","./tool/env","./tool/event","./tool/util","./tool/vector","./tool/matrix","./mixin/Eventful"],function(a){"use strict";function b(a,b){return function(c,d){return a.call(b,c,d)}}function c(a,b){return function(c,d,e){return a.call(b,c,d,e)}}function d(a){for(var c=n.length;c--;){var d=n[c];a["_"+d+"Handler"]=b(p[d],a)}}function e(a,b,c){if(this._draggingTarget&&this._draggingTarget.id==a.id||a.isSilent())return!1;var d=this._event;if(a.isCover(b,c)){a.hoverable&&this.storage.addHover(a);for(var e=a.parent;e;){if(e.clipShape&&!e.clipShape.isCover(this._mouseX,this._mouseY))return!1;e=e.parent}return this._lastHover!=a&&(this._processOutShape(d),this._processDragLeave(d),this._lastHover=a,this._processDragEnter(d)),this._processOverShape(d),this._processDragOver(d),this._hasfound=1,!0}return!1}var f=a("./config"),g=a("./tool/env"),h=a("./tool/event"),i=a("./tool/util"),j=a("./tool/vector"),k=a("./tool/matrix"),l=f.EVENT,m=a("./mixin/Eventful"),n=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],o=function(a){if(window.G_vmlCanvasManager)return!0;a=a||window.event;var b=a.toElement||a.relatedTarget||a.srcElement||a.target;return b&&b.className.match(f.elementClassName)},p={resize:function(a){a=a||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(l.RESIZE,a)},click:function(a,b){if(o(a)||b){a=this._zrenderEventFixed(a);var c=this._lastHover;(c&&c.clickable||!c)&&this._clickThreshold<5&&this._dispatchAgency(c,l.CLICK,a),this._mousemoveHandler(a)}},dblclick:function(a,b){if(o(a)||b){a=a||window.event,a=this._zrenderEventFixed(a);var c=this._lastHover;(c&&c.clickable||!c)&&this._clickThreshold<5&&this._dispatchAgency(c,l.DBLCLICK,a),this._mousemoveHandler(a)}},mousewheel:function(a,b){if(o(a)||b){a=this._zrenderEventFixed(a);var c=a.wheelDelta||-a.detail,d=c>0?1.1:1/1.1,e=!1,f=this._mouseX,g=this._mouseY;this.painter.eachBuildinLayer(function(b){var c=b.position;if(b.zoomable){b.__zoom=b.__zoom||1;var i=b.__zoom;
i*=d,i=Math.max(Math.min(b.maxZoom,i),b.minZoom),d=i/b.__zoom,b.__zoom=i,c[0]-=(f-c[0])*(d-1),c[1]-=(g-c[1])*(d-1),b.scale[0]*=d,b.scale[1]*=d,b.dirty=!0,e=!0,h.stop(a)}}),e&&this.painter.refresh(),this._dispatchAgency(this._lastHover,l.MOUSEWHEEL,a),this._mousemoveHandler(a)}},mousemove:function(a,b){if((o(a)||b)&&!this.painter.isLoading()){a=this._zrenderEventFixed(a),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=h.getX(a),this._mouseY=h.getY(a);var c=this._mouseX-this._lastX,d=this._mouseY-this._lastY;this._processDragStart(a),this._hasfound=0,this._event=a,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(a),this._processDragLeave(a)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var e="default";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,c,d),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget),this._clickThreshold++;else if(this._isMouseDown){var f=!1;this.painter.eachBuildinLayer(function(a){a.panable&&(e="move",a.position[0]+=c,a.position[1]+=d,f=!0,a.dirty=!0)}),f&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?e="move":this._hasfound&&this._lastHover.clickable&&(e="pointer"),this.root.style.cursor=e,this._dispatchAgency(this._lastHover,l.MOUSEMOVE,a),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()}},mouseout:function(a,b){if(o(a)||b){a=this._zrenderEventFixed(a);var c=a.toElement||a.relatedTarget;if(c!=this.root)for(;c&&9!=c.nodeType;){if(c==this.root)return void this._mousemoveHandler(a);c=c.parentNode}a.zrenderX=this._lastX,a.zrenderY=this._lastY,this.root.style.cursor="default",this._isMouseDown=0,this._processOutShape(a),this._processDrop(a),this._processDragEnd(a),this.painter.isLoading()||this.painter.refreshHover(),this.dispatch(l.GLOBALOUT,a)}},mousedown:function(a,b){if(o(a)||b){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=a.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,a=this._zrenderEventFixed(a),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,l.MOUSEDOWN,a),this._lastDownButton=a.button}},mouseup:function(a,b){(o(a)||b)&&(a=this._zrenderEventFixed(a),this.root.style.cursor="default",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,l.MOUSEUP,a),this._processDrop(a),this._processDragEnd(a))},touchstart:function(a,b){(o(a)||b)&&(a=this._zrenderEventFixed(a,!0),this._lastTouchMoment=new Date,this._mobileFindFixed(a),this._mousedownHandler(a))},touchmove:function(a,b){(o(a)||b)&&(a=this._zrenderEventFixed(a,!0),this._mousemoveHandler(a),this._isDragging&&h.stop(a))},touchend:function(a,b){if(o(a)||b){a=this._zrenderEventFixed(a,!0),this._mouseupHandler(a);var c=new Date;c-this._lastTouchMoment<l.touchClickDelay&&(this._mobileFindFixed(a),this._clickHandler(a),c-this._lastClickMoment<l.touchClickDelay/2&&(this._dblclickHandler(a),this._lastHover&&this._lastHover.clickable&&h.stop(a)),this._lastClickMoment=c),this.painter.clearHover()}}},q=function(a,b,f){m.call(this),this.root=a,this.storage=b,this.painter=f,this._lastX=this._lastY=this._mouseX=this._mouseY=0,this._findHover=c(e,this),this._domHover=f.getDomHover(),d(this),window.addEventListener?(window.addEventListener("resize",this._resizeHandler),g.os.tablet||g.os.phone?(a.addEventListener("touchstart",this._touchstartHandler),a.addEventListener("touchmove",this._touchmoveHandler),a.addEventListener("touchend",this._touchendHandler)):(a.addEventListener("click",this._clickHandler),a.addEventListener("dblclick",this._dblclickHandler),a.addEventListener("mousewheel",this._mousewheelHandler),a.addEventListener("mousemove",this._mousemoveHandler),a.addEventListener("mousedown",this._mousedownHandler),a.addEventListener("mouseup",this._mouseupHandler)),a.addEventListener("DOMMouseScroll",this._mousewheelHandler),a.addEventListener("mouseout",this._mouseoutHandler)):(window.attachEvent("onresize",this._resizeHandler),a.attachEvent("onclick",this._clickHandler),a.ondblclick=this._dblclickHandler,a.attachEvent("onmousewheel",this._mousewheelHandler),a.attachEvent("onmousemove",this._mousemoveHandler),a.attachEvent("onmouseout",this._mouseoutHandler),a.attachEvent("onmousedown",this._mousedownHandler),a.attachEvent("onmouseup",this._mouseupHandler))};q.prototype.on=function(a,b,c){return this.bind(a,b,c),this},q.prototype.un=function(a,b){return this.unbind(a,b),this},q.prototype.trigger=function(a,b){switch(a){case l.RESIZE:case l.CLICK:case l.DBLCLICK:case l.MOUSEWHEEL:case l.MOUSEMOVE:case l.MOUSEDOWN:case l.MOUSEUP:case l.MOUSEOUT:this["_"+a+"Handler"](b,!0)}},q.prototype.dispose=function(){var a=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),g.os.tablet||g.os.phone?(a.removeEventListener("touchstart",this._touchstartHandler),a.removeEventListener("touchmove",this._touchmoveHandler),a.removeEventListener("touchend",this._touchendHandler)):(a.removeEventListener("click",this._clickHandler),a.removeEventListener("dblclick",this._dblclickHandler),a.removeEventListener("mousewheel",this._mousewheelHandler),a.removeEventListener("mousemove",this._mousemoveHandler),a.removeEventListener("mousedown",this._mousedownHandler),a.removeEventListener("mouseup",this._mouseupHandler)),a.removeEventListener("DOMMouseScroll",this._mousewheelHandler),a.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),a.detachEvent("onclick",this._clickHandler),a.detachEvent("dblclick",this._dblclickHandler),a.detachEvent("onmousewheel",this._mousewheelHandler),a.detachEvent("onmousemove",this._mousemoveHandler),a.detachEvent("onmouseout",this._mouseoutHandler),a.detachEvent("onmousedown",this._mousedownHandler),a.detachEvent("onmouseup",this._mouseupHandler)),this.root=this._domHover=this.storage=this.painter=null,this.un()},q.prototype._processDragStart=function(a){var b=this._lastHover;if(this._isMouseDown&&b&&b.draggable&&!this._draggingTarget&&this._mouseDownTarget==b){if(b.dragEnableTime&&new Date-this._lastMouseDownMoment<b.dragEnableTime)return;var c=b;this._draggingTarget=c,this._isDragging=1,c.invisible=!0,this.storage.mod(c.id),this._dispatchAgency(c,l.DRAGSTART,a),this.painter.refresh()}},q.prototype._processDragEnter=function(a){this._draggingTarget&&this._dispatchAgency(this._lastHover,l.DRAGENTER,a,this._draggingTarget)},q.prototype._processDragOver=function(a){this._draggingTarget&&this._dispatchAgency(this._lastHover,l.DRAGOVER,a,this._draggingTarget)},q.prototype._processDragLeave=function(a){this._draggingTarget&&this._dispatchAgency(this._lastHover,l.DRAGLEAVE,a,this._draggingTarget)},q.prototype._processDrop=function(a){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,l.DROP,a,this._draggingTarget))},q.prototype._processDragEnd=function(a){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,l.DRAGEND,a),this._lastHover=null),this._isDragging=0,this._draggingTarget=null},q.prototype._processOverShape=function(a){this._dispatchAgency(this._lastHover,l.MOUSEOVER,a)},q.prototype._processOutShape=function(a){this._dispatchAgency(this._lastHover,l.MOUSEOUT,a)},q.prototype._dispatchAgency=function(a,b,c,d){var e="on"+b,f={type:b,event:c,target:a,cancelBubble:!1},g=a;for(d&&(f.dragged=d);g&&(g[e]&&(f.cancelBubble=g[e](f)),g.dispatch(b,f),g=g.parent,!f.cancelBubble););if(a)f.cancelBubble||this.dispatch(b,f);else if(!d){var h={type:b,event:c};this.dispatch(b,h),this.painter.eachOtherLayer(function(a){"function"==typeof a[e]&&a[e](h),a.dispatch&&a.dispatch(b,h)})}},q.prototype._iterateAndFindHover=function(){var a=k.create();return function(){for(var b,c,d=this.storage.getShapeList(),e=[0,0],f=d.length-1;f>=0;f--){var g=d[f];if(b!==g.zlevel&&(c=this.painter.getLayer(g.zlevel,c),e[0]=this._mouseX,e[1]=this._mouseY,c.needTransform&&(k.invert(a,c.transform),j.applyTransform(e,e,a))),this._findHover(g,e[0],e[1]))break}}}();var r=[{x:10},{x:-20},{x:10,y:10},{y:-20}];return q.prototype._mobileFindFixed=function(a){this._lastHover=null,this._mouseX=a.zrenderX,this._mouseY=a.zrenderY,this._event=a,this._iterateAndFindHover();for(var b=0;!this._lastHover&&b<r.length;b++){var c=r[b];c.x&&(this._mouseX+=c.x),c.y&&(this._mouseY+=c.y),this._iterateAndFindHover()}this._lastHover&&(a.zrenderX=this._mouseX,a.zrenderY=this._mouseY)},q.prototype._zrenderEventFixed=function(a,b){if(a.zrenderFixed)return a;if(b){var c="touchend"!=a.type?a.targetTouches[0]:a.changedTouches[0];if(c){var d=this.painter._domRoot.getBoundingClientRect();a.zrenderX=c.clientX-d.left,a.zrenderY=c.clientY-d.top}}else{a=a||window.event;var e=a.toElement||a.relatedTarget||a.srcElement||a.target;e&&e!=this._domHover&&(a.zrenderX=("undefined"!=typeof a.offsetX?a.offsetX:a.layerX)+e.offsetLeft,a.zrenderY=("undefined"!=typeof a.offsetY?a.offsetY:a.layerY)+e.offsetTop)}return a.zrenderFixed=1,a},i.merge(q.prototype,m.prototype,!0),q}),c("zrender/shape/Star",["require","../tool/math","./Base","../tool/util"],function(a){var b=a("../tool/math"),c=b.sin,d=b.cos,e=Math.PI,f=a("./Base"),g=function(a){f.call(this,a)};return g.prototype={type:"star",buildPath:function(a,b){var f=b.n;if(f&&!(2>f)){var g=b.x,h=b.y,i=b.r,j=b.r0;null==j&&(j=f>4?i*d(2*e/f)/d(e/f):i/3);var k=e/f,l=-e/2,m=g+i*d(l),n=h+i*c(l);l+=k;var o=b.pointList=[];o.push([m,n]);for(var p,q=0,r=2*f-1;r>q;q++)p=q%2===0?j:i,o.push([g+p*d(l),h+p*c(l)]),l+=k;o.push([m,n]),a.moveTo(o[0][0],o[0][1]);for(var q=0;q<o.length;q++)a.lineTo(o[q][0],o[q][1]);a.closePath()}},getRect:function(a){if(a.__rect)return a.__rect;var b;return b="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0,a.__rect={x:Math.round(a.x-a.r-b/2),y:Math.round(a.y-a.r-b/2),width:2*a.r+b,height:2*a.r+b},a.__rect}},a("../tool/util").inherits(g,f),g}),c("zrender/shape/Droplet",["require","./Base","./util/PathProxy","../tool/area","../tool/util"],function(a){"use strict";var b=a("./Base"),c=a("./util/PathProxy"),d=a("../tool/area"),e=function(a){b.call(this,a),this._pathProxy=new c};return e.prototype={type:"droplet",buildPath:function(a,b){var d=this._pathProxy||new c;d.begin(a),d.moveTo(b.x,b.y+b.a),d.bezierCurveTo(b.x+b.a,b.y+b.a,b.x+3*b.a/2,b.y-b.a/3,b.x,b.y-b.b),d.bezierCurveTo(b.x-3*b.a/2,b.y-b.a/3,b.x-b.a,b.y+b.a,b.x,b.y+b.a),d.closePath()},getRect:function(a){return a.__rect?a.__rect:(this._pathProxy.isEmpty()||this.buildPath(null,a),this._pathProxy.fastBoundingRect())},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);return a=c[0],b=c[1],this.isCoverRect(a,b)?d.isInsidePath(this._pathProxy.pathCommands,this.style.lineWidth,this.style.brushType,a,b):void 0}},a("../tool/util").inherits(e,b),e}),c("zrender/Layer",["require","./mixin/Transformable","./tool/util","./config"],function(a){function b(){return!1}function c(a,b,c){var d=document.createElement(b),e=c.getWidth(),f=c.getHeight();return d.style.position="absolute",d.style.left=0,d.style.top=0,d.style.width=e+"px",d.style.height=f+"px",d.width=e*g.devicePixelRatio,d.height=f*g.devicePixelRatio,d.setAttribute("data-zr-dom-id",a),d}var d=a("./mixin/Transformable"),e=a("./tool/util"),f=window.G_vmlCanvasManager,g=a("./config"),h=function(a,e){this.id=a,this.dom=c(a,"canvas",e),this.dom.onselectstart=b,this.dom.style["-webkit-user-select"]="none",this.dom.style["user-select"]="none",this.dom.style["-webkit-touch-callout"]="none",this.dom.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",this.dom.className=g.elementClassName,f&&f.initElement(this.dom),this.domBack=null,this.ctxBack=null,this.painter=e,this.unusedCount=0,this.config=null,this.dirty=!0,this.elCount=0,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.zoomable=!1,this.panable=!1,this.maxZoom=1/0,this.minZoom=0,d.call(this)};return h.prototype.initContext=function(){this.ctx=this.dom.getContext("2d");var a=g.devicePixelRatio;1!=a&&this.ctx.scale(a,a)},h.prototype.createBackBuffer=function(){if(!f){this.domBack=c("back-"+this.id,"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d");var a=g.devicePixelRatio;1!=a&&this.ctxBack.scale(a,a)}},h.prototype.resize=function(a,b){var c=g.devicePixelRatio;this.dom.style.width=a+"px",this.dom.style.height=b+"px",this.dom.setAttribute("width",a*c),this.dom.setAttribute("height",b*c),1!=c&&this.ctx.scale(c,c),this.domBack&&(this.domBack.setAttribute("width",a*c),this.domBack.setAttribute("height",b*c),1!=c&&this.ctxBack.scale(c,c))},h.prototype.clear=function(){var a=this.dom,b=this.ctx,c=a.width,d=a.height,e=this.clearColor&&!f,h=this.motionBlur&&!f,i=this.lastFrameAlpha,j=g.devicePixelRatio;if(h&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,c/j,d/j)),b.clearRect(0,0,c/j,d/j),e&&(b.save(),b.fillStyle=this.clearColor,b.fillRect(0,0,c/j,d/j),b.restore()),h){var k=this.domBack;b.save(),b.globalAlpha=i,b.drawImage(k,0,0,c/j,d/j),b.restore()}},e.merge(h.prototype,d.prototype),h}),c("zrender/shape/Heart",["require","./Base","./util/PathProxy","../tool/area","../tool/util"],function(a){"use strict";var b=a("./Base"),c=a("./util/PathProxy"),d=a("../tool/area"),e=function(a){b.call(this,a),this._pathProxy=new c};return e.prototype={type:"heart",buildPath:function(a,b){var d=this._pathProxy||new c;d.begin(a),d.moveTo(b.x,b.y),d.bezierCurveTo(b.x+b.a/2,b.y-2*b.b/3,b.x+2*b.a,b.y+b.b/3,b.x,b.y+b.b),d.bezierCurveTo(b.x-2*b.a,b.y+b.b/3,b.x-b.a/2,b.y-2*b.b/3,b.x,b.y),d.closePath()},getRect:function(a){return a.__rect?a.__rect:(this._pathProxy.isEmpty()||this.buildPath(null,a),this._pathProxy.fastBoundingRect())},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);return a=c[0],b=c[1],this.isCoverRect(a,b)?d.isInsidePath(this._pathProxy.pathCommands,this.style.lineWidth,this.style.brushType,a,b):void 0}},a("../tool/util").inherits(e,b),e}),c("zrender/loadingEffect/Base",["require","../tool/util","../shape/Text","../shape/Rectangle"],function(a){function b(a){this.setOptions(a)}var c=a("../tool/util"),d=a("../shape/Text"),e=a("../shape/Rectangle"),f="Loading...",g="normal 16px Arial";return b.prototype.createTextShape=function(a){return new d({highlightStyle:c.merge({x:this.canvasWidth/2,y:this.canvasHeight/2,text:f,textAlign:"center",textBaseline:"middle",textFont:g,color:"#333",brushType:"fill"},a,!0)})},b.prototype.createBackgroundShape=function(a){return new e({highlightStyle:{x:0,y:0,width:this.canvasWidth,height:this.canvasHeight,brushType:"fill",color:a}})},b.prototype.start=function(a){function b(b){a.storage.addHover(b)}function c(){a.refreshHover()}this.canvasWidth=a._width,this.canvasHeight=a._height,this.loadingTimer=this._start(b,c)},b.prototype._start=function(){return setInterval(function(){},1e4)},b.prototype.stop=function(){clearInterval(this.loadingTimer)},b.prototype.setOptions=function(a){this.options=a||{}},b.prototype.adjust=function(a,b){return a<=b[0]?a=b[0]:a>=b[1]&&(a=b[1]),a},b.prototype.getLocation=function(a,b,c){var d=null!=a.x?a.x:"center";switch(d){case"center":d=Math.floor((this.canvasWidth-b)/2);break;case"left":d=0;break;case"right":d=this.canvasWidth-b}var e=null!=a.y?a.y:"center";switch(e){case"center":e=Math.floor((this.canvasHeight-c)/2);break;case"top":e=0;break;case"bottom":e=this.canvasHeight-c}return{x:d,y:e,width:b,height:c}},b}),c("zrender/shape/util/PathProxy",["require","../../tool/vector"],function(a){var b=a("../../tool/vector"),c=function(a,b){this.command=a,this.points=b||null},d=function(){this.pathCommands=[],this._ctx=null,this._min=[],this._max=[]};return d.prototype.fastBoundingRect=function(){var a=this._min,c=this._max;a[0]=a[1]=1/0,c[0]=c[1]=-1/0;for(var d=0;d<this.pathCommands.length;d++){var e=this.pathCommands[d],f=e.points;switch(e.command){case"M":b.min(a,a,f),b.max(c,c,f);break;case"L":b.min(a,a,f),b.max(c,c,f);break;case"C":for(var g=0;6>g;g+=2)a[0]=Math.min(a[0],a[0],f[g]),a[1]=Math.min(a[1],a[1],f[g+1]),c[0]=Math.max(c[0],c[0],f[g]),c[1]=Math.max(c[1],c[1],f[g+1]);break;case"Q":for(var g=0;4>g;g+=2)a[0]=Math.min(a[0],a[0],f[g]),a[1]=Math.min(a[1],a[1],f[g+1]),c[0]=Math.max(c[0],c[0],f[g]),c[1]=Math.max(c[1],c[1],f[g+1]);break;case"A":var h=f[0],i=f[1],j=f[2],k=f[3];a[0]=Math.min(a[0],a[0],h-j),a[1]=Math.min(a[1],a[1],i-k),c[0]=Math.max(c[0],c[0],h+j),c[1]=Math.max(c[1],c[1],i+k)}}return{x:a[0],y:a[1],width:c[0]-a[0],height:c[1]-a[1]}},d.prototype.begin=function(a){return this._ctx=a||null,this.pathCommands.length=0,this},d.prototype.moveTo=function(a,b){return this.pathCommands.push(new c("M",[a,b])),this._ctx&&this._ctx.moveTo(a,b),this},d.prototype.lineTo=function(a,b){return this.pathCommands.push(new c("L",[a,b])),this._ctx&&this._ctx.lineTo(a,b),this},d.prototype.bezierCurveTo=function(a,b,d,e,f,g){return this.pathCommands.push(new c("C",[a,b,d,e,f,g])),this._ctx&&this._ctx.bezierCurveTo(a,b,d,e,f,g),this},d.prototype.quadraticCurveTo=function(a,b,d,e){return this.pathCommands.push(new c("Q",[a,b,d,e])),this._ctx&&this._ctx.quadraticCurveTo(a,b,d,e),this},d.prototype.arc=function(a,b,d,e,f,g){return this.pathCommands.push(new c("A",[a,b,d,d,e,f-e,0,g?0:1])),this._ctx&&this._ctx.arc(a,b,d,e,f,g),this},d.prototype.arcTo=function(a,b,c,d,e){return this._ctx&&this._ctx.arcTo(a,b,c,d,e),this},d.prototype.rect=function(a,b,c,d){return this._ctx&&this._ctx.rect(a,b,c,d),this},d.prototype.closePath=function(){return this.pathCommands.push(new c("z")),this._ctx&&this._ctx.closePath(),this},d.prototype.isEmpty=function(){return 0===this.pathCommands.length},d.PathSegment=c,d}),c("zrender/Group",["require","./tool/guid","./tool/util","./mixin/Transformable","./mixin/Eventful"],function(a){var b=a("./tool/guid"),c=a("./tool/util"),d=a("./mixin/Transformable"),e=a("./mixin/Eventful"),f=function(a){a=a||{},this.id=a.id||b();for(var c in a)this[c]=a[c];this.type="group",this.clipShape=null,this._children=[],this._storage=null,this.__dirty=!0,d.call(this),e.call(this)};return f.prototype.ignore=!1,f.prototype.children=function(){return this._children.slice()},f.prototype.childAt=function(a){return this._children[a]},f.prototype.addChild=function(a){a!=this&&a.parent!=this&&(a.parent&&a.parent.removeChild(a),this._children.push(a),a.parent=this,this._storage&&this._storage!==a._storage&&(this._storage.addToMap(a),a instanceof f&&a.addChildrenToStorage(this._storage)))},f.prototype.removeChild=function(a){var b=c.indexOf(this._children,a);b>=0&&this._children.splice(b,1),a.parent=null,this._storage&&(this._storage.delFromMap(a.id),a instanceof f&&a.delChildrenFromStorage(this._storage))},f.prototype.clearChildren=function(){for(var a=0;a<this._children.length;a++){var b=this._children[a];this._storage&&(this._storage.delFromMap(b.id),b instanceof f&&b.delChildrenFromStorage(this._storage))}this._children.length=0},f.prototype.eachChild=function(a,b){for(var c=!!b,d=0;d<this._children.length;d++){var e=this._children[d];c?a.call(b,e):a(e)}},f.prototype.traverse=function(a,b){for(var c=!!b,d=0;d<this._children.length;d++){var e=this._children[d];c?a.call(b,e):a(e),"group"===e.type&&e.traverse(a,b)}},f.prototype.addChildrenToStorage=function(a){for(var b=0;b<this._children.length;b++){var c=this._children[b];a.addToMap(c),c instanceof f&&c.addChildrenToStorage(a)}},f.prototype.delChildrenFromStorage=function(a){for(var b=0;b<this._children.length;b++){var c=this._children[b];a.delFromMap(c.id),c instanceof f&&c.delChildrenFromStorage(a)}},f.prototype.modSelf=function(){this.__dirty=!0},c.merge(f.prototype,d.prototype,!0),c.merge(f.prototype,e.prototype,!0),f}),c("zrender/shape/util/dashedLineTo",[],function(){var a=[5,5];return function(b,c,d,e,f,g){if(b.setLineDash)return a[0]=a[1]=g,b.setLineDash(a),b.moveTo(c,d),void b.lineTo(e,f);g="number"!=typeof g?5:g;var h=e-c,i=f-d,j=Math.floor(Math.sqrt(h*h+i*i)/g);h/=j,i/=j;for(var k=!0,l=0;j>l;++l)k?b.moveTo(c,d):b.lineTo(c,d),k=!k,c+=h,d+=i;b.lineTo(e,f)}}),c("zrender/animation/Clip",["require","./easing"],function(a){function b(a){this._targetPool=a.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=a.life||1e3,this._delay=a.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop="undefined"==typeof a.loop?!1:a.loop,this.gap=a.gap||0,this.easing=a.easing||"Linear",this.onframe=a.onframe,this.ondestroy=a.ondestroy,this.onrestart=a.onrestart}var c=a("./easing");return b.prototype={step:function(a){var b=(a-this._startTime)/this._life;if(!(0>b)){b=Math.min(b,1);var d="string"==typeof this.easing?c[this.easing]:this.easing,e="function"==typeof d?d(b):b;return this.fire("frame",e),1==b?this.loop?(this.restart(),"restart"):(this.__needsRemove=!0,"destroy"):null}},restart:function(){var a=(new Date).getTime(),b=(a-this._startTime)%this._life;this._startTime=(new Date).getTime()-b+this.gap,this.__needsRemove=!1},fire:function(a,b){for(var c=0,d=this._targetPool.length;d>c;c++)this["on"+a]&&this["on"+a](this._targetPool[c],b)},constructor:b},b}),c("echarts/util/shape/normalIsCover",[],function(){return function(a,b){var c=this.transformCoordToLocal(a,b);return a=c[0],b=c[1],this.isCoverRect(a,b)}}),c("zrender/animation/easing",[],function(){var a={Linear:function(a){return a},QuadraticIn:function(a){return a*a},QuadraticOut:function(a){return a*(2-a)},QuadraticInOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},CubicIn:function(a){return a*a*a},CubicOut:function(a){return--a*a*a+1},CubicInOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},QuarticIn:function(a){return a*a*a*a},QuarticOut:function(a){return 1- --a*a*a*a},QuarticInOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},QuinticIn:function(a){return a*a*a*a*a},QuinticOut:function(a){return--a*a*a*a*a+1},QuinticInOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},SinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},SinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},SinusoidalInOut:function(a){return.5*(1-Math.cos(Math.PI*a))},ExponentialIn:function(a){return 0===a?0:Math.pow(1024,a-1)},ExponentialOut:function(a){return 1===a?1:1-Math.pow(2,-10*a)},ExponentialInOut:function(a){return 0===a?0:1===a?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)},CircularIn:function(a){return 1-Math.sqrt(1-a*a)},CircularOut:function(a){return Math.sqrt(1- --a*a)},CircularInOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},ElasticIn:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d)))},ElasticOut:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/d)+1)},ElasticInOut:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),(a*=2)<1?-.5*c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d):c*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d)*.5+1)},BackIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},BackOut:function(a){var b=1.70158;return--a*a*((b+1)*a+b)+1},BackInOut:function(a){var b=2.5949095;return(a*=2)<1?.5*a*a*((b+1)*a-b):.5*((a-=2)*a*((b+1)*a+b)+2)},BounceIn:function(b){return 1-a.BounceOut(1-b)},BounceOut:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},BounceInOut:function(b){return.5>b?.5*a.BounceIn(2*b):.5*a.BounceOut(2*b-1)+.5}};return a}),c("zrender/shape/util/smoothSpline",["require","../../tool/vector"],function(a){function b(a,b,c,d,e,f,g){var h=.5*(c-a),i=.5*(d-b);return(2*(b-c)+h+i)*g+(-3*(b-c)-2*h-i)*f+h*e+b}var c=a("../../tool/vector");return function(a,d){for(var e=a.length,f=[],g=0,h=1;e>h;h++)g+=c.distance(a[h-1],a[h]);var i=g/5;i=e>i?e:i;for(var h=0;i>h;h++){var j,k,l,m=h/(i-1)*(d?e:e-1),n=Math.floor(m),o=m-n,p=a[n%e];d?(j=a[(n-1+e)%e],k=a[(n+1)%e],l=a[(n+2)%e]):(j=a[0===n?n:n-1],k=a[n>e-2?e-1:n+1],l=a[n>e-3?e-1:n+2]);var q=o*o,r=o*q;f.push([b(j[0],p[0],k[0],l[0],o,q,r),b(j[1],p[1],k[1],l[1],o,q,r)])}return f}}),c("zrender/shape/util/smoothBezier",["require","../../tool/vector"],function(a){var b=a("../../tool/vector");return function(a,c,d,e){var f,g,h,i,j=[],k=[],l=[],m=[],n=!!e;if(n){h=[1/0,1/0],i=[-1/0,-1/0];for(var o=0,p=a.length;p>o;o++)b.min(h,h,a[o]),b.max(i,i,a[o]);b.min(h,h,e[0]),b.max(i,i,e[1])}for(var o=0,p=a.length;p>o;o++){var f,g,q=a[o];if(d)f=a[o?o-1:p-1],g=a[(o+1)%p];else{if(0===o||o===p-1){j.push(b.clone(a[o]));continue}f=a[o-1],g=a[o+1]}b.sub(k,g,f),b.scale(k,k,c);var r=b.distance(q,f),s=b.distance(q,g),t=r+s;0!==t&&(r/=t,s/=t),b.scale(l,k,-r),b.scale(m,k,s);var u=b.add([],q,l),v=b.add([],q,m);n&&(b.max(u,u,h),b.min(u,u,i),b.max(v,v,h),b.min(v,v,i)),j.push(u),j.push(v)}return d&&j.push(b.clone(j.shift())),j}}),c("echarts/util/ecQuery",["require","zrender/tool/util"],function(a){function b(a,b){if("undefined"!=typeof a){if(!b)return a;b=b.split(".");for(var c=b.length,d=0;c>d;){if(a=a[b[d]],"undefined"==typeof a)return;d++}return a}}function c(a,c){for(var d,e=0,f=a.length;f>e;e++)if(d=b(a[e],c),"undefined"!=typeof d)return d}function d(a,c){for(var d,f=a.length;f--;){var g=b(a[f],c);"undefined"!=typeof g&&("undefined"==typeof d?d=e.clone(g):e.merge(d,g,!0))}return d}var e=a("zrender/tool/util");return{query:b,deepQuery:c,deepMerge:d}}),c("echarts/data/KDTree",["require","./quickSelect"],function(a){function b(a,b){this.left=null,this.right=null,this.axis=a,this.data=b}var c=a("./quickSelect"),d=function(a,b){a.length&&(b||(b=a[0].array.length),this.dimension=b,this.root=this._buildTree(a,0,a.length-1,0),this._stack=[],this._nearstNList=[])};return d.prototype._buildTree=function(a,d,e,f){if(d>e)return null;var g=Math.floor((d+e)/2);g=c(a,d,e,g,function(a,b){return a.array[f]-b.array[f]});var h=a[g],i=new b(f,h);return f=(f+1)%this.dimension,e>d&&(i.left=this._buildTree(a,d,g-1,f),i.right=this._buildTree(a,g+1,e,f)),i},d.prototype.nearest=function(a,b){var c=this.root,d=this._stack,e=0,f=1/0,g=null;for(c.data!==a&&(f=b(c.data,a),g=c),a.array[c.axis]<c.data.array[c.axis]?(c.right&&(d[e++]=c.right),c.left&&(d[e++]=c.left)):(c.left&&(d[e++]=c.left),c.right&&(d[e++]=c.right));e--;){c=d[e];var h=a.array[c.axis]-c.data.array[c.axis],i=0>h,j=!1;h*=h,f>h&&(h=b(c.data,a),f>h&&c.data!==a&&(f=h,g=c),j=!0),i?(j&&c.right&&(d[e++]=c.right),c.left&&(d[e++]=c.left)):(j&&c.left&&(d[e++]=c.left),c.right&&(d[e++]=c.right))}return g.data},d.prototype._addNearest=function(a,b,c){for(var d=this._nearstNList,e=a-1;e>0&&!(b>=d[e-1].dist);e--)d[e].dist=d[e-1].dist,d[e].node=d[e-1].node;d[e].dist=b,d[e].node=c},d.prototype.nearestN=function(a,b,c,d){if(0>=b)return d.length=0,d;for(var e=this.root,f=this._stack,g=0,h=this._nearstNList,i=0;b>i;i++)h[i]||(h[i]={}),h[i].dist=0,h[i].node=null;var j=c(e.data,a),k=0;for(e.data!==a&&(k++,this._addNearest(k,j,e)),a.array[e.axis]<e.data.array[e.axis]?(e.right&&(f[g++]=e.right),e.left&&(f[g++]=e.left)):(e.left&&(f[g++]=e.left),e.right&&(f[g++]=e.right));g--;){e=f[g];var j=a.array[e.axis]-e.data.array[e.axis],l=0>j,m=!1;j*=j,(b>k||j<h[k-1].dist)&&(j=c(e.data,a),(b>k||j<h[k-1].dist)&&e.data!==a&&(b>k&&k++,this._addNearest(k,j,e)),m=!0),l?(m&&e.right&&(f[g++]=e.right),e.left&&(f[g++]=e.left)):(m&&e.left&&(f[g++]=e.left),e.right&&(f[g++]=e.right))}for(var i=0;k>i;i++)d[i]=h[i].node.data;return d.length=k,d},d}),c("echarts/data/quickSelect",["require"],function(){function a(a,b){return a-b}function b(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function c(a,c,d,e,f){for(var g=c;d>c;){var g=Math.round((d+c)/2),h=a[g];b(a,g,d),g=c;for(var i=c;d-1>=i;i++)f(h,a[i])>=0&&(b(a,i,g),g++);if(b(a,d,g),g===e)return g;e>g?c=g+1:d=g-1}return c}function d(b,d,e,f,g){return arguments.length<=3&&(f=d,g=2==arguments.length?a:e,d=0,e=b.length-1),c(b,d,e,f,g)}return d}),c("echarts/component/dataView",["require","./base","../config","zrender/tool/util","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.dom=f.dom,this._tDom=document.createElement("div"),this._textArea=document.createElement("textArea"),this._buttonRefresh=document.createElement("button"),this._buttonRefresh.setAttribute("type","button"),this._buttonClose=document.createElement("button"),this._buttonClose.setAttribute("type","button"),this._hasShow=!1,this._zrHeight=d.getHeight(),this._zrWidth=d.getWidth(),this._tDom.className="echarts-dataview",this.hide(),this.dom.firstChild.appendChild(this._tDom),window.addEventListener?(this._tDom.addEventListener("click",this._stop),this._tDom.addEventListener("mousewheel",this._stop),this._tDom.addEventListener("mousemove",this._stop),this._tDom.addEventListener("mousedown",this._stop),this._tDom.addEventListener("mouseup",this._stop),this._tDom.addEventListener("touchstart",this._stop),this._tDom.addEventListener("touchmove",this._stop),this._tDom.addEventListener("touchend",this._stop)):(this._tDom.attachEvent("onclick",this._stop),this._tDom.attachEvent("onmousewheel",this._stop),this._tDom.attachEvent("onmousemove",this._stop),this._tDom.attachEvent("onmousedown",this._stop),this._tDom.attachEvent("onmouseup",this._stop))}var c=a("./base"),d=a("../config"),e=a("zrender/tool/util");return b.prototype={type:d.COMPONENT_TYPE_DATAVIEW,_lang:["Data View","close","refresh"],_gCssText:"position:absolute;display:block;overflow:hidden;transition:height 0.8s,background-color 1s;-moz-transition:height 0.8s,background-color 1s;-webkit-transition:height 0.8s,background-color 1s;-o-transition:height 0.8s,background-color 1s;z-index:1;left:0;top:0;",hide:function(){this._sizeCssText="width:"+this._zrWidth+"px;height:0px;background-color:#f0ffff;",this._tDom.style.cssText=this._gCssText+this._sizeCssText},show:function(a){this._hasShow=!0;var b=this.query(this.option,"toolbox.feature.dataView.lang")||this._lang;this.option=a,this._tDom.innerHTML='<p style="padding:8px 0;margin:0 0 10px 0;border-bottom:1px solid #eee">'+(b[0]||this._lang[0])+"</p>";var c=this.query(this.option,"toolbox.feature.dataView.optionToContent");"function"!=typeof c?this._textArea.value=this._optionToContent():(this._textArea=document.createElement("div"),this._textArea.innerHTML=c(this.option)),this._textArea.style.cssText="display:block;margin:0 0 8px 0;padding:4px 6px;overflow:auto;width:100%;height:"+(this._zrHeight-100)+"px;",this._tDom.appendChild(this._textArea),this._buttonClose.style.cssText="float:right;padding:1px 6px;",this._buttonClose.innerHTML=b[1]||this._lang[1];var d=this;this._buttonClose.onclick=function(){d.hide()},this._tDom.appendChild(this._buttonClose),this.query(this.option,"toolbox.feature.dataView.readOnly")===!1?(this._buttonRefresh.style.cssText="float:right;margin-right:10px;padding:1px 6px;",this._buttonRefresh.innerHTML=b[2]||this._lang[2],this._buttonRefresh.onclick=function(){d._save()},this._textArea.readOnly=!1,this._textArea.style.cursor="default"):(this._buttonRefresh.style.cssText="display:none",this._textArea.readOnly=!0,this._textArea.style.cursor="text"),this._tDom.appendChild(this._buttonRefresh),this._sizeCssText="width:"+this._zrWidth+"px;height:"+this._zrHeight+"px;background-color:#fff;",this._tDom.style.cssText=this._gCssText+this._sizeCssText},_optionToContent:function(){var a,b,c,e,f,g,h=[],i="";if(this.option.xAxis)for(h=this.option.xAxis instanceof Array?this.option.xAxis:[this.option.xAxis],a=0,e=h.length;e>a;a++)if("category"==(h[a].type||"category")){for(g=[],b=0,c=h[a].data.length;c>b;b++)g.push(this.getDataFromOption(h[a].data[b]));i+=g.join(", ")+"\n\n"}if(this.option.yAxis)for(h=this.option.yAxis instanceof Array?this.option.yAxis:[this.option.yAxis],a=0,e=h.length;e>a;a++)if("category"==h[a].type){for(g=[],b=0,c=h[a].data.length;c>b;b++)g.push(this.getDataFromOption(h[a].data[b]));
i+=g.join(", ")+"\n\n"}var j,k=this.option.series;for(a=0,e=k.length;e>a;a++){for(g=[],b=0,c=k[a].data.length;c>b;b++)f=k[a].data[b],j=k[a].type==d.CHART_TYPE_PIE||k[a].type==d.CHART_TYPE_MAP?(f.name||"-")+":":"",k[a].type==d.CHART_TYPE_SCATTER&&(f=this.getDataFromOption(f).join(", ")),g.push(j+this.getDataFromOption(f));i+=(k[a].name||"-")+" : \n",i+=g.join(k[a].type==d.CHART_TYPE_SCATTER?"\n":", "),i+="\n\n"}return i},_save:function(){var a=this.query(this.option,"toolbox.feature.dataView.contentToOption");if("function"!=typeof a){for(var b=this._textArea.value.split("\n"),c=[],e=0,f=b.length;f>e;e++)b[e]=this._trim(b[e]),""!==b[e]&&c.push(b[e]);this._contentToOption(c)}else a(this._textArea,this.option);this.hide();var g=this;setTimeout(function(){g.messageCenter&&g.messageCenter.dispatch(d.EVENT.DATA_VIEW_CHANGED,null,{option:g.option},g.myChart)},g.canvasSupported?800:100)},_contentToOption:function(a){var b,c,e,f,g,h,i,j=[],k=0;if(this.option.xAxis)for(j=this.option.xAxis instanceof Array?this.option.xAxis:[this.option.xAxis],b=0,f=j.length;f>b;b++)if("category"==(j[b].type||"category")){for(h=a[k].split(","),c=0,e=j[b].data.length;e>c;c++)i=this._trim(h[c]||""),g=j[b].data[c],"undefined"!=typeof j[b].data[c].value?j[b].data[c].value=i:j[b].data[c]=i;k++}if(this.option.yAxis)for(j=this.option.yAxis instanceof Array?this.option.yAxis:[this.option.yAxis],b=0,f=j.length;f>b;b++)if("category"==j[b].type){for(h=a[k].split(","),c=0,e=j[b].data.length;e>c;c++)i=this._trim(h[c]||""),g=j[b].data[c],"undefined"!=typeof j[b].data[c].value?j[b].data[c].value=i:j[b].data[c]=i;k++}var l=this.option.series;for(b=0,f=l.length;f>b;b++)if(k++,l[b].type==d.CHART_TYPE_SCATTER)for(var c=0,e=l[b].data.length;e>c;c++)h=a[k],i=h.replace(" ","").split(","),"undefined"!=typeof l[b].data[c].value?l[b].data[c].value=i:l[b].data[c]=i,k++;else{h=a[k].split(",");for(var c=0,e=l[b].data.length;e>c;c++)i=(h[c]||"").replace(/.*:/,""),i=this._trim(i),i="-"!=i&&""!==i?i-0:"-","undefined"!=typeof l[b].data[c].value?l[b].data[c].value=i:l[b].data[c]=i;k++}},_trim:function(a){var b=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return a.replace(b,"")},_stop:function(a){a=a||window.event,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},resize:function(){this._zrHeight=this.zr.getHeight(),this._zrWidth=this.zr.getWidth(),this._tDom.offsetHeight>10&&(this._sizeCssText="width:"+this._zrWidth+"px;height:"+this._zrHeight+"px;background-color:#fff;",this._tDom.style.cssText=this._gCssText+this._sizeCssText,this._textArea.style.cssText="display:block;margin:0 0 8px 0;padding:4px 6px;overflow:auto;width:100%;height:"+(this._zrHeight-100)+"px;")},dispose:function(){window.removeEventListener?(this._tDom.removeEventListener("click",this._stop),this._tDom.removeEventListener("mousewheel",this._stop),this._tDom.removeEventListener("mousemove",this._stop),this._tDom.removeEventListener("mousedown",this._stop),this._tDom.removeEventListener("mouseup",this._stop),this._tDom.removeEventListener("touchstart",this._stop),this._tDom.removeEventListener("touchmove",this._stop),this._tDom.removeEventListener("touchend",this._stop)):(this._tDom.detachEvent("onclick",this._stop),this._tDom.detachEvent("onmousewheel",this._stop),this._tDom.detachEvent("onmousemove",this._stop),this._tDom.detachEvent("onmousedown",this._stop),this._tDom.detachEvent("onmouseup",this._stop)),this._buttonRefresh.onclick=null,this._buttonClose.onclick=null,this._hasShow&&(this._tDom.removeChild(this._textArea),this._tDom.removeChild(this._buttonRefresh),this._tDom.removeChild(this._buttonClose)),this._textArea=null,this._buttonRefresh=null,this._buttonClose=null,this.dom.firstChild.removeChild(this._tDom),this._tDom=null}},e.inherits(b,c),a("../component").define("dataView",b),b}),c("echarts/util/coordinates",["require","zrender/tool/math"],function(a){function b(a,b){return[a*d.sin(b),a*d.cos(b)]}function c(a,b){return[Math.sqrt(a*a+b*b),Math.atan(b/a)]}var d=a("zrender/tool/math");return{polar2cartesian:b,cartesian2polar:c}}),c("echarts/component/valueAxis",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","../config","../util/date","zrender/tool/util","../util/smartSteps","../util/accMath","../util/smartLogSteps","../component"],function(a){function b(a,b,d,e,f,g,h){if(h&&0!==h.length){c.call(this,a,b,d,e,f),this.series=h,this.grid=this.component.grid;for(var i in g)this[i]=g[i];this.refresh(e,h)}}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Line"),f=a("zrender/shape/Rectangle"),g=a("../config");g.valueAxis={zlevel:0,z:0,show:!0,position:"left",name:"",nameLocation:"end",nameTextStyle:{},boundaryGap:[0,0],axisLine:{show:!0,onZero:!0,lineStyle:{color:"#48b",width:2,type:"solid"}},axisTick:{show:!1,inside:!1,length:5,lineStyle:{color:"#333",width:1}},axisLabel:{show:!0,rotate:0,margin:8,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}};var h=a("../util/date"),i=a("zrender/tool/util");return b.prototype={type:g.COMPONENT_TYPE_AXIS_VALUE,_buildShape:function(){if(this._hasData=!1,this._calculateValue(),this._hasData&&this.option.show){this.option.splitArea.show&&this._buildSplitArea(),this.option.splitLine.show&&this._buildSplitLine(),this.option.axisLine.show&&this._buildAxisLine(),this.option.axisTick.show&&this._buildAxisTick(),this.option.axisLabel.show&&this._buildAxisLabel();for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a])}},_buildAxisTick:function(){var a,b=this._valueList,c=this._valueList.length,d=this.option.axisTick,f=d.length,g=d.lineStyle.color,h=d.lineStyle.width;if(this.isHorizontal())for(var i,j="bottom"===this.option.position?d.inside?this.grid.getYend()-f-1:this.grid.getYend()+1:d.inside?this.grid.getY()+1:this.grid.getY()-f-1,k=0;c>k;k++)i=this.subPixelOptimize(this.getCoord(b[k]),h),a={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:i,yStart:j,xEnd:i,yEnd:j+f,strokeColor:g,lineWidth:h}},this.shapeList.push(new e(a));else for(var l,m="left"===this.option.position?d.inside?this.grid.getX()+1:this.grid.getX()-f-1:d.inside?this.grid.getXend()-f-1:this.grid.getXend()+1,k=0;c>k;k++)l=this.subPixelOptimize(this.getCoord(b[k]),h),a={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:m,yStart:l,xEnd:m+f,yEnd:l,strokeColor:g,lineWidth:h}},this.shapeList.push(new e(a))},_buildAxisLabel:function(){var a,b=this._valueList,c=this._valueList.length,e=this.option.axisLabel.rotate,f=this.option.axisLabel.margin,g=this.option.axisLabel.clickable,h=this.option.axisLabel.textStyle;if(this.isHorizontal()){var i,j;"bottom"===this.option.position?(i=this.grid.getYend()+f,j="top"):(i=this.grid.getY()-f,j="bottom");for(var k=0;c>k;k++)a={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:this.getCoord(b[k]),y:i,color:"function"==typeof h.color?h.color(b[k]):h.color,text:this._valueLabel[k],textFont:this.getFont(h),textAlign:h.align||"center",textBaseline:h.baseline||j}},e&&(a.style.textAlign=e>0?"bottom"===this.option.position?"right":"left":"bottom"===this.option.position?"left":"right",a.rotation=[e*Math.PI/180,a.style.x,a.style.y]),this.shapeList.push(new d(this._axisLabelClickable(g,a)))}else{var l,m;"left"===this.option.position?(l=this.grid.getX()-f,m="right"):(l=this.grid.getXend()+f,m="left");for(var k=0;c>k;k++)a={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:l,y:this.getCoord(b[k]),color:"function"==typeof h.color?h.color(b[k]):h.color,text:this._valueLabel[k],textFont:this.getFont(h),textAlign:h.align||m,textBaseline:h.baseline||(0===k&&""!==this.option.name?"bottom":k===c-1&&""!==this.option.name?"top":"middle")}},e&&(a.rotation=[e*Math.PI/180,a.style.x,a.style.y]),this.shapeList.push(new d(this._axisLabelClickable(g,a)))}},_buildSplitLine:function(){var a,b=this._valueList,c=this._valueList.length,d=this.option.splitLine,f=d.lineStyle.type,g=d.lineStyle.width,h=d.lineStyle.color;h=h instanceof Array?h:[h];var i=h.length;if(this.isHorizontal())for(var j,k=this.grid.getY(),l=this.grid.getYend(),m=0;c>m;m++)j=this.subPixelOptimize(this.getCoord(b[m]),g),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:j,yStart:k,xEnd:j,yEnd:l,strokeColor:h[m%i],lineType:f,lineWidth:g}},this.shapeList.push(new e(a));else for(var n,o=this.grid.getX(),p=this.grid.getXend(),m=0;c>m;m++)n=this.subPixelOptimize(this.getCoord(b[m]),g),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:o,yStart:n,xEnd:p,yEnd:n,strokeColor:h[m%i],lineType:f,lineWidth:g}},this.shapeList.push(new e(a))},_buildSplitArea:function(){var a,b=this.option.splitArea.areaStyle.color;if(b instanceof Array){var c=b.length,d=this._valueList,e=this._valueList.length;if(this.isHorizontal())for(var g,h=this.grid.getY(),i=this.grid.getHeight(),j=this.grid.getX(),k=0;e>=k;k++)g=e>k?this.getCoord(d[k]):this.grid.getXend(),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:j,y:h,width:g-j,height:i,color:b[k%c]}},this.shapeList.push(new f(a)),j=g;else for(var l,m=this.grid.getX(),n=this.grid.getWidth(),o=this.grid.getYend(),k=0;e>=k;k++)l=e>k?this.getCoord(d[k]):this.grid.getY(),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:m,y:l,width:n,height:o-l,color:b[k%c]}},this.shapeList.push(new f(a)),o=l}else a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this.grid.getX(),y:this.grid.getY(),width:this.grid.getWidth(),height:this.grid.getHeight(),color:b}},this.shapeList.push(new f(a))},_calculateValue:function(){if(isNaN(this.option.min-0)||isNaN(this.option.max-0)){for(var a,b,c={},d=this.component.legend,e=0,f=this.series.length;f>e;e++)!(this.series[e].type!=g.CHART_TYPE_LINE&&this.series[e].type!=g.CHART_TYPE_BAR&&this.series[e].type!=g.CHART_TYPE_SCATTER&&this.series[e].type!=g.CHART_TYPE_K&&this.series[e].type!=g.CHART_TYPE_EVENTRIVER||d&&!d.isSelected(this.series[e].name)||(a=this.series[e].xAxisIndex||0,b=this.series[e].yAxisIndex||0,this.option.xAxisIndex!=a&&this.option.yAxisIndex!=b||!this._calculSum(c,e)));var h;for(var e in c){h=c[e];for(var i=0,j=h.length;j>i;i++)if(!isNaN(h[i])){this._hasData=!0,this._min=h[i],this._max=h[i];break}if(this._hasData)break}for(var e in c){h=c[e];for(var i=0,j=h.length;j>i;i++)isNaN(h[i])||(this._min=Math.min(this._min,h[i]),this._max=Math.max(this._max,h[i]))}var k="log"!==this.option.type?this.option.boundaryGap:[0,0],l=Math.abs(this._max-this._min);this._min=isNaN(this.option.min-0)?this._min-Math.abs(l*k[0]):this.option.min-0,this._max=isNaN(this.option.max-0)?this._max+Math.abs(l*k[1]):this.option.max-0,this._min===this._max&&(0===this._max?this._max=1:this._max>0?this._min=this._max/this.option.splitNumber!=null?this.option.splitNumber:5:this._max=this._max/this.option.splitNumber!=null?this.option.splitNumber:5),"time"===this.option.type?this._reformTimeValue():"log"===this.option.type?this._reformLogValue():this._reformValue(this.option.scale)}else this._hasData=!0,this._min=this.option.min-0,this._max=this.option.max-0,"time"===this.option.type?this._reformTimeValue():"log"===this.option.type?this._reformLogValue():this._customerValue()},_calculSum:function(a,b){var c,d,e=this.series[b].name||"kener";if(this.series[b].stack){var f="__Magic_Key_Positive__"+this.series[b].stack,i="__Magic_Key_Negative__"+this.series[b].stack;a[f]=a[f]||[],a[i]=a[i]||[],a[e]=a[e]||[],d=this.series[b].data;for(var j=0,k=d.length;k>j;j++)c=this.getDataFromOption(d[j]),"-"!==c&&(c-=0,c>=0?null!=a[f][j]?a[f][j]+=c:a[f][j]=c:null!=a[i][j]?a[i][j]+=c:a[i][j]=c,this.option.scale&&a[e].push(c))}else if(a[e]=a[e]||[],this.series[b].type!=g.CHART_TYPE_EVENTRIVER){d=this.series[b].data;for(var j=0,k=d.length;k>j;j++)c=this.getDataFromOption(d[j]),this.series[b].type===g.CHART_TYPE_K?(a[e].push(c[0]),a[e].push(c[1]),a[e].push(c[2]),a[e].push(c[3])):c instanceof Array?(-1!=this.option.xAxisIndex&&a[e].push("time"!=this.option.type?c[0]:h.getNewDate(c[0])),-1!=this.option.yAxisIndex&&a[e].push("time"!=this.option.type?c[1]:h.getNewDate(c[1]))):a[e].push(c)}else{d=this.series[b].data;for(var j=0,k=d.length;k>j;j++)for(var l=d[j].evolution,m=0,n=l.length;n>m;m++)a[e].push(h.getNewDate(l[m].time))}},_reformValue:function(b){var c=a("../util/smartSteps"),d=this.option.splitNumber;!b&&this._min>=0&&this._max>=0&&(this._min=0),!b&&this._min<=0&&this._max<=0&&(this._max=0);var e=c(this._min,this._max,d);d=null!=d?d:e.secs,this._min=e.min,this._max=e.max,this._valueList=e.pnts,this._reformLabelData()},_reformTimeValue:function(){var a=null!=this.option.splitNumber?this.option.splitNumber:5,b=h.getAutoFormatter(this._min,this._max,a),c=b.formatter,d=b.gapValue;this._valueList=[h.getNewDate(this._min)];var e;switch(c){case"week":e=h.nextMonday(this._min);break;case"month":e=h.nextNthOnMonth(this._min,1);break;case"quarter":e=h.nextNthOnQuarterYear(this._min,1);break;case"half-year":e=h.nextNthOnHalfYear(this._min,1);break;case"year":e=h.nextNthOnYear(this._min,1);break;default:72e5>=d?e=(Math.floor(this._min/d)+1)*d:(e=h.getNewDate(this._min- -d),e.setHours(6*Math.round(e.getHours()/6)),e.setMinutes(0),e.setSeconds(0))}for(e-this._min<d/2&&(e-=-d),b=h.getNewDate(e),a*=1.5;a-- >=0&&(("month"==c||"quarter"==c||"half-year"==c||"year"==c)&&b.setDate(1),!(this._max-b<d/2));)this._valueList.push(b),b=h.getNewDate(b- -d);this._valueList.push(h.getNewDate(this._max)),this._reformLabelData(function(a){return function(b){return h.format(a,b)}}(c))},_customerValue:function(){var b=a("../util/accMath"),c=null!=this.option.splitNumber?this.option.splitNumber:5,d=(this._max-this._min)/c;this._valueList=[];for(var e=0;c>=e;e++)this._valueList.push(b.accAdd(this._min,b.accMul(d,e)));this._reformLabelData()},_reformLogValue:function(){var b=this.option,c=a("../util/smartLogSteps")({dataMin:this._min,dataMax:this._max,logPositive:b.logPositive,logLabelBase:b.logLabelBase,splitNumber:b.splitNumber});this._min=c.dataMin,this._max=c.dataMax,this._valueList=c.tickList,this._dataMappingMethods=c.dataMappingMethods,this._reformLabelData(c.labelFormatter)},_reformLabelData:function(a){this._valueLabel=[];var b=this.option.axisLabel.formatter;if(b)for(var c=0,d=this._valueList.length;d>c;c++)"function"==typeof b?this._valueLabel.push(a?b.call(this.myChart,this._valueList[c],a):b.call(this.myChart,this._valueList[c])):"string"==typeof b&&this._valueLabel.push(a?h.format(b,this._valueList[c]):b.replace("{value}",this._valueList[c]));else for(var c=0,d=this._valueList.length;d>c;c++)this._valueLabel.push(a?a(this._valueList[c]):this.numAddCommas(this._valueList[c]))},getExtremum:function(){this._calculateValue();var a=this._dataMappingMethods;return{min:this._min,max:this._max,dataMappingMethods:a?i.merge({},a):null}},refresh:function(a,b){a&&(this.option=this.reformOption(a),this.option.axisLabel.textStyle=i.merge(this.option.axisLabel.textStyle||{},this.ecTheme.textStyle),this.series=b),this.zr&&(this.clear(),this._buildShape())},getCoord:function(a){this._dataMappingMethods&&(a=this._dataMappingMethods.value2Coord(a)),a=a<this._min?this._min:a,a=a>this._max?this._max:a;var b;return b=this.isHorizontal()?this.grid.getX()+(a-this._min)/(this._max-this._min)*this.grid.getWidth():this.grid.getYend()-(a-this._min)/(this._max-this._min)*this.grid.getHeight()},getCoordSize:function(a){return Math.abs(this.isHorizontal()?a/(this._max-this._min)*this.grid.getWidth():a/(this._max-this._min)*this.grid.getHeight())},getValueFromCoord:function(a){var b;return this.isHorizontal()?(a=a<this.grid.getX()?this.grid.getX():a,a=a>this.grid.getXend()?this.grid.getXend():a,b=this._min+(a-this.grid.getX())/this.grid.getWidth()*(this._max-this._min)):(a=a<this.grid.getY()?this.grid.getY():a,a=a>this.grid.getYend()?this.grid.getYend():a,b=this._max-(a-this.grid.getY())/this.grid.getHeight()*(this._max-this._min)),this._dataMappingMethods&&(b=this._dataMappingMethods.coord2Value(b)),b.toFixed(2)-0},isMaindAxis:function(a){for(var b=0,c=this._valueList.length;c>b;b++)if(this._valueList[b]===a)return!0;return!1}},i.inherits(b,c),a("../component").define("valueAxis",b),b}),c("echarts/component/categoryAxis",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","../config","zrender/tool/util","zrender/tool/area","../component"],function(a){function b(a,b,d,e,f,g){if(!(e.data.length<1)){c.call(this,a,b,d,e,f),this.grid=this.component.grid;for(var h in g)this[h]=g[h];this.refresh(e)}}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Line"),f=a("zrender/shape/Rectangle"),g=a("../config");g.categoryAxis={zlevel:0,z:0,show:!0,position:"bottom",name:"",nameLocation:"end",nameTextStyle:{},boundaryGap:!0,axisLine:{show:!0,onZero:!0,lineStyle:{color:"#48b",width:2,type:"solid"}},axisTick:{show:!0,interval:"auto",inside:!1,length:5,lineStyle:{color:"#333",width:1}},axisLabel:{show:!0,interval:"auto",rotate:0,margin:8,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}};var h=a("zrender/tool/util"),i=a("zrender/tool/area");return b.prototype={type:g.COMPONENT_TYPE_AXIS_CATEGORY,_getReformedLabel:function(a){var b=this.getDataFromOption(this.option.data[a]),c=this.option.data[a].formatter||this.option.axisLabel.formatter;return c&&("function"==typeof c?b=c.call(this.myChart,b):"string"==typeof c&&(b=c.replace("{value}",b))),b},_getInterval:function(){var a=this.option.axisLabel.interval;if("auto"==a){var b=this.option.axisLabel.textStyle.fontSize,c=this.option.data,d=this.option.data.length;if(this.isHorizontal())if(d>3){var e,f,g=this.getGap(),j=!1,k=Math.floor(.5/g);for(k=1>k?1:k,a=Math.floor(15/g);!j&&d>a;){a+=k,j=!0,e=Math.floor(g*a);for(var l=Math.floor((d-1)/a)*a;l>=0;l-=a){if(0!==this.option.axisLabel.rotate)f=b;else if(c[l].textStyle)f=i.getTextWidth(this._getReformedLabel(l),this.getFont(h.merge(c[l].textStyle,this.option.axisLabel.textStyle)));else{var m=this._getReformedLabel(l)+"",n=(m.match(/\w/g)||"").length,o=m.length-n;f=n*b*2/3+o*b}if(f>e){j=!1;break}}}}else a=1;else if(d>3){var g=this.getGap();for(a=Math.floor(11/g);b>g*a-6&&d>a;)a++}else a=1}else a="function"==typeof a?1:a-0+1;return a},_buildShape:function(){if(this._interval=this._getInterval(),this.option.show){this.option.splitArea.show&&this._buildSplitArea(),this.option.splitLine.show&&this._buildSplitLine(),this.option.axisLine.show&&this._buildAxisLine(),this.option.axisTick.show&&this._buildAxisTick(),this.option.axisLabel.show&&this._buildAxisLabel();for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a])}},_buildAxisTick:function(){var a,b=this.option.data,c=this.option.data.length,d=this.option.axisTick,f=d.length,g=d.lineStyle.color,h=d.lineStyle.width,i="function"==typeof d.interval?d.interval:"auto"==d.interval&&"function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,j=i?1:"auto"==d.interval?this._interval:d.interval-0+1,k=d.onGap,l=k?this.getGap()/2:"undefined"==typeof k&&this.option.boundaryGap?this.getGap()/2:0,m=l>0?-j:0;if(this.isHorizontal())for(var n,o="bottom"==this.option.position?d.inside?this.grid.getYend()-f-1:this.grid.getYend()+1:d.inside?this.grid.getY()+1:this.grid.getY()-f-1,p=m;c>p;p+=j)(!i||i(p,b[p]))&&(n=this.subPixelOptimize(this.getCoordByIndex(p)+(p>=0?l:0),h),a={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:n,yStart:o,xEnd:n,yEnd:o+f,strokeColor:g,lineWidth:h}},this.shapeList.push(new e(a)));else for(var q,r="left"==this.option.position?d.inside?this.grid.getX()+1:this.grid.getX()-f-1:d.inside?this.grid.getXend()-f-1:this.grid.getXend()+1,p=m;c>p;p+=j)(!i||i(p,b[p]))&&(q=this.subPixelOptimize(this.getCoordByIndex(p)-(p>=0?l:0),h),a={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:r,yStart:q,xEnd:r+f,yEnd:q,strokeColor:g,lineWidth:h}},this.shapeList.push(new e(a)))},_buildAxisLabel:function(){var a,b,c=this.option.data,e=this.option.data.length,f=this.option.axisLabel,g=f.rotate,i=f.margin,j=f.clickable,k=f.textStyle,l="function"==typeof f.interval?f.interval:!1;if(this.isHorizontal()){var m,n;"bottom"==this.option.position?(m=this.grid.getYend()+i,n="top"):(m=this.grid.getY()-i,n="bottom");for(var o=0;e>o;o+=this._interval)l&&!l(o,c[o])||""===this._getReformedLabel(o)||(b=h.merge(c[o].textStyle||{},k),a={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:this.getCoordByIndex(o),y:m,color:b.color,text:this._getReformedLabel(o),textFont:this.getFont(b),textAlign:b.align||"center",textBaseline:b.baseline||n}},g&&(a.style.textAlign=g>0?"bottom"==this.option.position?"right":"left":"bottom"==this.option.position?"left":"right",a.rotation=[g*Math.PI/180,a.style.x,a.style.y]),this.shapeList.push(new d(this._axisLabelClickable(j,a))))}else{var p,q;"left"==this.option.position?(p=this.grid.getX()-i,q="right"):(p=this.grid.getXend()+i,q="left");for(var o=0;e>o;o+=this._interval)l&&!l(o,c[o])||""===this._getReformedLabel(o)||(b=h.merge(c[o].textStyle||{},k),a={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:p,y:this.getCoordByIndex(o),color:b.color,text:this._getReformedLabel(o),textFont:this.getFont(b),textAlign:b.align||q,textBaseline:b.baseline||0===o&&""!==this.option.name?"bottom":o==e-1&&""!==this.option.name?"top":"middle"}},g&&(a.rotation=[g*Math.PI/180,a.style.x,a.style.y]),this.shapeList.push(new d(this._axisLabelClickable(j,a))))}},_buildSplitLine:function(){var a,b=this.option.data,c=this.option.data.length,d=this.option.splitLine,f=d.lineStyle.type,g=d.lineStyle.width,h=d.lineStyle.color;h=h instanceof Array?h:[h];var i=h.length,j="function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,k=d.onGap,l=k?this.getGap()/2:"undefined"==typeof k&&this.option.boundaryGap?this.getGap()/2:0;if(c-=k||"undefined"==typeof k&&this.option.boundaryGap?1:0,this.isHorizontal())for(var m,n=this.grid.getY(),o=this.grid.getYend(),p=0;c>p;p+=this._interval)(!j||j(p,b[p]))&&(m=this.subPixelOptimize(this.getCoordByIndex(p)+l,g),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:m,yStart:n,xEnd:m,yEnd:o,strokeColor:h[p/this._interval%i],lineType:f,lineWidth:g}},this.shapeList.push(new e(a)));else for(var q,r=this.grid.getX(),s=this.grid.getXend(),p=0;c>p;p+=this._interval)(!j||j(p,b[p]))&&(q=this.subPixelOptimize(this.getCoordByIndex(p)-l,g),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:r,yStart:q,xEnd:s,yEnd:q,strokeColor:h[p/this._interval%i],lineType:f,lineWidth:g}},this.shapeList.push(new e(a)))},_buildSplitArea:function(){var a,b=this.option.data,c=this.option.splitArea,d=c.areaStyle.color;if(d instanceof Array){var e=d.length,g=this.option.data.length,h="function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,i=c.onGap,j=i?this.getGap()/2:"undefined"==typeof i&&this.option.boundaryGap?this.getGap()/2:0;if(this.isHorizontal())for(var k,l=this.grid.getY(),m=this.grid.getHeight(),n=this.grid.getX(),o=0;g>=o;o+=this._interval)h&&!h(o,b[o])&&g>o||(k=g>o?this.getCoordByIndex(o)+j:this.grid.getXend(),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:n,y:l,width:k-n,height:m,color:d[o/this._interval%e]}},this.shapeList.push(new f(a)),n=k);else for(var p,q=this.grid.getX(),r=this.grid.getWidth(),s=this.grid.getYend(),o=0;g>=o;o+=this._interval)h&&!h(o,b[o])&&g>o||(p=g>o?this.getCoordByIndex(o)-j:this.grid.getY(),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:q,y:p,width:r,height:s-p,color:d[o/this._interval%e]}},this.shapeList.push(new f(a)),s=p)}else a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this.grid.getX(),y:this.grid.getY(),width:this.grid.getWidth(),height:this.grid.getHeight(),color:d}},this.shapeList.push(new f(a))},refresh:function(a){a&&(this.option=this.reformOption(a),this.option.axisLabel.textStyle=this.getTextStyle(this.option.axisLabel.textStyle)),this.clear(),this._buildShape()},getGap:function(){var a=this.option.data.length,b=this.isHorizontal()?this.grid.getWidth():this.grid.getHeight();return this.option.boundaryGap?b/a:b/(a>1?a-1:1)},getCoord:function(a){for(var b=this.option.data,c=b.length,d=this.getGap(),e=this.option.boundaryGap?d/2:0,f=0;c>f;f++){if(this.getDataFromOption(b[f])==a)return e=this.isHorizontal()?this.grid.getX()+e:this.grid.getYend()-e;e+=d}},getCoordByIndex:function(a){if(0>a)return this.isHorizontal()?this.grid.getX():this.grid.getYend();if(a>this.option.data.length-1)return this.isHorizontal()?this.grid.getXend():this.grid.getY();var b=this.getGap(),c=this.option.boundaryGap?b/2:0;return c+=a*b,c=this.isHorizontal()?this.grid.getX()+c:this.grid.getYend()-c},getNameByIndex:function(a){return this.getDataFromOption(this.option.data[a])},getIndexByName:function(a){for(var b=this.option.data,c=b.length,d=0;c>d;d++)if(this.getDataFromOption(b[d])==a)return d;return-1},getValueFromCoord:function(){return""},isMainAxis:function(a){return a%this._interval===0}},h.inherits(b,c),a("../component").define("categoryAxis",b),b}),c("zrender/tool/computeBoundingBox",["require","./vector","./curve"],function(a){function b(a,b,c){if(0!==a.length){for(var d=a[0][0],e=a[0][0],f=a[0][1],g=a[0][1],h=1;h<a.length;h++){var i=a[h];i[0]<d&&(d=i[0]),i[0]>e&&(e=i[0]),i[1]<f&&(f=i[1]),i[1]>g&&(g=i[1])}b[0]=d,b[1]=f,c[0]=e,c[1]=g}}function c(a,b,c,d,e,g){var h=[];f.cubicExtrema(a[0],b[0],c[0],d[0],h);for(var i=0;i<h.length;i++)h[i]=f.cubicAt(a[0],b[0],c[0],d[0],h[i]);var j=[];f.cubicExtrema(a[1],b[1],c[1],d[1],j);for(var i=0;i<j.length;i++)j[i]=f.cubicAt(a[1],b[1],c[1],d[1],j[i]);h.push(a[0],d[0]),j.push(a[1],d[1]);var k=Math.min.apply(null,h),l=Math.max.apply(null,h),m=Math.min.apply(null,j),n=Math.max.apply(null,j);e[0]=k,e[1]=m,g[0]=l,g[1]=n}function d(a,b,c,d,e){var g=f.quadraticExtremum(a[0],b[0],c[0]),h=f.quadraticExtremum(a[1],b[1],c[1]);g=Math.max(Math.min(g,1),0),h=Math.max(Math.min(h,1),0);var i=1-g,j=1-h,k=i*i*a[0]+2*i*g*b[0]+g*g*c[0],l=i*i*a[1]+2*i*g*b[1]+g*g*c[1],m=j*j*a[0]+2*j*h*b[0]+h*h*c[0],n=j*j*a[1]+2*j*h*b[1]+h*h*c[1];d[0]=Math.min(a[0],c[0],k,m),d[1]=Math.min(a[1],c[1],l,n),e[0]=Math.max(a[0],c[0],k,m),e[1]=Math.max(a[1],c[1],l,n)}var e=a("./vector"),f=a("./curve"),g=e.create(),h=e.create(),i=e.create(),j=function(a,b,c,d,f,j,k,l){if(Math.abs(d-f)>=2*Math.PI)return k[0]=a-c,k[1]=b-c,l[0]=a+c,void(l[1]=b+c);if(g[0]=Math.cos(d)*c+a,g[1]=Math.sin(d)*c+b,h[0]=Math.cos(f)*c+a,h[1]=Math.sin(f)*c+b,e.min(k,g,h),e.max(l,g,h),d%=2*Math.PI,0>d&&(d+=2*Math.PI),f%=2*Math.PI,0>f&&(f+=2*Math.PI),d>f&&!j?f+=2*Math.PI:f>d&&j&&(d+=2*Math.PI),j){var m=f;f=d,d=m}for(var n=0;f>n;n+=Math.PI/2)n>d&&(i[0]=Math.cos(n)*c+a,i[1]=Math.sin(n)*c+b,e.min(k,i,k),e.max(l,i,l))};return b.cubeBezier=c,b.quadraticBezier=d,b.arc=j,b}),c("echarts/util/smartSteps",[],function(){function a(a){return A.log(E(a))/A.LN10}function b(a){return A.pow(10,a)}function c(a){return a===C(a)}function d(a,b,d,e){t=e||{},u=t.steps||y,v=t.secs||z,d=B(+d||0)%99,a=+a||0,b=+b||0,w=x=0,"min"in t&&(a=+t.min||0,w=1),"max"in t&&(b=+t.max||0,x=1),a>b&&(b=[a,a=b][0]);var f=b-a;if(w&&x)return s(a,b,d);if((d||5)>f){if(c(a)&&c(b))return n(a,b,d);if(0===f)return o(a,b,d)}return j(a,b,d)}function e(a,c,d,e){e=e||0;var h=f((c-a)/d,-1),i=f(a,-1,1),j=f(c,-1),k=A.min(h.e,i.e,j.e);0===i.c?k=A.min(h.e,j.e):0===j.c&&(k=A.min(h.e,i.e)),g(h,{c:0,e:k}),g(i,h,1),g(j,h),e+=k,a=i.c,c=j.c;for(var l=(c-a)/d,m=b(e),n=0,o=[],p=d+1;p--;)o[p]=(a+l*p)*m;if(0>e){n=q(m),l=+(l*m).toFixed(n),a=+(a*m).toFixed(n),c=+(c*m).toFixed(n);for(var p=o.length;p--;)o[p]=o[p].toFixed(n),0===+o[p]&&(o[p]="0")}else a*=m,c*=m,l*=m;return v=0,u=0,t=0,{min:a,max:c,secs:d,step:l,fix:n,exp:e,pnts:o}}function f(d,e,f){e=B(e%10)||2,0>e&&(c(d)?e=(""+E(d)).replace(/0+$/,"").length||1:(d=d.toFixed(15).replace(/0+$/,""),e=d.replace(".","").replace(/^[-0]+/,"").length,d=+d));var g=C(a(d))-e+1,h=+(d*b(-g)).toFixed(15)||0;return h=f?C(h):D(h),!h&&(g=0),(""+E(h)).length>e&&(g+=1,h/=10),{c:h,e:g}}function g(a,c,d){var e=c.e-a.e;e&&(a.e+=e,a.c*=b(-e),a.c=d?C(a.c):D(a.c))}function h(a,b,c){a.e<b.e?g(b,a,c):g(a,b,c)}function i(a,b){b=b||y,a=f(a);for(var c=a.c,d=0;c>b[d];)d++;if(!b[d])for(c/=10,a.e+=1,d=0;c>b[d];)d++;return a.c=b[d],a}function j(a,b,d){var h,j=d||+v.slice(-1),o=i((b-a)/j,u),q=f(b-a),s=f(a,-1,1),t=f(b,-1);if(g(q,o),g(s,o,1),g(t,o),d?h=l(s,t,j):j=k(s,t),c(a)&&c(b)&&a*b>=0){if(j>b-a)return n(a,b,j);j=m(a,b,d,s,t,j)}var y=p(a,b,s.c,t.c);return s.c=y[0],t.c=y[1],(w||x)&&r(a,b,s,t),e(s.c,t.c,j,t.e)}function k(a,c){for(var d,e,f,g,h=[],j=v.length;j--;)d=v[j],e=i((c.c-a.c)/d,u),e=e.c*b(e.e),f=C(a.c/e)*e,g=D(c.c/e)*e,h[j]={min:f,max:g,step:e,span:g-f};return h.sort(function(a,b){var c=a.span-b.span;return 0===c&&(c=a.step-b.step),c}),h=h[0],d=h.span/h.step,a.c=h.min,c.c=h.max,3>d?2*d:d}function l(a,c,d){for(var e,f,g=c.c,h=(c.c-a.c)/d-1;g>a.c;)h=i(h+1,u),h=h.c*b(h.e),e=h*d,f=D(c.c/h)*h,g=f-e;var j=a.c-g,k=f-c.c,l=j-k;return l>1.1*h&&(l=B(l/h/2)*h,g+=l,f+=l),a.c=g,c.c=f,h}function m(a,d,e,f,g,h){var i=g.c-f.c,j=i/h*b(g.e);if(!c(j)&&(j=C(j),i=j*h,d-a>i&&(j+=1,i=j*h,!e&&j*(h-1)>=d-a&&(h-=1,i=j*h)),i>=d-a)){var k=i-(d-a);f.c=B(a-k/2),g.c=B(d+k/2),f.e=0,g.e=0}return h}function n(a,b,c){if(c=c||5,w)b=a+c;else if(x)a=b-c;else{var d=c-(b-a),f=B(a-d/2),g=B(b+d/2),h=p(a,b,f,g);a=h[0],b=h[1]}return e(a,b,c)}function o(a,b,c){c=c||5;var d=A.min(E(b/c),c)/2.1;return w?b=a+d:x?a=b-d:(a-=d,b+=d),j(a,b,c)}function p(a,b,c,d){return a>=0&&0>c?(d-=c,c=0):0>=b&&d>0&&(c-=d,d=0),[c,d]}function q(a){return a=(+a).toFixed(15).split("."),a.pop().replace(/0+$/,"").length}function r(a,b,c,d){if(w){var e=f(a,4,1);c.e-e.e>6&&(e={c:0,e:c.e}),h(c,e),h(d,e),d.c+=e.c-c.c,c.c=e.c}else if(x){var g=f(b,4);d.e-g.e>6&&(g={c:0,e:d.e}),h(c,g),h(d,g),c.c+=g.c-d.c,d.c=g.c}}function s(a,b,c){var d=c?[c]:v,h=b-a;if(0===h)return b=f(b,3),c=d[0],b.c=B(b.c+c/2),e(b.c-c,b.c,c,b.e);E(b/h)<1e-6&&(b=0),E(a/h)<1e-6&&(a=0);var i,j,k,l=[[5,10],[10,2],[50,10],[100,2]],m=[],n=[],o=f(b-a,3),p=f(a,-1,1),q=f(b,-1);g(p,o,1),g(q,o),h=q.c-p.c,o.c=h;for(var r=d.length;r--;){c=d[r],i=D(h/c),j=i*c-h,k=3*(j+3),k+=2*(c-d[0]+2),c%5===0&&(k-=10);for(var s=l.length;s--;)i%l[s][0]===0&&(k/=l[s][1]);n[r]=[c,i,j,k].join(),m[r]={secs:c,step:i,delta:j,score:k}}return m.sort(function(a,b){return a.score-b.score}),m=m[0],p.c=B(p.c-m.delta/2),q.c=B(q.c+m.delta/2),e(p.c,q.c,m.secs,o.e)}var t,u,v,w,x,y=[10,20,25,50],z=[4,5,6],A=Math,B=A.round,C=A.floor,D=A.ceil,E=A.abs;return d}),c("echarts/util/date",[],function(){function a(a,b,c){c=c>1?c:2;for(var d,e,f,g,h=0,i=k.length;i>h;h++)if(d=k[h].value,e=Math.ceil(b/d)*d-Math.floor(a/d)*d,Math.round(e/d)<=1.2*c){f=k[h].formatter,g=k[h].value;break}return null==f&&(f="year",d=317088e5,e=Math.ceil(b/d)*d-Math.floor(a/d)*d,g=Math.round(e/(c-1)/d)*d),{formatter:f,gapValue:g}}function b(a){return 10>a?"0"+a:a}function c(a,c){("week"==a||"month"==a||"quarter"==a||"half-year"==a||"year"==a)&&(a="MM - dd\nyyyy");var d=j(c),e=d.getFullYear(),f=d.getMonth()+1,g=d.getDate(),h=d.getHours(),i=d.getMinutes(),k=d.getSeconds();return a=a.replace("MM",b(f)),a=a.toLowerCase(),a=a.replace("yyyy",e),a=a.replace("yy",e%100),a=a.replace("dd",b(g)),a=a.replace("d",g),a=a.replace("hh",b(h)),a=a.replace("h",h),a=a.replace("mm",b(i)),a=a.replace("m",i),a=a.replace("ss",b(k)),a=a.replace("s",k)}function d(a){return a=j(a),a.setDate(a.getDate()+8-a.getDay()),a}function e(a,b,c){return a=j(a),a.setMonth(Math.ceil((a.getMonth()+1)/c)*c),a.setDate(b),a}function f(a,b){return e(a,b,1)}function g(a,b){return e(a,b,3)}function h(a,b){return e(a,b,6)}function i(a,b){return e(a,b,12)}function j(a){return a instanceof Date?a:new Date("string"==typeof a?a.replace(/-/g,"/"):a)}var k=[{formatter:"hh : mm : ss",value:1e3},{formatter:"hh : mm : ss",
value:5e3},{formatter:"hh : mm : ss",value:1e4},{formatter:"hh : mm : ss",value:15e3},{formatter:"hh : mm : ss",value:3e4},{formatter:"hh : mm\nMM - dd",value:6e4},{formatter:"hh : mm\nMM - dd",value:3e5},{formatter:"hh : mm\nMM - dd",value:6e5},{formatter:"hh : mm\nMM - dd",value:9e5},{formatter:"hh : mm\nMM - dd",value:18e5},{formatter:"hh : mm\nMM - dd",value:36e5},{formatter:"hh : mm\nMM - dd",value:72e5},{formatter:"hh : mm\nMM - dd",value:216e5},{formatter:"hh : mm\nMM - dd",value:432e5},{formatter:"MM - dd\nyyyy",value:864e5},{formatter:"week",value:6048e5},{formatter:"month",value:26784e5},{formatter:"quarter",value:8208e6},{formatter:"half-year",value:16416e6},{formatter:"year",value:32832e6}];return{getAutoFormatter:a,getNewDate:j,format:c,nextMonday:d,nextNthPerNmonth:e,nextNthOnMonth:f,nextNthOnQuarterYear:g,nextNthOnHalfYear:h,nextNthOnYear:i}}),c("echarts/util/shape/Cross",["require","zrender/shape/Base","zrender/shape/Line","zrender/tool/util","./normalIsCover"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/shape/Line"),e=a("zrender/tool/util");return b.prototype={type:"cross",buildPath:function(a,b){var c=b.rect;b.xStart=c.x,b.xEnd=c.x+c.width,b.yStart=b.yEnd=b.y,d.prototype.buildPath(a,b),b.xStart=b.xEnd=b.x,b.yStart=c.y,b.yEnd=c.y+c.height,d.prototype.buildPath(a,b)},getRect:function(a){return a.rect},isCover:a("./normalIsCover")},e.inherits(b,c),b}),c("echarts/util/smartLogSteps",["require","./number"],function(a){function b(a){return c(),q=a||{},d(),e(),[f(),c()][0]}function c(){m=q=s=p=t=u=r=v=n=o=null}function d(){n=q.logLabelBase,null==n?(o="plain",n=10,p=E):(n=+n,1>n&&(n=10),o="exponent",p=y(n)),r=q.splitNumber,null==r&&(r=I);var a=parseFloat(q.dataMin),b=parseFloat(q.dataMax);isFinite(a)||isFinite(b)?isFinite(a)?isFinite(b)?a>b&&(b=[a,a=b][0]):b=a:a=b:a=b=1,m=q.logPositive,null==m&&(m=b>0||0===a),t=m?a:-b,u=m?b:-a,H>t&&(t=H),H>u&&(u=H)}function e(){function a(){r>k&&(r=k);var a=C(i(k/r)),b=B(i(k/a)),c=a*b,d=(c-m)/2,e=C(i(g-d));l(e-g)&&(e-=1),s=-e*p;for(var h=e;f>=h-a;h+=a)v.push(z(n,h))}function b(){for(var a=c(j,0),b=a+2;b>a&&e(a+1)+d(a+1)*G<g;)a++;for(var i=c(h,0),b=i-2;i>b&&e(i-1)+d(i-1)*G>f;)i--;s=-(e(a)*E+d(a)*F);for(var k=a;i>=k;k++){var l=e(k),m=d(k);v.push(z(10,l)*z(2,m))}}function c(a,b){return 3*a+b}function d(a){return a-3*e(a)}function e(a){return C(i(a/3))}v=[];var f=i(y(u)/p),g=i(y(t)/p),h=B(f),j=C(g),k=h-j,m=f-g;"exponent"===o?a():J>=k&&r>J?b():a()}function f(){for(var a=[],b=0,c=v.length;c>b;b++)a[b]=(m?1:-1)*v[b];!m&&a.reverse();var d=h(),e=d.value2Coord,f=e(a[0]),i=e(a[a.length-1]);return f===i&&(f-=1,i+=1),{dataMin:f,dataMax:i,tickList:a,logPositive:m,labelFormatter:g(),dataMappingMethods:d}}function g(){if("exponent"===o){var a=n,b=p;return function(c){if(!isFinite(parseFloat(c)))return"";var d="";return 0>c&&(c=-c,d="-"),d+a+k(y(c)/b)}}return function(a){return isFinite(parseFloat(a))?w.addCommas(j(a)):""}}function h(){var a=m,b=s;return{value2Coord:function(c){return null==c||isNaN(c)||!isFinite(c)?c:(c=parseFloat(c),isFinite(c)?a&&H>c?c=H:!a&&c>-H&&(c=-H):c=H,c=A(c),(a?1:-1)*(y(c)+b))},coord2Value:function(c){return null==c||isNaN(c)||!isFinite(c)?c:(c=parseFloat(c),isFinite(c)||(c=H),a?z(D,c-b):-z(D,-c+b))}}}function i(a){return+Number(+a).toFixed(14)}function j(a){return Number(a).toFixed(15).replace(/\.?0*$/,"")}function k(a){a=j(Math.round(a));for(var b=[],c=0,d=a.length;d>c;c++){var e=a.charAt(c);b.push(K[e]||"")}return b.join("")}function l(a){return a>-H&&H>a}var m,n,o,p,q,r,s,t,u,v,w=a("./number"),x=Math,y=x.log,z=x.pow,A=x.abs,B=x.ceil,C=x.floor,D=x.E,E=x.LN10,F=x.LN2,G=F/E,H=1e-9,I=5,J=2,K={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","-":"⁻"};return b}),c("echarts/util/shape/HandlePolygon",["require","zrender/shape/Base","zrender/shape/Polygon","zrender/tool/util"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/shape/Polygon"),e=a("zrender/tool/util");return b.prototype={type:"handle-polygon",buildPath:function(a,b){d.prototype.buildPath(a,b)},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);a=c[0],b=c[1];var d=this.style.rect;return a>=d.x&&a<=d.x+d.width&&b>=d.y&&b<=d.y+d.height?!0:!1}},e.inherits(b,c),b}),c("echarts/util/shape/Candle",["require","zrender/shape/Base","zrender/tool/util","./normalIsCover"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/tool/util");return b.prototype={type:"candle",_numberOrder:function(a,b){return b-a},buildPath:function(a,b){var c=d.clone(b.y).sort(this._numberOrder);a.moveTo(b.x,c[3]),a.lineTo(b.x,c[2]),a.moveTo(b.x-b.width/2,c[2]),a.rect(b.x-b.width/2,c[2],b.width,c[1]-c[2]),a.moveTo(b.x,c[1]),a.lineTo(b.x,c[0])},getRect:function(a){if(!a.__rect){var b=0;("stroke"==a.brushType||"fill"==a.brushType)&&(b=a.lineWidth||1);var c=d.clone(a.y).sort(this._numberOrder);a.__rect={x:Math.round(a.x-a.width/2-b/2),y:Math.round(c[3]-b/2),width:a.width+b,height:c[0]-c[3]+b}}return a.__rect},isCover:a("./normalIsCover")},d.inherits(b,c),b}),c("echarts/util/shape/Chain",["require","zrender/shape/Base","./Icon","zrender/shape/util/dashedLineTo","zrender/tool/util","zrender/tool/matrix"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("./Icon"),e=a("zrender/shape/util/dashedLineTo"),f=a("zrender/tool/util"),g=a("zrender/tool/matrix");return b.prototype={type:"chain",brush:function(a,b){var c=this.style;b&&(c=this.getHighlightStyle(c,this.highlightStyle||{})),a.save(),this.setContext(a,c),this.setTransform(a),a.save(),a.beginPath(),this.buildLinePath(a,c),a.stroke(),a.restore(),this.brushSymbol(a,c),a.restore()},buildLinePath:function(a,b){var c=b.x,d=b.y+5,f=b.width,g=b.height/2-10;if(a.moveTo(c,d),a.lineTo(c,d+g),a.moveTo(c+f,d),a.lineTo(c+f,d+g),a.moveTo(c,d+g/2),b.lineType&&"solid"!=b.lineType){if("dashed"==b.lineType||"dotted"==b.lineType){var h=(b.lineWidth||1)*("dashed"==b.lineType?5:1);e(a,c,d+g/2,c+f,d+g/2,h)}}else a.lineTo(c+f,d+g/2)},brushSymbol:function(a,b){var c=b.y+b.height/4;a.save();for(var e,f=b.chainPoint,g=0,h=f.length;h>g;g++){if(e=f[g],"none"!=e.symbol){a.beginPath();var i=e.symbolSize;d.prototype.buildPath(a,{iconType:e.symbol,x:e.x-i,y:c-i,width:2*i,height:2*i,n:e.n}),a.fillStyle=e.isEmpty?"#fff":b.strokeColor,a.closePath(),a.fill(),a.stroke()}e.showLabel&&(a.font=e.textFont,a.fillStyle=e.textColor,a.textAlign=e.textAlign,a.textBaseline=e.textBaseline,e.rotation?(a.save(),this._updateTextTransform(a,e.rotation),a.fillText(e.name,e.textX,e.textY),a.restore()):a.fillText(e.name,e.textX,e.textY))}a.restore()},_updateTextTransform:function(a,b){var c=g.create();if(g.identity(c),0!==b[0]){var d=b[1]||0,e=b[2]||0;(d||e)&&g.translate(c,c,[-d,-e]),g.rotate(c,c,b[0]),(d||e)&&g.translate(c,c,[d,e])}a.transform.apply(a,c)},isCover:function(a,b){var c=this.style;return a>=c.x&&a<=c.x+c.width&&b>=c.y&&b<=c.y+c.height?!0:!1}},f.inherits(b,c),b}),c("zrender",["zrender/zrender"],function(a){return a}),c("echarts",["echarts/echarts"],function(a){return a});var d=b("zrender");d.tool={color:b("zrender/tool/color"),math:b("zrender/tool/math"),util:b("zrender/tool/util"),vector:b("zrender/tool/vector"),area:b("zrender/tool/area"),event:b("zrender/tool/event")},d.animation={Animation:b("zrender/animation/Animation"),Cip:b("zrender/animation/Clip"),easing:b("zrender/animation/easing")};var e=b("echarts");return e.config=b("echarts/config"),b("echarts/chart/bar"),b("echarts/chart/line"),b("echarts/chart/pie"),b("echarts/chart/radar"),b("echarts/chart/scatter"),b("echarts/chart/chord"),b("echarts/chart/gauge"),b("echarts/chart/funnel"),a.echarts=e,a.zrender=d,e}(window),function(){"use strict";function a(a){return function(b,c,d){function e(b){b&&(f.setOption(b),angular.element(a).bind("resize",function(){f.resize()}))}var f;f=echarts.init(c[0],"macarons"),e(b.options),b.$watch("options",function(a,b){angular.equals(a,b)||e(a)})}}var b=angular.module("ngecharts",[]);b.directive("echarts",["$window",function(b){return{restrict:"EA",template:"<div></div>",scope:{options:"=options"},link:a(b)}}])}();;! function() {
    "use strict";
    angular.module("app", ["ngRoute",
        "ngAnimate", "ngAria", "ui.bootstrap",
        "ui.tree", "ngMap", "ngTagsInput", "textAngular",
        "angular-loading-bar", "ui.calendar", "duScroll",
        "mgo-angular-wizard", "app.nav", "app.lang",
        "app.chart", "app.ui", "app.ui.form",
        "app.ui.form.validation", "app.page", "app.table",
        "app.task", "app.calendar","ngCookies",
        "vcRecaptcha", "ngMessages", "xeditable"])
}(),
    function() {
        "use strict";
        angular.module("app.calendar", ["ui.calendar", "ui.bootstrap"])
    }(),
    function() {
        "use strict";
        angular.module("app.task", [])
    }(),
    function() {
        "use strict";
        angular.module("app.chart", ["ngecharts"])
    }(),
    function() {
        "use strict";
        angular.module("app.ui.form", [])
    }(),
    function() {
        "use strict";
        angular.module("app.ui.form.validation", ["validation.match"])
    }(),
    function() {
        "use strict";
        angular.module("app.nav", [])
    }(),
    function() {
        "use strict";
        angular.module("app.page", [])
    }(),
    function() {
        "use strict";
        angular.module("app.table", [])
    }(),
    function() {
        "use strict";
        angular.module("app.ui", [])
    }(),

    function() {
        "use strict";
        function a(a) {
            function b(b, c, d) {
                var e;
                e = $("#app"), c.on("click", function(b) {
                    return e.hasClass("nav-collapsed-min") ? e.removeClass("nav-collapsed-min") : (e.addClass("nav-collapsed-min"), a.$broadcast("nav:reset")), b.preventDefault()
                })
            }
            var c = {
                restrict: "A",
                link: b
            };
            return c
        }

        function b() {
            function a(a, b, c) {
                var d, e, f, g, h, i, j, k, l, m, n;
                m = 250, j = $(window), g = b.find("ul").parent("li"), g.append('<i class="fa fa-caret-down icon-has-ul-h"></i><i class="fa fa-caret-right icon-has-ul"></i>'), d = g.children("a"), h = b.children("li").not(g), e = h.children("a"), f = $("#app"), i = $("#nav-container"), d.on("click", function(a) {
                    var b, c;
                    return f.hasClass("nav-collapsed-min") || i.hasClass("nav-horizontal") && j.width() >= 768 ? !1 : (c = $(this), b = c.parent("li"), g.not(b).removeClass("open").find("ul").slideUp(m), b.toggleClass("open").find("ul").stop().slideToggle(m), void a.preventDefault())
                }), e.on("click", function(a) {
                    g.removeClass("open").find("ul").slideUp(m)
                }), a.$on("nav:reset", function(a) {
                    g.removeClass("open").find("ul").slideUp(m)
                }), k = void 0, l = j.width(), n = function() {
                    var a;
                    a = j.width(), 768 > a && f.removeClass("nav-collapsed-min"), 768 > l && a >= 768 && i.hasClass("nav-horizontal") && g.removeClass("open").find("ul").slideUp(m), l = a
                }, j.resize(function() {
                    var a;
                    clearTimeout(a), a = setTimeout(n, 300)
                })
            }
            var b = {
                restrict: "A",
                link: a
            };
            return b
        }

        function c() {
            function a(a, b, c, d) {
                var e, f, g;
                f = b.find("a"), g = function() {
                    return d.path()
                }, e = function(a, b) {
                    return b = "#" + b, angular.forEach(a, function(a) {
                        var c, d, e;
                        return d = angular.element(a), c = d.parent("li"), e = d.attr("href"), c.hasClass("active") && c.removeClass("active"), 0 === b.indexOf(e) ? c.addClass("active") : void 0
                    })
                }, e(f, d.path()), a.$watch(g, function(a, b) {
                    return a !== b ? e(f, d.path()) : void 0
                })
            }
            var b = {
                restrict: "A",
                controller: ["$scope", "$element", "$attrs", "$location", a]
            };
            return b
        }

        function d() {
            function a(a, b, c) {
                b.on("click", function() {
                    return $("#app").toggleClass("on-canvas")
                })
            }
            var b = {
                restrict: "A",
                link: a
            };
            return b
        }
        angular.module("app.nav").directive("toggleNavCollapsedMin", ["$rootScope", a]).directive("collapseNav", b).directive("highlightActive", c).directive("toggleOffCanvas", d)
    }(),

    //keep this code
    // controller
    function() {
        "use strict";

        function AppCtrl($scope, b, c, d, e) {
            $scope.pageTransitionOpts = e.pageTransitionOpts,
            $scope.main = e.main,
            $scope.color = e.color,
            $scope.$watch("main", function(c, d) {
                "horizontal" === c.menu && "vertical" === d.menu && b.$broadcast("nav:reset"),
                c.fixedHeader === !1 && c.fixedSidebar === !0 && (d.fixedHeader === !1 && d.fixedSidebar === !1 && ($scope.main.fixedHeader = !0,
                    $scope.main.fixedSidebar = !0),
                d.fixedHeader === !0 && d.fixedSidebar === !0 && ($scope.main.fixedHeader = !1,
                    $scope.main.fixedSidebar = !1)), c.fixedSidebar === !0 && ($scope.main.fixedHeader = !0),
                c.fixedHeader === !1 && ($scope.main.fixedSidebar = !1)
            }, !0), b.$on("$routeChangeSuccess", function(a, b, c) {
                d.scrollTo(0, 0)
            });

            /*Check all & select row*/
            $scope.isCheck=false;
            $scope.selectAll = function(data){
                if ($scope.isCheck) {
                    $scope.isCheck = false;
                } else {
                    $scope.isCheck = true;
                }
                angular.forEach(data, function (dt) {
                    dt.selected = $scope.isCheck;
                });
            }
            $scope.selectedRow = function(row){
                if(row.selected == false){
                    $scope.isCheck=false;
                }
            }

            /*Pagination*/
            $scope.numPerPageOpt = [5, 10, 20, 50, 100];
            $scope.numPerPage = $scope.numPerPageOpt[2];
            $scope.currentPage = 1;

            /*alert*/
            $scope.alerts = [];
            $scope.closeAlert = function($index) {
                return $scope.alerts.splice($index, 1)
            };

            /*date picker*/
            $scope.popupDialog = {
                opened: !1
            };
            $scope.datePicker = function(){
                $scope.popupDialog.opened = !0;
            }
        }
        angular.module("app").controller("AppCtrl", ["$scope", "$rootScope", "$route", "$document", "AppConfig", AppCtrl])
    }(),
    function(){
        function fileCtrl ($scope) {
            $scope.uploadFile = function() {
                $scope.processDropzone();
            };

            $scope.reset = function() {
                $scope.resetDropzone();
            };
        }

        angular.module('app').controller('fileCtrl', ["$scope",fileCtrl]);
    }(),
    // custom page
    function() {
        "use strict";

        function a() {
            function a(a, b, c) {
                var d, e;
                e = function() {
                    return c.path()
                }, d = function(a) {
                    switch (b.removeClass("body-wide body-err body-lock body-auth"), a) {
                        case "/404":
                        case "/page/404":
                        case "/page/500":
                            return b.addClass("body-wide body-err");
                        case "/login":
                        case "/sign-up":
                        case "/forgot-password":
                            return b.addClass("body-wide body-auth");
                        case "/page/lock-screen":
                            return b.addClass("body-wide body-lock")
                        case "/sales/order/detail/edit/addproduct":
                            return b.addClass("body-wide");
                    }
                }, d(c.path()), a.$watch(e, function(a, b) {
                    return a !== b ? d(c.path()) : void 0
                })
            }
            var b = {
                restrict: "A",
                controller: ["$scope", "$element", "$location", a]
            };
            return b
        }
        angular.module("app.page").directive("customPage", a)
    }(),

    //Khai bao menu
    function() {
        "use strict";
        angular.module("app").config(["$routeProvider", function(a) {
            a.when("/", {
                redirectTo: "/dashboard"
            }).when("/dashboard", {
                templateUrl: "app/components/dashboard/dashboard.view.html"
            }).when("/login", {
                templateUrl: "app/shared/login/login.view.html"
            }).when("/signup", {
                templateUrl: "app/shared/sign-up/sign-up.view.html"
            }).when("/forgot-password", {
                templateUrl: "app/shared/forgot-password/forgot-password.view.html"
            }).when("/products", {
                templateUrl: "app/components/product/products.view.html"
            }).when("/products/create", {
                templateUrl: "app/components/product/detail/products.detail.view.html"
            }).when("/products/edit", {
                templateUrl: "app/components/product/detail/products.detail.view.html"
            }).when("/stores", {
                templateUrl: "app/components/store/store.view.html"
            }).when("/stores-import", {
                templateUrl: "app/components/store/detail/store.detail.view.html"
            }).when("/sales", {
                templateUrl: "app/components/sales/sales.view.html"
            }).when("/category", {
                templateUrl: "app/components/category/category.view.html"
            }).when("/sales/order/detail", {
                templateUrl: "app/components/sales/order/order.detail.view.html"
            }).when("/sales/order/detail/edit", {
                templateUrl: "app/components/sales/order/order.detail.edit.html"
            }).when("/sales/order/detail/edit/addproduct", {
                templateUrl: "app/components/product/popup/products.choose.popup.html"
            }).when("/404", {
                templateUrl: "app/shared/page/404.html"
            }).otherwise({
                redirectTo: "/404"
            })
        }])
    }();;/**
 * Created by anhvu on 14-Jun-17.
 */
(function() {
    "use strict";

    function AppConfig() {
        var a = [{
                name: "Fade up",
                "class": "animate-fade-up"
            }, {
                name: "Scale up",
                "class": "ainmate-scale-up"
            }, {
                name: "Slide in from right",
                "class": "ainmate-slide-in-right"
            }, {
                name: "Flip Y",
                "class": "animate-flip-y"
            }],
            b = new Date,
            c = b.getFullYear(),
            d = {
                brand: "ShopS",
                name: "Vương Anh Vũ",
                year: c,
                layout: "wide",
                menu: "vertical",
                isMenuCollapsed: !1,
                fixedHeader: !0,
                fixedSidebar: !0,
                pageTransition: a[0],
                skin: "12"
            },
            e = {
                primary: "#31C0BE",
                success: "#60CD9B",
                info: "#66B5D7",
                infoAlt: "#8170CA",
                warning: "#EEC95A",
                danger: "#E87352",
                gray: "#DCDCDC"
            },

            //Khai bao link webservice
            uri = "http://giaiphapshop.com:8088/shops-services/",
            uriProduct =  uri + "sanpham/",
            productURI = {
                list: uriProduct + "find",
                product: uriProduct + "findOne?sanPhamID=",
                update: uriProduct + "update",
                deleteList: uriProduct + "deleteList",
                delete: uriProduct + "delete",
                create: uriProduct + "create"
            },
            uriMaterial = uri + "nguyenlieu/",
            materialURI = {
                list: uriMaterial + "find",
                update: uriMaterial + "update",
                createList: uriMaterial + "createList",
                deleteList: uriMaterial + "deleteList"
            },
            uriOrder = uri + "donhang/",
            orderURI = {
                list: uriOrder + "find",
                order: uriOrder + "findOne?donHangID="
            },

            uriCategory =  uri + "nhomnguyenlieu/",
            categoryURI = {
                list: uriCategory + "find",
                product: uriCategory + "findOne?sanPhamID=",
                update: uriCategory + "update",
                deleteList: uriCategory + "deleteList",
                delete: uriCategory + "delete",
                create: uriCategory + "create"
            },

            constant = {
                DELETED: 1
            };


        return {
            pageTransitionOpts: a,
            main: d,
            color: e,
            productURI: productURI,
            materialURI: materialURI,
            orderURI: orderURI,
            constant: constant,
            categoryURI: categoryURI
        }
    }
    angular.module("app").factory("AppConfig", [AppConfig])
})();
;(function () {
    'use strict';
    // controller
    angular.module('app').controller('SigninCtrl', SigninCtrl);

    // dependencies
    SigninCtrl.$inject = ['LoginService','Cookies','$scope','$location','BindingService'];

    function SigninCtrl(LoginService, Cookies, $scope, $location, BindingService) {

        //captcha gg
        // $scope.model = {
        //     key: '6LfjNyAUAAAAAEbHfAHZsBS8rjR2S5m_syM_v0DF'
        // };
        
        var onLoginSuccess = function onLoginSuccess(data){
            BindingService.set(data);
            $location.path("/dashboard");
        };
        var onLoginError = function onLoginError (data) {
            alert("error" + data);    
        };
        $scope.login = function() {
            if($scope.loginForm.email.$invalid || $scope.loginForm.password.$invalid){
                $scope.loginForm.email.$error = {
                    "email": true
                };
                $scope.loginForm.email.$touched = true;
                return false;
            }
            var data = {
                "email": "vietdaoduy@gmail.com",
                "fullName": "Dao Duy Viet",
                "id": 1,
                "passWord": "string",
                "phoneNumber": "string",
                "roleId": 1,
                "userName": "string"
            };
            Cookies.set("user",data);
            LoginService.login(data, onLoginSuccess, onLoginError);
            // var d = JSON.parse(localStorage.getItem('test') || {});
            // console.log(d);
        };
    }
})();;(function() {
    function a(a) {
        a.useStaticFilesLoader({
            prefix: "app/lang/",
            suffix: ".json"
        }), a.preferredLanguage("vn"), a.useSanitizeValueStrategy(null)
    }

    function b(a, b) {
        a.lang = "VietNam", a.setLang = function(c) {
            switch (c) {
                case "English":
                    b.use("en");
                    break;
                case "VietNam":
                    b.use("vn");
                    break;
            }
            return a.lang = c
        }, a.getFlag = function() {
            var b;
            switch (b = a.lang) {
                case "English":
                    return "flags-american";
                case "VietNam":
                    return "flags-vietnam";
            }
        }
    }
    angular.module("app.lang", ["pascalprecht.translate"]).config(["$translateProvider", a]).controller("LangCtrl", ["$scope", "$translate", b])
})();;(function() {
    "use strict";

    function a(a, BindingService) {
        a.line2 = {}, a.radar1 = {}, a.line2.options = {
            tooltip: {
                trigger: "axis"
            },
            legend: {
                data: ["Email", "Affiliate", "Video Ads", "Direct", "Search"]
            },
            toolbox: {
                show: !1,
                feature: {
                    restore: {
                        show: !0,
                        title: "restore"
                    },
                    saveAsImage: {
                        show: !0,
                        title: "save as image"
                    }
                }
            },
            calculable: !0,
            xAxis: [{
                type: "category",
                boundaryGap: !1,
                data: ["Mon.", "Tue.", "Wed.", "Thu.", "Fri.", "Sat.", "Sun."]
            }],
            yAxis: [{
                type: "value"
            }],
            series: [{
                name: "Email",
                type: "line",
                stack: "Sum",
                data: [120, 132, 101, 134, 90, 230, 210]
            }, {
                name: "Affiliate",
                type: "line",
                stack: "Sum",
                data: [220, 182, 191, 234, 290, 330, 310]
            }, {
                name: "Video Ads",
                type: "line",
                stack: "Sum",
                data: [150, 232, 201, 154, 190, 330, 410]
            }, {
                name: "Direct",
                type: "line",
                stack: "Sum",
                data: [320, 332, 301, 334, 390, 330, 320]
            }, {
                name: "Search",
                type: "line",
                stack: "Sum",
                data: [820, 932, 901, 934, 1290, 1330, 1320]
            }]
        }, a.radar1.options = {
            animation: !1,
            tooltip: {
                trigger: "axis"
            },
            legend: {
                orient: "vertical",
                x: "right",
                y: "bottom",
                data: ["Allocated Budget", "Actual Spending"]
            },
            toolbox: {
                show: !1,
                feature: {
                    restore: {
                        show: !0,
                        title: "restore"
                    },
                    saveAsImage: {
                        show: !0,
                        title: "save as image"
                    }
                }
            },
            polar: [{
                indicator: [{
                    text: "sales",
                    max: 6e3
                }, {
                    text: "dministration",
                    max: 16e3
                }, {
                    text: "Information Techology",
                    max: 3e4
                }, {
                    text: "Customer Support",
                    max: 38e3
                }, {
                    text: "Development",
                    max: 52e3
                }, {
                    text: "Marketing",
                    max: 25e3
                }]
            }],
            calculable: !0,
            series: [{
                name: "Budget vs spending",
                type: "radar",
                data: [{
                    value: [4300, 1e4, 28e3, 35e3, 5e4, 19e3],
                    name: "Allocated Budget"
                }, {
                    value: [5e3, 14e3, 28e3, 31e3, 42e3, 21e3],
                    name: "Actual Spending"
                }]
            }]
        }

        a.data = BindingService.get();
        // localStorage.setItem('test', JSON.stringify(a.data));
        console.log(a.data);
    }

    angular.module("app").controller("DashboardCtrl", ["$scope","BindingService", a])
})();;(function() {
    "use strict";

    function ProductsCtrl($scope, $filter, ProductService) {

        /*list product*/
        $scope.lstProduct=[];
        var onGetListSuccess = function success(data){
            $scope.lstProduct = data.value.list;
            $scope.filtered = $scope.lstProduct;
        }
        var onGetListError = function error(data){
            alert(data.message);
        }
        ProductService.listProduct(onGetListSuccess, onGetListError);
        $scope.filtered = [];


        /*delete product*/
        $scope.delete = function(){
            var selectedProduct = $filter('filter')($scope.filtered, {selected: 'true'});
            var lstId = selectedProduct.map(function(a) {return a.sanPhamId;});
            var onDeleteSuccess = function success(data){
                angular.forEach(selectedProduct, function(value, key){
                    var index = $scope.filtered.indexOf(value);
                    $scope.filtered.splice(index, 1);
                });
            }
            var onDeleteError = function error(data){
                alert(data.message);
            }
            ProductService.delete(lstId, onDeleteSuccess, onDeleteError);
        }

        /*search*/
        $scope.search = function(){
            $scope.filtered = ProductService.search($scope.lstProduct, $scope.searchKeywords);
        }

        /*sort*/
        $scope.order = function(property){
            $scope.filtered = ProductService.order($scope.lstProduct, property);
        }

        /*pagination*/
        $scope.$watch('filtered', function() {
            $scope.lstData = $scope.filtered;
        });
        var begin, end;
        $scope.$watch('currentPage + numPerPage', function() {
            begin = (($scope.currentPage - 1) * $scope.numPerPage)
                , end = begin + $scope.numPerPage;
            $scope.lstData = $scope.filtered.slice(begin, end);
        });
    }
    angular.module("app").controller("ProductsCtrl", ["$scope", "$filter", "ProductService", ProductsCtrl])
})();;(function() {
    "use strict";

    function ProductDetailCtrl($scope, $routeParams,$location, ProductDetailService, StoreService, CategoryService) {
        $scope.lstProductMaterial=[];
        $scope.lstMaterial = [];
        $scope.keyword="";


        var onError = function error(data){
            alert(data.message);
        }
        /*product info*/
        var id = $routeParams.id;
        if($location.$$path == "/products/edit"){
            var onGetInfoSuccess = function success(data){
                if(data.value.trangThaiXoa == 1){
                    $location.url('/404');
                }
                $scope.product = data.value;
                $scope.title = $scope.product.tenSanPham;
                $scope.lstProductMaterial = $scope.product.chiTietSanPhamDTOList;
            }
            var onGetInfoError = function error(data){
                alert(data.message);
            }
            ProductDetailService.getProductById(id, onGetInfoSuccess, onGetInfoError);
        } else{
            $scope.title = 'CREATE_PRODUCT';
        }
        /*get category*/
        var onGetListCategorySuccess = function success(data){
            $scope.lstCategory = data.value.list;
            console.log($scope.lstCategory);
        }
        CategoryService.getListCategory(onGetListCategorySuccess, onError);

        //////////////////////////////////
        /*material detail*/
        $scope.addProductMaterial = function(material, $index){
            $scope.lstProductMaterial.push(
                {
                    sanPhamId: id,
                    nguyenLieuId: material.nguyenLieuId,
                    soLuong: 0,
                    chiTietSanPhamId: 0,
                    nguyenLieuDTO: {
                        ten: material.ten,
                        donVi: material.donVi,
                        nguyenLieuId: material.nguyenLieuId,
                        soLuong: material.soLuong
                    }
                });
            $scope.lstMaterial.splice($index, 1);
        };

        $scope.removeMaterial = function(material, $index){
            $scope.lstProductMaterial.splice($index, 1);
            $scope.lstMaterial.push(
                {
                    ten: material.nguyenLieuDTO.ten,
                    soLuong: 0
                });
        }
        var onGetListSuccess = function success(data){
            $scope.lstMaterial = data.value.list;
            $scope.filtered = $scope.lstMaterial;
        }

        StoreService.listMaterial(onGetListSuccess, onError);

        /*search materials*/
        $scope.search = function(keyword){
            $scope.filtered = ProductDetailService.search($scope.lstMaterial, keyword);
        }
        $scope.$watch('filtered', function() {
            $scope.lstData = $scope.filtered;
        });


        //////////////////////////////////
        /*create*/
        $scope.create = function(){
            var product = {
                "chiTietSanPhamDTOList": [],
                "donGia": $scope.product.donGia,
                "hienThi": $scope.product.hienThi,
                "hinhAnh": $scope.product.hinhAnh,
                "moTa": $scope.product.moTa,
                "nhomSanPhamId": $scope.product.nhomSanPhamId,
                "tenSanPham": $scope.product.tenSanPham
            };

            var onCreateSuccess = function success(data){
                $scope.alerts.push({
                    type: "success",
                    msg: 'MSG_PRODUCT_UPDATED'
                });
                $location.url('/products');
            }
            var onCreateError = function error(data){
                $scope.alerts.push({
                    type: "danger",
                    msg: 'MSG_PRODUCT_UPDATE_ERR'
                });
                $location.url('/products');
            }
            ProductDetailService.create(product, onCreateSuccess, onCreateError);
        }

        ///////////////////////////////////
        /*save*/
        $scope.saveInfo = function(){
            var product = {
                "chiTietSanPhamDTOList": $scope.product.chiTietSanPhamDTOList,
                "donGia": $scope.product.donGia,
                "hienThi": $scope.product.hienThi,
                "hinhAnh": $scope.product.hinhAnh,
                "moTa": $scope.product.moTa,
                "nhomSanPhamId": $scope.product.nhomSanPhamId,
                "sanPhamId": $scope.product.sanPhamId,
                "tenSanPham": $scope.product.tenSanPham
            };
            var onSaveInfoSuccess = function success(data){
                $scope.alerts.push({
                    type: "success",
                    msg: 'MSG_PRODUCT_UPDATED'
                });
                $location.url('/products');
            }
            var onSaveInfoError = function error(data){
                $scope.alerts.push({
                    type: "danger",
                    msg: 'MSG_PRODUCT_UPDATE_ERR'
                });
                $location.url('/products');
            }
            ProductDetailService.saveInfo(product, onSaveInfoSuccess, onSaveInfoError);
        }

        /*delete*/
        $scope.delete = function(){
            var onDeleteSuccess = function success(data){
                $scope.alerts.push({
                    type: "success",
                    msg: 'MSG_PRODUCT_DELETED'
                });
                $location.url('/products');
            }
            var onDeleteError = function error(data){
                $scope.alerts.push({
                    type: "danger",
                    msg: 'MSG_PRODUCT_DELETED_ERR'
                });
                $location.url('/products');
            }
            ProductDetailService.delete(id, onDeleteSuccess, onDeleteError);
        }

    }
    angular.module("app").controller("ProductDetailCtrl", ["$scope", "$routeParams","$location", "ProductDetailService", "StoreService","CategoryService", ProductDetailCtrl])
})();;/**
 * Created by vietdd on 16/06/2017.
 */
(function () {
    angular.module("app").controller("StoreCtrl", ["$scope","$filter", "StoreService", StoreCtrl]);
    function StoreCtrl($scope, $filter, StoreService) {

        /*get list materials*/
        var onGetListSuccess = function success(data){
            $scope.lstMaterial = data.value.list;
            $scope.filtered = $scope.lstMaterial;
        }
        var onError = function error(data){
            alert(data.message);
        }
        StoreService.listMaterial(onGetListSuccess, onError);
        $scope.filtered = [];


        /*update*/
        $scope.update = function (data, id) {
            angular.extend(data, {nguyenLieuId: id});
            console.log(data);
            var onUpdateSuccess = function success(data){
                $scope.alerts.push({
                    type: "success",
                    msg: 'MSG_MATERIAL_UPDATED'
                });
            };
            StoreService.update(data, onUpdateSuccess, onError);
        }

        /*delete*/
        $scope.delete = function(){
            var selectedMaterial = $filter('filter')($scope.filtered, {selected: 'true'});
            var lstId = selectedMaterial.map(function(a) {return a.nguyenLieuId;});
            var onDeleteSuccess = function success(data){
                angular.forEach(selectedMaterial, function(value, key){
                    var index = $scope.filtered.indexOf(value);
                    $scope.filtered.splice(index, 1);
                });

                $scope.alerts.push({
                    type: "success",
                    msg: 'MSG_MATERIAL_DELETED'
                });
            }

            StoreService.deleteList(lstId, onDeleteSuccess, onError);
        }

        /*sort*/
        $scope.order = function(property){
            $scope.filtered = StoreService.order($scope.lstMaterial, property);
        }


        /*pagination*/
        $scope.$watch('filtered', function() {
            $scope.lstData = $scope.filtered;
        });
        var begin, end;
        $scope.$watch('currentPage + numPerPage', function() {
            begin = (($scope.currentPage - 1) * $scope.numPerPage)
                , end = begin + $scope.numPerPage;
            $scope.lstData = $scope.filtered.slice(begin, end);
        });
    }
})();
;/**
 * Created by vietdd on 16/06/2017.
 */
(function () {
    function StoreDetailCtrl($scope, $location, StoreService){
        $scope.lstMaterial=[];
        
        $scope.addNewMaterial = function () {
            $scope.lstMaterial.push({
                ten: "",
                soLuong: "",
                donVi: ""
            });
        }
        
        $scope.removeMaterial = function ($index) {
            $scope.lstMaterial.splice($index, 1);
        }

        /*create*/
        var onError = function error(data){
            alert(data.message);
        }
        $scope.createList = function(lstMaterial){
            var onCreateListSuccess = function success(data) {
                $scope.alerts.push({
                    type: "success",
                    msg: 'MSG_MATERIAL_CREATED'
                });
                $location.url('/stores');
            }
            StoreService.createList(lstMaterial, onCreateListSuccess, onError);
        }

    }
    angular.module("app").controller("StoreDetailCtrl", ["$scope", "$location", "StoreService",StoreDetailCtrl]);
})();;/**
 * Created by vietdd on 21/07/2017.
 */
(function() {
    "use strict";

    function SalesCtrl($scope, $filter, SalesService) {
        $scope.filtered = [];
        $scope.searchKeywords="";

        var onError = function error(data){
            alert(data.message);
        }

        /*list order*/
        var onGetListSuccess = function success(data){
            $scope.lstOrder = data.value.list;
            $scope.filtered = $scope.lstOrder;
        }
        SalesService.listOrder(onGetListSuccess, onError);


        /*search*/
        $scope.search = function(){
            $scope.filtered = SalesService.search($scope.lstOrder, $scope.searchKeywords);
        }

        /*sort*/
        $scope.order = function(property){
            $scope.filtered = SalesService.order($scope.lstOrder, property);
        }


        /*pagination*/
        $scope.$watch('filtered', function() {
            $scope.lstData = $scope.filtered;
        });
        var begin, end;
        $scope.$watch('currentPage + numPerPage', function() {
            begin = (($scope.currentPage - 1) * $scope.numPerPage)
                , end = begin + $scope.numPerPage;
            $scope.lstData = $scope.filtered.slice(begin, end);
        });
    }
    angular.module("app").controller("SalesCtrl", ["$scope", "$filter", "SalesService", SalesCtrl])
})();;/**
 * Created by vietdd on 22/07/2017.
 */
function OrderDetailCtrl($scope, $routeParams,$window, OrderDetailService){
    var id = $routeParams.id;
    var onError = function error(data){
        alert(data.message);
    };
    var onGetInfoSuccess = function success(data){
        $scope.order = data.value;
    };
    OrderDetailService.getInfo(id, onGetInfoSuccess, onError);


    /*remove Product*/
    $scope.removeProduct = function($index){
        $scope.order.chiTietDonHangDTOList.splice($index, 1);
    }
    $scope.addProduct = function(){
        $window.open("#sales/order/detail/edit/addproduct", "popup", "width=500,height=600");
    }

}
angular.module("app").controller("OrderDetailCtrl", ["$scope", "$routeParams","$window", "OrderDetailService", OrderDetailCtrl])
;/**
 * Created by vietdd on 29/06/2017.
 */
(function() {
    "use strict";

    function CategoriesCtrl($scope, $filter, CategoryService) {
        $scope.lstCategories = [];
        var onGetListSuccess = function success(data){
            $scope.lstCategories = data.value.list;
            $scope.filtered = $scope.lstCategories;
        };

        var onGetListError = function error(data){
            alert(data.message);
        };

        CategoryService.getListCategory(onGetListSuccess, onGetListError);
        $scope.filtered = [];

        $scope.order = function(property){
            $scope.filtered = CategoryService.order($scope.lstProduct, property);
        };

        $scope.update = function (data, id) {
            angular.extend(data, {nguyenLieuId: id});
            console.log(data);
            var onUpdateSuccess = function success(data){
                $scope.alerts.push({
                    type: "success",
                    msg: 'MSG_MATERIAL_UPDATED'
                });
            };
            debugger;
            StoreService.update(data, onUpdateSuccess, onError);
        };

        $scope.delete = function(){
            var selectedProduct = $filter('filter')($scope.filtered, {selected: 'true'});
            var lstId = selectedProduct.map(function(a) {return a.sanPhamId;});
            var onDeleteSuccess = function success(data){
                angular.forEach(selectedProduct, function(value, key){
                    var index = $scope.filtered.indexOf(value);
                    $scope.filtered.splice(index, 1);
                });
            };
            var onDeleteError = function error(data){
                alert(data.message);
            };
            ProductService.delete(lstId, onDeleteSuccess, onDeleteError);
        };

        $scope.$watch('filtered', function() {
            $scope.lstData = $scope.filtered;
        });

        var begin, end;
        $scope.$watch('currentPage + numPerPage', function() {
            begin = (($scope.currentPage - 1) * $scope.numPerPage);
            end = begin + $scope.numPerPage;
            $scope.lstData = $scope.filtered.slice(begin, end);
        });
    }
    angular.module("app").controller("CategoriesCtrl", ["$scope", "$filter", "CategoryService", CategoriesCtrl])
})();;/**
 * @license AngularJS v1.5.9-build.5006+sha.e3a378e
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(window, angular) {'use strict';

/**
 * @ngdoc module
 * @name ngCookies
 * @description
 *
 * # ngCookies
 *
 * The `ngCookies` module provides a convenient wrapper for reading and writing browser cookies.
 *
 *
 * <div doc-module-components="ngCookies"></div>
 *
 * See {@link ngCookies.$cookies `$cookies`} for usage.
 */


angular.module('ngCookies', ['ng']).
  /**
   * @ngdoc provider
   * @name $cookiesProvider
   * @description
   * Use `$cookiesProvider` to change the default behavior of the {@link ngCookies.$cookies $cookies} service.
   * */
   provider('$cookies', [/** @this */function $CookiesProvider() {
    /**
     * @ngdoc property
     * @name $cookiesProvider#defaults
     * @description
     *
     * Object containing default options to pass when setting cookies.
     *
     * The object may have following properties:
     *
     * - **path** - `{string}` - The cookie will be available only for this path and its
     *   sub-paths. By default, this is the URL that appears in your `<base>` tag.
     * - **domain** - `{string}` - The cookie will be available only for this domain and
     *   its sub-domains. For security reasons the user agent will not accept the cookie
     *   if the current domain is not a sub-domain of this domain or equal to it.
     * - **expires** - `{string|Date}` - String of the form "Wdy, DD Mon YYYY HH:MM:SS GMT"
     *   or a Date object indicating the exact date/time this cookie will expire.
     * - **secure** - `{boolean}` - If `true`, then the cookie will only be available through a
     *   secured connection.
     *
     * Note: By default, the address that appears in your `<base>` tag will be used as the path.
     * This is important so that cookies will be visible for all routes when html5mode is enabled.
     *
     **/
    var defaults = this.defaults = {};

    function calcOptions(options) {
      return options ? angular.extend({}, defaults, options) : defaults;
    }

    /**
     * @ngdoc service
     * @name $cookies
     *
     * @description
     * Provides read/write access to browser's cookies.
     *
     * <div class="alert alert-info">
     * Up until Angular 1.3, `$cookies` exposed properties that represented the
     * current browser cookie values. In version 1.4, this behavior has changed, and
     * `$cookies` now provides a standard api of getters, setters etc.
     * </div>
     *
     * Requires the {@link ngCookies `ngCookies`} module to be installed.
     *
     * @example
     *
     * ```js
     * angular.module('cookiesExample', ['ngCookies'])
     *   .controller('ExampleController', ['$cookies', function($cookies) {
     *     // Retrieving a cookie
     *     var favoriteCookie = $cookies.get('myFavorite');
     *     // Setting a cookie
     *     $cookies.put('myFavorite', 'oatmeal');
     *   }]);
     * ```
     */
    this.$get = ['$$cookieReader', '$$cookieWriter', function($$cookieReader, $$cookieWriter) {
      return {
        /**
         * @ngdoc method
         * @name $cookies#get
         *
         * @description
         * Returns the value of given cookie key
         *
         * @param {string} key Id to use for lookup.
         * @returns {string} Raw cookie value.
         */
        get: function(key) {
          return $$cookieReader()[key];
        },

        /**
         * @ngdoc method
         * @name $cookies#getObject
         *
         * @description
         * Returns the deserialized value of given cookie key
         *
         * @param {string} key Id to use for lookup.
         * @returns {Object} Deserialized cookie value.
         */
        getObject: function(key) {
          var value = this.get(key);
          return value ? angular.fromJson(value) : value;
        },

        /**
         * @ngdoc method
         * @name $cookies#getAll
         *
         * @description
         * Returns a key value object with all the cookies
         *
         * @returns {Object} All cookies
         */
        getAll: function() {
          return $$cookieReader();
        },

        /**
         * @ngdoc method
         * @name $cookies#put
         *
         * @description
         * Sets a value for given cookie key
         *
         * @param {string} key Id for the `value`.
         * @param {string} value Raw value to be stored.
         * @param {Object=} options Options object.
         *    See {@link ngCookies.$cookiesProvider#defaults $cookiesProvider.defaults}
         */
        put: function(key, value, options) {
          $$cookieWriter(key, value, calcOptions(options));
        },

        /**
         * @ngdoc method
         * @name $cookies#putObject
         *
         * @description
         * Serializes and sets a value for given cookie key
         *
         * @param {string} key Id for the `value`.
         * @param {Object} value Value to be stored.
         * @param {Object=} options Options object.
         *    See {@link ngCookies.$cookiesProvider#defaults $cookiesProvider.defaults}
         */
        putObject: function(key, value, options) {
          this.put(key, angular.toJson(value), options);
        },

        /**
         * @ngdoc method
         * @name $cookies#remove
         *
         * @description
         * Remove given cookie
         *
         * @param {string} key Id of the key-value pair to delete.
         * @param {Object=} options Options object.
         *    See {@link ngCookies.$cookiesProvider#defaults $cookiesProvider.defaults}
         */
        remove: function(key, options) {
          $$cookieWriter(key, undefined, calcOptions(options));
        }
      };
    }];
  }]);

angular.module('ngCookies').
/**
 * @ngdoc service
 * @name $cookieStore
 * @deprecated
 * @requires $cookies
 *
 * @description
 * Provides a key-value (string-object) storage, that is backed by session cookies.
 * Objects put or retrieved from this storage are automatically serialized or
 * deserialized by angular's toJson/fromJson.
 *
 * Requires the {@link ngCookies `ngCookies`} module to be installed.
 *
 * <div class="alert alert-danger">
 * **Note:** The $cookieStore service is **deprecated**.
 * Please use the {@link ngCookies.$cookies `$cookies`} service instead.
 * </div>
 *
 * @example
 *
 * ```js
 * angular.module('cookieStoreExample', ['ngCookies'])
 *   .controller('ExampleController', ['$cookieStore', function($cookieStore) {
 *     // Put cookie
 *     $cookieStore.put('myFavorite','oatmeal');
 *     // Get cookie
 *     var favoriteCookie = $cookieStore.get('myFavorite');
 *     // Removing a cookie
 *     $cookieStore.remove('myFavorite');
 *   }]);
 * ```
 */
 factory('$cookieStore', ['$cookies', function($cookies) {

    return {
      /**
       * @ngdoc method
       * @name $cookieStore#get
       *
       * @description
       * Returns the value of given cookie key
       *
       * @param {string} key Id to use for lookup.
       * @returns {Object} Deserialized cookie value, undefined if the cookie does not exist.
       */
      get: function(key) {
        return $cookies.getObject(key);
      },

      /**
       * @ngdoc method
       * @name $cookieStore#put
       *
       * @description
       * Sets a value for given cookie key
       *
       * @param {string} key Id for the `value`.
       * @param {Object} value Value to be stored.
       */
      put: function(key, value) {
        $cookies.putObject(key, value);
      },

      /**
       * @ngdoc method
       * @name $cookieStore#remove
       *
       * @description
       * Remove given cookie
       *
       * @param {string} key Id of the key-value pair to delete.
       */
      remove: function(key) {
        $cookies.remove(key);
      }
    };

  }]);

/**
 * @name $$cookieWriter
 * @requires $document
 *
 * @description
 * This is a private service for writing cookies
 *
 * @param {string} name Cookie name
 * @param {string=} value Cookie value (if undefined, cookie will be deleted)
 * @param {Object=} options Object with options that need to be stored for the cookie.
 */
function $$CookieWriter($document, $log, $browser) {
  var cookiePath = $browser.baseHref();
  var rawDocument = $document[0];

  function buildCookieString(name, value, options) {
    var path, expires;
    options = options || {};
    expires = options.expires;
    path = angular.isDefined(options.path) ? options.path : cookiePath;
    if (angular.isUndefined(value)) {
      expires = 'Thu, 01 Jan 1970 00:00:00 GMT';
      value = '';
    }
    if (angular.isString(expires)) {
      expires = new Date(expires);
    }

    var str = encodeURIComponent(name) + '=' + encodeURIComponent(value);
    str += path ? ';path=' + path : '';
    str += options.domain ? ';domain=' + options.domain : '';
    str += expires ? ';expires=' + expires.toUTCString() : '';
    str += options.secure ? ';secure' : '';

    // per http://www.ietf.org/rfc/rfc2109.txt browser must allow at minimum:
    // - 300 cookies
    // - 20 cookies per unique domain
    // - 4096 bytes per cookie
    var cookieLength = str.length + 1;
    if (cookieLength > 4096) {
      $log.warn('Cookie \'' + name +
        '\' possibly not set or overflowed because it was too large (' +
        cookieLength + ' > 4096 bytes)!');
    }

    return str;
  }

  return function(name, value, options) {
    rawDocument.cookie = buildCookieString(name, value, options);
  };
}

$$CookieWriter.$inject = ['$document', '$log', '$browser'];

angular.module('ngCookies').provider('$$cookieWriter', /** @this */ function $$CookieWriterProvider() {
  this.$get = $$CookieWriter;
});


})(window, window.angular);
;/**
 * @license angular-recaptcha build:2017-04-24
 * https://github.com/vividcortex/angular-recaptcha
 * Copyright (c) 2017 VividCortex
**/

/*global angular, Recaptcha */
(function (ng) {
    'use strict';

    ng.module('vcRecaptcha', []);

}(angular));

/*global angular */
(function (ng) {
    'use strict';

    function throwNoKeyException() {
        throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create');
    }

    var app = ng.module('vcRecaptcha');

    /**
     * An angular service to wrap the reCaptcha API
     */
    app.provider('vcRecaptchaService', function(){
        var provider = this;
        var config = {};
        provider.onLoadFunctionName = 'vcRecaptchaApiLoaded';

        /**
         * Sets the reCaptcha configuration values which will be used by default is not specified in a specific directive instance.
         *
         * @since 2.5.0
         * @param defaults  object which overrides the current defaults object.
         */
        provider.setDefaults = function(defaults){
            ng.copy(defaults, config);
        };

        /**
         * Sets the reCaptcha key which will be used by default is not specified in a specific directive instance.
         *
         * @since 2.5.0
         * @param siteKey  the reCaptcha public key (refer to the README file if you don't know what this is).
         */
        provider.setSiteKey = function(siteKey){
            config.key = siteKey;
        };

        /**
         * Sets the reCaptcha theme which will be used by default is not specified in a specific directive instance.
         *
         * @since 2.5.0
         * @param theme  The reCaptcha theme.
         */
        provider.setTheme = function(theme){
            config.theme = theme;
        };

        /**
         * Sets the reCaptcha stoken which will be used by default is not specified in a specific directive instance.
         *
         * @since 2.5.0
         * @param stoken  The reCaptcha stoken.
         */
        provider.setStoken = function(stoken){
            config.stoken = stoken;
        };

        /**
         * Sets the reCaptcha size which will be used by default is not specified in a specific directive instance.
         *
         * @since 2.5.0
         * @param size  The reCaptcha size.
         */
        provider.setSize = function(size){
            config.size = size;
        };

        /**
         * Sets the reCaptcha type which will be used by default is not specified in a specific directive instance.
         *
         * @since 2.5.0
         * @param type  The reCaptcha type.
         */
        provider.setType = function(type){
            config.type = type;
        };

        /**
         * Sets the reCaptcha language which will be used by default is not specified in a specific directive instance.
         *
         * @param lang  The reCaptcha language.
         */
        provider.setLang = function(lang){
            config.lang = lang;
        };

        /**
         * Sets the reCaptcha badge position which will be used by default if not specified in a specific directive instance.
         *
         * @param badge  The reCaptcha badge position.
         */
        provider.setBadge = function(badge){
            config.badge = badge;
        };

        /**
         * Sets the reCaptcha configuration values which will be used by default is not specified in a specific directive instance.
         *
         * @since 2.5.0
         * @param onLoadFunctionName  string name which overrides the name of the onload function. Should match what is in the recaptcha script querystring onload value.
         */
        provider.setOnLoadFunctionName = function(onLoadFunctionName){
            provider.onLoadFunctionName = onLoadFunctionName;
        };

        provider.$get = ['$rootScope','$window', '$q', '$document', function ($rootScope, $window, $q, $document) {
            var deferred = $q.defer(), promise = deferred.promise, instances = {}, recaptcha;

            $window.vcRecaptchaApiLoadedCallback = $window.vcRecaptchaApiLoadedCallback || [];

            var callback = function () {
                recaptcha = $window.grecaptcha;

                deferred.resolve(recaptcha);
            };

            $window.vcRecaptchaApiLoadedCallback.push(callback);

            $window[provider.onLoadFunctionName] = function () {
                $window.vcRecaptchaApiLoadedCallback.forEach(function(callback) {
                    callback();
                });
            };


            function getRecaptcha() {
                if (!!recaptcha) {
                    return $q.when(recaptcha);
                }

                return promise;
            }

            function validateRecaptchaInstance() {
                if (!recaptcha) {
                    throw new Error('reCaptcha has not been loaded yet.');
                }
            }


            // Check if grecaptcha is not defined already.
            if (ng.isDefined($window.grecaptcha)) {
                callback();
            } else {
                // Generate link on demand
                var script = $window.document.createElement('script');
                script.async = true;
                script.defer = true;
                script.src = 'https://www.google.com/recaptcha/api.js?onload='+provider.onLoadFunctionName+'&render=explicit';
                $document.find('body').append(script);
            }

            return {

                /**
                 * Creates a new reCaptcha object
                 *
                 * @param elm  the DOM element where to put the captcha
                 * @param conf the captcha object configuration
                 * @throws NoKeyException    if no key is provided in the provider config or the directive instance (via attribute)
                 */
                create: function (elm, conf) {

                    conf.sitekey = conf.key || config.key;
                    conf.theme = conf.theme || config.theme;
                    conf.stoken = conf.stoken || config.stoken;
                    conf.size = conf.size || config.size;
                    conf.type = conf.type || config.type;
                    conf.hl = conf.lang || config.lang;
                    conf.badge = conf.badge || config.badge;

                    if (!conf.sitekey || conf.sitekey.length !== 40) {
                        throwNoKeyException();
                    }
                    return getRecaptcha().then(function (recaptcha) {
                        var widgetId = recaptcha.render(elm, conf);
                        instances[widgetId] = elm;
                        return widgetId;
                    });
                },

                /**
                 * Reloads the reCaptcha
                 */
                reload: function (widgetId) {
                    validateRecaptchaInstance();

                    recaptcha.reset(widgetId);

                    // Let everyone know this widget has been reset.
                    $rootScope.$broadcast('reCaptchaReset', widgetId);
                },

                /**
                 * Executes the reCaptcha
                 */
                execute: function (widgetId) {
                    validateRecaptchaInstance();

                    recaptcha.execute(widgetId);
                },

                /**
                 * Get/Set reCaptcha language
                 */
                useLang: function (widgetId, lang) {
                    var instance = instances[widgetId];

                    if (instance) {
                        var iframe = instance.querySelector('iframe');
                        if (lang) {
                            // Setter
                            if (iframe && iframe.src) {
                                var s = iframe.src;
                                if (/[?&]hl=/.test(s)) {
                                    s = s.replace(/([?&]hl=)\w+/, '$1' + lang);
                                } else {
                                    s += ((s.indexOf('?') === -1) ? '?' : '&') + 'hl=' + lang;
                                }

                                iframe.src = s;
                            }
                        } else {
                            // Getter
                            if (iframe && iframe.src && /[?&]hl=\w+/.test(iframe.src)) {
                                return iframe.src.replace(/.+[?&]hl=(\w+)([^\w].+)?/, '$1');
                            } else {
                                return null;
                            }
                        }
                    } else {
                        throw new Error('reCaptcha Widget ID not exists', widgetId);
                    }
                },

                /**
                 * Gets the response from the reCaptcha widget.
                 *
                 * @see https://developers.google.com/recaptcha/docs/display#js_api
                 *
                 * @returns {String}
                 */
                getResponse: function (widgetId) {
                    validateRecaptchaInstance();

                    return recaptcha.getResponse(widgetId);
                },

                /**
                 * Gets reCaptcha instance and configuration
                 */
                getInstance: function (widgetId) {
                    return instances[widgetId];
                },

                /**
                 * Destroy reCaptcha instance.
                 */
                destroy: function (widgetId) {
                    delete instances[widgetId];
                }
            };

        }];
    });

}(angular));

/*global angular, Recaptcha */
(function (ng) {
    'use strict';

    var app = ng.module('vcRecaptcha');

    app.directive('vcRecaptcha', ['$document', '$timeout', 'vcRecaptchaService', function ($document, $timeout, vcRecaptcha) {

        return {
            restrict: 'A',
            require: "?^^form",
            scope: {
                response: '=?ngModel',
                key: '=?',
                stoken: '=?',
                theme: '=?',
                size: '=?',
                type: '=?',
                lang: '=?',
                badge: '=?',
                tabindex: '=?',
                required: '=?',
                onCreate: '&',
                onSuccess: '&',
                onExpire: '&'
            },
            link: function (scope, elm, attrs, ctrl) {
                scope.widgetId = null;

                if(ctrl && ng.isDefined(attrs.required)){
                    scope.$watch('required', validate);
                }

                var removeCreationListener = scope.$watch('key', function (key) {
                    var callback = function (gRecaptchaResponse) {
                        // Safe $apply
                        $timeout(function () {
                            scope.response = gRecaptchaResponse;
                            validate();

                            // Notify about the response availability
                            scope.onSuccess({response: gRecaptchaResponse, widgetId: scope.widgetId});
                        });
                    };

                    vcRecaptcha.create(elm[0], {

                        callback: callback,
                        key: key,
                        stoken: scope.stoken || attrs.stoken || null,
                        theme: scope.theme || attrs.theme || null,
                        type: scope.type || attrs.type || null,
                        lang: scope.lang || attrs.lang || null,
                        tabindex: scope.tabindex || attrs.tabindex || null,
                        size: scope.size || attrs.size || null,
                        badge: scope.badge || attrs.badge || null,
                        'expired-callback': expired

                    }).then(function (widgetId) {
                        // The widget has been created
                        validate();
                        scope.widgetId = widgetId;
                        scope.onCreate({widgetId: widgetId});

                        scope.$on('$destroy', destroy);

                        scope.$on('reCaptchaReset', function(event, resetWidgetId){
                          if(ng.isUndefined(resetWidgetId) || widgetId === resetWidgetId){
                            scope.response = "";
                            validate();
                          }
                        })

                    });

                    // Remove this listener to avoid creating the widget more than once.
                    removeCreationListener();
                });

                function destroy() {
                  if (ctrl) {
                    // reset the validity of the form if we were removed
                    ctrl.$setValidity('recaptcha', null);
                  }

                  cleanup();
                }

                function expired(){
                    // Safe $apply
                    $timeout(function () {
                        scope.response = "";
                        validate();

                        // Notify about the response availability
                        scope.onExpire({ widgetId: scope.widgetId });
                    });
                }

                function validate(){
                    if(ctrl){
                        ctrl.$setValidity('recaptcha', scope.required === false ? null : Boolean(scope.response));
                    }
                }

                function cleanup(){
                  vcRecaptcha.destroy(scope.widgetId);

                  // removes elements reCaptcha added.
                  ng.element($document[0].querySelectorAll('.pls-container')).parent().remove();
                }
            }
        };
    }]);

}(angular));
;/**
 * @license AngularJS v1.5.9
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(window, angular) {'use strict';

    var forEach;
    var isArray;
    var isString;
    var jqLite;

    /**
     * @ngdoc module
     * @name ngMessages
     * @description
     *
     * The `ngMessages` module provides enhanced support for displaying messages within templates
     * (typically within forms or when rendering message objects that return key/value data).
     * Instead of relying on JavaScript code and/or complex ng-if statements within your form template to
     * show and hide error messages specific to the state of an input field, the `ngMessages` and
     * `ngMessage` directives are designed to handle the complexity, inheritance and priority
     * sequencing based on the order of how the messages are defined in the template.
     *
     * Currently, the ngMessages module only contains the code for the `ngMessages`, `ngMessagesInclude`
     * `ngMessage` and `ngMessageExp` directives.
     *
     * # Usage
     * The `ngMessages` directive allows keys in a key/value collection to be associated with a child element
     * (or 'message') that will show or hide based on the truthiness of that key's value in the collection. A common use
     * case for `ngMessages` is to display error messages for inputs using the `$error` object exposed by the
     * {@link ngModel ngModel} directive.
     *
     * The child elements of the `ngMessages` directive are matched to the collection keys by a `ngMessage` or
     * `ngMessageExp` directive. The value of these attributes must match a key in the collection that is provided by
     * the `ngMessages` directive.
     *
     * Consider the following example, which illustrates a typical use case of `ngMessages`. Within the form `myForm` we
     * have a text input named `myField` which is bound to the scope variable `field` using the {@link ngModel ngModel}
     * directive.
     *
     * The `myField` field is a required input of type `email` with a maximum length of 15 characters.
     *
     * ```html
     * <form name="myForm">
     *   <label>
     *     Enter text:
     *     <input type="email" ng-model="field" name="myField" required maxlength="15" />
     *   </label>
     *   <div ng-messages="myForm.myField.$error" role="alert">
     *     <div ng-message="required">Please enter a value for this field.</div>
     *     <div ng-message="email">This field must be a valid email address.</div>
     *     <div ng-message="maxlength">This field can be at most 15 characters long.</div>
     *   </div>
     * </form>
     * ```
     *
     * In order to show error messages corresponding to `myField` we first create an element with an `ngMessages` attribute
     * set to the `$error` object owned by the `myField` input in our `myForm` form.
     *
     * Within this element we then create separate elements for each of the possible errors that `myField` could have.
     * The `ngMessage` attribute is used to declare which element(s) will appear for which error - for example,
     * setting `ng-message="required"` specifies that this particular element should be displayed when there
     * is no value present for the required field `myField` (because the key `required` will be `true` in the object
     * `myForm.myField.$error`).
     *
     * ### Message order
     *
     * By default, `ngMessages` will only display one message for a particular key/value collection at any time. If more
     * than one message (or error) key is currently true, then which message is shown is determined by the order of messages
     * in the HTML template code (messages declared first are prioritised). This mechanism means the developer does not have
     * to prioritise messages using custom JavaScript code.
     *
     * Given the following error object for our example (which informs us that the field `myField` currently has both the
     * `required` and `email` errors):
     *
     * ```javascript
     * <!-- keep in mind that ngModel automatically sets these error flags -->
     * myField.$error = { required : true, email: true, maxlength: false };
     * ```
     * The `required` message will be displayed to the user since it appears before the `email` message in the DOM.
     * Once the user types a single character, the `required` message will disappear (since the field now has a value)
     * but the `email` message will be visible because it is still applicable.
     *
     * ### Displaying multiple messages at the same time
     *
     * While `ngMessages` will by default only display one error element at a time, the `ng-messages-multiple` attribute can
     * be applied to the `ngMessages` container element to cause it to display all applicable error messages at once:
     *
     * ```html
     * <!-- attribute-style usage -->
     * <div ng-messages="myForm.myField.$error" ng-messages-multiple>...</div>
     *
     * <!-- element-style usage -->
     * <ng-messages for="myForm.myField.$error" multiple>...</ng-messages>
     * ```
     *
     * ## Reusing and Overriding Messages
     * In addition to prioritization, ngMessages also allows for including messages from a remote or an inline
     * template. This allows for generic collection of messages to be reused across multiple parts of an
     * application.
     *
     * ```html
     * <script type="text/ng-template" id="error-messages">
     *   <div ng-message="required">This field is required</div>
     *   <div ng-message="minlength">This field is too short</div>
     * </script>
     *
     * <div ng-messages="myForm.myField.$error" role="alert">
     *   <div ng-messages-include="error-messages"></div>
     * </div>
     * ```
     *
     * However, including generic messages may not be useful enough to match all input fields, therefore,
     * `ngMessages` provides the ability to override messages defined in the remote template by redefining
     * them within the directive container.
     *
     * ```html
     * <!-- a generic template of error messages known as "my-custom-messages" -->
     * <script type="text/ng-template" id="my-custom-messages">
     *   <div ng-message="required">This field is required</div>
     *   <div ng-message="minlength">This field is too short</div>
     * </script>
     *
     * <form name="myForm">
     *   <label>
     *     Email address
     *     <input type="email"
     *            id="email"
     *            name="myEmail"
     *            ng-model="email"
     *            minlength="5"
     *            required />
     *   </label>
     *   <!-- any ng-message elements that appear BEFORE the ng-messages-include will
     *        override the messages present in the ng-messages-include template -->
     *   <div ng-messages="myForm.myEmail.$error" role="alert">
     *     <!-- this required message has overridden the template message -->
     *     <div ng-message="required">You did not enter your email address</div>
     *
     *     <!-- this is a brand new message and will appear last in the prioritization -->
     *     <div ng-message="email">Your email address is invalid</div>
     *
     *     <!-- and here are the generic error messages -->
     *     <div ng-messages-include="my-custom-messages"></div>
     *   </div>
     * </form>
     * ```
     *
     * In the example HTML code above the message that is set on required will override the corresponding
     * required message defined within the remote template. Therefore, with particular input fields (such
     * email addresses, date fields, autocomplete inputs, etc...), specialized error messages can be applied
     * while more generic messages can be used to handle other, more general input errors.
     *
     * ## Dynamic Messaging
     * ngMessages also supports using expressions to dynamically change key values. Using arrays and
     * repeaters to list messages is also supported. This means that the code below will be able to
     * fully adapt itself and display the appropriate message when any of the expression data changes:
     *
     * ```html
     * <form name="myForm">
     *   <label>
     *     Email address
     *     <input type="email"
     *            name="myEmail"
     *            ng-model="email"
     *            minlength="5"
     *            required />
     *   </label>
     *   <div ng-messages="myForm.myEmail.$error" role="alert">
     *     <div ng-message="required">You did not enter your email address</div>
     *     <div ng-repeat="errorMessage in errorMessages">
     *       <!-- use ng-message-exp for a message whose key is given by an expression -->
     *       <div ng-message-exp="errorMessage.type">{{ errorMessage.text }}</div>
     *     </div>
     *   </div>
     * </form>
     * ```
     *
     * The `errorMessage.type` expression can be a string value or it can be an array so
     * that multiple errors can be associated with a single error message:
     *
     * ```html
     *   <label>
     *     Email address
     *     <input type="email"
     *            ng-model="data.email"
     *            name="myEmail"
     *            ng-minlength="5"
     *            ng-maxlength="100"
     *            required />
     *   </label>
     *   <div ng-messages="myForm.myEmail.$error" role="alert">
     *     <div ng-message-exp="'required'">You did not enter your email address</div>
     *     <div ng-message-exp="['minlength', 'maxlength']">
     *       Your email must be between 5 and 100 characters long
     *     </div>
     *   </div>
     * ```
     *
     * Feel free to use other structural directives such as ng-if and ng-switch to further control
     * what messages are active and when. Be careful, if you place ng-message on the same element
     * as these structural directives, Angular may not be able to determine if a message is active
     * or not. Therefore it is best to place the ng-message on a child element of the structural
     * directive.
     *
     * ```html
     * <div ng-messages="myForm.myEmail.$error" role="alert">
     *   <div ng-if="showRequiredError">
     *     <div ng-message="required">Please enter something</div>
     *   </div>
     * </div>
     * ```
     *
     * ## Animations
     * If the `ngAnimate` module is active within the application then the `ngMessages`, `ngMessage` and
     * `ngMessageExp` directives will trigger animations whenever any messages are added and removed from
     * the DOM by the `ngMessages` directive.
     *
     * Whenever the `ngMessages` directive contains one or more visible messages then the `.ng-active` CSS
     * class will be added to the element. The `.ng-inactive` CSS class will be applied when there are no
     * messages present. Therefore, CSS transitions and keyframes as well as JavaScript animations can
     * hook into the animations whenever these classes are added/removed.
     *
     * Let's say that our HTML code for our messages container looks like so:
     *
     * ```html
     * <div ng-messages="myMessages" class="my-messages" role="alert">
     *   <div ng-message="alert" class="some-message">...</div>
     *   <div ng-message="fail" class="some-message">...</div>
     * </div>
     * ```
     *
     * Then the CSS animation code for the message container looks like so:
     *
     * ```css
     * .my-messages {
 *   transition:1s linear all;
 * }
     * .my-messages.ng-active {
 *   // messages are visible
 * }
     * .my-messages.ng-inactive {
 *   // messages are hidden
 * }
     * ```
     *
     * Whenever an inner message is attached (becomes visible) or removed (becomes hidden) then the enter
     * and leave animation is triggered for each particular element bound to the `ngMessage` directive.
     *
     * Therefore, the CSS code for the inner messages looks like so:
     *
     * ```css
     * .some-message {
 *   transition:1s linear all;
 * }
     *
     * .some-message.ng-enter {}
     * .some-message.ng-enter.ng-enter-active {}
     *
     * .some-message.ng-leave {}
     * .some-message.ng-leave.ng-leave-active {}
     * ```
     *
     * {@link ngAnimate Click here} to learn how to use JavaScript animations or to learn more about ngAnimate.
     */
    angular.module('ngMessages', [], function initAngularHelpers() {
        // Access helpers from angular core.
        // Do it inside a `config` block to ensure `window.angular` is available.
        forEach = angular.forEach;
        isArray = angular.isArray;
        isString = angular.isString;
        jqLite = angular.element;
    })

    /**
     * @ngdoc directive
     * @module ngMessages
     * @name ngMessages
     * @restrict AE
     *
     * @description
     * `ngMessages` is a directive that is designed to show and hide messages based on the state
     * of a key/value object that it listens on. The directive itself complements error message
     * reporting with the `ngModel` $error object (which stores a key/value state of validation errors).
     *
     * `ngMessages` manages the state of internal messages within its container element. The internal
     * messages use the `ngMessage` directive and will be inserted/removed from the page depending
     * on if they're present within the key/value object. By default, only one message will be displayed
     * at a time and this depends on the prioritization of the messages within the template. (This can
     * be changed by using the `ng-messages-multiple` or `multiple` attribute on the directive container.)
     *
     * A remote template can also be used to promote message reusability and messages can also be
     * overridden.
     *
     * {@link module:ngMessages Click here} to learn more about `ngMessages` and `ngMessage`.
     *
     * @usage
     * ```html
     * <!-- using attribute directives -->
     * <ANY ng-messages="expression" role="alert">
     *   <ANY ng-message="stringValue">...</ANY>
     *   <ANY ng-message="stringValue1, stringValue2, ...">...</ANY>
     *   <ANY ng-message-exp="expressionValue">...</ANY>
     * </ANY>
     *
     * <!-- or by using element directives -->
     * <ng-messages for="expression" role="alert">
     *   <ng-message when="stringValue">...</ng-message>
     *   <ng-message when="stringValue1, stringValue2, ...">...</ng-message>
     *   <ng-message when-exp="expressionValue">...</ng-message>
     * </ng-messages>
     * ```
     *
     * @param {string} ngMessages an angular expression evaluating to a key/value object
     *                 (this is typically the $error object on an ngModel instance).
     * @param {string=} ngMessagesMultiple|multiple when set, all messages will be displayed with true
     *
     * @example
     * <example name="ngMessages-directive" module="ngMessagesExample"
     *          deps="angular-messages.js"
     *          animations="true" fixBase="true">
     *   <file name="index.html">
     *     <form name="myForm">
     *       <label>
     *         Enter your name:
     *         <input type="text"
     *                name="myName"
     *                ng-model="name"
     *                ng-minlength="5"
     *                ng-maxlength="20"
     *                required />
     *       </label>
     *       <pre>myForm.myName.$error = {{ myForm.myName.$error | json }}</pre>
     *
     *       <div ng-messages="myForm.myName.$error" style="color:maroon" role="alert">
     *         <div ng-message="required">You did not enter a field</div>
     *         <div ng-message="minlength">Your field is too short</div>
     *         <div ng-message="maxlength">Your field is too long</div>
     *       </div>
     *     </form>
     *   </file>
     *   <file name="script.js">
     *     angular.module('ngMessagesExample', ['ngMessages']);
     *   </file>
     * </example>
     */
        .directive('ngMessages', ['$animate', function($animate) {
            var ACTIVE_CLASS = 'ng-active';
            var INACTIVE_CLASS = 'ng-inactive';

            return {
                require: 'ngMessages',
                restrict: 'AE',
                controller: ['$element', '$scope', '$attrs', function NgMessagesCtrl($element, $scope, $attrs) {
                    var ctrl = this;
                    var latestKey = 0;
                    var nextAttachId = 0;

                    this.getAttachId = function getAttachId() { return nextAttachId++; };

                    var messages = this.messages = {};
                    var renderLater, cachedCollection;

                    this.render = function(collection) {
                        collection = collection || {};

                        renderLater = false;
                        cachedCollection = collection;

                        // this is true if the attribute is empty or if the attribute value is truthy
                        var multiple = isAttrTruthy($scope, $attrs.ngMessagesMultiple) ||
                            isAttrTruthy($scope, $attrs.multiple);

                        var unmatchedMessages = [];
                        var matchedKeys = {};
                        var messageItem = ctrl.head;
                        var messageFound = false;
                        var totalMessages = 0;

                        // we use != instead of !== to allow for both undefined and null values
                        while (messageItem != null) {
                            totalMessages++;
                            var messageCtrl = messageItem.message;

                            var messageUsed = false;
                            if (!messageFound) {
                                forEach(collection, function(value, key) {
                                    if (!messageUsed && truthy(value) && messageCtrl.test(key)) {
                                        // this is to prevent the same error name from showing up twice
                                        if (matchedKeys[key]) return;
                                        matchedKeys[key] = true;

                                        messageUsed = true;
                                        messageCtrl.attach();
                                    }
                                });
                            }

                            if (messageUsed) {
                                // unless we want to display multiple messages then we should
                                // set a flag here to avoid displaying the next message in the list
                                messageFound = !multiple;
                            } else {
                                unmatchedMessages.push(messageCtrl);
                            }

                            messageItem = messageItem.next;
                        }

                        forEach(unmatchedMessages, function(messageCtrl) {
                            messageCtrl.detach();
                        });

                        if (unmatchedMessages.length !== totalMessages) {
                            $animate.setClass($element, ACTIVE_CLASS, INACTIVE_CLASS);
                        } else {
                            $animate.setClass($element, INACTIVE_CLASS, ACTIVE_CLASS);
                        }
                    };

                    $scope.$watchCollection($attrs.ngMessages || $attrs['for'], ctrl.render);

                    // If the element is destroyed, proactively destroy all the currently visible messages
                    $element.on('$destroy', function() {
                        forEach(messages, function(item) {
                            item.message.detach();
                        });
                    });

                    this.reRender = function() {
                        if (!renderLater) {
                            renderLater = true;
                            $scope.$evalAsync(function() {
                                if (renderLater && cachedCollection) {
                                    ctrl.render(cachedCollection);
                                }
                            });
                        }
                    };

                    this.register = function(comment, messageCtrl) {
                        var nextKey = latestKey.toString();
                        messages[nextKey] = {
                            message: messageCtrl
                        };
                        insertMessageNode($element[0], comment, nextKey);
                        comment.$$ngMessageNode = nextKey;
                        latestKey++;

                        ctrl.reRender();
                    };

                    this.deregister = function(comment) {
                        var key = comment.$$ngMessageNode;
                        delete comment.$$ngMessageNode;
                        removeMessageNode($element[0], comment, key);
                        delete messages[key];
                        ctrl.reRender();
                    };

                    function findPreviousMessage(parent, comment) {
                        var prevNode = comment;
                        var parentLookup = [];

                        while (prevNode && prevNode !== parent) {
                            var prevKey = prevNode.$$ngMessageNode;
                            if (prevKey && prevKey.length) {
                                return messages[prevKey];
                            }

                            // dive deeper into the DOM and examine its children for any ngMessage
                            // comments that may be in an element that appears deeper in the list
                            if (prevNode.childNodes.length && parentLookup.indexOf(prevNode) === -1) {
                                parentLookup.push(prevNode);
                                prevNode = prevNode.childNodes[prevNode.childNodes.length - 1];
                            } else if (prevNode.previousSibling) {
                                prevNode = prevNode.previousSibling;
                            } else {
                                prevNode = prevNode.parentNode;
                                parentLookup.push(prevNode);
                            }
                        }
                    }

                    function insertMessageNode(parent, comment, key) {
                        var messageNode = messages[key];
                        if (!ctrl.head) {
                            ctrl.head = messageNode;
                        } else {
                            var match = findPreviousMessage(parent, comment);
                            if (match) {
                                messageNode.next = match.next;
                                match.next = messageNode;
                            } else {
                                messageNode.next = ctrl.head;
                                ctrl.head = messageNode;
                            }
                        }
                    }

                    function removeMessageNode(parent, comment, key) {
                        var messageNode = messages[key];

                        var match = findPreviousMessage(parent, comment);
                        if (match) {
                            match.next = messageNode.next;
                        } else {
                            ctrl.head = messageNode.next;
                        }
                    }
                }]
            };

            function isAttrTruthy(scope, attr) {
                return (isString(attr) && attr.length === 0) || //empty attribute
                    truthy(scope.$eval(attr));
            }

            function truthy(val) {
                return isString(val) ? val.length : !!val;
            }
        }])

        /**
         * @ngdoc directive
         * @name ngMessagesInclude
         * @restrict AE
         * @scope
         *
         * @description
         * `ngMessagesInclude` is a directive with the purpose to import existing ngMessage template
         * code from a remote template and place the downloaded template code into the exact spot
         * that the ngMessagesInclude directive is placed within the ngMessages container. This allows
         * for a series of pre-defined messages to be reused and also allows for the developer to
         * determine what messages are overridden due to the placement of the ngMessagesInclude directive.
         *
         * @usage
         * ```html
         * <!-- using attribute directives -->
         * <ANY ng-messages="expression" role="alert">
         *   <ANY ng-messages-include="remoteTplString">...</ANY>
         * </ANY>
         *
         * <!-- or by using element directives -->
         * <ng-messages for="expression" role="alert">
         *   <ng-messages-include src="expressionValue1">...</ng-messages-include>
         * </ng-messages>
         * ```
         *
         * {@link module:ngMessages Click here} to learn more about `ngMessages` and `ngMessage`.
         *
         * @param {string} ngMessagesInclude|src a string value corresponding to the remote template.
         */
        .directive('ngMessagesInclude',
            ['$templateRequest', '$document', '$compile', function($templateRequest, $document, $compile) {

                return {
                    restrict: 'AE',
                    require: '^^ngMessages', // we only require this for validation sake
                    link: function($scope, element, attrs) {
                        var src = attrs.ngMessagesInclude || attrs.src;
                        $templateRequest(src).then(function(html) {
                            if ($scope.$$destroyed) return;

                            if (isString(html) && !html.trim()) {
                                // Empty template - nothing to compile
                                replaceElementWithMarker(element, src);
                            } else {
                                // Non-empty template - compile and link
                                $compile(html)($scope, function(contents) {
                                    element.after(contents);
                                    replaceElementWithMarker(element, src);
                                });
                            }
                        });
                    }
                };

                // Helpers
                function replaceElementWithMarker(element, src) {
                    // A comment marker is placed for debugging purposes
                    var comment = $compile.$$createComment ?
                        $compile.$$createComment('ngMessagesInclude', src) :
                        $document[0].createComment(' ngMessagesInclude: ' + src + ' ');
                    var marker = jqLite(comment);
                    element.after(marker);

                    // Don't pollute the DOM anymore by keeping an empty directive element
                    element.remove();
                }
            }])

        /**
         * @ngdoc directive
         * @name ngMessage
         * @restrict AE
         * @scope
         *
         * @description
         * `ngMessage` is a directive with the purpose to show and hide a particular message.
         * For `ngMessage` to operate, a parent `ngMessages` directive on a parent DOM element
         * must be situated since it determines which messages are visible based on the state
         * of the provided key/value map that `ngMessages` listens on.
         *
         * More information about using `ngMessage` can be found in the
         * {@link module:ngMessages `ngMessages` module documentation}.
         *
         * @usage
         * ```html
         * <!-- using attribute directives -->
         * <ANY ng-messages="expression" role="alert">
         *   <ANY ng-message="stringValue">...</ANY>
         *   <ANY ng-message="stringValue1, stringValue2, ...">...</ANY>
         * </ANY>
         *
         * <!-- or by using element directives -->
         * <ng-messages for="expression" role="alert">
         *   <ng-message when="stringValue">...</ng-message>
         *   <ng-message when="stringValue1, stringValue2, ...">...</ng-message>
         * </ng-messages>
         * ```
         *
         * @param {expression} ngMessage|when a string value corresponding to the message key.
         */
        .directive('ngMessage', ngMessageDirectiveFactory())


        /**
         * @ngdoc directive
         * @name ngMessageExp
         * @restrict AE
         * @priority 1
         * @scope
         *
         * @description
         * `ngMessageExp` is a directive with the purpose to show and hide a particular message.
         * For `ngMessageExp` to operate, a parent `ngMessages` directive on a parent DOM element
         * must be situated since it determines which messages are visible based on the state
         * of the provided key/value map that `ngMessages` listens on.
         *
         * @usage
         * ```html
         * <!-- using attribute directives -->
         * <ANY ng-messages="expression">
         *   <ANY ng-message-exp="expressionValue">...</ANY>
         * </ANY>
         *
         * <!-- or by using element directives -->
         * <ng-messages for="expression">
         *   <ng-message when-exp="expressionValue">...</ng-message>
         * </ng-messages>
         * ```
         *
         * {@link module:ngMessages Click here} to learn more about `ngMessages` and `ngMessage`.
         *
         * @param {expression} ngMessageExp|whenExp an expression value corresponding to the message key.
         */
        .directive('ngMessageExp', ngMessageDirectiveFactory());

    function ngMessageDirectiveFactory() {
        return ['$animate', function($animate) {
            return {
                restrict: 'AE',
                transclude: 'element',
                priority: 1, // must run before ngBind, otherwise the text is set on the comment
                terminal: true,
                require: '^^ngMessages',
                link: function(scope, element, attrs, ngMessagesCtrl, $transclude) {
                    var commentNode = element[0];

                    var records;
                    var staticExp = attrs.ngMessage || attrs.when;
                    var dynamicExp = attrs.ngMessageExp || attrs.whenExp;
                    var assignRecords = function(items) {
                        records = items
                            ? (isArray(items)
                                ? items
                                : items.split(/[\s,]+/))
                            : null;
                        ngMessagesCtrl.reRender();
                    };

                    if (dynamicExp) {
                        assignRecords(scope.$eval(dynamicExp));
                        scope.$watchCollection(dynamicExp, assignRecords);
                    } else {
                        assignRecords(staticExp);
                    }

                    var currentElement, messageCtrl;
                    ngMessagesCtrl.register(commentNode, messageCtrl = {
                        test: function(name) {
                            return contains(records, name);
                        },
                        attach: function() {
                            if (!currentElement) {
                                $transclude(function(elm, newScope) {
                                    $animate.enter(elm, null, element);
                                    currentElement = elm;

                                    // Each time we attach this node to a message we get a new id that we can match
                                    // when we are destroying the node later.
                                    var $$attachId = currentElement.$$attachId = ngMessagesCtrl.getAttachId();

                                    // in the event that the element or a parent element is destroyed
                                    // by another structural directive then it's time
                                    // to deregister the message from the controller
                                    currentElement.on('$destroy', function() {
                                        if (currentElement && currentElement.$$attachId === $$attachId) {
                                            ngMessagesCtrl.deregister(commentNode);
                                            messageCtrl.detach();
                                        }
                                        newScope.$destroy();
                                    });
                                });
                            }
                        },
                        detach: function() {
                            if (currentElement) {
                                var elm = currentElement;
                                currentElement = null;
                                $animate.leave(elm);
                            }
                        }
                    });
                }
            };
        }];

        function contains(collection, key) {
            if (collection) {
                return isArray(collection)
                    ? collection.indexOf(key) >= 0
                    : collection.hasOwnProperty(key);
            }
        }
    }


})(window, window.angular);;/*!
angular-xeditable - 0.8.0
Edit-in-place for angular.js
Build date: 2017-06-06 
*/
/**
 * Angular-xeditable module 
 *
 */
angular.module('xeditable', [])


/**
 * Default options. 
 *
 * @namespace editable-options
 */
//todo: maybe better have editableDefaults, not options...
.value('editableOptions', {
  /**
   * Theme. Possible values `bs3`, `bs2`, `default`.  
   * Default is `default`
   * 
   * @var {string} theme
   * @memberOf editable-options
   */  
  theme: 'default',
  /**
   * icon_set. Possible values `font-awesome`, `default`.  
   * Default is `default`
   * 
   * @var {string} icon set
   * @memberOf editable-options
   */  
  icon_set: 'default',
  /**
   * Whether to show buttons for single editable element.  
   * Possible values `right`, `no`.  
   * Default is `right`
   * 
   * @var {string} buttons
   * @memberOf editable-options
   */    
  buttons: 'right',
  /**
   * Default value for `blur` attribute of single editable element.  
   * Can be `cancel|submit|ignore`.  
   * Default is `cancel`
   * 
   * @var {string} blurElem
   * @memberOf editable-options
   */
  blurElem: 'cancel',
  /**
   * Default value for `blur` attribute of editable form.  
   * Can be `cancel|submit|ignore`.  
   * Default is `ignore`.
   * 
   * @var {string} blurForm
   * @memberOf editable-options
   */
  blurForm: 'ignore',
  /**
   * How input elements get activated. Possible values: `focus|select|none`.  
   * Default is `focus`
   *
   * @var {string} activate
   * @memberOf editable-options
   */
  activate: 'focus',
  /**
   * Whether to disable x-editable. Can be overloaded on each element.  
   * Default is `false`
   *
   * @var {boolean} isDisabled
   * @memberOf editable-options
   */
   isDisabled: false,
  
  /**
   * Event, on which the edit mode gets activated. 
   * Can be any event.  
   * Default is `click`
   *
   * @var {string} activationEvent
   * @memberOf editable-options
   */
  activationEvent: 'click',

  /**
   * The default title of the submit button.  
   * Default is `Submit`
   *
   * @var {string} submitButtonTitle
   * @memberOf editable-options
   */
  submitButtonTitle: 'Submit',

  /**
   * The default aria label of the submit button.  
   * Default is `Submit`
   *
   * @var {string} submitButtonAriaLabel
   * @memberOf editable-options
   */
  submitButtonAriaLabel: 'Submit',

  /**
   * The default title of the cancel button.  
   * Default is `Cancel`
   *
   * @var {string} cancelButtonTitle
   * @memberOf editable-options
   */
  cancelButtonTitle: 'Cancel',

  /**
   * The default aria label of the cancel button.  
   * Default is `Cancel`
   *
   * @var {string} cancelButtonAriaLabel
   * @memberOf editable-options
   */
  cancelButtonAriaLabel: 'Cancel',

  /**
   * The default title of the clear button.  
   * Default is `Clear`
   *
   * @var {string} clearButtonTitle
   * @memberOf editable-options
   */
  clearButtonTitle: 'Clear',

  /**
   * The default aria label of the clear button.  
   * Default is `Clear`
   *
   * @var {string} clearButtonAriaLabel
   * @memberOf editable-options
   */
  clearButtonAriaLabel: 'Clear',

  /**
   * Whether to display the clear button.  
   * Default is `false`
   *
   * @var {boolean} displayClearButton
   * @memberOf editable-options
   */
  displayClearButton: false
});

/*
 Angular-ui bootstrap datepicker
 http://angular-ui.github.io/bootstrap/#/datepicker
 */
angular.module('xeditable').directive('editableBsdate', ['editableDirectiveFactory', '$injector', '$parse',
    function(editableDirectiveFactory, $injector, $parse) {

        // Constants from Angular-ui bootstrap datepicker
        uibDatepickerConfig = $injector.get('uibDatepickerConfig');
        uibDatepickerPopupConfig = $injector.get('uibDatepickerPopupConfig');

        var popupAttrNames = [
            ['eIsOpen', 'is-open'],
            ['eDateDisabled', 'date-disabled'],
            ['eDatepickerPopup', 'uib-datepicker-popup'],
            ['eShowButtonBar', 'show-button-bar'],
            ['eCurrentText', 'current-text'],
            ['eClearText', 'clear-text'],
            ['eCloseText', 'close-text'],
            ['eCloseOnDateSelection', 'close-on-date-selection'],
            ['eDatepickerAppendToBody', 'datepicker-append-to-body'],
            ['eOnOpenFocus', 'on-open-focus'],
            ['eName', 'name'],
            ['eDateDisabled', 'date-disabled'],
            ['eAltInputFormats', 'alt-input-formats']
        ];

        var dateOptionsNames = [
            ['eFormatDay', 'formatDay'],
            ['eFormatMonth', 'formatMonth'],
            ['eFormatYear', 'formatYear'],
            ['eFormatDayHeader', 'formatDayHeader'],
            ['eFormatDayTitle', 'formatDayTitle'],
            ['eFormatMonthTitle', 'formatMonthTitle'],
            ['eMaxMode', 'maxMode'],
            ['eMinMode', 'minMode'],
            ['eDatepickerMode', 'datepickerMode']
        ];

        return editableDirectiveFactory({
            directiveName: 'editableBsdate',
            inputTpl: '<div></div>',
            render: function() {
                /** This basically renders a datepicker as in the example shown in
                 **  http://angular-ui.github.io/bootstrap/#/datepicker
                 **  The attributes are all the same as in the bootstrap-ui datepicker with e- as prefix
                 **/
                this.parent.render.call(this);

                var attrs = this.attrs;
                var scope = this.scope;

                var inputDatePicker = angular.element('<input type="text" class="form-control" ng-model="$parent.$data"/>');

                inputDatePicker.attr('uib-datepicker-popup', attrs.eDatepickerPopupXEditable || uibDatepickerPopupConfig.datepickerPopup );
                inputDatePicker.attr('year-range', attrs.eYearRange || 20);
                inputDatePicker.attr('ng-readonly', attrs.eReadonly || false);

                for (var i = popupAttrNames.length - 1; i >= 0; i--) {
                    var popupAttr = attrs[popupAttrNames[i][0]];
                    if (typeof popupAttr !== 'undefined') {
                        inputDatePicker.attr(popupAttrNames[i][1], popupAttr);
                    }
                }

                if (attrs.eNgChange) {
                    inputDatePicker.attr('ng-change', attrs.eNgChange);
                    this.inputEl.removeAttr('ng-change');
                }

                if (attrs.eStyle) {
                    inputDatePicker.attr('style', attrs.eStyle);
                    this.inputEl.removeAttr('style');
                }

                var dateOptions = {
                    maxDate: scope.$eval(attrs.eMaxDate) || uibDatepickerConfig.maxDate,
                    minDate: scope.$eval(attrs.eMinDate) || uibDatepickerConfig.minDate,
                    showWeeks: attrs.eShowWeeks ? attrs.eShowWeeks.toLowerCase() === 'true' : uibDatepickerConfig.showWeeks,
                    startingDay: attrs.eStartingDay || 0,
                    initDate: scope.$eval(attrs.eInitDate) || new Date()
                };

                if (attrs.eDatepickerOptions) {
                    var eDatepickerOptions = $parse(attrs.eDatepickerOptions)(scope);
                    angular.extend(dateOptions, eDatepickerOptions);
                }

                for (var z = dateOptionsNames.length - 1; z >= 0; z--) {
                    var doAttr = attrs[dateOptionsNames[z][0]];
                    if (typeof doAttr !== 'undefined') {
                        dateOptions[dateOptionsNames[z][1]] = doAttr;
                    }
                }

                scope.dateOptions = dateOptions;

                var showCalendarButton = angular.isDefined(attrs.eShowCalendarButton) ? attrs.eShowCalendarButton : "true";

                //See if calendar button should be displayed
                if (showCalendarButton === "true") {
                    var buttonDatePicker = angular.element('<button type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>');
                    var buttonWrapper = angular.element('<span class="input-group-btn"></span>');

                    buttonDatePicker.attr('ng-click', attrs.eNgClick);

                    buttonWrapper.append(buttonDatePicker);

                    this.inputEl.append(buttonWrapper);
                } else {
                    //If no calendar button, display calendar popup on click of input field
                    inputDatePicker.attr('ng-click', attrs.eNgClick);
                }

                inputDatePicker.attr('datepicker-options', "dateOptions");

                this.inputEl.prepend(inputDatePicker);

                this.inputEl.removeAttr('class');
                this.inputEl.removeAttr('ng-click');
                this.inputEl.removeAttr('is-open');
                this.inputEl.removeAttr('init-date');
                this.inputEl.removeAttr('datepicker-popup');
                this.inputEl.removeAttr('required');
                this.inputEl.removeAttr('ng-model');
                this.inputEl.removeAttr('date-picker-append-to-body');
                this.inputEl.removeAttr('name');
                this.inputEl.attr('class','input-group');
            },
            autosubmit: function() {
                var self = this;
                self.inputEl.bind('change', function() {
                    setTimeout(function() {
                        self.scope.$apply(function() {
                            self.scope.$form.$submit();
                        });
                    }, 500);
                });
                
                self.inputEl.bind('keydown', function(e) {
                    //submit on tab
                    if (e.keyCode === 9 && self.editorEl.attr('blur') === 'submit') {
                        self.scope.$apply(function() {
                            self.scope.$form.$submit();
                        });
                    }
                });
            }
    });
}]);

/*
Angular-ui bootstrap editable timepicker
http://angular-ui.github.io/bootstrap/#/timepicker
*/
angular.module('xeditable').directive('editableBstime', ['editableDirectiveFactory',
  function(editableDirectiveFactory) {
    return editableDirectiveFactory({
      directiveName: 'editableBstime',
      inputTpl: '<div uib-timepicker></div>',
      render: function() {
        this.parent.render.call(this);

        // timepicker can't update model when ng-model set directly to it
        // see: https://github.com/angular-ui/bootstrap/issues/1141
        // so we wrap it into DIV
        var div = angular.element('<div class="well well-small" style="display:inline-block;"></div>');

        // move ng-model to wrapping div
        div.attr('ng-model', this.inputEl.attr('ng-model'));
        this.inputEl.removeAttr('ng-model');

        // move ng-change to wrapping div
        if(this.attrs.eNgChange) {
          div.attr('ng-change', this.inputEl.attr('ng-change'));
          this.inputEl.removeAttr('ng-change');
        }

        // wrap
        this.inputEl.wrap(div);
      }
    });
}]);
//checkbox
angular.module('xeditable').directive('editableCheckbox', ['editableDirectiveFactory',
  function(editableDirectiveFactory) {
    return editableDirectiveFactory({
      directiveName: 'editableCheckbox',
      inputTpl: '<input type="checkbox">',
      render: function() {
        this.parent.render.call(this);
        this.inputEl.wrap('<label></label>');
        
        if (this.attrs.eTitle) {
          this.inputEl.parent().append('<span>' + this.attrs.eTitle + '</span>');
       }
      },
      autosubmit: function() {
        var self = this;
        self.inputEl.bind('change', function() {
          setTimeout(function() {
            self.scope.$apply(function() {
              self.scope.$form.$submit();
            });
          }, 500);
        });
      }
    });
}]);

// checklist
angular.module('xeditable').directive('editableChecklist', [
  'editableDirectiveFactory',
  'editableNgOptionsParser',
  function(editableDirectiveFactory, editableNgOptionsParser) {
    return editableDirectiveFactory({
      directiveName: 'editableChecklist',
      inputTpl: '<span></span>',
      useCopy: true,
      render: function() {
        this.parent.render.call(this);
        var parsed = editableNgOptionsParser(this.attrs.eNgOptions);
        var ngChangeHtml = '';
        var ngChecklistComparatorHtml = '';

        if (this.attrs.eNgChange) {
          ngChangeHtml = ' ng-change="' +  this.attrs.eNgChange + '"';
        }

        if (this.attrs.eChecklistComparator) {
          ngChecklistComparatorHtml = ' checklist-comparator="' +  this.attrs.eChecklistComparator + '"';
        }
        
        var html = '<label ng-repeat="'+parsed.ngRepeat+'">'+
          '<input type="checkbox" checklist-model="$parent.$parent.$data" checklist-value="'+parsed.locals.valueFn+'"' +
            ngChangeHtml + ngChecklistComparatorHtml + '>'+
          '<span ng-bind="'+parsed.locals.displayFn+'"></span></label>';

        this.inputEl.removeAttr('ng-model');
        this.inputEl.removeAttr('ng-options');
        this.inputEl.removeAttr('ng-change');
        this.inputEl.removeAttr('checklist-comparator');
        this.inputEl.html(html);
      }
    });
}]);

angular.module('xeditable').directive('editableCombodate', ['editableDirectiveFactory', 'editableCombodate',
  function(editableDirectiveFactory, editableCombodate) {
    return editableDirectiveFactory({
      directiveName: 'editableCombodate',
      inputTpl: '<input type="text">',
      render: function() {
        this.parent.render.call(this);

        var options = {
          value: new Date(this.scope.$data)
        };
        var self = this;
        angular.forEach(["format", "template", "minYear", "maxYear", "yearDescending", "minuteStep", "secondStep", "firstItem", "errorClass", "customClass", "roundTime", "smartDays"], function(name) {

          var attrName = "e" + name.charAt(0).toUpperCase() + name.slice(1);

          if (attrName in self.attrs) {
            if (name == "minYear" || name == "maxYear" || name == "minuteStep" || name == "secondStep") {
              options[name] = parseInt(self.attrs[attrName], 10);
            } else {
              options[name] = self.attrs[attrName];
            }
          }
        });

        var combodate = editableCombodate.getInstance(this.inputEl, options);
        combodate.$widget.find('select').bind('change', function(e) {
          //.replace is so this works in Safari
          self.scope.$data = combodate.getValue() ?
              (new Date(combodate.getValue().replace(/-/g, "/"))).toISOString() : null;
        });
      }
    });
  }
]);

/*
Input types: text|password|email|tel|number|url|search|color|date|datetime|datetime-local|time|month|week|file
*/

(function() {

  var camelCase = function(dashDelimitedString) {
    return dashDelimitedString.toLowerCase().replace(/-(.)/g, function(match, word) {
      return word.toUpperCase();
    });
  };

  var types = 'text|password|email|tel|number|url|search|color|date|datetime|datetime-local|time|month|week|file'.split('|');

  //todo: datalist
  
  // generate directives
  angular.forEach(types, function(type) {
    var directiveName = camelCase('editable' + '-' + type);
    angular.module('xeditable').directive(directiveName, ['editableDirectiveFactory',
      function(editableDirectiveFactory) {
        return editableDirectiveFactory({
          directiveName: directiveName,
          inputTpl: '<input type="'+type+'">',
          render: function() {
            this.parent.render.call(this);

            //Add bootstrap simple input groups
            if (this.attrs.eInputgroupleft || this.attrs.eInputgroupright) {
              this.inputEl.wrap('<div class="input-group"></div>');

              if (this.attrs.eInputgroupleft) {
                var inputGroupLeft = angular.element('<span class="input-group-addon">' + this.attrs.eInputgroupleft + '</span>');
                this.inputEl.parent().prepend(inputGroupLeft);
              }

              if (this.attrs.eInputgroupright) {
                var inputGroupRight = angular.element('<span class="input-group-addon">' + this.attrs.eInputgroupright + '</span>');
                this.inputEl.parent().append(inputGroupRight);
              }
            }

            // Add label to the input
            if (this.attrs.eLabel) {
              var label = angular.element('<label>' + this.attrs.eLabel + '</label>');
              if (this.attrs.eInputgroupleft || this.attrs.eInputgroupright) {
                this.inputEl.parent().parent().prepend(label);
              } else {
                this.inputEl.parent().prepend(label);
              }
            }
            
            // Add classes to the form
            if (this.attrs.eFormclass) {
              this.editorEl.addClass(this.attrs.eFormclass);
            }
          },
          autosubmit: function() {
            var self = this;
            self.inputEl.bind('keydown', function(e) {
                //submit on tab
                if (e.keyCode === 9 && self.editorEl.attr('blur') === 'submit') {
                    self.scope.$apply(function() {
                        self.scope.$form.$submit();
                    });
                }
            });
          }
        });
    }]);
  });

  //`range` is bit specific
  angular.module('xeditable').directive('editableRange', ['editableDirectiveFactory', '$interpolate',
    function(editableDirectiveFactory, $interpolate) {
      return editableDirectiveFactory({
        directiveName: 'editableRange',
        inputTpl: '<input type="range" id="range" name="range">',
        render: function() {
          this.parent.render.call(this);
          this.inputEl.after('<output>' + $interpolate.startSymbol() + '$data' + $interpolate.endSymbol()  + '</output>');
        }        
      });
  }]);

}());


/*
 Tags input directive for AngularJS
 https://github.com/mbenford/ngTagsInput
 */
angular.module('xeditable').directive('editableTagsInput', ['editableDirectiveFactory', 'editableUtils',
  function(editableDirectiveFactory, editableUtils) {
    var dir = editableDirectiveFactory({
        directiveName: 'editableTagsInput',
        inputTpl: '<tags-input></tags-input>',
        useCopy: true,
        render: function () {
            this.parent.render.call(this);
            this.inputEl.append(editableUtils.rename('auto-complete', this.attrs.$autoCompleteElement));
            this.inputEl.removeAttr('ng-model');
            this.inputEl.attr('ng-model', '$parent.$data');
        }
    });

    var linkOrg = dir.link;

    dir.link = function (scope, el, attrs, ctrl) {
        var autoCompleteEl = el.find('editable-tags-input-auto-complete');

        attrs.$autoCompleteElement = autoCompleteEl.clone();

        autoCompleteEl.remove();

        return linkOrg(scope, el, attrs, ctrl);
    };

    return dir;
}]);
// radiolist
angular.module('xeditable').directive('editableRadiolist', [
  'editableDirectiveFactory',
  'editableNgOptionsParser',
  '$interpolate',
  function(editableDirectiveFactory, editableNgOptionsParser, $interpolate) {
    return editableDirectiveFactory({
      directiveName: 'editableRadiolist',
      inputTpl: '<span></span>',
      render: function() {
        this.parent.render.call(this);
        var parsed = editableNgOptionsParser(this.attrs.eNgOptions),
            ngChangeHtml = '',
            ngNameHtml = '';

        if (this.attrs.eNgChange) {
          ngChangeHtml = ' ng-change="' +  this.attrs.eNgChange + '"';
        }
        
        if (this.attrs.eName) {
            ngNameHtml = ' name="' +  this.attrs.eName + '"';
        }
          
        var html = '<label data-ng-repeat="'+parsed.ngRepeat+'">'+
          '<input type="radio" data-ng-disabled="::' +
            this.attrs.eNgDisabled +
            '" data-ng-model="$parent.$parent.$data" data-ng-value="' + $interpolate.startSymbol() +
            '::' + parsed.locals.valueFn + $interpolate.endSymbol() +'"' +
            ngChangeHtml + ngNameHtml + '>'+
          '<span data-ng-bind="::'+parsed.locals.displayFn+'"></span></label>';

        this.inputEl.removeAttr('ng-model');
        this.inputEl.removeAttr('ng-options');
        this.inputEl.removeAttr('ng-change');
        this.inputEl.html(html);
      },
      autosubmit: function() {
        var self = this;
        self.inputEl.bind('change', function() {
          setTimeout(function() {
            self.scope.$apply(function() {
              self.scope.$form.$submit();
            });
          }, 500);
        });
      }
    });
}]);

//select
angular.module('xeditable').directive('editableSelect', ['editableDirectiveFactory',
  function(editableDirectiveFactory) {
    return editableDirectiveFactory({
      directiveName: 'editableSelect',
      inputTpl: '<select></select>',
      render: function() {
        this.parent.render.call(this);

        if (this.attrs.ePlaceholder) {
          var placeholder = angular.element('<option value="">' + this.attrs.ePlaceholder + '</option>');
          this.inputEl.append(placeholder);
        }
      },
      autosubmit: function() {
        var self = this;

        if (!self.attrs.hasOwnProperty("eMultiple")) {
          self.inputEl.bind('change', function () {
            self.scope.$apply(function () {
                self.scope.$form.$submit();
            });
          });
        }
      }
    });
}]);
//textarea
angular.module('xeditable').directive('editableTextarea', ['editableDirectiveFactory',
  function(editableDirectiveFactory) {
    return editableDirectiveFactory({
      directiveName: 'editableTextarea',
      inputTpl: '<textarea></textarea>',
      addListeners: function() {
        var self = this;
        self.parent.addListeners.call(self);
        // submit textarea by ctrl+enter even with buttons
        if (self.single && self.buttons !== 'no') {
          self.autosubmit();
        }
      },
      autosubmit: function() {
        var self = this;
        self.inputEl.bind('keydown', function(e) {
          if (self.attrs.submitOnEnter) {
            if (e.keyCode === 13 && !e.shiftKey) {
              self.scope.$apply(function() {
                self.scope.$form.$submit();
              });
            }
          } else if ((e.ctrlKey || e.metaKey) && (e.keyCode === 13) || 
                (e.keyCode === 9 && self.editorEl.attr('blur') === 'submit')) {
            self.scope.$apply(function() {
              self.scope.$form.$submit();
            });
          }
        });
      }
    });
}]);

/*
 jQuery UI Datepicker for AngularJS
 https://github.com/angular-ui/ui-date
 */
angular.module('xeditable').directive('editableUidate', ['editableDirectiveFactory',
    function(editableDirectiveFactory) {
        return editableDirectiveFactory({
            directiveName: 'editableUidate',
            inputTpl: '<input class="form-control" />',
            render: function() {
                this.parent.render.call(this);
                this.inputEl.attr('ui-date', this.attrs.eUiDate);
                this.inputEl.attr('placeholder', this.attrs.ePlaceholder);
            }
        });
}]);

/*
 AngularJS-native version of Select2 and Selectize
 https://github.com/angular-ui/ui-select
 */
angular.module('xeditable').directive('editableUiSelect',['editableDirectiveFactory', 'editableUtils',
    function(editableDirectiveFactory, editableUtils) {
        var dir = editableDirectiveFactory({
            directiveName: 'editableUiSelect',
            inputTpl: '<ui-select></ui-select>',
            render: function () {
                this.parent.render.call(this);
                this.inputEl.append(editableUtils.rename('ui-select-match', this.attrs.$matchElement));
                this.inputEl.append(editableUtils.rename('ui-select-choices', this.attrs.$choicesElement));
                this.inputEl.removeAttr('ng-model');
                this.inputEl.attr('ng-model', '$parent.$parent.$data');
            },
            autosubmit: function() {
                var self = this;
                self.inputEl.bind('change', function() {
                    setTimeout(function() {
                        self.scope.$apply(function() {
                            self.scope.$form.$submit();
                        });
                    }, 500);
                });

                self.inputEl.bind('keydown', function(e) {
                    //submit on tab
                    if (e.keyCode === 9 && self.editorEl.attr('blur') === 'submit') {
                        self.scope.$apply(function() {
                            self.scope.$form.$submit();
                        });
                    }
                });
            }
        });

        var linkOrg = dir.link;

        dir.link = function (scope, el, attrs, ctrl) {
            var matchEl = el.find('editable-ui-select-match');
            var choicesEl = el.find('editable-ui-select-choices');

            attrs.$matchElement = matchEl.clone();
            attrs.$choicesElement = choicesEl.clone();

            matchEl.remove();
            choicesEl.remove();

            return linkOrg(scope, el, attrs, ctrl);
        };

        return dir;
    }]);
/**
 * EditableController class. 
 * Attached to element with `editable-xxx` directive.
 *
 * @namespace editable-element
 */
/*
TODO: this file should be refactored to work more clear without closures!
*/
angular.module('xeditable').factory('editableController', 
  ['$q', 'editableUtils',
  function($q, editableUtils) {

  //EditableController function
  EditableController.$inject = ['$scope', '$attrs', '$element', '$parse', 'editableThemes', 'editableIcons', 'editableOptions', '$rootScope', '$compile', '$q', '$sce', '$templateCache'];
  function EditableController($scope, $attrs, $element, $parse, editableThemes, editableIcons, editableOptions, $rootScope, $compile, $q, $sce, $templateCache) {
    var valueGetter;

    //if control is disabled - it does not participate in waiting process
    var inWaiting;

    var self = this;

    self.scope = $scope;
    self.elem = $element;
    self.attrs = $attrs;
    self.inputEl = null;
    self.editorEl = null;
    self.single = true;
    self.error = '';
    self.theme =  editableThemes[$attrs.editableTheme] || editableThemes[editableOptions.theme] || editableThemes['default'];
    self.parent = {};

    //will be undefined if icon_set is default and theme is default
    var theme_name = $attrs.editableTheme || editableOptions.theme || 'default';
    // The theme_name will not be correct if the theme set in options is unavailable
    // However, in that case an undefined icon_set is not that bad...
    var icon_set_option = $attrs.editableIconSet || editableOptions.icon_set;
    self.icon_set = icon_set_option === 'default' ? editableIcons.default[theme_name] : editableIcons.external[icon_set_option];

    //to be overwritten by directive
    self.inputTpl = '';
    self.directiveName = '';

    // with majority of controls copy is not needed, but..
    // copy MUST NOT be used for `select-multiple` with objects as items
    // copy MUST be used for `checklist`
    self.useCopy = false;

    //runtime (defaults)
    self.single = null;

    /**
     * Attributes defined with `e-*` prefix automatically transferred from original element to
     * control.  
     * For example, if you set `<span editable-text="user.name" e-style="width: 100px"`>
     * then input will appear as `<input style="width: 100px">`.  
     * See [demo](#text-customize).
     * 
     * @var {any|attribute} e-*
     * @memberOf editable-element
     */ 

    /**
     * Whether to show ok/cancel buttons. Values: `right|no`.
     * If set to `no` control automatically submitted when value changed.  
     * If control is part of form buttons will never be shown. 
     * 
     * @var {string|attribute} buttons
     * @memberOf editable-element
     */    
    self.buttons = 'right';
    
    /**
     * Whether to show the editable element in a ui-bootstrap popover. Values: `true|false`.
     *
     * @var {boolean|attribute} popover
     * @memberOf editable-element
     */
    self.popover = false;
      
    /**
     * Action when control losses focus. Values: `cancel|submit|ignore`.
     * Has sense only for single editable element.
     * Otherwise, if control is part of form - you should set `blur` of form, not of individual element.
     * 
     * @var {string|attribute} blur
     * @memberOf editable-element
     */     
    // no real `blur` property as it is transferred to editable form

    //init
    self.init = function(single) {
      self.single = single;

      self.name = $attrs.eName || $attrs[self.directiveName];
      /*
      if(!$attrs[directiveName] && !$attrs.eNgModel && ($attrs.eValue === undefined)) {
        throw 'You should provide value for `'+directiveName+'` or `e-value` in editable element!';
      }
      */
      if($attrs[self.directiveName]) {
        valueGetter = $parse($attrs[self.directiveName]);
      } else {
        throw 'You should provide value for `'+self.directiveName+'` in editable element!';
      }

      // settings for single and non-single
      if (!self.single) {
        // hide buttons for non-single
        self.buttons = 'no';
      } else {
        self.buttons = self.attrs.buttons || editableOptions.buttons;
      }

      //if name defined --> watch changes and update $data in form
      if($attrs.eName) {
        self.scope.$watch('$data', function(newVal){
          self.scope.$form.$data[$attrs.eName] = newVal;
        });
      }

      /**
       * Called when control is shown.  
       * See [demo](#select-remote).
       * 
       * @var {method|attribute} onshow
       * @memberOf editable-element
       */
      if($attrs.onshow) {
        self.onshow = function() {
          return self.catchError($parse($attrs.onshow)($scope));
        };
      }

      /**
       * Called when control is hidden after both save or cancel.  
       * 
       * @var {method|attribute} onhide
       * @memberOf editable-element
       */
      if ($attrs.onhide) {
        self.onhide = function() {
          return $parse($attrs.onhide)($scope);
        };
      }

      /**
       * Called when control is cancelled.  
       * 
       * @var {method|attribute} oncancel
       * @memberOf editable-element
       */
      if ($attrs.oncancel) {
        self.oncancel = function() {
          return $parse($attrs.oncancel)($scope);
        };
      }          

      /**
       * Called during submit before value is saved to model.  
       * See [demo](#onbeforesave).
       * 
       * @var {method|attribute} onbeforesave
       * @memberOf editable-element
       */
      if ($attrs.onbeforesave) {
        self.onbeforesave = function() {
          return self.catchError($parse($attrs.onbeforesave)($scope));
        };
      }

      /**
       * Called during submit after value is saved to model.  
       * See [demo](#onaftersave).
       * 
       * @var {method|attribute} onaftersave
       * @memberOf editable-element
       */
      if ($attrs.onaftersave) {
        self.onaftersave = function() {
          return self.catchError($parse($attrs.onaftersave)($scope));
        };
      }

      if ($attrs.popover) {
        self.popover = self.attrs.popover;
      }
        
      // watch change of model to update editable element
      // now only add/remove `editable-empty` class.
      // Initially this method called with newVal = undefined, oldVal = undefined
      // so no need initially call handleEmpty() explicitly
      $scope.$parent.$watch($attrs[self.directiveName], function(newVal, oldVal) {
        self.setLocalValue();
        self.handleEmpty();
      });
    };

    self.render = function() {
      var theme = self.theme;

      //build input
      self.inputEl = angular.element(self.inputTpl);

      //build controls
      self.controlsEl = angular.element(theme.controlsTpl);
      self.controlsEl.append(self.inputEl);

      //build buttons
      if(self.buttons !== 'no') {
        self.buttonsEl = angular.element(theme.buttonsTpl);
        self.submitEl = angular.element(theme.submitTpl);
        self.resetEl = angular.element(theme.resetTpl);
        self.cancelEl = angular.element(theme.cancelTpl);
        self.submitEl.attr('title', editableOptions.submitButtonTitle);
        self.submitEl.attr('aria-label', editableOptions.submitButtonAriaLabel);
        self.cancelEl.attr('title', editableOptions.cancelButtonTitle);
        self.cancelEl.attr('aria-label', editableOptions.cancelButtonAriaLabel);
        self.resetEl.attr('title', editableOptions.clearButtonTitle);
        self.resetEl.attr('aria-label', editableOptions.clearButtonAriaLabel);

        if (self.icon_set) {
          self.submitEl.find('span').addClass(self.icon_set.ok);
          self.cancelEl.find('span').addClass(self.icon_set.cancel);
          self.resetEl.find('span').addClass(self.icon_set.clear);
        }

        self.buttonsEl.append(self.submitEl).append(self.cancelEl);

        if (editableOptions.displayClearButton) {
          self.buttonsEl.append(self.resetEl);
        }

        self.controlsEl.append(self.buttonsEl);
        
        self.inputEl.addClass('editable-has-buttons');
      }

      //build error
      self.errorEl = angular.element(theme.errorTpl);
      self.controlsEl.append(self.errorEl);

      //build editor
      self.editorEl = angular.element(self.single ? theme.formTpl : theme.noformTpl);
      self.editorEl.append(self.controlsEl);

      // transfer `e-*|data-e-*|x-e-*` attributes
      for (var k in $attrs.$attr) {
        if(k.length <= 1) {
          continue;
        }
        var transferAttr = false;
        var nextLetter = k.substring(1, 2);

        // if starts with `e` + uppercase letter
        if (k.substring(0, 1) === 'e' && nextLetter === nextLetter.toUpperCase()) {
          transferAttr = k.substring(1); // cut `e`
        } else {
          continue;
        }
        
        // exclude `form` and `ng-submit`, 
        if (transferAttr === 'Form' || transferAttr === 'NgSubmit') {
          continue;
        }

        var firstLetter = transferAttr.substring(0, 1);
        var secondLetter = transferAttr.substring(1, 2);

        // convert back to lowercase style
        if (secondLetter === secondLetter.toUpperCase() &&
            firstLetter === firstLetter.toUpperCase()) {
          transferAttr = firstLetter.toLowerCase() + '-' + editableUtils.camelToDash(transferAttr.substring(1));
        } else {
          transferAttr = firstLetter.toLowerCase() + editableUtils.camelToDash(transferAttr.substring(1));
        }

        // workaround for attributes without value (e.g. `multiple = "multiple"`)
        // except for 'e-value'
        var attrValue = (transferAttr !== 'value' && $attrs[k] === '') ? transferAttr : $attrs[k];

        // set attributes to input
        self.inputEl.attr(transferAttr, attrValue);
      }

      self.inputEl.addClass('editable-input form-control');
      self.inputEl.attr('ng-model', '$parent.$data');

      // add directiveName class to editor, e.g. `editable-text`
      self.editorEl.addClass(editableUtils.camelToDash(self.directiveName));

      if (self.single) {
        self.editorEl.attr('editable-form', '$form');
        // transfer `blur` to form
        self.editorEl.attr('blur', self.attrs.blur || editableOptions.blurElem);
      }

      if (self.popover) {
        var wrapper = angular.element('<div></div>');
        wrapper.append(self.editorEl);
        self.editorEl = wrapper;
        $templateCache.put('popover.html', self.editorEl[0].outerHTML);
      }
        
      //apply `postrender` method of theme
      if (angular.isFunction(theme.postrender)) {
        theme.postrender.call(self);
      }

    };

    // with majority of controls copy is not needed, but..
    // copy MUST NOT be used for `select-multiple` with objects as items
    // copy MUST be used for `checklist`
    self.setLocalValue = function() {
      self.scope.$data = self.useCopy ? 
        angular.copy(valueGetter($scope.$parent)) : 
        valueGetter($scope.$parent);
    };

    // reference of the scope to use for $compile
    var newScope = null;
    //show
    self.show = function() {
      // set value of scope.$data
      self.setLocalValue();

      /*
      Originally render() was inside init() method, but some directives polluting editorEl,
      so it is broken on second opening.
      Cloning is not a solution as jqLite can not clone with event handler's.
      */
      self.render();

      // insert into DOM
      $element.after(self.editorEl);

      // compile (needed to attach ng-* events from markup)
      newScope = $scope.$new();
      $compile(self.editorEl)(newScope);

      // attach listeners (`escape`, autosubmit, etc)
      self.addListeners();

      // hide element
      $element.addClass('editable-hide');

      // onshow
      return self.onshow();
    };

    //hide
    self.hide = function() {

      // destroy the scope to prevent memory leak
      newScope.$destroy();

      self.controlsEl.remove();
      self.editorEl.remove();
      $element.removeClass('editable-hide');

      if (self.popover) {
        $templateCache.remove('popover.html');
      }
      
      // onhide
      return self.onhide();
    };

    // cancel
    self.cancel = function() {
      // oncancel
      self.oncancel();
      // don't call hide() here as it called in form's code
    };

    /*
    Called after show to attach listeners
    */
    self.addListeners = function() {
      // bind keyup for `escape`
      self.inputEl.bind('keyup', function(e) {
          if(!self.single) {
            return;
          }

          // todo: move this to editable-form!
          switch(e.keyCode) {
            // hide on `escape` press
            case 27:
              self.scope.$apply(function() {
                self.scope.$form.$cancel();
              });
            break;
          }
      });

      // autosubmit when `no buttons`
      if (self.single && self.buttons === 'no') {
        self.autosubmit();
      }

      // click - mark element as clicked to exclude in document click handler
      self.editorEl.bind('click', function(e) {
        // ignore right/middle button click
        if (e.which && e.which !== 1) {
          return;
        }

        if (self.scope.$form.$visible) {
          self.scope.$form._clicked = true;
        }
      });
    };

    // setWaiting
    self.setWaiting = function(value) {
      if (value) {
        // participate in waiting only if not disabled
        inWaiting = !self.inputEl.attr('disabled') &&
                    !self.inputEl.attr('ng-disabled') &&
                    !self.inputEl.attr('ng-enabled');
        if (inWaiting) {
          self.inputEl.attr('disabled', 'disabled');
          if(self.buttonsEl) {
            self.buttonsEl.find('button').attr('disabled', 'disabled');
          }
        }
      } else {
        if (inWaiting) {
          self.inputEl.removeAttr('disabled');
          if (self.buttonsEl) {
            self.buttonsEl.find('button').removeAttr('disabled');
          }
        }
      }
    };

    self.activate = function(start, end) {
      setTimeout(function() {
        var el = self.inputEl[0];

        if (editableOptions.activate === 'focus' && el.focus) {
          if (start !== undefined && start !== "" && el.setSelectionRange) {
            end = end || start;
            el.onfocus = function() {
              setTimeout(function() {
                try {
                  this.setSelectionRange(start,end);
                } catch(e) {
                  //do nothing, this input doesn't support setSelectionRange
                }
              }.bind(this));
            };
          }
          
          if (self.directiveName == 'editableRadiolist' || self.directiveName == 'editableChecklist' ||
              self.directiveName == 'editableBsdate' || self.directiveName == 'editableTagsInput') {
            //Set focus to first pristine element in the list
            el.querySelector('.ng-pristine').focus();
          } else {
            el.focus();
          }
        } else if (editableOptions.activate === 'select') {
          if (el.select){
            el.select();
          } else if (el.focus) {
            el.focus();
          }
        }
      }, 0);
    };

    self.setError = function(msg) {
      if(!angular.isObject(msg)) {
        $scope.$error = $sce.trustAsHtml(msg);
        self.error = msg;
      }
    };

    /*
    Checks that result is string or promise returned string and shows it as error message
    Applied to onshow, onbeforesave, onaftersave
    */
    self.catchError = function(result, noPromise) {
      if (angular.isObject(result) && noPromise !== true) {
        $q.when(result).then(
          //success and fail handlers are equal
          angular.bind(this, function(r) {
            this.catchError(r, true);
          }),
          angular.bind(this, function(r) {
            this.catchError(r, true);
          })
        );
      //check $http error
      } else if (noPromise && angular.isObject(result) && result.status &&
        (result.status !== 200) && result.data && angular.isString(result.data)) {
        this.setError(result.data);
        //set result to string: to let form know that there was error
        result = result.data;
      } else if (angular.isString(result)) {
        this.setError(result);
      }
      return result;
    };

    self.save = function() {
      valueGetter.assign($scope.$parent,
          self.useCopy ? angular.copy(self.scope.$data) : self.scope.$data);

      // no need to call handleEmpty here as we are watching change of model value
      // self.handleEmpty();
    };

    /*
    attach/detach `editable-empty` class to element
    */
    self.handleEmpty = function() {
      var val = valueGetter($scope.$parent);
      var isEmpty = val === null || val === undefined || val === "" || (angular.isArray(val) && val.length === 0); 
      $element.toggleClass('editable-empty', isEmpty);
    };

    /*
    Called when `buttons = "no"` to submit automatically
    */
    self.autosubmit = angular.noop;

    self.onshow = angular.noop;
    self.onhide = angular.noop;
    self.oncancel = angular.noop;
    self.onbeforesave = angular.noop;
    self.onaftersave = angular.noop;
  }

  return EditableController;
}]);

/*
editableFactory is used to generate editable directives (see `/directives` folder)
Inside it does several things:
- detect form for editable element. Form may be one of three types:
  1. autogenerated form (for single editable elements)
  2. wrapper form (element wrapped by <form> tag)
  3. linked form (element has `e-form` attribute pointing to existing form)

- attach editableController to element

Depends on: editableController, editableFormFactory
*/
angular.module('xeditable').factory('editableDirectiveFactory',
['$parse', '$compile', 'editableThemes', '$rootScope', '$document', 'editableController', 'editableFormController', 'editableOptions',
function($parse, $compile, editableThemes, $rootScope, $document, editableController, editableFormController, editableOptions) {

  //directive object
  return function(overwrites) {
    return {
      restrict: 'A',
      scope: true,
      require: [overwrites.directiveName, '?^form'],
      controller: editableController,
      link: function(scope, elem, attrs, ctrl) {
        // editable controller
        var eCtrl = ctrl[0];

        // form controller
        var eFormCtrl;

        // this variable indicates is element is bound to some existing form,
        // or it's single element who's form will be generated automatically
        // By default consider single element without any linked form.ß
        var hasForm = false;

        // element wrapped by form
        if (ctrl[1]) {
          eFormCtrl = ctrl[1];
          hasForm = attrs.eSingle === undefined;
        } else if (attrs.eForm) { // element not wrapped by <form>, but we have `e-form` attr
          var getter = $parse(attrs.eForm)(scope);
          if (getter) { // form exists in scope (above), e.g. editable column
            eFormCtrl = getter;
            hasForm = true;
          } else if (elem && typeof elem.parents === "function" && elem.parents().last().find('form[name='+attrs.eForm+']').length) { // form exists below or not exist at all: check document.forms
            // form is below and not processed yet
            eFormCtrl = null;
            hasForm = true;
          } else {
            // form exists below or not exist at all: check document.forms
            for (var i=0; i<$document[0].forms.length;i++) {
              if ($document[0].forms[i].name === attrs.eForm) {
                // form is below and not processed yet
                eFormCtrl = null;
                hasForm = true;
                break;
              }
            }
          }
        }

        /*
        if(hasForm && !attrs.eName) {
          throw 'You should provide `e-name` for editable element inside form!';
        }
        */

        //check for `editable-form` attr in form
        /*
        if(eFormCtrl && ) {
          throw 'You should provide `e-name` for editable element inside form!';
        }
        */

        // store original props to `parent` before merge
        angular.forEach(overwrites, function(v, k) {
          if(eCtrl[k] !== undefined) {
            eCtrl.parent[k] = eCtrl[k];
          }
        });

        // merge overwrites to base editable controller
        angular.extend(eCtrl, overwrites);

        // x-editable can be disabled using editableOption or edit-disabled attribute
        var is_disabled = function() {
          return angular.isDefined(attrs.editDisabled) ?
            scope.$eval(attrs.editDisabled) :
            editableOptions.isDisabled;
        };

        // init editable ctrl
        eCtrl.init(!hasForm);

        // publich editable controller as `$editable` to be referenced in html
        scope.$editable = eCtrl;

        // add `editable` class to element
        elem.addClass('editable');

        // hasForm
        if(hasForm) {
          if(eFormCtrl) {
            scope.$form = eFormCtrl;
            if(!scope.$form.$addEditable) {
              throw 'Form with editable elements should have `editable-form` attribute.';
            }
            scope.$form.$addEditable(eCtrl);
          } else {
            // future form (below): add editable controller to buffer and add to form later
            $rootScope.$$editableBuffer = $rootScope.$$editableBuffer || {};
            $rootScope.$$editableBuffer[attrs.eForm] = $rootScope.$$editableBuffer[attrs.eForm] || [];
            $rootScope.$$editableBuffer[attrs.eForm].push(eCtrl);
            scope.$form = null; //will be re-assigned later
          }
        // !hasForm
        } else {
          // create editableform controller
          scope.$form = editableFormController();
          // add self to editable controller
          scope.$form.$addEditable(eCtrl);

          // if `e-form` provided, publish local $form in scope
          if(attrs.eForm) {
            ($parse(attrs.eForm).assign || angular.noop)(scope.$parent, scope.$form);
          }

          // bind click - if no external form defined
          if(!attrs.eForm || attrs.eClickable) {
            elem.addClass('editable-click');
            elem.bind(editableOptions.activationEvent, function(e) {
              e.preventDefault();
              e.editable = eCtrl;
              if(!is_disabled()) {
                scope.$apply(function(){
                  scope.$form.$show();
                });
              }
            });
          }
        }

      }
    };
  };
}]);

/*
Returns editableForm controller
*/
angular.module('xeditable').factory('editableFormController', 
  ['$parse', '$document', '$rootScope', 'editablePromiseCollection', 'editableUtils',
  function($parse, $document, $rootScope, editablePromiseCollection, editableUtils) {

  // array of opened editable forms
  var shown = [];

  //Check if the child element correspond or is a descendant of the parent element
  var isSelfOrDescendant = function (parent, child) {
    if (child == parent) {
      return true;
    }

    var node = child.parentNode;
    while (node !== null) {
      if (node == parent) {
        return true;
      }
      node = node.parentNode;
    }
    return false;
  };
  
  //Check if it is a real blur : if the click event appear on a shown editable elem, this is not a blur.
  var isBlur = function(shown, event) {
    var isBlur = true;

    var editables = shown.$editables;
    angular.forEach(editables, function(v){
      var element = v.editorEl[0];
      if (isSelfOrDescendant(element, event.target))
        isBlur = false;
      
    });
    return isBlur;
  };
  
  // bind click to body: cancel|submit|ignore forms
  $document.bind('click', function(e) {
    // ignore right/middle button click
    if (e.which && e.which !== 1) {
      return;
    }

    var toCancel = [];
    var toSubmit = [];
    for (var i=0; i<shown.length; i++) {

      // exclude clicked
      if (shown[i]._clicked) {
        shown[i]._clicked = false;
        continue;
      }

      // exclude waiting
      if (shown[i].$waiting) {
        continue;
      }

      if (shown[i]._blur === 'cancel' && isBlur(shown[i], e)) {
        toCancel.push(shown[i]);
      }

      if (shown[i]._blur === 'submit' && isBlur(shown[i], e)) {
        toSubmit.push(shown[i]);
      }
    }

    if (toCancel.length || toSubmit.length) {
      $rootScope.$apply(function() {
        angular.forEach(toCancel, function(v){ v.$cancel(); });
        angular.forEach(toSubmit, function(v){ v.$submit(); });
      });
    }
  });
 
  $rootScope.$on('closeEdit', function() {
    for(var i=0; i < shown.length; i++) {
      shown[i].$hide();
    }
  }); 

  var base = {
    $addEditable: function(editable) {
      //console.log('add editable', editable.elem, editable.elem.bind);
      this.$editables.push(editable);

      //'on' is not supported in angular 1.0.8
      editable.elem.bind('$destroy', angular.bind(this, this.$removeEditable, editable));

      //bind editable's local $form to self (if not bound yet, below form) 
      if (!editable.scope.$form) {
        editable.scope.$form = this;
      }

      //if form already shown - call show() of new editable
      if (this.$visible) {
        editable.catchError(editable.show());
      }
      editable.catchError(editable.setWaiting(this.$waiting));
    },

    $removeEditable: function(editable) {
      //arrayRemove
      for(var i=0; i < this.$editables.length; i++) {
        if(this.$editables[i] === editable) {
          this.$editables.splice(i, 1);
          return;
        }
      }
    },

    /**
     * Shows form with editable controls.
     * 
     * @method $show()
     * @memberOf editable-form
     */
    $show: function() {
      if (this.$visible) {
        return;
      }

      this.$visible = true;

      var pc = editablePromiseCollection();

      //own show
      pc.when(this.$onshow());

      //clear errors
      this.$setError(null, '');

      //children show
      angular.forEach(this.$editables, function(editable) {
        pc.when(editable.show());
      });

      //wait promises and activate
      pc.then({
        onWait: angular.bind(this, this.$setWaiting), 
        onTrue: angular.bind(this, this.$activate), 
        onFalse: angular.bind(this, this.$activate), 
        onString: angular.bind(this, this.$activate)
      });

      // add to internal list of shown forms
      // setTimeout needed to prevent closing right after opening (e.g. when trigger by button)
      setTimeout(angular.bind(this, function() {
        // clear `clicked` to get ready for clicks on visible form
        this._clicked = false;
        if(editableUtils.indexOf(shown, this) === -1) {
          shown.push(this);
        }
      }), 0);      
    },

    /**
     * Sets focus on form field specified by `name`.<br/>
     * When trying to set the focus on a form field of a new row in the editable table, the `$activate` call needs to be wrapped in a `$timeout` call so that the form is rendered before the `$activate` function is called.
     * 
     * @method $activate(name)
     * @param {string} name name of field
     * @memberOf editable-form
     */
    $activate: function(name) {
      var i,
          selectionStart,
          selectionEnd;
      if (this.$editables.length) {
        //activate by name
        if (angular.isString(name)) {
          for(i=0; i<this.$editables.length; i++) {
            if (this.$editables[i].name === name) {
              this.$editables[i].activate();
              return;
            }
          }
        }

        //try activate error field
        for(i=0; i<this.$editables.length; i++) {
          if (this.$editables[i].error) {
            this.$editables[i].activate();
            return;
          }
        }

        //by default activate first field
        selectionStart = this.$editables[0].elem[0].selectionStart ? 
            this.$editables[0].elem[0].selectionStart : 
              this.$editables[0].elem[0].text ? this.$editables[0].elem[0].text.length :
                  this.$editables[0].elem[0].innerHTML ? this.$editables[0].elem[0].innerHTML.length : 0;
        selectionEnd = this.$editables[0].elem[0].selectionEnd ? 
            this.$editables[0].elem[0].selectionEnd : 
              this.$editables[0].elem[0].text ? this.$editables[0].elem[0].text.length :
                  this.$editables[0].elem[0].innerHTML ? this.$editables[0].elem[0].innerHTML.length : 0;
        this.$editables[0].activate(selectionStart, selectionEnd);
      }
    },

    /**
     * Hides form with editable controls without saving.
     * 
     * @method $hide()
     * @memberOf editable-form
     */
    $hide: function() {
      if (!this.$visible) {
        return;
      }      
      this.$visible = false;
      // self hide
      this.$onhide();
      // children's hide
      angular.forEach(this.$editables, function(editable) {
        editable.hide();
      });

      // remove from internal list of shown forms
      editableUtils.arrayRemove(shown, this);
    },

    /**
     * Triggers `oncancel` event and calls `$hide()`.
     * 
     * @method $cancel()
     * @memberOf editable-form
     */
    $cancel: function() {
      if (!this.$visible) {
        return;
      }      
      // self cancel
      this.$oncancel();
      // children's cancel      
      angular.forEach(this.$editables, function(editable) {
        editable.cancel();
      });
      // self hide
      this.$hide();
    },    

    $setWaiting: function(value) {
      this.$waiting = !!value;
      // we can't just set $waiting variable and use it via ng-disabled in children
      // because in editable-row form is not accessible
      angular.forEach(this.$editables, function(editable) {
        editable.setWaiting(!!value);
      });
    },

    /**
     * Shows error message for particular field.
     * 
     * @method $setError(name, msg)
     * @param {string} name name of field
     * @param {string} msg error message
     * @memberOf editable-form
     */
    $setError: function(name, msg) {
      angular.forEach(this.$editables, function(editable) {
        if(!name || editable.name === name) {
          editable.setError(msg);
        }
      });
    },

    $submit: function() {
      if (this.$waiting) {
        return;
      } 

      //clear errors
      this.$setError(null, '');

      //children onbeforesave
      var pc = editablePromiseCollection();
      angular.forEach(this.$editables, function(editable) {
        pc.when(editable.onbeforesave());
      });

      /*
      onbeforesave result:
      - true/undefined: save data and close form
      - false: close form without saving
      - string: keep form open and show error
      */
      pc.then({
        onWait: angular.bind(this, this.$setWaiting), 
        onTrue: angular.bind(this, checkSelf, true), 
        onFalse: angular.bind(this, checkSelf, false), 
        onString: angular.bind(this, this.$activate)
      });

      //save
      function checkSelf(childrenTrue){
        var pc = editablePromiseCollection();
        pc.when(this.$onbeforesave());
        pc.then({
          onWait: angular.bind(this, this.$setWaiting), 
          onTrue: childrenTrue ? angular.bind(this, this.$save) : angular.bind(this, this.$hide), 
          onFalse: angular.bind(this, this.$hide), 
          onString: angular.bind(this, this.$activate)
        });
      }
    },

    $save: function() {
      // write model for each editable
      angular.forEach(this.$editables, function(editable) {
        editable.save();
      });

      //call onaftersave of self and children
      var pc = editablePromiseCollection();
      pc.when(this.$onaftersave());
      angular.forEach(this.$editables, function(editable) {
        pc.when(editable.onaftersave());
      });

      /*
      onaftersave result:
      - true/undefined/false: just close form
      - string: keep form open and show error
      */
      pc.then({
        onWait: angular.bind(this, this.$setWaiting), 
        onTrue: angular.bind(this, this.$hide), 
        onFalse: angular.bind(this, this.$hide), 
        onString: angular.bind(this, this.$activate)
      });
    },

    $onshow: angular.noop,
    $oncancel: angular.noop,
    $onhide: angular.noop,
    $onbeforesave: angular.noop,
    $onaftersave: angular.noop
  };

  return function() {
    return angular.extend({
      $editables: [],
      /**
       * Form visibility flag.
       * 
       * @var {bool} $visible
       * @memberOf editable-form
       */
      $visible: false,
      /**
       * Form waiting flag. It becomes `true` when form is loading or saving data.
       * 
       * @var {bool} $waiting
       * @memberOf editable-form
       */
      $waiting: false,
      $data: {},
      _clicked: false,
      _blur: null
    }, base);
  };
}]);

/**
 * EditableForm directive. Should be defined in <form> containing editable controls.  
 * It add some usefull methods to form variable exposed to scope by `name="myform"` attribute.
 *
 * @namespace editable-form
 */
angular.module('xeditable').directive('editableForm',
  ['$rootScope', '$parse', 'editableFormController', 'editableOptions',
  function($rootScope, $parse, editableFormController, editableOptions) {
    return {
      restrict: 'A',
      require: ['form'],
      //require: ['form', 'editableForm'],
      //controller: EditableFormController,
      compile: function() {
        return {
          pre: function(scope, elem, attrs, ctrl) {
            var form = ctrl[0];
            var eForm;

            //if `editableForm` has value - publish smartly under this value
            //this is required only for single editor form that is created and removed
            if(attrs.editableForm) {
              if(scope[attrs.editableForm] && scope[attrs.editableForm].$show) {
                eForm = scope[attrs.editableForm];
                angular.extend(form, eForm);
              } else {
                eForm = editableFormController();
                scope[attrs.editableForm] = eForm;
                angular.extend(eForm, form);
              }
            } else { //just merge to form and publish if form has name
              eForm = editableFormController();
              angular.extend(form, eForm);
            }

            //read editables from buffer (that appeared before FORM tag)
            var buf = $rootScope.$$editableBuffer;
            var name = form.$name;
            if(name && buf && buf[name]) {
              angular.forEach(buf[name], function(editable) {
                eForm.$addEditable(editable);
              });
              delete buf[name];
            }
          },
          post: function(scope, elem, attrs, ctrl) {
            var eForm;

            if(attrs.editableForm && scope[attrs.editableForm] && scope[attrs.editableForm].$show) {
              eForm = scope[attrs.editableForm];
            } else {
              eForm = ctrl[0];
            }

            /**
             * Called when form is shown.
             * 
             * @var {method|attribute} onshow 
             * @memberOf editable-form
             */
            if(attrs.onshow) {
              eForm.$onshow = angular.bind(eForm, $parse(attrs.onshow), scope);
            }

            /**
             * Called when form hides after both save or cancel.
             * 
             * @var {method|attribute} onhide 
             * @memberOf editable-form
             */
            if(attrs.onhide) {
              eForm.$onhide = angular.bind(eForm, $parse(attrs.onhide), scope);
            }

            /**
             * Called when form is cancelled.
             * 
             * @var {method|attribute} oncancel
             * @memberOf editable-form
             */
            if(attrs.oncancel) {
              eForm.$oncancel = angular.bind(eForm, $parse(attrs.oncancel), scope);
            }

            /**
             * Whether form initially rendered in shown state.
             *
             * @var {bool|attribute} shown
             * @memberOf editable-form
             */
            if(attrs.shown && $parse(attrs.shown)(scope)) {
              eForm.$show();
            }

            /**
             * Action when form losses focus. Values: `cancel|submit|ignore`.
             * Default is `ignore`.
             * 
             * @var {string|attribute} blur
             * @memberOf editable-form
             */
            eForm._blur = attrs.blur || editableOptions.blurForm;

            // onbeforesave, onaftersave
            if(!attrs.ngSubmit && !attrs.submit) {
              /**
               * Called after all children `onbeforesave` callbacks but before saving form values
               * to model.  
               * If at least one children callback returns `non-string` - it will not not be called.  
               * See [editable-form demo](#editable-form) for details.
               * 
               * @var {method|attribute} onbeforesave
               * @memberOf editable-form
               * 
               */
              if(attrs.onbeforesave) {
                eForm.$onbeforesave = function() {
                  return $parse(attrs.onbeforesave)(scope, {$data: eForm.$data});
                };
              }

              /**
               * Called when form values are saved to model.  
               * See [editable-form demo](#editable-form) for details.
               * 
               * @var {method|attribute} onaftersave 
               * @memberOf editable-form
               * 
               */
              if(attrs.onaftersave) {
                eForm.$onaftersave = function() {
                  return $parse(attrs.onaftersave)(scope, {$data: eForm.$data});
                };
              }

              elem.bind('submit', function(event) {
                event.preventDefault();
                scope.$apply(function() {
                  eForm.$submit();
                });
              });
            }


            // click - mark form as clicked to exclude in document click handler
            elem.bind('click', function(e) {
              // ignore right/middle button click
              if (e.which && e.which !== 1) {
                return;
              }

              if (eForm.$visible) {
                eForm._clicked = true;
              }
            });   

          }
        };
      }
    };
}]);
/**
 * editablePromiseCollection
 *  
 * Collect results of function calls. Shows waiting if there are promises. 
 * Finally, applies callbacks if:
 * - onTrue(): all results are true and all promises resolved to true
 * - onFalse(): at least one result is false or promise resolved to false
 * - onString(): at least one result is string or promise rejected or promise resolved to string
 */

angular.module('xeditable').factory('editablePromiseCollection', ['$q', function($q) { 

  function promiseCollection() {
    return {
      promises: [],
      hasFalse: false,
      hasString: false,
      when: function(result, noPromise) {
        if (result === false) {
          this.hasFalse = true;
        } else if (!noPromise && angular.isObject(result)) {
          this.promises.push($q.when(result));
        } else if (angular.isString(result)){
          this.hasString = true;
        } else { //result === true || result === undefined || result === null
          return;
        }
      },
      //callbacks: onTrue, onFalse, onString
      then: function(callbacks) {
        callbacks = callbacks || {};
        var onTrue = callbacks.onTrue || angular.noop;
        var onFalse = callbacks.onFalse || angular.noop;
        var onString = callbacks.onString || angular.noop;
        var onWait = callbacks.onWait || angular.noop;

        var self = this;

        if (this.promises.length) {
          onWait(true);
          $q.all(this.promises).then(
            //all resolved       
            function(results) {
              onWait(false);
              //check all results via same `when` method (without checking promises)
              angular.forEach(results, function(result) {
                self.when(result, true);  
              });
              applyCallback();
            },
            //some rejected
            function(error) { 
              onWait(false);
              onString();
            }
            );
        } else {
          applyCallback();
        }

        function applyCallback() {
          if (!self.hasString && !self.hasFalse) {
            onTrue();
          } else if (!self.hasString && self.hasFalse) {
            onFalse();
          } else {
            onString();
          }
        }

      }
    };
  }

  return promiseCollection;

}]);

/**
 * editableUtils
 */
 angular.module('xeditable').factory('editableUtils', [function() {
  return {
    indexOf: function (array, obj) {
      if (array.indexOf) return array.indexOf(obj);

      for ( var i = 0; i < array.length; i++) {
        if (obj === array[i]) return i;
      }
      return -1;
    },

    arrayRemove: function (array, value) {
      var index = this.indexOf(array, value);
      if (index >= 0) {
        array.splice(index, 1);
      }
      return value;
    },

    // copy from https://github.com/angular/angular.js/blob/master/src/Angular.js
    camelToDash: function(str) {
      var SNAKE_CASE_REGEXP = /[A-Z]/g;
      return str.replace(SNAKE_CASE_REGEXP, function(letter, pos) {
        return (pos ? '-' : '') + letter.toLowerCase();
      });
    },

    dashToCamel: function(str) {
      var SPECIAL_CHARS_REGEXP = /([\:\-\_]+(.))/g;
      var MOZ_HACK_REGEXP = /^moz([A-Z])/;
      return str.
      replace(SPECIAL_CHARS_REGEXP, function(_, separator, letter, offset) {
        return offset ? letter.toUpperCase() : letter;
      }).
      replace(MOZ_HACK_REGEXP, 'Moz$1');
    },

    rename: function (tag, el) {
      if (el[0] && el[0].attributes) {
        var newEl = angular.element('<' + tag + '/>');
        newEl.html(el.html());
        var attrs = el[0].attributes;
        for (var i = 0; i < attrs.length; ++i) {
            newEl.attr(attrs.item(i).nodeName, attrs.item(i).value);
        }
        return newEl;
      }
    }
  };
}]);

/**
 * editableNgOptionsParser
 *
 * see: https://github.com/angular/angular.js/blob/master/src/ng/directive/select.js#L131
 */
 angular.module('xeditable').factory('editableNgOptionsParser', [function() {
  //0000111110000000000022220000000000000000000000333300000000000000444444444444444000000000555555555555555000000066666666666666600000000000000007777000000000000000000088888
  var NG_OPTIONS_REGEXP = /^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;

  function parser(optionsExp) {
    var match;

    if (! (match = optionsExp.match(NG_OPTIONS_REGEXP))) {
      throw 'ng-options parse error';
    }

    var 
    displayFn = match[2] || match[1],
    valueName = match[4] || match[6],
    keyName = match[5],
    groupByFn = match[3] || '',
    valueFn = match[2] ? match[1] : valueName,
    valuesFn = match[7],
    track = match[8],
    trackFn = track ? match[8] : null;

    var ngRepeat;
    if (keyName === undefined) { // array
      ngRepeat = valueName + ' in ' + valuesFn;
      if (track !== undefined) {
        ngRepeat += ' track by '+trackFn;
      }
    } else { // object
      ngRepeat = '('+keyName+', '+valueName+') in '+valuesFn;
    }
    
    // group not supported yet
    return {
      ngRepeat: ngRepeat,
      locals: {
        valueName: valueName,
        keyName: keyName,
        valueFn: valueFn,
        displayFn: displayFn
      }
    };
  }

  return parser;
}]);

/**
 * editableCombodate
 *
 * angular version of https://github.com/vitalets/combodate
 */
angular.module('xeditable').factory('editableCombodate', [function() {
  function Combodate(element, options) {
    this.$element = angular.element(element);

    if(this.$element[0].nodeName != 'INPUT') {
      throw 'Combodate should be applied to INPUT element';
    }

    var currentYear = new Date().getFullYear();
    this.defaults = {
      //in this format value stored in original input
      format: 'YYYY-MM-DD HH:mm',
      //in this format items in dropdowns are displayed
      template: 'D / MMM / YYYY   H : mm',
      //initial value, can be `new Date()`
      value: null,
      minYear: 1970,
      maxYear: currentYear,
      yearDescending: true,
      minuteStep: 5,
      secondStep: 1,
      firstItem: 'empty', //'name', 'empty', 'none'
      errorClass: null,
      customClass: '',
      roundTime: true, // whether to round minutes and seconds if step > 1
      smartDays: true // whether days in combo depend on selected month: 31, 30, 28
    };

    this.options = angular.extend({}, this.defaults, options);
    this.init();
  }

  Combodate.prototype = {
    constructor: Combodate,
    init: function () {
      this.map = {
        //key   regexp    moment.method
        day:    ['D',    'date'], 
        month:  ['M',    'month'], 
        year:   ['Y',    'year'], 
        hour:   ['[Hh]', 'hours'],
        minute: ['m',    'minutes'], 
        second: ['s',    'seconds'],
        ampm:   ['[Aa]', ''] 
      };
      
      this.$widget = angular.element('<span class="combodate"></span>').html(this.getTemplate());
      
      this.initCombos();
      
      if (this.options.smartDays) {
        var combo = this;
        this.$widget.find('select').bind('change', function(e) {
          // update days count if month or year changes
          if (angular.element(e.target).hasClass('month') || angular.element(e.target).hasClass('year')) {
            combo.fillCombo('day');
          }
        });        
      }

      this.$widget.find('select').css('width', 'auto');

      // hide original input and insert widget                                       
      this.$element.css('display', 'none').after(this.$widget);
      
      // set initial value
      this.setValue(this.$element.val() || this.options.value);
    },
    
    /*
     Replace tokens in template with <select> elements 
     */         
     getTemplate: function() {
      var tpl = this.options.template;
      var customClass = this.options.customClass;

      //first pass
      angular.forEach(this.map, function(v, k) {
        v = v[0]; 
        var r = new RegExp(v+'+');
        var token = v.length > 1 ? v.substring(1, 2) : v;
        
        tpl = tpl.replace(r, '{'+token+'}');
      });

      //replace spaces with &nbsp;
      tpl = tpl.replace(/ /g, '&nbsp;');

      //second pass
      angular.forEach(this.map, function(v, k) {
        v = v[0];
        var token = v.length > 1 ? v.substring(1, 2) : v;

        tpl = tpl.replace('{'+token+'}', '<select class="'+k+' '+customClass+'"></select>');
      });   

      return tpl;
    },
    
    /*
     Initialize combos that presents in template 
     */        
     initCombos: function() {
      for (var k in this.map) {
        var c = this.$widget[0].querySelectorAll('.'+k);
        // set properties like this.$day, this.$month etc.
        this['$'+k] = c.length ? angular.element(c) : null;
        // fill with items
        this.fillCombo(k);
      }
    },

    /*
     Fill combo with items 
     */        
     fillCombo: function(k) {
      var $combo = this['$'+k];
      if (!$combo) {
        return;
      }

      // define method name to fill items, e.g `fillDays`
      var f = 'fill' + k.charAt(0).toUpperCase() + k.slice(1); 
      var items = this[f]();
      var value = $combo.val();

      $combo.html('');
      for(var i=0; i<items.length; i++) {
        $combo.append('<option value="'+items[i][0]+'">'+items[i][1]+'</option>');
      }

      $combo.val(value);
    },

    /*
     Initialize items of combos. Handles `firstItem` option 
     */
     fillCommon: function(key) {
      var values = [], relTime;

      if(this.options.firstItem === 'name') {
        //need both to support moment ver < 2 and  >= 2
        relTime = moment.relativeTime || moment.langData()._relativeTime; 
        var header = typeof relTime[key] === 'function' ? relTime[key](1, true, key, false) : relTime[key];
        //take last entry (see momentjs lang files structure) 
        header = header.split(' ').reverse()[0];                
        values.push(['', header]);
      } else if(this.options.firstItem === 'empty') {
        values.push(['', '']);
      }
      return values;
    },  


    /*
    fill day
    */
    fillDay: function() {
      var items = this.fillCommon('d'), name, i,
      twoDigit = this.options.template.indexOf('DD') !== -1,
      daysCount = 31;

      // detect days count (depends on month and year)
      // originally https://github.com/vitalets/combodate/pull/7
      if (this.options.smartDays && this.$month && this.$year) {
        var month = parseInt(this.$month.val(), 10);
        var year = parseInt(this.$year.val(), 10);

        if (!isNaN(month) && !isNaN(year)) {
          daysCount = moment([year, month]).daysInMonth();
        }
      }

      for (i = 1; i <= daysCount; i++) {
        name = twoDigit ? this.leadZero(i) : i;
        items.push([i, name]);
      }
      return items;
    },
    
    /*
    fill month
    */
    fillMonth: function() {
      var items = this.fillCommon('M'), name, i, 
      longNames = this.options.template.indexOf('MMMM') !== -1,
      shortNames = this.options.template.indexOf('MMM') !== -1,
      twoDigit = this.options.template.indexOf('MM') !== -1;

      for(i=0; i<=11; i++) {
        if(longNames) {
          //see https://github.com/timrwood/momentjs.com/pull/36
          name = moment().date(1).month(i).format('MMMM');
        } else if(shortNames) {
          name = moment().date(1).month(i).format('MMM');
        } else if(twoDigit) {
          name = this.leadZero(i+1);
        } else {
          name = i+1;
        }
        items.push([i, name]);
      } 
      return items;
    },
    
    /*
    fill year
    */
    fillYear: function() {
      var items = [], name, i, 
      longNames = this.options.template.indexOf('YYYY') !== -1;

      for(i=this.options.maxYear; i>=this.options.minYear; i--) {
        name = longNames ? i : (i+'').substring(2);
        items[this.options.yearDescending ? 'push' : 'unshift']([i, name]);
      }
      
      items = this.fillCommon('y').concat(items);
      
      return items;
    },
    
    /*
    fill hour
    */
    fillHour: function() {
      var items = this.fillCommon('h'), name, i,
      h12 = this.options.template.indexOf('h') !== -1,
      h24 = this.options.template.indexOf('H') !== -1,
      twoDigit = this.options.template.toLowerCase().indexOf('hh') !== -1,
      min = h12 ? 1 : 0, 
      max = h12 ? 12 : 23;

      for(i=min; i<=max; i++) {
        name = twoDigit ? this.leadZero(i) : i;
        items.push([i, name]);
      } 
      return items;
    },

    /*
    fill minute
    */
    fillMinute: function() {
      var items = this.fillCommon('m'), name, i,
      twoDigit = this.options.template.indexOf('mm') !== -1;

      for(i=0; i<=59; i+= this.options.minuteStep) {
        name = twoDigit ? this.leadZero(i) : i;
        items.push([i, name]);
      }
      return items;
    },
    
    /*
    fill second
    */
    fillSecond: function() {
      var items = this.fillCommon('s'), name, i,
      twoDigit = this.options.template.indexOf('ss') !== -1;

      for(i=0; i<=59; i+= this.options.secondStep) {
        name = twoDigit ? this.leadZero(i) : i;
        items.push([i, name]);
      }    
      return items;
    },
    
    /*
    fill ampm
    */
    fillAmpm: function() {
      var ampmL = this.options.template.indexOf('a') !== -1,
      ampmU = this.options.template.indexOf('A') !== -1,            
      items = [
      ['am', ampmL ? 'am' : 'AM'],
      ['pm', ampmL ? 'pm' : 'PM']
      ];
      return items;
    },

    /*
     Returns current date value from combos. 
     If format not specified - `options.format` used.
     If format = `null` - Moment object returned.
     */
     getValue: function(format) {
      var dt, values = {}, 
      that = this,
      notSelected = false;

      //getting selected values    
      angular.forEach(this.map, function(v, k) {
        if(k === 'ampm') {
          return;
        }
        var def = k === 'day' ? 1 : 0;

        values[k] = that['$'+k] ? parseInt(that['$'+k].val(), 10) : def; 
        
        if(isNaN(values[k])) {
         notSelected = true;
         return false; 
       }
     });
      
      //if at least one visible combo not selected - return empty string
      if(notSelected) {
       return '';
     }

      //convert hours 12h --> 24h 
      if(this.$ampm) {
        //12:00 pm --> 12:00 (24-h format, midday), 12:00 am --> 00:00 (24-h format, midnight, start of day)
        if(values.hour === 12) {
          values.hour = this.$ampm.val() === 'am' ? 0 : 12;                    
        } else {
          values.hour = this.$ampm.val() === 'am' ? values.hour : values.hour+12;
        }
      }
      
      dt = moment([values.year, values.month, values.day, values.hour, values.minute, values.second]);
      
      //highlight invalid date
      this.highlight(dt);

      format = format === undefined ? this.options.format : format;
      if(format === null) {
       return dt.isValid() ? dt : null; 
     } else {
       return dt.isValid() ? dt.format(format) : ''; 
     }
   },

   setValue: function(value) {
    if(!value) {
      return;
    }

      // parse in strict mode (third param `true`)
      var dt = typeof value === 'string' ? moment(value, this.options.format, true) : moment(value),
      that = this,
      values = {};
      
      //function to find nearest value in select options
      function getNearest($select, value) {
        var delta = {};
        angular.forEach($select.children('option'), function(opt, i){
          var optValue = angular.element(opt).attr('value');

          if(optValue === '') return;
          var distance = Math.abs(optValue - value); 
          if(typeof delta.distance === 'undefined' || distance < delta.distance) {
            delta = {value: optValue, distance: distance};
          } 
        }); 
        return delta.value;
      }
      
      if(dt.isValid()) {
        //read values from date object
        angular.forEach(this.map, function(v, k) {
          if(k === 'ampm') {
            return; 
          }
          values[k] = dt[v[1]]();
        });

        if(this.$ampm) {
          //12:00 pm --> 12:00 (24-h format, midday), 12:00 am --> 00:00 (24-h format, midnight, start of day)
          if(values.hour >= 12) {
            values.ampm = 'pm';
            if(values.hour > 12) {
              values.hour -= 12;
            }
          } else {
            values.ampm = 'am';
            if(values.hour === 0) {
              values.hour = 12;
            }
          }
        }

        angular.forEach(values, function(v, k) {
          //call val() for each existing combo, e.g. this.$hour.val()
          if(that['$'+k]) {

            if(k === 'minute' && that.options.minuteStep > 1 && that.options.roundTime) {
             v = getNearest(that['$'+k], v);
           }
           
           if(k === 'second' && that.options.secondStep > 1 && that.options.roundTime) {
             v = getNearest(that['$'+k], v);
           }                       
           
           that['$'+k].val(v);
         }
       });

        // update days count
        if (this.options.smartDays) {
          this.fillCombo('day');
        }

        this.$element.val(dt.format(this.options.format)).triggerHandler('change');
      }
    },
    
    /*
     highlight combos if date is invalid
     */
     highlight: function(dt) {
      if(!dt.isValid()) {
        if(this.options.errorClass) {
          this.$widget.addClass(this.options.errorClass);
        } else {
          //store original border color
          if(!this.borderColor) {
            this.borderColor = this.$widget.find('select').css('border-color'); 
          }
          this.$widget.find('select').css('border-color', 'red');
        }
      } else {
        if(this.options.errorClass) {
          this.$widget.removeClass(this.options.errorClass);
        } else {
          this.$widget.find('select').css('border-color', this.borderColor);
        }  
      }
    },
    
    leadZero: function(v) {
      return v <= 9 ? '0' + v : v; 
    },
    
    destroy: function() {
      this.$widget.remove();
      this.$element.removeData('combodate').show();
    }

  };

  return {
    getInstance: function(element, options) {
      return new Combodate(element, options);
    }
  };
}]);

/*
Editable icons:
- default
- font-awesome

*/
angular.module('xeditable').factory('editableIcons', function() {

  var icons = {
    //Icon-set to use, defaults to bootstrap icons
    default: {
      'bs2': {
        ok: 'icon-ok icon-white',
        cancel: 'icon-remove',
        clear: 'icon-trash'
      },
      'bs3': {
        ok: 'glyphicon glyphicon-ok',
        cancel: 'glyphicon glyphicon-remove',
        clear: 'glyphicon glyphicon-trash'
      }
    },
    external: {
      'font-awesome': {
        ok: 'fa fa-check',
        cancel: 'fa fa-times',
        clear: 'fa fa-trash'
      }
    }
  };

  return icons;
});

/* jshint -W086 */
/*
Editable themes:
- default
- bootstrap 2
- bootstrap 3
- semantic-ui

Note: in postrender() `this` is instance of editableController
*/
angular.module('xeditable').factory('editableThemes', function() {
  var themes = {
    //default
    'default': {
      formTpl:      '<form class="editable-wrap"></form>',
      noformTpl:    '<span class="editable-wrap"></span>',
      controlsTpl:  '<span class="editable-controls"></span>',
      inputTpl:     '',
      errorTpl:     '<div class="editable-error" data-ng-if="$error" data-ng-bind-html="$error"></div>',
      buttonsTpl:   '<span class="editable-buttons"></span>',
      submitTpl:    '<button type="submit">save</button>',
      cancelTpl:    '<button type="button" ng-click="$form.$cancel()">cancel</button>',
      resetTpl:    '<button type="reset">clear</button>'
    },

    //bs2
    'bs2': {
      formTpl:     '<form class="form-inline editable-wrap" role="form"></form>',
      noformTpl:   '<span class="editable-wrap"></span>',
      controlsTpl: '<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',
      inputTpl:    '',
      errorTpl:    '<div class="editable-error help-block" data-ng-if="$error" data-ng-bind-html="$error"></div>',
      buttonsTpl:  '<span class="editable-buttons"></span>',
      submitTpl:   '<button type="submit" class="btn btn-primary"><span></span></button>',
      cancelTpl:   '<button type="button" class="btn" ng-click="$form.$cancel()">'+
                      '<span></span>'+
                   '</button>',
      resetTpl:    '<button type="reset" class="btn btn-danger">clear</button>'

    },

    //bs3
    'bs3': {
      formTpl:     '<form class="form-inline editable-wrap" role="form"></form>',
      noformTpl:   '<span class="editable-wrap"></span>',
      controlsTpl: '<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',
      inputTpl:    '',
      errorTpl:    '<div class="editable-error help-block" data-ng-if="$error" data-ng-bind-html="$error"></div>',
      buttonsTpl:  '<span class="editable-buttons"></span>',
      submitTpl:   '<button type="submit" class="btn btn-primary"><span></span></button>',
      cancelTpl:   '<button type="button" class="btn btn-default" ng-click="$form.$cancel()">'+
                     '<span></span>'+
                   '</button>',
      resetTpl:    '<button type="reset" class="btn btn-danger">clear</button>',

      //bs3 specific prop to change buttons class: btn-sm, btn-lg
      buttonsClass: '',
      //bs3 specific prop to change standard inputs class: input-sm, input-lg
      inputClass: '',
      postrender: function() {
        //apply `form-control` class to std inputs
        switch(this.directiveName) {
          case 'editableText':
          case 'editableSelect':
          case 'editableTextarea':
          case 'editableEmail':
          case 'editableTel':
          case 'editableNumber':
          case 'editableUrl':
          case 'editableSearch':
          case 'editableDate':
          case 'editableDatetime':
          case 'editableBsdate':
          case 'editableTime':
          case 'editableMonth':
          case 'editableWeek':
          case 'editablePassword':
          case 'editableDatetimeLocal':
            this.inputEl.addClass('form-control');
            if(this.theme.inputClass) {
              // don`t apply `input-sm` and `input-lg` to select multiple
              // should be fixed in bs itself!
              if(this.inputEl.attr('multiple') &&
                (this.theme.inputClass === 'input-sm' || this.theme.inputClass === 'input-lg')) {
                  break;
              }
              this.inputEl.addClass(this.theme.inputClass);
            }
          break;
          case 'editableCheckbox':
              this.editorEl.addClass('checkbox');
        }

        //apply buttonsClass (bs3 specific!)
        if(this.buttonsEl && this.theme.buttonsClass) {
          this.buttonsEl.find('button').addClass(this.theme.buttonsClass);
        }
      }
    },
    
    //semantic-ui
    'semantic': {
      formTpl:     '<form class="editable-wrap ui form" ng-class="{\'error\': $error}" role="form"></form>',
      noformTpl:   '<span class="editable-wrap"></span>',
      controlsTpl: '<div class="editable-controls ui fluid input" ng-class="{\'error\': $error}"></div>',
      inputTpl:    '',
      errorTpl:    '<div class="editable-error ui error message" data-ng-if="$error" data-ng-bind-html="$error"></div>',
      buttonsTpl:  '<span class="mini ui buttons"></span>',
      submitTpl:   '<button type="submit" class="ui primary button"><i class="ui check icon"></i></button>',
      cancelTpl:   '<button type="button" class="ui button" ng-click="$form.$cancel()">'+
                      '<i class="ui cancel icon"></i>'+
                   '</button>',
      resetTpl:    '<button type="reset" class="ui button">clear</button>'
    }
  };

  return themes;
});
;
/*
 *
 * More info at [www.dropzonejs.com](http://www.dropzonejs.com)
 *
 * Copyright (c) 2012, Matias Meno
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */

(function() {
  var Dropzone, Emitter, ExifRestore, camelize, contentLoaded, detectVerticalSquash, drawImageIOSFix, noop, without,
    slice = [].slice,
    extend1 = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  noop = function() {};

  Emitter = (function() {
    function Emitter() {}

    Emitter.prototype.addEventListener = Emitter.prototype.on;

    Emitter.prototype.on = function(event, fn) {
      this._callbacks = this._callbacks || {};
      if (!this._callbacks[event]) {
        this._callbacks[event] = [];
      }
      this._callbacks[event].push(fn);
      return this;
    };

    Emitter.prototype.emit = function() {
      var args, callback, callbacks, event, j, len;
      event = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      this._callbacks = this._callbacks || {};
      callbacks = this._callbacks[event];
      if (callbacks) {
        for (j = 0, len = callbacks.length; j < len; j++) {
          callback = callbacks[j];
          callback.apply(this, args);
        }
      }
      return this;
    };

    Emitter.prototype.removeListener = Emitter.prototype.off;

    Emitter.prototype.removeAllListeners = Emitter.prototype.off;

    Emitter.prototype.removeEventListener = Emitter.prototype.off;

    Emitter.prototype.off = function(event, fn) {
      var callback, callbacks, i, j, len;
      if (!this._callbacks || arguments.length === 0) {
        this._callbacks = {};
        return this;
      }
      callbacks = this._callbacks[event];
      if (!callbacks) {
        return this;
      }
      if (arguments.length === 1) {
        delete this._callbacks[event];
        return this;
      }
      for (i = j = 0, len = callbacks.length; j < len; i = ++j) {
        callback = callbacks[i];
        if (callback === fn) {
          callbacks.splice(i, 1);
          break;
        }
      }
      return this;
    };

    return Emitter;

  })();

  Dropzone = (function(superClass) {
    var extend, resolveOption;

    extend1(Dropzone, superClass);

    Dropzone.prototype.Emitter = Emitter;


    /*
    This is a list of all available events you can register on a dropzone object.
    
    You can register an event handler like this:
    
        dropzone.on("dragEnter", function() { });
     */

    Dropzone.prototype.events = ["drop", "dragstart", "dragend", "dragenter", "dragover", "dragleave", "addedfile", "addedfiles", "removedfile", "thumbnail", "error", "errormultiple", "processing", "processingmultiple", "uploadprogress", "totaluploadprogress", "sending", "sendingmultiple", "success", "successmultiple", "canceled", "canceledmultiple", "complete", "completemultiple", "reset", "maxfilesexceeded", "maxfilesreached", "queuecomplete"];

    Dropzone.prototype.defaultOptions = {
      url: null,
      method: "post",
      withCredentials: false,
      timeout: 30000,
      parallelUploads: 2,
      uploadMultiple: false,
      maxFilesize: 256,
      paramName: "file",
      createImageThumbnails: true,
      maxThumbnailFilesize: 10,
      thumbnailWidth: 120,
      thumbnailHeight: 120,
      thumbnailMethod: 'crop',
      resizeWidth: null,
      resizeHeight: null,
      resizeMimeType: null,
      resizeQuality: 0.8,
      resizeMethod: 'contain',
      filesizeBase: 1000,
      maxFiles: null,
      params: {},
      headers: null,
      clickable: true,
      ignoreHiddenFiles: true,
      acceptedFiles: null,
      acceptedMimeTypes: null,
      autoProcessQueue: true,
      autoQueue: true,
      addRemoveLinks: false,
      previewsContainer: null,
      hiddenInputContainer: "body",
      capture: null,
      renameFilename: null,
      renameFile: null,
      forceFallback: false,
      dictDefaultMessage: "Drop files here to upload",
      dictFallbackMessage: "Your browser does not support drag'n'drop file uploads.",
      dictFallbackText: "Please use the fallback form below to upload your files like in the olden days.",
      dictFileTooBig: "File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",
      dictInvalidFileType: "You can't upload files of this type.",
      dictResponseError: "Server responded with {{statusCode}} code.",
      dictCancelUpload: "Cancel upload",
      dictCancelUploadConfirmation: "Are you sure you want to cancel this upload?",
      dictRemoveFile: "Remove file",
      dictRemoveFileConfirmation: null,
      dictMaxFilesExceeded: "You can not upload any more files.",
      dictFileSizeUnits: {
        tb: "TB",
        gb: "GB",
        mb: "MB",
        kb: "KB",
        b: "b"
      },
      init: function() {
        return noop;
      },
      accept: function(file, done) {
        return done();
      },
      fallback: function() {
        var child, j, len, messageElement, ref, span;
        this.element.className = this.element.className + " dz-browser-not-supported";
        ref = this.element.getElementsByTagName("div");
        for (j = 0, len = ref.length; j < len; j++) {
          child = ref[j];
          if (/(^| )dz-message($| )/.test(child.className)) {
            messageElement = child;
            child.className = "dz-message";
            continue;
          }
        }
        if (!messageElement) {
          messageElement = Dropzone.createElement("<div class=\"dz-message\"><span></span></div>");
          this.element.appendChild(messageElement);
        }
        span = messageElement.getElementsByTagName("span")[0];
        if (span) {
          if (span.textContent != null) {
            span.textContent = this.options.dictFallbackMessage;
          } else if (span.innerText != null) {
            span.innerText = this.options.dictFallbackMessage;
          }
        }
        return this.element.appendChild(this.getFallbackForm());
      },
      resize: function(file, width, height, resizeMethod) {
        var info, srcRatio, trgRatio;
        info = {
          srcX: 0,
          srcY: 0,
          srcWidth: file.width,
          srcHeight: file.height
        };
        srcRatio = file.width / file.height;
        if ((width == null) && (height == null)) {
          width = info.srcWidth;
          height = info.srcHeight;
        } else if (width == null) {
          width = height * srcRatio;
        } else if (height == null) {
          height = width / srcRatio;
        }
        width = Math.min(width, info.srcWidth);
        height = Math.min(height, info.srcHeight);
        trgRatio = width / height;
        if (info.srcWidth > width || info.srcHeight > height) {
          if (resizeMethod === 'crop') {
            if (srcRatio > trgRatio) {
              info.srcHeight = file.height;
              info.srcWidth = info.srcHeight * trgRatio;
            } else {
              info.srcWidth = file.width;
              info.srcHeight = info.srcWidth / trgRatio;
            }
          } else if (resizeMethod === 'contain') {
            if (srcRatio > trgRatio) {
              height = width / srcRatio;
            } else {
              width = height * srcRatio;
            }
          } else {
            throw new Error("Unknown resizeMethod '" + resizeMethod + "'");
          }
        }
        info.srcX = (file.width - info.srcWidth) / 2;
        info.srcY = (file.height - info.srcHeight) / 2;
        info.trgWidth = width;
        info.trgHeight = height;
        return info;
      },
      transformFile: function(file, done) {
        if ((this.options.resizeWidth || this.options.resizeHeight) && file.type.match(/image.*/)) {
          return this.resizeImage(file, this.options.resizeWidth, this.options.resizeHeight, this.options.resizeMethod, done);
        } else {
          return done(file);
        }
      },
      previewTemplate: "<div class=\"dz-preview dz-file-preview\">\n  <div class=\"dz-image\"><img data-dz-thumbnail /></div>\n  <div class=\"dz-details\">\n    <div class=\"dz-size\"><span data-dz-size></span></div>\n    <div class=\"dz-filename\"><span data-dz-name></span></div>\n  </div>\n  <div class=\"dz-progress\"><span class=\"dz-upload\" data-dz-uploadprogress></span></div>\n  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>\n  <div class=\"dz-success-mark\">\n    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      <title>Check</title>\n      <defs></defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        <path d=\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" stroke-opacity=\"0.198794158\" stroke=\"#747474\" fill-opacity=\"0.816519475\" fill=\"#FFFFFF\" sketch:type=\"MSShapeGroup\"></path>\n      </g>\n    </svg>\n  </div>\n  <div class=\"dz-error-mark\">\n    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      <title>Error</title>\n      <defs></defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        <g id=\"Check-+-Oval-2\" sketch:type=\"MSLayerGroup\" stroke=\"#747474\" stroke-opacity=\"0.198794158\" fill=\"#FFFFFF\" fill-opacity=\"0.816519475\">\n          <path d=\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" sketch:type=\"MSShapeGroup\"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>",

      /*
      Those functions register themselves to the events on init and handle all
      the user interface specific stuff. Overwriting them won't break the upload
      but can break the way it's displayed.
      You can overwrite them if you don't like the default behavior. If you just
      want to add an additional event handler, register it on the dropzone object
      and don't overwrite those options.
       */
      drop: function(e) {
        return this.element.classList.remove("dz-drag-hover");
      },
      dragstart: noop,
      dragend: function(e) {
        return this.element.classList.remove("dz-drag-hover");
      },
      dragenter: function(e) {
        return this.element.classList.add("dz-drag-hover");
      },
      dragover: function(e) {
        return this.element.classList.add("dz-drag-hover");
      },
      dragleave: function(e) {
        return this.element.classList.remove("dz-drag-hover");
      },
      paste: noop,
      reset: function() {
        return this.element.classList.remove("dz-started");
      },
      addedfile: function(file) {
        var j, k, l, len, len1, len2, node, ref, ref1, ref2, removeFileEvent, removeLink, results;
        if (this.element === this.previewsContainer) {
          this.element.classList.add("dz-started");
        }
        if (this.previewsContainer) {
          file.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());
          file.previewTemplate = file.previewElement;
          this.previewsContainer.appendChild(file.previewElement);
          ref = file.previewElement.querySelectorAll("[data-dz-name]");
          for (j = 0, len = ref.length; j < len; j++) {
            node = ref[j];
            node.textContent = file.upload.filename;
          }
          ref1 = file.previewElement.querySelectorAll("[data-dz-size]");
          for (k = 0, len1 = ref1.length; k < len1; k++) {
            node = ref1[k];
            node.innerHTML = this.filesize(file.size);
          }
          if (this.options.addRemoveLinks) {
            file._removeLink = Dropzone.createElement("<a class=\"dz-remove\" href=\"javascript:undefined;\" data-dz-remove>" + this.options.dictRemoveFile + "</a>");
            file.previewElement.appendChild(file._removeLink);
          }
          removeFileEvent = (function(_this) {
            return function(e) {
              e.preventDefault();
              e.stopPropagation();
              if (file.status === Dropzone.UPLOADING) {
                return Dropzone.confirm(_this.options.dictCancelUploadConfirmation, function() {
                  return _this.removeFile(file);
                });
              } else {
                if (_this.options.dictRemoveFileConfirmation) {
                  return Dropzone.confirm(_this.options.dictRemoveFileConfirmation, function() {
                    return _this.removeFile(file);
                  });
                } else {
                  return _this.removeFile(file);
                }
              }
            };
          })(this);
          ref2 = file.previewElement.querySelectorAll("[data-dz-remove]");
          results = [];
          for (l = 0, len2 = ref2.length; l < len2; l++) {
            removeLink = ref2[l];
            results.push(removeLink.addEventListener("click", removeFileEvent));
          }
          return results;
        }
      },
      removedfile: function(file) {
        var ref;
        if (file.previewElement) {
          if ((ref = file.previewElement) != null) {
            ref.parentNode.removeChild(file.previewElement);
          }
        }
        return this._updateMaxFilesReachedClass();
      },
      thumbnail: function(file, dataUrl) {
        var j, len, ref, thumbnailElement;
        if (file.previewElement) {
          file.previewElement.classList.remove("dz-file-preview");
          ref = file.previewElement.querySelectorAll("[data-dz-thumbnail]");
          for (j = 0, len = ref.length; j < len; j++) {
            thumbnailElement = ref[j];
            thumbnailElement.alt = file.name;
            thumbnailElement.src = dataUrl;
          }
          return setTimeout(((function(_this) {
            return function() {
              return file.previewElement.classList.add("dz-image-preview");
            };
          })(this)), 1);
        }
      },
      error: function(file, message) {
        var j, len, node, ref, results;
        if (file.previewElement) {
          file.previewElement.classList.add("dz-error");
          if (typeof message !== "String" && message.error) {
            message = message.error;
          }
          ref = file.previewElement.querySelectorAll("[data-dz-errormessage]");
          results = [];
          for (j = 0, len = ref.length; j < len; j++) {
            node = ref[j];
            results.push(node.textContent = message);
          }
          return results;
        }
      },
      errormultiple: noop,
      processing: function(file) {
        if (file.previewElement) {
          file.previewElement.classList.add("dz-processing");
          if (file._removeLink) {
            return file._removeLink.textContent = this.options.dictCancelUpload;
          }
        }
      },
      processingmultiple: noop,
      uploadprogress: function(file, progress, bytesSent) {
        var j, len, node, ref, results;
        if (file.previewElement) {
          ref = file.previewElement.querySelectorAll("[data-dz-uploadprogress]");
          results = [];
          for (j = 0, len = ref.length; j < len; j++) {
            node = ref[j];
            if (node.nodeName === 'PROGRESS') {
              results.push(node.value = progress);
            } else {
              results.push(node.style.width = progress + "%");
            }
          }
          return results;
        }
      },
      totaluploadprogress: noop,
      sending: noop,
      sendingmultiple: noop,
      success: function(file) {
        if (file.previewElement) {
          return file.previewElement.classList.add("dz-success");
        }
      },
      successmultiple: noop,
      canceled: function(file) {
        return this.emit("error", file, "Upload canceled.");
      },
      canceledmultiple: noop,
      complete: function(file) {
        if (file._removeLink) {
          file._removeLink.textContent = this.options.dictRemoveFile;
        }
        if (file.previewElement) {
          return file.previewElement.classList.add("dz-complete");
        }
      },
      completemultiple: noop,
      maxfilesexceeded: noop,
      maxfilesreached: noop,
      queuecomplete: noop,
      addedfiles: noop
    };

    extend = function() {
      var j, key, len, object, objects, target, val;
      target = arguments[0], objects = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      for (j = 0, len = objects.length; j < len; j++) {
        object = objects[j];
        for (key in object) {
          val = object[key];
          target[key] = val;
        }
      }
      return target;
    };

    function Dropzone(element1, options) {
      var elementOptions, fallback, ref;
      this.element = element1;
      this.version = Dropzone.version;
      this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\n*/g, "");
      this.clickableElements = [];
      this.listeners = [];
      this.files = [];
      if (typeof this.element === "string") {
        this.element = document.querySelector(this.element);
      }
      if (!(this.element && (this.element.nodeType != null))) {
        throw new Error("Invalid dropzone element.");
      }
      if (this.element.dropzone) {
        throw new Error("Dropzone already attached.");
      }
      Dropzone.instances.push(this);
      this.element.dropzone = this;
      elementOptions = (ref = Dropzone.optionsForElement(this.element)) != null ? ref : {};
      this.options = extend({}, this.defaultOptions, elementOptions, options != null ? options : {});
      if (this.options.forceFallback || !Dropzone.isBrowserSupported()) {
        return this.options.fallback.call(this);
      }
      if (this.options.url == null) {
        this.options.url = this.element.getAttribute("action");
      }
      if (!this.options.url) {
        throw new Error("No URL provided.");
      }
      if (this.options.acceptedFiles && this.options.acceptedMimeTypes) {
        throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");
      }
      if (this.options.acceptedMimeTypes) {
        this.options.acceptedFiles = this.options.acceptedMimeTypes;
        delete this.options.acceptedMimeTypes;
      }
      if (this.options.renameFilename != null) {
        this.options.renameFile = (function(_this) {
          return function(file) {
            return _this.options.renameFilename.call(_this, file.name, file);
          };
        })(this);
      }
      this.options.method = this.options.method.toUpperCase();
      if ((fallback = this.getExistingFallback()) && fallback.parentNode) {
        fallback.parentNode.removeChild(fallback);
      }
      if (this.options.previewsContainer !== false) {
        if (this.options.previewsContainer) {
          this.previewsContainer = Dropzone.getElement(this.options.previewsContainer, "previewsContainer");
        } else {
          this.previewsContainer = this.element;
        }
      }
      if (this.options.clickable) {
        if (this.options.clickable === true) {
          this.clickableElements = [this.element];
        } else {
          this.clickableElements = Dropzone.getElements(this.options.clickable, "clickable");
        }
      }
      this.init();
    }

    Dropzone.prototype.getAcceptedFiles = function() {
      var file, j, len, ref, results;
      ref = this.files;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        file = ref[j];
        if (file.accepted) {
          results.push(file);
        }
      }
      return results;
    };

    Dropzone.prototype.getRejectedFiles = function() {
      var file, j, len, ref, results;
      ref = this.files;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        file = ref[j];
        if (!file.accepted) {
          results.push(file);
        }
      }
      return results;
    };

    Dropzone.prototype.getFilesWithStatus = function(status) {
      var file, j, len, ref, results;
      ref = this.files;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        file = ref[j];
        if (file.status === status) {
          results.push(file);
        }
      }
      return results;
    };

    Dropzone.prototype.getQueuedFiles = function() {
      return this.getFilesWithStatus(Dropzone.QUEUED);
    };

    Dropzone.prototype.getUploadingFiles = function() {
      return this.getFilesWithStatus(Dropzone.UPLOADING);
    };

    Dropzone.prototype.getAddedFiles = function() {
      return this.getFilesWithStatus(Dropzone.ADDED);
    };

    Dropzone.prototype.getActiveFiles = function() {
      var file, j, len, ref, results;
      ref = this.files;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        file = ref[j];
        if (file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED) {
          results.push(file);
        }
      }
      return results;
    };

    Dropzone.prototype.init = function() {
      var eventName, j, len, noPropagation, ref, ref1, setupHiddenFileInput;
      if (this.element.tagName === "form") {
        this.element.setAttribute("enctype", "multipart/form-data");
      }
      if (this.element.classList.contains("dropzone") && !this.element.querySelector(".dz-message")) {
        this.element.appendChild(Dropzone.createElement("<div class=\"dz-default dz-message\"><span>" + this.options.dictDefaultMessage + "</span></div>"));
      }
      if (this.clickableElements.length) {
        setupHiddenFileInput = (function(_this) {
          return function() {
            if (_this.hiddenFileInput) {
              _this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput);
            }
            _this.hiddenFileInput = document.createElement("input");
            _this.hiddenFileInput.setAttribute("type", "file");
            if ((_this.options.maxFiles == null) || _this.options.maxFiles > 1) {
              _this.hiddenFileInput.setAttribute("multiple", "multiple");
            }
            _this.hiddenFileInput.className = "dz-hidden-input";
            if (_this.options.acceptedFiles != null) {
              _this.hiddenFileInput.setAttribute("accept", _this.options.acceptedFiles);
            }
            if (_this.options.capture != null) {
              _this.hiddenFileInput.setAttribute("capture", _this.options.capture);
            }
            _this.hiddenFileInput.style.visibility = "hidden";
            _this.hiddenFileInput.style.position = "absolute";
            _this.hiddenFileInput.style.top = "0";
            _this.hiddenFileInput.style.left = "0";
            _this.hiddenFileInput.style.height = "0";
            _this.hiddenFileInput.style.width = "0";
            document.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput);
            return _this.hiddenFileInput.addEventListener("change", function() {
              var file, files, j, len;
              files = _this.hiddenFileInput.files;
              if (files.length) {
                for (j = 0, len = files.length; j < len; j++) {
                  file = files[j];
                  _this.addFile(file);
                }
              }
              _this.emit("addedfiles", files);
              return setupHiddenFileInput();
            });
          };
        })(this);
        setupHiddenFileInput();
      }
      this.URL = (ref = window.URL) != null ? ref : window.webkitURL;
      ref1 = this.events;
      for (j = 0, len = ref1.length; j < len; j++) {
        eventName = ref1[j];
        this.on(eventName, this.options[eventName]);
      }
      this.on("uploadprogress", (function(_this) {
        return function() {
          return _this.updateTotalUploadProgress();
        };
      })(this));
      this.on("removedfile", (function(_this) {
        return function() {
          return _this.updateTotalUploadProgress();
        };
      })(this));
      this.on("canceled", (function(_this) {
        return function(file) {
          return _this.emit("complete", file);
        };
      })(this));
      this.on("complete", (function(_this) {
        return function(file) {
          if (_this.getAddedFiles().length === 0 && _this.getUploadingFiles().length === 0 && _this.getQueuedFiles().length === 0) {
            return setTimeout((function() {
              return _this.emit("queuecomplete");
            }), 0);
          }
        };
      })(this));
      noPropagation = function(e) {
        e.stopPropagation();
        if (e.preventDefault) {
          return e.preventDefault();
        } else {
          return e.returnValue = false;
        }
      };
      this.listeners = [
        {
          element: this.element,
          events: {
            "dragstart": (function(_this) {
              return function(e) {
                return _this.emit("dragstart", e);
              };
            })(this),
            "dragenter": (function(_this) {
              return function(e) {
                noPropagation(e);
                return _this.emit("dragenter", e);
              };
            })(this),
            "dragover": (function(_this) {
              return function(e) {
                var efct;
                try {
                  efct = e.dataTransfer.effectAllowed;
                } catch (undefined) {}
                e.dataTransfer.dropEffect = 'move' === efct || 'linkMove' === efct ? 'move' : 'copy';
                noPropagation(e);
                return _this.emit("dragover", e);
              };
            })(this),
            "dragleave": (function(_this) {
              return function(e) {
                return _this.emit("dragleave", e);
              };
            })(this),
            "drop": (function(_this) {
              return function(e) {
                noPropagation(e);
                return _this.drop(e);
              };
            })(this),
            "dragend": (function(_this) {
              return function(e) {
                return _this.emit("dragend", e);
              };
            })(this)
          }
        }
      ];
      this.clickableElements.forEach((function(_this) {
        return function(clickableElement) {
          return _this.listeners.push({
            element: clickableElement,
            events: {
              "click": function(evt) {
                if ((clickableElement !== _this.element) || (evt.target === _this.element || Dropzone.elementInside(evt.target, _this.element.querySelector(".dz-message")))) {
                  _this.hiddenFileInput.click();
                }
                return true;
              }
            }
          });
        };
      })(this));
      this.enable();
      return this.options.init.call(this);
    };

    Dropzone.prototype.destroy = function() {
      var ref;
      this.disable();
      this.removeAllFiles(true);
      if ((ref = this.hiddenFileInput) != null ? ref.parentNode : void 0) {
        this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);
        this.hiddenFileInput = null;
      }
      delete this.element.dropzone;
      return Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);
    };

    Dropzone.prototype.updateTotalUploadProgress = function() {
      var activeFiles, file, j, len, ref, totalBytes, totalBytesSent, totalUploadProgress;
      totalBytesSent = 0;
      totalBytes = 0;
      activeFiles = this.getActiveFiles();
      if (activeFiles.length) {
        ref = this.getActiveFiles();
        for (j = 0, len = ref.length; j < len; j++) {
          file = ref[j];
          totalBytesSent += file.upload.bytesSent;
          totalBytes += file.upload.total;
        }
        totalUploadProgress = 100 * totalBytesSent / totalBytes;
      } else {
        totalUploadProgress = 100;
      }
      return this.emit("totaluploadprogress", totalUploadProgress, totalBytes, totalBytesSent);
    };

    Dropzone.prototype._getParamName = function(n) {
      if (typeof this.options.paramName === "function") {
        return this.options.paramName(n);
      } else {
        return "" + this.options.paramName + (this.options.uploadMultiple ? "[" + n + "]" : "");
      }
    };

    Dropzone.prototype._renameFile = function(file) {
      if (typeof this.options.renameFile !== "function") {
        return file.name;
      }
      return this.options.renameFile(file);
    };

    Dropzone.prototype.getFallbackForm = function() {
      var existingFallback, fields, fieldsString, form;
      if (existingFallback = this.getExistingFallback()) {
        return existingFallback;
      }
      fieldsString = "<div class=\"dz-fallback\">";
      if (this.options.dictFallbackText) {
        fieldsString += "<p>" + this.options.dictFallbackText + "</p>";
      }
      fieldsString += "<input type=\"file\" name=\"" + (this._getParamName(0)) + "\" " + (this.options.uploadMultiple ? 'multiple="multiple"' : void 0) + " /><input type=\"submit\" value=\"Upload!\"></div>";
      fields = Dropzone.createElement(fieldsString);
      if (this.element.tagName !== "FORM") {
        form = Dropzone.createElement("<form action=\"" + this.options.url + "\" enctype=\"multipart/form-data\" method=\"" + this.options.method + "\"></form>");
        form.appendChild(fields);
      } else {
        this.element.setAttribute("enctype", "multipart/form-data");
        this.element.setAttribute("method", this.options.method);
      }
      return form != null ? form : fields;
    };

    Dropzone.prototype.getExistingFallback = function() {
      var fallback, getFallback, j, len, ref, tagName;
      getFallback = function(elements) {
        var el, j, len;
        for (j = 0, len = elements.length; j < len; j++) {
          el = elements[j];
          if (/(^| )fallback($| )/.test(el.className)) {
            return el;
          }
        }
      };
      ref = ["div", "form"];
      for (j = 0, len = ref.length; j < len; j++) {
        tagName = ref[j];
        if (fallback = getFallback(this.element.getElementsByTagName(tagName))) {
          return fallback;
        }
      }
    };

    Dropzone.prototype.setupEventListeners = function() {
      var elementListeners, event, j, len, listener, ref, results;
      ref = this.listeners;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        elementListeners = ref[j];
        results.push((function() {
          var ref1, results1;
          ref1 = elementListeners.events;
          results1 = [];
          for (event in ref1) {
            listener = ref1[event];
            results1.push(elementListeners.element.addEventListener(event, listener, false));
          }
          return results1;
        })());
      }
      return results;
    };

    Dropzone.prototype.removeEventListeners = function() {
      var elementListeners, event, j, len, listener, ref, results;
      ref = this.listeners;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        elementListeners = ref[j];
        results.push((function() {
          var ref1, results1;
          ref1 = elementListeners.events;
          results1 = [];
          for (event in ref1) {
            listener = ref1[event];
            results1.push(elementListeners.element.removeEventListener(event, listener, false));
          }
          return results1;
        })());
      }
      return results;
    };

    Dropzone.prototype.disable = function() {
      var file, j, len, ref, results;
      this.clickableElements.forEach(function(element) {
        return element.classList.remove("dz-clickable");
      });
      this.removeEventListeners();
      ref = this.files;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        file = ref[j];
        results.push(this.cancelUpload(file));
      }
      return results;
    };

    Dropzone.prototype.enable = function() {
      this.clickableElements.forEach(function(element) {
        return element.classList.add("dz-clickable");
      });
      return this.setupEventListeners();
    };

    Dropzone.prototype.filesize = function(size) {
      var cutoff, i, j, len, selectedSize, selectedUnit, unit, units;
      selectedSize = 0;
      selectedUnit = "b";
      if (size > 0) {
        units = ['tb', 'gb', 'mb', 'kb', 'b'];
        for (i = j = 0, len = units.length; j < len; i = ++j) {
          unit = units[i];
          cutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;
          if (size >= cutoff) {
            selectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);
            selectedUnit = unit;
            break;
          }
        }
        selectedSize = Math.round(10 * selectedSize) / 10;
      }
      return "<strong>" + selectedSize + "</strong> " + this.options.dictFileSizeUnits[selectedUnit];
    };

    Dropzone.prototype._updateMaxFilesReachedClass = function() {
      if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {
        if (this.getAcceptedFiles().length === this.options.maxFiles) {
          this.emit('maxfilesreached', this.files);
        }
        return this.element.classList.add("dz-max-files-reached");
      } else {
        return this.element.classList.remove("dz-max-files-reached");
      }
    };

    Dropzone.prototype.drop = function(e) {
      var files, items;
      if (!e.dataTransfer) {
        return;
      }
      this.emit("drop", e);
      files = e.dataTransfer.files;
      this.emit("addedfiles", files);
      if (files.length) {
        items = e.dataTransfer.items;
        if (items && items.length && (items[0].webkitGetAsEntry != null)) {
          this._addFilesFromItems(items);
        } else {
          this.handleFiles(files);
        }
      }
    };

    Dropzone.prototype.paste = function(e) {
      var items, ref;
      if ((e != null ? (ref = e.clipboardData) != null ? ref.items : void 0 : void 0) == null) {
        return;
      }
      this.emit("paste", e);
      items = e.clipboardData.items;
      if (items.length) {
        return this._addFilesFromItems(items);
      }
    };

    Dropzone.prototype.handleFiles = function(files) {
      var file, j, len, results;
      results = [];
      for (j = 0, len = files.length; j < len; j++) {
        file = files[j];
        results.push(this.addFile(file));
      }
      return results;
    };

    Dropzone.prototype._addFilesFromItems = function(items) {
      var entry, item, j, len, results;
      results = [];
      for (j = 0, len = items.length; j < len; j++) {
        item = items[j];
        if ((item.webkitGetAsEntry != null) && (entry = item.webkitGetAsEntry())) {
          if (entry.isFile) {
            results.push(this.addFile(item.getAsFile()));
          } else if (entry.isDirectory) {
            results.push(this._addFilesFromDirectory(entry, entry.name));
          } else {
            results.push(void 0);
          }
        } else if (item.getAsFile != null) {
          if ((item.kind == null) || item.kind === "file") {
            results.push(this.addFile(item.getAsFile()));
          } else {
            results.push(void 0);
          }
        } else {
          results.push(void 0);
        }
      }
      return results;
    };

    Dropzone.prototype._addFilesFromDirectory = function(directory, path) {
      var dirReader, errorHandler, readEntries;
      dirReader = directory.createReader();
      errorHandler = function(error) {
        return typeof console !== "undefined" && console !== null ? typeof console.log === "function" ? console.log(error) : void 0 : void 0;
      };
      readEntries = (function(_this) {
        return function() {
          return dirReader.readEntries(function(entries) {
            var entry, j, len;
            if (entries.length > 0) {
              for (j = 0, len = entries.length; j < len; j++) {
                entry = entries[j];
                if (entry.isFile) {
                  entry.file(function(file) {
                    if (_this.options.ignoreHiddenFiles && file.name.substring(0, 1) === '.') {
                      return;
                    }
                    file.fullPath = path + "/" + file.name;
                    return _this.addFile(file);
                  });
                } else if (entry.isDirectory) {
                  _this._addFilesFromDirectory(entry, path + "/" + entry.name);
                }
              }
              readEntries();
            }
            return null;
          }, errorHandler);
        };
      })(this);
      return readEntries();
    };

    Dropzone.prototype.accept = function(file, done) {
      if (file.size > this.options.maxFilesize * 1024 * 1024) {
        return done(this.options.dictFileTooBig.replace("{{filesize}}", Math.round(file.size / 1024 / 10.24) / 100).replace("{{maxFilesize}}", this.options.maxFilesize));
      } else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {
        return done(this.options.dictInvalidFileType);
      } else if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {
        done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}", this.options.maxFiles));
        return this.emit("maxfilesexceeded", file);
      } else {
        return this.options.accept.call(this, file, done);
      }
    };

    Dropzone.prototype.addFile = function(file) {
      file.upload = {
        progress: 0,
        total: file.size,
        bytesSent: 0,
        filename: this._renameFile(file)
      };
      this.files.push(file);
      file.status = Dropzone.ADDED;
      this.emit("addedfile", file);
      this._enqueueThumbnail(file);
      return this.accept(file, (function(_this) {
        return function(error) {
          if (error) {
            file.accepted = false;
            _this._errorProcessing([file], error);
          } else {
            file.accepted = true;
            if (_this.options.autoQueue) {
              _this.enqueueFile(file);
            }
          }
          return _this._updateMaxFilesReachedClass();
        };
      })(this));
    };

    Dropzone.prototype.enqueueFiles = function(files) {
      var file, j, len;
      for (j = 0, len = files.length; j < len; j++) {
        file = files[j];
        this.enqueueFile(file);
      }
      return null;
    };

    Dropzone.prototype.enqueueFile = function(file) {
      if (file.status === Dropzone.ADDED && file.accepted === true) {
        file.status = Dropzone.QUEUED;
        if (this.options.autoProcessQueue) {
          return setTimeout(((function(_this) {
            return function() {
              return _this.processQueue();
            };
          })(this)), 0);
        }
      } else {
        throw new Error("This file can't be queued because it has already been processed or was rejected.");
      }
    };

    Dropzone.prototype._thumbnailQueue = [];

    Dropzone.prototype._processingThumbnail = false;

    Dropzone.prototype._enqueueThumbnail = function(file) {
      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {
        this._thumbnailQueue.push(file);
        return setTimeout(((function(_this) {
          return function() {
            return _this._processThumbnailQueue();
          };
        })(this)), 0);
      }
    };

    Dropzone.prototype._processThumbnailQueue = function() {
      var file;
      if (this._processingThumbnail || this._thumbnailQueue.length === 0) {
        return;
      }
      this._processingThumbnail = true;
      file = this._thumbnailQueue.shift();
      return this.createThumbnail(file, this.options.thumbnailWidth, this.options.thumbnailHeight, this.options.thumbnailMethod, true, (function(_this) {
        return function(dataUrl) {
          _this.emit("thumbnail", file, dataUrl);
          _this._processingThumbnail = false;
          return _this._processThumbnailQueue();
        };
      })(this));
    };

    Dropzone.prototype.removeFile = function(file) {
      if (file.status === Dropzone.UPLOADING) {
        this.cancelUpload(file);
      }
      this.files = without(this.files, file);
      this.emit("removedfile", file);
      if (this.files.length === 0) {
        return this.emit("reset");
      }
    };

    Dropzone.prototype.removeAllFiles = function(cancelIfNecessary) {
      var file, j, len, ref;
      if (cancelIfNecessary == null) {
        cancelIfNecessary = false;
      }
      ref = this.files.slice();
      for (j = 0, len = ref.length; j < len; j++) {
        file = ref[j];
        if (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {
          this.removeFile(file);
        }
      }
      return null;
    };

    Dropzone.prototype.resizeImage = function(file, width, height, resizeMethod, callback) {
      return this.createThumbnail(file, width, height, resizeMethod, false, (function(_this) {
        return function(dataUrl, canvas) {
          var resizeMimeType, resizedDataURL;
          if (canvas === null) {
            return callback(file);
          } else {
            resizeMimeType = _this.options.resizeMimeType;
            if (resizeMimeType == null) {
              resizeMimeType = file.type;
            }
            resizedDataURL = canvas.toDataURL(resizeMimeType, _this.options.resizeQuality);
            if (resizeMimeType === 'image/jpeg' || resizeMimeType === 'image/jpg') {
              resizedDataURL = ExifRestore.restore(file.dataURL, resizedDataURL);
            }
            return callback(Dropzone.dataURItoBlob(resizedDataURL));
          }
        };
      })(this));
    };

    Dropzone.prototype.createThumbnail = function(file, width, height, resizeMethod, fixOrientation, callback) {
      var fileReader;
      fileReader = new FileReader;
      fileReader.onload = (function(_this) {
        return function() {
          file.dataURL = fileReader.result;
          if (file.type === "image/svg+xml") {
            if (callback != null) {
              callback(fileReader.result);
            }
            return;
          }
          return _this.createThumbnailFromUrl(file, width, height, resizeMethod, fixOrientation, callback);
        };
      })(this);
      return fileReader.readAsDataURL(file);
    };

    Dropzone.prototype.createThumbnailFromUrl = function(file, width, height, resizeMethod, fixOrientation, callback, crossOrigin) {
      var img;
      img = document.createElement("img");
      if (crossOrigin) {
        img.crossOrigin = crossOrigin;
      }
      img.onload = (function(_this) {
        return function() {
          var loadExif;
          loadExif = function(callback) {
            return callback(1);
          };
          if ((typeof EXIF !== "undefined" && EXIF !== null) && fixOrientation) {
            loadExif = function(callback) {
              return EXIF.getData(img, function() {
                return callback(EXIF.getTag(this, 'Orientation'));
              });
            };
          }
          return loadExif(function(orientation) {
            var canvas, ctx, ref, ref1, ref2, ref3, resizeInfo, thumbnail;
            file.width = img.width;
            file.height = img.height;
            resizeInfo = _this.options.resize.call(_this, file, width, height, resizeMethod);
            canvas = document.createElement("canvas");
            ctx = canvas.getContext("2d");
            canvas.width = resizeInfo.trgWidth;
            canvas.height = resizeInfo.trgHeight;
            if (orientation > 4) {
              canvas.width = resizeInfo.trgHeight;
              canvas.height = resizeInfo.trgWidth;
            }
            switch (orientation) {
              case 2:
                ctx.translate(canvas.width, 0);
                ctx.scale(-1, 1);
                break;
              case 3:
                ctx.translate(canvas.width, canvas.height);
                ctx.rotate(Math.PI);
                break;
              case 4:
                ctx.translate(0, canvas.height);
                ctx.scale(1, -1);
                break;
              case 5:
                ctx.rotate(0.5 * Math.PI);
                ctx.scale(1, -1);
                break;
              case 6:
                ctx.rotate(0.5 * Math.PI);
                ctx.translate(0, -canvas.height);
                break;
              case 7:
                ctx.rotate(0.5 * Math.PI);
                ctx.translate(canvas.width, -canvas.height);
                ctx.scale(-1, 1);
                break;
              case 8:
                ctx.rotate(-0.5 * Math.PI);
                ctx.translate(-canvas.width, 0);
            }
            drawImageIOSFix(ctx, img, (ref = resizeInfo.srcX) != null ? ref : 0, (ref1 = resizeInfo.srcY) != null ? ref1 : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, (ref2 = resizeInfo.trgX) != null ? ref2 : 0, (ref3 = resizeInfo.trgY) != null ? ref3 : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);
            thumbnail = canvas.toDataURL("image/png");
            if (callback != null) {
              return callback(thumbnail, canvas);
            }
          });
        };
      })(this);
      if (callback != null) {
        img.onerror = callback;
      }
      return img.src = file.dataURL;
    };

    Dropzone.prototype.processQueue = function() {
      var i, parallelUploads, processingLength, queuedFiles;
      parallelUploads = this.options.parallelUploads;
      processingLength = this.getUploadingFiles().length;
      i = processingLength;
      if (processingLength >= parallelUploads) {
        return;
      }
      queuedFiles = this.getQueuedFiles();
      if (!(queuedFiles.length > 0)) {
        return;
      }
      if (this.options.uploadMultiple) {
        return this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));
      } else {
        while (i < parallelUploads) {
          if (!queuedFiles.length) {
            return;
          }
          this.processFile(queuedFiles.shift());
          i++;
        }
      }
    };

    Dropzone.prototype.processFile = function(file) {
      return this.processFiles([file]);
    };

    Dropzone.prototype.processFiles = function(files) {
      var file, j, len;
      for (j = 0, len = files.length; j < len; j++) {
        file = files[j];
        file.processing = true;
        file.status = Dropzone.UPLOADING;
        this.emit("processing", file);
      }
      if (this.options.uploadMultiple) {
        this.emit("processingmultiple", files);
      }
      return this.uploadFiles(files);
    };

    Dropzone.prototype._getFilesWithXhr = function(xhr) {
      var file, files;
      return files = (function() {
        var j, len, ref, results;
        ref = this.files;
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          file = ref[j];
          if (file.xhr === xhr) {
            results.push(file);
          }
        }
        return results;
      }).call(this);
    };

    Dropzone.prototype.cancelUpload = function(file) {
      var groupedFile, groupedFiles, j, k, len, len1, ref;
      if (file.status === Dropzone.UPLOADING) {
        groupedFiles = this._getFilesWithXhr(file.xhr);
        for (j = 0, len = groupedFiles.length; j < len; j++) {
          groupedFile = groupedFiles[j];
          groupedFile.status = Dropzone.CANCELED;
        }
        file.xhr.abort();
        for (k = 0, len1 = groupedFiles.length; k < len1; k++) {
          groupedFile = groupedFiles[k];
          this.emit("canceled", groupedFile);
        }
        if (this.options.uploadMultiple) {
          this.emit("canceledmultiple", groupedFiles);
        }
      } else if ((ref = file.status) === Dropzone.ADDED || ref === Dropzone.QUEUED) {
        file.status = Dropzone.CANCELED;
        this.emit("canceled", file);
        if (this.options.uploadMultiple) {
          this.emit("canceledmultiple", [file]);
        }
      }
      if (this.options.autoProcessQueue) {
        return this.processQueue();
      }
    };

    resolveOption = function() {
      var args, option;
      option = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      if (typeof option === 'function') {
        return option.apply(this, args);
      }
      return option;
    };

    Dropzone.prototype.uploadFile = function(file) {
      return this.uploadFiles([file]);
    };

    Dropzone.prototype.uploadFiles = function(files) {
      var doneCounter, doneFunction, file, formData, handleError, headerName, headerValue, headers, i, input, inputName, inputType, j, k, key, l, len, len1, len2, len3, m, method, o, option, progressObj, ref, ref1, ref2, ref3, ref4, ref5, response, results, updateProgress, url, value, xhr;
      xhr = new XMLHttpRequest();
      for (j = 0, len = files.length; j < len; j++) {
        file = files[j];
        file.xhr = xhr;
      }
      method = resolveOption(this.options.method, files);
      url = resolveOption(this.options.url, files);
      xhr.open(method, url, true);
      xhr.timeout = resolveOption(this.options.timeout, files);
      xhr.withCredentials = !!this.options.withCredentials;
      response = null;
      handleError = (function(_this) {
        return function() {
          var k, len1, results;
          results = [];
          for (k = 0, len1 = files.length; k < len1; k++) {
            file = files[k];
            results.push(_this._errorProcessing(files, response || _this.options.dictResponseError.replace("{{statusCode}}", xhr.status), xhr));
          }
          return results;
        };
      })(this);
      updateProgress = (function(_this) {
        return function(e) {
          var allFilesFinished, k, l, len1, len2, len3, m, progress, results;
          if (e != null) {
            progress = 100 * e.loaded / e.total;
            for (k = 0, len1 = files.length; k < len1; k++) {
              file = files[k];
              file.upload = {
                progress: progress,
                total: e.total,
                bytesSent: e.loaded
              };
            }
          } else {
            allFilesFinished = true;
            progress = 100;
            for (l = 0, len2 = files.length; l < len2; l++) {
              file = files[l];
              if (!(file.upload.progress === 100 && file.upload.bytesSent === file.upload.total)) {
                allFilesFinished = false;
              }
              file.upload.progress = progress;
              file.upload.bytesSent = file.upload.total;
            }
            if (allFilesFinished) {
              return;
            }
          }
          results = [];
          for (m = 0, len3 = files.length; m < len3; m++) {
            file = files[m];
            results.push(_this.emit("uploadprogress", file, progress, file.upload.bytesSent));
          }
          return results;
        };
      })(this);
      xhr.onload = (function(_this) {
        return function(e) {
          var error1, ref;
          if (files[0].status === Dropzone.CANCELED) {
            return;
          }
          if (xhr.readyState !== 4) {
            return;
          }
          response = xhr.responseText;
          if (xhr.getResponseHeader("content-type") && ~xhr.getResponseHeader("content-type").indexOf("application/json")) {
            try {
              response = JSON.parse(response);
            } catch (error1) {
              e = error1;
              response = "Invalid JSON response from server.";
            }
          }
          updateProgress();
          if (!((200 <= (ref = xhr.status) && ref < 300))) {
            return handleError();
          } else {
            return _this._finished(files, response, e);
          }
        };
      })(this);
      xhr.onerror = (function(_this) {
        return function() {
          if (files[0].status === Dropzone.CANCELED) {
            return;
          }
          return handleError();
        };
      })(this);
      progressObj = (ref = xhr.upload) != null ? ref : xhr;
      progressObj.onprogress = updateProgress;
      headers = {
        "Accept": "application/json",
        "Cache-Control": "no-cache",
        "X-Requested-With": "XMLHttpRequest"
      };
      if (this.options.headers) {
        extend(headers, this.options.headers);
      }
      for (headerName in headers) {
        headerValue = headers[headerName];
        if (headerValue) {
          xhr.setRequestHeader(headerName, headerValue);
        }
      }
      formData = new FormData();
      if (this.options.params) {
        ref1 = this.options.params;
        for (key in ref1) {
          value = ref1[key];
          formData.append(key, value);
        }
      }
      for (k = 0, len1 = files.length; k < len1; k++) {
        file = files[k];
        this.emit("sending", file, xhr, formData);
      }
      if (this.options.uploadMultiple) {
        this.emit("sendingmultiple", files, xhr, formData);
      }
      if (this.element.tagName === "FORM") {
        ref2 = this.element.querySelectorAll("input, textarea, select, button");
        for (l = 0, len2 = ref2.length; l < len2; l++) {
          input = ref2[l];
          inputName = input.getAttribute("name");
          inputType = input.getAttribute("type");
          if (input.tagName === "SELECT" && input.hasAttribute("multiple")) {
            ref3 = input.options;
            for (m = 0, len3 = ref3.length; m < len3; m++) {
              option = ref3[m];
              if (option.selected) {
                formData.append(inputName, option.value);
              }
            }
          } else if (!inputType || ((ref4 = inputType.toLowerCase()) !== "checkbox" && ref4 !== "radio") || input.checked) {
            formData.append(inputName, input.value);
          }
        }
      }
      doneCounter = 0;
      results = [];
      for (i = o = 0, ref5 = files.length - 1; 0 <= ref5 ? o <= ref5 : o >= ref5; i = 0 <= ref5 ? ++o : --o) {
        doneFunction = (function(_this) {
          return function(file, paramName, fileName) {
            return function(transformedFile) {
              formData.append(paramName, transformedFile, fileName);
              if (++doneCounter === files.length) {
                return _this.submitRequest(xhr, formData, files);
              }
            };
          };
        })(this);
        results.push(this.options.transformFile.call(this, files[i], doneFunction(files[i], this._getParamName(i), files[i].upload.filename)));
      }
      return results;
    };

    Dropzone.prototype.submitRequest = function(xhr, formData, files) {
      return xhr.send(formData);
    };

    Dropzone.prototype._finished = function(files, responseText, e) {
      var file, j, len;
      for (j = 0, len = files.length; j < len; j++) {
        file = files[j];
        file.status = Dropzone.SUCCESS;
        this.emit("success", file, responseText, e);
        this.emit("complete", file);
      }
      if (this.options.uploadMultiple) {
        this.emit("successmultiple", files, responseText, e);
        this.emit("completemultiple", files);
      }
      if (this.options.autoProcessQueue) {
        return this.processQueue();
      }
    };

    Dropzone.prototype._errorProcessing = function(files, message, xhr) {
      var file, j, len;
      for (j = 0, len = files.length; j < len; j++) {
        file = files[j];
        file.status = Dropzone.ERROR;
        this.emit("error", file, message, xhr);
        this.emit("complete", file);
      }
      if (this.options.uploadMultiple) {
        this.emit("errormultiple", files, message, xhr);
        this.emit("completemultiple", files);
      }
      if (this.options.autoProcessQueue) {
        return this.processQueue();
      }
    };

    return Dropzone;

  })(Emitter);

  Dropzone.version = "5.1.0";

  Dropzone.options = {};

  Dropzone.optionsForElement = function(element) {
    if (element.getAttribute("id")) {
      return Dropzone.options[camelize(element.getAttribute("id"))];
    } else {
      return void 0;
    }
  };

  Dropzone.instances = [];

  Dropzone.forElement = function(element) {
    if (typeof element === "string") {
      element = document.querySelector(element);
    }
    if ((element != null ? element.dropzone : void 0) == null) {
      throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");
    }
    return element.dropzone;
  };

  Dropzone.autoDiscover = true;

  Dropzone.discover = function() {
    var checkElements, dropzone, dropzones, j, len, results;
    if (document.querySelectorAll) {
      dropzones = document.querySelectorAll(".dropzone");
    } else {
      dropzones = [];
      checkElements = function(elements) {
        var el, j, len, results;
        results = [];
        for (j = 0, len = elements.length; j < len; j++) {
          el = elements[j];
          if (/(^| )dropzone($| )/.test(el.className)) {
            results.push(dropzones.push(el));
          } else {
            results.push(void 0);
          }
        }
        return results;
      };
      checkElements(document.getElementsByTagName("div"));
      checkElements(document.getElementsByTagName("form"));
    }
    results = [];
    for (j = 0, len = dropzones.length; j < len; j++) {
      dropzone = dropzones[j];
      if (Dropzone.optionsForElement(dropzone) !== false) {
        results.push(new Dropzone(dropzone));
      } else {
        results.push(void 0);
      }
    }
    return results;
  };

  Dropzone.blacklistedBrowsers = [/opera.*Macintosh.*version\/12/i];

  Dropzone.isBrowserSupported = function() {
    var capableBrowser, j, len, ref, regex;
    capableBrowser = true;
    if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {
      if (!("classList" in document.createElement("a"))) {
        capableBrowser = false;
      } else {
        ref = Dropzone.blacklistedBrowsers;
        for (j = 0, len = ref.length; j < len; j++) {
          regex = ref[j];
          if (regex.test(navigator.userAgent)) {
            capableBrowser = false;
            continue;
          }
        }
      }
    } else {
      capableBrowser = false;
    }
    return capableBrowser;
  };

  Dropzone.dataURItoBlob = function(dataURI) {
    var ab, byteString, i, ia, j, mimeString, ref;
    byteString = atob(dataURI.split(',')[1]);
    mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
    ab = new ArrayBuffer(byteString.length);
    ia = new Uint8Array(ab);
    for (i = j = 0, ref = byteString.length; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
      ia[i] = byteString.charCodeAt(i);
    }
    return new Blob([ab], {
      type: mimeString
    });
  };

  without = function(list, rejectedItem) {
    var item, j, len, results;
    results = [];
    for (j = 0, len = list.length; j < len; j++) {
      item = list[j];
      if (item !== rejectedItem) {
        results.push(item);
      }
    }
    return results;
  };

  camelize = function(str) {
    return str.replace(/[\-_](\w)/g, function(match) {
      return match.charAt(1).toUpperCase();
    });
  };

  Dropzone.createElement = function(string) {
    var div;
    div = document.createElement("div");
    div.innerHTML = string;
    return div.childNodes[0];
  };

  Dropzone.elementInside = function(element, container) {
    if (element === container) {
      return true;
    }
    while (element = element.parentNode) {
      if (element === container) {
        return true;
      }
    }
    return false;
  };

  Dropzone.getElement = function(el, name) {
    var element;
    if (typeof el === "string") {
      element = document.querySelector(el);
    } else if (el.nodeType != null) {
      element = el;
    }
    if (element == null) {
      throw new Error("Invalid `" + name + "` option provided. Please provide a CSS selector or a plain HTML element.");
    }
    return element;
  };

  Dropzone.getElements = function(els, name) {
    var e, el, elements, error1, j, k, len, len1, ref;
    if (els instanceof Array) {
      elements = [];
      try {
        for (j = 0, len = els.length; j < len; j++) {
          el = els[j];
          elements.push(this.getElement(el, name));
        }
      } catch (error1) {
        e = error1;
        elements = null;
      }
    } else if (typeof els === "string") {
      elements = [];
      ref = document.querySelectorAll(els);
      for (k = 0, len1 = ref.length; k < len1; k++) {
        el = ref[k];
        elements.push(el);
      }
    } else if (els.nodeType != null) {
      elements = [els];
    }
    if (!((elements != null) && elements.length)) {
      throw new Error("Invalid `" + name + "` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");
    }
    return elements;
  };

  Dropzone.confirm = function(question, accepted, rejected) {
    if (window.confirm(question)) {
      return accepted();
    } else if (rejected != null) {
      return rejected();
    }
  };

  Dropzone.isValidFile = function(file, acceptedFiles) {
    var baseMimeType, j, len, mimeType, validType;
    if (!acceptedFiles) {
      return true;
    }
    acceptedFiles = acceptedFiles.split(",");
    mimeType = file.type;
    baseMimeType = mimeType.replace(/\/.*$/, "");
    for (j = 0, len = acceptedFiles.length; j < len; j++) {
      validType = acceptedFiles[j];
      validType = validType.trim();
      if (validType.charAt(0) === ".") {
        if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {
          return true;
        }
      } else if (/\/\*$/.test(validType)) {
        if (baseMimeType === validType.replace(/\/.*$/, "")) {
          return true;
        }
      } else {
        if (mimeType === validType) {
          return true;
        }
      }
    }
    return false;
  };

  if (typeof jQuery !== "undefined" && jQuery !== null) {
    jQuery.fn.dropzone = function(options) {
      return this.each(function() {
        return new Dropzone(this, options);
      });
    };
  }

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Dropzone;
  } else {
    window.Dropzone = Dropzone;
  }

  Dropzone.ADDED = "added";

  Dropzone.QUEUED = "queued";

  Dropzone.ACCEPTED = Dropzone.QUEUED;

  Dropzone.UPLOADING = "uploading";

  Dropzone.PROCESSING = Dropzone.UPLOADING;

  Dropzone.CANCELED = "canceled";

  Dropzone.ERROR = "error";

  Dropzone.SUCCESS = "success";


  /*
  
  Bugfix for iOS 6 and 7
  Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios
  based on the work of https://github.com/stomita/ios-imagefile-megapixel
   */

  detectVerticalSquash = function(img) {
    var alpha, canvas, ctx, data, ey, ih, iw, py, ratio, sy;
    iw = img.naturalWidth;
    ih = img.naturalHeight;
    canvas = document.createElement("canvas");
    canvas.width = 1;
    canvas.height = ih;
    ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);
    data = ctx.getImageData(1, 0, 1, ih).data;
    sy = 0;
    ey = ih;
    py = ih;
    while (py > sy) {
      alpha = data[(py - 1) * 4 + 3];
      if (alpha === 0) {
        ey = py;
      } else {
        sy = py;
      }
      py = (ey + sy) >> 1;
    }
    ratio = py / ih;
    if (ratio === 0) {
      return 1;
    } else {
      return ratio;
    }
  };

  drawImageIOSFix = function(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {
    var vertSquashRatio;
    vertSquashRatio = detectVerticalSquash(img);
    return ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);
  };

  ExifRestore = (function() {
    function ExifRestore() {}

    ExifRestore.KEY_STR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';

    ExifRestore.encode64 = function(input) {
      var chr1, chr2, chr3, enc1, enc2, enc3, enc4, i, output;
      output = '';
      chr1 = void 0;
      chr2 = void 0;
      chr3 = '';
      enc1 = void 0;
      enc2 = void 0;
      enc3 = void 0;
      enc4 = '';
      i = 0;
      while (true) {
        chr1 = input[i++];
        chr2 = input[i++];
        chr3 = input[i++];
        enc1 = chr1 >> 2;
        enc2 = (chr1 & 3) << 4 | chr2 >> 4;
        enc3 = (chr2 & 15) << 2 | chr3 >> 6;
        enc4 = chr3 & 63;
        if (isNaN(chr2)) {
          enc3 = enc4 = 64;
        } else if (isNaN(chr3)) {
          enc4 = 64;
        }
        output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);
        chr1 = chr2 = chr3 = '';
        enc1 = enc2 = enc3 = enc4 = '';
        if (!(i < input.length)) {
          break;
        }
      }
      return output;
    };

    ExifRestore.restore = function(origFileBase64, resizedFileBase64) {
      var image, rawImage, segments;
      if (!origFileBase64.match('data:image/jpeg;base64,')) {
        return resizedFileBase64;
      }
      rawImage = this.decode64(origFileBase64.replace('data:image/jpeg;base64,', ''));
      segments = this.slice2Segments(rawImage);
      image = this.exifManipulation(resizedFileBase64, segments);
      return 'data:image/jpeg;base64,' + this.encode64(image);
    };

    ExifRestore.exifManipulation = function(resizedFileBase64, segments) {
      var aBuffer, exifArray, newImageArray;
      exifArray = this.getExifArray(segments);
      newImageArray = this.insertExif(resizedFileBase64, exifArray);
      aBuffer = new Uint8Array(newImageArray);
      return aBuffer;
    };

    ExifRestore.getExifArray = function(segments) {
      var seg, x;
      seg = void 0;
      x = 0;
      while (x < segments.length) {
        seg = segments[x];
        if (seg[0] === 255 & seg[1] === 225) {
          return seg;
        }
        x++;
      }
      return [];
    };

    ExifRestore.insertExif = function(resizedFileBase64, exifArray) {
      var array, ato, buf, imageData, mae, separatePoint;
      imageData = resizedFileBase64.replace('data:image/jpeg;base64,', '');
      buf = this.decode64(imageData);
      separatePoint = buf.indexOf(255, 3);
      mae = buf.slice(0, separatePoint);
      ato = buf.slice(separatePoint);
      array = mae;
      array = array.concat(exifArray);
      array = array.concat(ato);
      return array;
    };

    ExifRestore.slice2Segments = function(rawImageArray) {
      var endPoint, head, length, seg, segments;
      head = 0;
      segments = [];
      while (true) {
        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 218) {
          break;
        }
        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 216) {
          head += 2;
        } else {
          length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3];
          endPoint = head + length + 2;
          seg = rawImageArray.slice(head, endPoint);
          segments.push(seg);
          head = endPoint;
        }
        if (head > rawImageArray.length) {
          break;
        }
      }
      return segments;
    };

    ExifRestore.decode64 = function(input) {
      var base64test, buf, chr1, chr2, chr3, enc1, enc2, enc3, enc4, i, output;
      output = '';
      chr1 = void 0;
      chr2 = void 0;
      chr3 = '';
      enc1 = void 0;
      enc2 = void 0;
      enc3 = void 0;
      enc4 = '';
      i = 0;
      buf = [];
      base64test = /[^A-Za-z0-9\+\/\=]/g;
      if (base64test.exec(input)) {
        console.warning('There were invalid base64 characters in the input text.\n' + 'Valid base64 characters are A-Z, a-z, 0-9, \'+\', \'/\',and \'=\'\n' + 'Expect errors in decoding.');
      }
      input = input.replace(/[^A-Za-z0-9\+\/\=]/g, '');
      while (true) {
        enc1 = this.KEY_STR.indexOf(input.charAt(i++));
        enc2 = this.KEY_STR.indexOf(input.charAt(i++));
        enc3 = this.KEY_STR.indexOf(input.charAt(i++));
        enc4 = this.KEY_STR.indexOf(input.charAt(i++));
        chr1 = enc1 << 2 | enc2 >> 4;
        chr2 = (enc2 & 15) << 4 | enc3 >> 2;
        chr3 = (enc3 & 3) << 6 | enc4;
        buf.push(chr1);
        if (enc3 !== 64) {
          buf.push(chr2);
        }
        if (enc4 !== 64) {
          buf.push(chr3);
        }
        chr1 = chr2 = chr3 = '';
        enc1 = enc2 = enc3 = enc4 = '';
        if (!(i < input.length)) {
          break;
        }
      }
      return buf;
    };

    return ExifRestore;

  })();


  /*
   * contentloaded.js
   *
   * Author: Diego Perini (diego.perini at gmail.com)
   * Summary: cross-browser wrapper for DOMContentLoaded
   * Updated: 20101020
   * License: MIT
   * Version: 1.2
   *
   * URL:
   * http://javascript.nwbox.com/ContentLoaded/
   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
   */

  contentLoaded = function(win, fn) {
    var add, doc, done, init, poll, pre, rem, root, top;
    done = false;
    top = true;
    doc = win.document;
    root = doc.documentElement;
    add = (doc.addEventListener ? "addEventListener" : "attachEvent");
    rem = (doc.addEventListener ? "removeEventListener" : "detachEvent");
    pre = (doc.addEventListener ? "" : "on");
    init = function(e) {
      if (e.type === "readystatechange" && doc.readyState !== "complete") {
        return;
      }
      (e.type === "load" ? win : doc)[rem](pre + e.type, init, false);
      if (!done && (done = true)) {
        return fn.call(win, e.type || e);
      }
    };
    poll = function() {
      var e, error1;
      try {
        root.doScroll("left");
      } catch (error1) {
        e = error1;
        setTimeout(poll, 50);
        return;
      }
      return init("poll");
    };
    if (doc.readyState !== "complete") {
      if (doc.createEventObject && root.doScroll) {
        try {
          top = !win.frameElement;
        } catch (undefined) {}
        if (top) {
          poll();
        }
      }
      doc[add](pre + "DOMContentLoaded", init, false);
      doc[add](pre + "readystatechange", init, false);
      return win[add](pre + "load", init, false);
    }
  };

  Dropzone._autoDiscoverFunction = function() {
    if (Dropzone.autoDiscover) {
      return Dropzone.discover();
    }
  };

  contentLoaded(window, Dropzone._autoDiscoverFunction);

}).call(this);
;(function () {
    'use strict';
    angular.module('app')
        .service('HttpService', HttpService);

    HttpService.$inject = ['$http'];

    function HttpService($http) {
        var vm = this;

        vm.callGetService = function (url, onSuccess, onError) {
            $http(
                {
                    method: 'GET',
                    url: url,
                    headers: {
                        'Content-Type': 'application/json;charset=UTF-8',
                        'Accept': '*'
                    }
                }
            ).then(function (response) {
                    onSuccess(response.data);
                })
                .catch(function (rejectResponse) {
                        onError(rejectResponse.data);
                });
        };

        vm.callPostService = function (url, data, onSuccess, onError) {
            $http(
                {
                    method: 'POST',
                    url: url,
                    headers: {
                        'Content-Type': 'application/json;charset=UTF-8',
                        'Accept': '*'
                    },
                    data: data
                }
            ).then(function (response) {
                onSuccess(response.data);
            })
                .catch(function (rejectResponse) {
                    onError(rejectResponse.data);
                });
        };

        vm.callPutService = function (url, data, onSuccess, onError) {
            $http(
                {
                    method: 'PUT',
                    url: url,
                    data: data
                }
            ).then(function (response) {
                onSuccess(response.data);
            })
                .catch(function (rejectResponse) {
                    onError(rejectResponse.data);
                });
        };
        
        vm.callPostServiceWithSessionHeader = function (url, data, onSuccess, onError) {
            var sessionKey = '';
            $http(
                {
                    method: 'POST',
                    url: url,
                    headers: {
                        'Content-Type': 'application/json;charset=UTF-8',
                        'Accept': '*',
                        'session-key': sessionKey
                    },
                    data: data
                }
            ).then(function (response) {
                    onSuccess(response.data);
                })
                .catch(function (rejectResponse) {
                    onError(rejectResponse.data);
                });
        };

        vm.callDownloadServiceWithSessionHeader = function(url, data, onSuccess, onError) {
            var sessionKey = '';
            $http(
                {
                    method: 'POST',
                    url: url,
                    headers: {
                        'Content-Type': 'application/json;charset=UTF-8',
                        'Accept': '*',
                        'session-key': sessionKey
                    },
                    data: data,
                    responseType : 'arraybuffer'
                }
            ).then(function (response) {
                    onSuccess(response.data);
                })
                .catch(function (rejectResponse) {
                    onError(rejectResponse.data);
                });
        };

        vm.callGetServiceWithSessionHeader = function (url, data, onSuccess, onError) {
            var sessionKey = '';
            $http(
                {
                    method: 'GET',
                    url: url,
                    headers: {
                        'Content-Type': 'application/json;charset=UTF-8',
                        'Accept': '*',
                        'session-key': sessionKey
                    },
                    data: data
                }
            ).then(function (response) {
                    onSuccess(response.data);
                })
                .catch(function (rejectResponse) {
                    onError(rejectResponse.data);
                });
        }
    }
})();
;(function () {
    'use strict';
    angular.module('app').service('Cookies', Cookies);

    Cookies.$inject = ['$cookies'];

    function Cookies($cookies){
        var vm = this;

        vm.set = function(key, value){
            $cookies.put(key, value);
        };
    }
})();
;(function () {
    'use strict';
    angular.module('app').service('BindingService', binding);

    function binding() {
        var data = {};
        function set(data) {
            this.data = data;
        }
        function get() {
            return this.data;
        }

        return {
            set: set,
            get: get
        }
    }
})();
;(function () {
    'use strict';
    angular.module('app').service('LoginService', LoginService);
    LoginService.$inject = ['HttpService', 'AppConfig'];
    function LoginService(HttpService, AppConfig) {

        this.login = function(data, onSuccess, onError) {
            var serviceUrl = "";
            HttpService.callGetService(serviceUrl, onSuccess, onError);
        };
    }
})();
;/**
 * Created by anhvu on 14-Jun-17.
 */
(function () {
    'use strict'
    angular.module("app").service("ProductService", ProductService);
    ProductService.$inject = ["$filter", "HttpService","AppConfig"];
    function ProductService($filter, HttpService, AppConfig){

        this.search = function(data, keyWord){
            var result = $filter("filter")(data, keyWord);
            return result;
        };

        this.order = function(data, property){
            var result = $filter("orderBy")(data, property);
            return result;
        };

        this.listProduct = function(onSuccess, onError){
            var url = AppConfig.productURI.list;
            HttpService.callGetService(url, onSuccess, onError);
        }

        this.delete = function(lstProductId, onSuccess, onError){
            var url = AppConfig.productURI.deleteList;
            HttpService.callPutService(url, lstProductId, onSuccess, onError);
        }

    }
})();
;/**
 * Created by vietdd on 28/06/2017.
 */
(function(){
    'use strict'
    angular.module("app").service("ProductDetailService", ProductDetailService);
    ProductDetailService.$inject = ["HttpService","AppConfig", "$filter"];
    function ProductDetailService(HttpService, AppConfig, $filter){

        this.getProductById = function(id, onSuccess, onError){
            var url = AppConfig.productURI.product + id;
            HttpService.callGetService(url, onSuccess, onError);
        }

        this.saveInfo = function(product, onSuccess, onError){
            var url = AppConfig.productURI.update;
            HttpService.callPutService(url, product, onSuccess, onError);
        }

        this.delete = function(id, onSuccess, onError){
            var url = AppConfig.productURI.delete;
            HttpService.callPutService(url, id, onSuccess, onError);
        }

        this.create = function(product, onSuccess, onError){
            var  url = AppConfig.productURI.create;
            HttpService.callPostService(url, product, onSuccess, onError);
        }

        this.search = function(data, keyWord){
            var result = $filter("filter")(data, {'ten': keyWord});
            return result;
        };
    }
})();;/**
 * Created by vietdd on 16/06/2017.
 */
(function () {
    'use strict'
    angular.module("app").service("StoreService", StoreService);
    StoreService.$inject = ["$filter", "HttpService","AppConfig"];
    function StoreService($filter, HttpService, AppConfig){
        this.listMaterial = function(onSuccess, onError){
            var url = AppConfig.materialURI.list;
            HttpService.callGetService(url, onSuccess, onError);
        }

        this.update = function(material, onSuccess, onError){
            var url = AppConfig.materialURI.update;
            HttpService.callPostService(url, material, onSuccess, onError);
        }

        this.createList = function(lstMaterial, onSuccess, onError){
            var url = AppConfig.materialURI.createList;
            HttpService.callPostService(url, lstMaterial, onSuccess, onError);
        }

        this.deleteList = function(lstId, onSuccess, onError){
            var url = AppConfig.materialURI.deleteList;
            HttpService.callPostService(url, lstId, onSuccess, onError);
        }

        this.order = function(data, property){
            var result = $filter("orderBy")(data, property);
            return result;
        };
    }
})();;/**
 * Created by anhvu on 14-Jun-17.
 */
(function () {
    'use strict'
    angular.module("app").service("SalesService", SalesService);
    SalesService.$inject = ["$filter", "HttpService","AppConfig"];
    function SalesService($filter, HttpService, AppConfig){

        this.search = function(data, keyWord){
            var result = $filter("filter")(data, keyWord);
            return result;
        };

        this.order = function(data, property){
            var result = $filter("orderBy")(data, property);
            return result;
        };

        this.listOrder = function(onSuccess, onError){
            var url = AppConfig.orderURI.list;
            HttpService.callGetService(url, onSuccess, onError);
        }

        this.delete = function(lstProductId, onSuccess, onError){
            var url = AppConfig.productURI.deleteList;
            HttpService.callPutService(url, lstProductId, onSuccess, onError);
        }
    }
})();
;/**
 * Created by vietdd on 22/07/2017.
 */
function OrderDetailService(HttpService, AppConfig){

    /*get info*/
    this.getInfo = function(id, onSuccess, onError){
        var url = AppConfig.orderURI.order + id;
        HttpService.callGetService(url, onSuccess, onError);
    }

}
angular.module("app").service("OrderDetailService", ["HttpService", "AppConfig", OrderDetailService]);
;/**
 * Created by vietdd on 29/06/2017.
 */
(function () {
    'use strict';
    angular.module("app").service("CategoryService", CategoryService);
    CategoryService.$inject = ["$filter", "HttpService", "AppConfig"];

    function CategoryService($filter, HttpService, AppConfig){
        this.getListCategory = function (onSuccess, onError) {
            var url = AppConfig.categoryURI.list;
            HttpService.callGetService(url, onSuccess, onError);
        };

        this.order = function(data, property){
            return $filter("orderBy")(data, property);
        };

        this.delete = function(lstProductId, onSuccess, onError){
            var url = AppConfig.productURI.deleteList;
            HttpService.callPutService(url, lstProductId, onSuccess, onError);
        };
    }
})();;/**
 * Created by vietdd on 22/07/2017.
 */
function formatPrice() {
    return function(input, symbol){
        if(isNaN(input)){
            return input;
        } else {
            var value = input.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
            var symbol = symbol || ' VND';
            return value + symbol;
        }
    }
}

angular.module('app').filter('customCurrency', [formatPrice]);;/**
 * Created by vietdd on 22/07/2017.
 */
function sumTotalOrder() {
    return function(data, key) {
        if (angular.isUndefined(data) || angular.isUndefined(key))
            return 0;
        var sum = 0;

        angular.forEach(data, function (v, k) {
            sum = sum + parseInt(v[key]);
        });
        return sum;
    }
}

angular.module('app').filter('SumTotalOrder', [sumTotalOrder]);;/* js/fileAppDirectives */

function dropzone($http) {

    return function(scope, element, attrs) {

        var config = {
            url: 'http://localhost/Frontend/',
            maxFilesize: 100,
            paramName: "uploadfile",
            maxThumbnailFilesize: 10,
            parallelUploads: 1,
            autoProcessQueue: false
        };

        var eventHandlers = {
            'addedfile': function(file) {
                console.log(file);
                scope.file = file;
                if (this.files[1]!=null) {
                    this.removeFile(this.files[0]);
                }
                scope.$apply(function() {
                    scope.fileAdded = true;
                });
            },

            'success': function (file, response){
                var fd = new FormData();
                fd.append('file', file);

                $http.post("http://localhost/Frontend/", fd, {
                    transformRequest: angular.identity,
                    headers: {'Content-Type': undefined}
                }).success(function(){
                        console.log("ok");
                }).error(function(){

                });
            }
        };

        dropzone = new Dropzone(element[0], config);

        angular.forEach(eventHandlers, function(handler, event) {
            dropzone.on(event, handler);
        });

        scope.processDropzone = function() {
            dropzone.processQueue();
        };

        scope.resetDropzone = function() {
            dropzone.removeAllFiles();
        }
    }
}

angular.module('app').directive('dropzone', ['$http',dropzone]);
;/**
 * Created by vietdd on 03/07/2017.
 */

function formatPrice($filter) {

    return {
        require: '?ngModel',
        link: function (scope, elem, attrs, ctrl) {
            if (!ctrl) return;

            ctrl.$formatters.unshift(function (a) {
                return $filter(attrs.format)(ctrl.$modelValue, "VND ")
            });

            elem.bind('blur', function(event) {
                var plainNumber = elem.val().replace(/[^\d|\-+|\.+]/g, '');
                elem.val($filter(attrs.format)(plainNumber, "VND "));
            });
        }
    };
}

angular.module('app').directive('format', ['$filter',formatPrice]);

